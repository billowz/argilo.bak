!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("argilo",e):t.argilo=e()}(this,function(){function t(t,e){return 1==arguments.length?ue[t]:ue[t]=e}function e(t,e){return ue.eq(t,e)}function n(t,e){return ue.hasOwn(t,e)}function i(){}function r(t){return void 0!==t}function o(t){return null===t}function s(t){return void 0===t||null===t}function c(t){return he.call(t)==pe}function a(t){return he.call(t)==ve}function u(t){return he.call(t)==ge}function h(t){return he.call(t)==be}function l(t){return he.call(t)==ye}function f(t){return he.call(t)==fe}function d(t){var e=he.call(t);switch(e){case le:case fe:case be:case xe:return!0}if(t){var i=t.length;return a(i)&&(0===i||i>0&&n(t,i-1))}return!1}function p(t){return he.call(t)==de}function v(t){return he.call(t)==me}function g(t){if(s(t))return!0;var e=he.call(t);switch(e){case pe:case ve:case be:case de:return!0}return!1}function b(t,e,i,r){var o=void 0,s=void 0,c=0;i=i||t;for(o in t)if((s=n(t,o))||r===!1){if(e.call(i,t[o],o,t,s)===!1)return!1;c++}return c}function y(t,e,n){var i=0,r=t.length;for(n=n||t;i<r;i++)if(e.call(n,t[i],i,t,!0)===!1)return!1;return i}function m(t,e,n,i){return d(t)?y(t,e,n):s(t)?0:b(t,e,n,i)}function x(t,e,n,i){var r=d(t),o=r?[]:{},s=r?y:b;return s(t,function(t,n){o[n]=e.apply(this,arguments)},n,i),o}function w(t,e,n,i){var r=d(t),o=r?[]:{},s=r?y:b;return s(t,function(t,n){e.apply(this,arguments)&&(r?o.push(t):o[n]=t)}),o}function E(t,e,n,i,r){var o=n;return m(t,function(t,n,i,r){o=e.call(this,o,t,n,i,r)},i,r),o}function C(t,n){for(var i=0,r=t.length;i<r;i++)if(e(t[i],n))return i;return-1}function P(t,n){for(var i=t.length;i-- >0;)if(e(t[i],n))return i;return-1}function j(t,i,r){var o=void 0;for(o in t)if((r===!1||n(t,o))&&e(t[o],i))return o}function S(t,e,n){return d(t)?C(t,e):j(t,e,n)}function k(t,e,n){return d(t)?P(t,e):j(t,e,n)}function T(t,e,n,i,r){var o={};return m(t,function(t,i){o[e?e.apply(this,arguments):i]=n?n.apply(this,arguments):t},i,r),o}function O(t,e,n,i){var r={};return m(t,function(t,n){r[t]=e?e.apply(this,arguments):n},n,i),r}function A(t,e,n,i){var r=[];return m(t,function(t,n){e&&!e.apply(this,arguments)||r.push(n)},n,i),r}function $(t,e,n,i){var r=[];return m(t,function(t,n){e&&!e.apply(this,arguments)||r.push(t)},n,i),r}function D(t,e,i){return n(t,e)?t[e]:i}function N(t){for(var e=void 0,i=void 0,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(i in e)n(e,i)&&!n(t,i)&&(t[i]=e[i])}return t}function I(t,e){var n=void 0,i=we.call(t);return i==fe?t:i!=be?[]:(n=_e[t])?n:(n=e!==!1?_e[t]=[]:[],t.replace(Ee,function(t,e,i,r){n.push(i?r.replace(Ce,"$1"):e||t)}),n)}function L(t,e,i,r,o){for(var c=0,a=I(e,o),u=a.length-1,h=void 0;c<u&&!s(t);c++){if(h=a[c],r&&!n(t,h))return i;t=t[h]}return h=a[c],c!=u||s(t)||r&&!n(t,h)?i:t[h]}function H(t,e,i,r){for(var o=0,c=I(e,r),a=c.length-1,u=void 0;o<a&&!s(t);o++){if(u=c[o],i&&!n(t,u))return!1;t=t[u]}return u=c[o],o==a&&!s(t)&&(i?n(t,u):u in t)}function B(t,e,n){for(var i=0,r=I(e,!0),o=r.length-1,c=r[0],a=t,u=void 0;i++<o;)u=a[c],a=s(u)?a[c]={}:u,c=r[i];return a[c]=n,t}function q(t){return t.toUpperCase()}function M(t){return t.replace(Oe,q)}function F(t){return t.replace(Ae,"")}function V(t){return t.replace($e,"")}function z(t){return t.replace(De,"")}function R(t){for(var e=void 0,n=0;n<4;n++)if(e=Le[n],e.reg.test(t))return t.replace(e.reg,e.rep);return t}function W(t){for(var e=void 0,n=0;n<4;n++)if(e=He[n],e.reg.test(t))return t.replace(e.reg,e.rep);return t}function X(t){var e=(t+"").split(".");return e[0]=e[0].replace(Ne,"$1,"),e.join(".")}function G(t,e,n,i){var r=t.length,o=r>=e?"":Array(1+e-r>>>0).join(n);return i?t+o:o+t}function Y(t,e){function n(t){return t=t?"*"==t?+e[r++]:"$"==t?+e[r]:"$"==t.charAt(t.length-1)?+e[t.slice(0,-1)-1]:+t:0,isFinite(t)?t<0?void 0:t:void 0}function i(t){return t&&"*"!=t?"$"==t?e[r]:e[t.slice(0,-1)-1]:e[r++]}var r=0;return t=t.replace(Ie,function(t,e,r,o,c,a){if("%"===a)return"%";var u=i(e);o=n(o),c=c&&n(c.slice(1)),c||0===c||(c="fFeE".indexOf(a)==-1&&"d"==a?0:void 0);var h=!1,l="",f=!1,d=!1,p=!1,v=void 0,g=void 0,b=void 0,y=void 0,m=void 0;for(y=0,m=r&&r.length;y<m;y++)switch(b=r.charAt(y)){case" ":case"+":l=b;break;case"-":h=!0;break;case"0":f=!0;break;case"#":d=!0;break;case",":p=!0}switch(a){case"c":return String.fromCharCode(+u);case"s":return s(u)&&!isNaN(u)?"":(u+="",c&&u.length>c&&(u=u.slice(0,c)),u.length<o&&(u=G(u,o,f?"0":" ",h)),u);case"d":return u=parseInt(u),isNaN(u)?"":(u<0?(v="-",u=-u):v=l,u+="",u.length<o&&(u=G(u,o,"0",!1)),p&&(u=u.replace(Ne,"$1,")),v+u);case"e":case"E":case"f":case"g":case"G":case"p":case"P":var x=+u;if(isNaN(x))return"";switch(x<0?(v="-",x=-x):v=l,a.toLowerCase()){case"f":x=void 0===c?x+"":x.toFixed(c);break;case"e":x=x.toExponential(c);break;case"g":x=void 0===c?x+"":x.toPrecision(c);break;case"p":if(void 0!==c){var w=String(u).replace(/[eE].*|[^\d]/g,"");w=(x?w.replace(/^0+/,""):w).length,c=Math.min(c,w),x=x[!c||c<=w?"toPrecision":"toExponential"](c)}else x+=""}if(x.length<o&&(x=G(x,o,"0",!1)),p){var _=x.split(".");_[0]=_[0].replace(Ne,"$1,"),x=_.join(".")}return u=v+x,"EGP".indexOf(a)!=-1?u.toUpperCase():u;case"b":g=2;break;case"o":g=8;break;case"u":g=10;break;case"x":case"X":g=16;break;case"n":return"";default:return t}var E=u>>>0;return v=d&&10!=g&&E&&["0b","0","0x"][g>>3]||"",E=E.toString(g),E.length<o&&(E=G(E,o,"0",!1)),u=v+E,"X"==a?u.toUpperCase():u}),{format:t,count:r}}function Z(t){return Y(t,Te.call(arguments,1)).format}function U(t,e){if(!p(t))return t instanceof e;for(var n=t;(n=Pe(n))&&n!==Object;)if(n===e)return!0;return e===Object}function K(){}function J(t){var e=function(){this.constructor.apply(this,arguments)},n=t.extend,i=void 0,r=void 0;return Se(e,K),p(n)&&n!==Object||(n=K),i=n.prototype,r=ke(i),e.superclass=i,e.prototype=r,je(e,n),delete t.extend,e.extend(t)}function Q(t){var e=arguments.slice();return e[0]=t.prototype,N.apply(null,e),t}function tt(t){return function(){throw new Error("execute abstract method["+t+"]")}}function et(t){if(!(t instanceof ze))throw new Error("Invalid Configuration: "+t);return t}function nt(t){return nt.proxy(t)}function it(t,e,n,i){if(!hn)throw new Error("Can not register Watcher in runtime");hn.push({name:t,priority:e,validator:n,builder:i}),hn.sort(function(t,e){return t.priority-e.priority}),un.info("register observi Watcher[%s], priority = %d",t,e)}function rt(){if(hn){en.nextStatus();var t=en.get();if(m(hn,function(e){var n=e,i=n.validator,r=n.builder,o=n.name,s=n.priority;if(!p(i)||i(t))try{if(e=r(t),p(e)&&U(e,an))return ln=e,un.info("apply observi Watcher[%s], priority = %d",o,s),!1;un.error("invalid observi Watcher[%s], priority = %d",o,s)}catch(t){un.error("apply observi Watcher[%s] failed",t)}}),!ln)throw new Error("Init observi Watcher Failed");return hn=void 0,ln}}function ot(t){var e=ln||rt();return new e(t)}function st(){var t=void 0;for(flushing=!0;t=fn.shift();)t.notify();dn=!1}function ct(t){fn.push(t),dn||(dn=!0,qe(st))}function at(t){return pn.call(t,gn)?t[gn]:t[gn]=ot(t)}function ut(t,e,n,i,r){return t(e,nt.isEnable()?n&&function(t,e,i,r){return n.call(this,nt.proxy(t),e,i,r)}:n,i,r)}function ht(t,e){var n=kn.bindObservis,i=I(e),r=void 0,o=void 0;if(!i.length)throw new Error("Invalid Observi Expression: "+e);return t=nt.obj(t),r=Tn.call(t,n)?t[n]:t[n]={},o=i.join(On),r[o]||(r[o]=new bn(t,e,i))}function lt(t,e){var n=kn.bindObservis,i=I(e),r=void 0;if(!i.length)throw new Error("Invalid Observi Expression: "+e);return r=Tn.call(t,n)?t[n]:void 0,r&&r[i.join(On)]}function ft(t,e,n){if(!p(n))throw new Error("Invalid Observi Callback");var i=ht(nt.obj(t),e);return i.on(n),i.watcher.proxy}function dt(t,e,n){if(!p(n))throw new Error("Invalid Observi Callback");var i=lt(nt.obj(t),e);return i?(i.un(n),i.watcher.proxy):t}function pt(t,e,n){var i=lt(nt.obj(t),e);return i&&i.isListened(n)}function vt(t,e){return nt.eq(t,e)}function gt(t){return nt.obj(t)}function bt(t,e,n,i){return ut(m,t,e,n,i)}function yt(t,e,n,i){return ut(x,t,e,n,i)}function mt(t,e,n,i){return ut(w,t,e,n,i)}function xt(t,e,n,i,r){return E(t,e&&nt.isEnable()?function(t,n,i,r,o){return e.call(this,t,nt.proxy(n),i,r,o)}:e,n,i,r)}function wt(t,e,n,i){return A(t,e&&nt.isEnable()?function(t,n,i,r){return e.call(this,nt.proxy(t),n,i,r)}:e,n,i)}function _t(t,e,n,i){return $(t,e&&nt.isEnable()?function(t,n,i,r){return e.call(this,nt.proxy(t),n,i,r)}:e,n,i)}function Et(t){return d(t)?t[0]:t}function Ct(t){return d(t)?t[t.length-1]:t}function Pt(t,e){d(t)?m(t,e):e(t)}function jt(t,e,n,i){return n?(Bn.prop(t,e,i),Bn):Bn.prop(t,e)}function St(t){return!t||t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})}function kt(t,e,n){if(Fn[t])return Fn[t];e=e||Xn.style;for(var i=0,r=Rn.length;i<r;i++)if(n=St(Rn[i]+t),n in e)return Fn[t]=n;return null}function Tt(t){for(var e=t.offsetParent;e&&"static"===Gn(e,"position");)e=e.offsetParent;return e||Xn}function Ot(t){var e={left:0,top:0};if(!t||!t.tagName||!t.ownerDocument)return e;var n=t.ownerDocument,i=n.body,r=n.documentElement,o=n.defaultView||n.parentWindow;if(!Bn.inDoc(t,r))return e;t.getBoundingClientRect&&(e=t.getBoundingClientRect());var s=r.clientTop||i.clientTop,c=r.clientLeft||i.clientLeft,a=Math.max(o.pageYOffset||0,r.scrollTop,i.scrollTop),u=Math.max(o.pageXOffset||0,r.scrollLeft,i.scrollLeft);return{top:e.top+a-s,left:e.left+u-c}}function At(t){return t.window&&t.document?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}function $t(t){return s(t)||NaN===t?"":h(t)?t:t+""}function Dt(t,e,n,i){if(!p(n))throw TypeError("Invalid Event Handler");var r=t[oi],o=void 0,s=!1;if(r||(t[oi]=r={}),o=r[e]){if(o.contains(n))return!1}else r[e]=o=new Ve,s=!0;return o.push({handler:n,once:i}),s}function Nt(t,e,n){var i=t[oi],r=i&&i[e];return!(!r||r.empty())&&(r.remove(n),r.empty())}function It(t,e){var n=t[oi];return n&&n[e]}function Lt(t,e,n){var i=t[oi],r=i&&i[e];return!!r&&(n?r.contains(n):!r.empty())}function Ht(t,e,n){var i=li[e];i&&i.bind&&i.bind(t,e,n)===!1||si(t,i?i.type||e:e,zt,!!hi[e])}function Bt(t,e,n){var i=li[e];i&&i.unbind&&i.unbind(t,e,n)===!1||ci(t,i?i.type||e:e,zt)}function qt(t,e){di[t]?di[t]++:(Ht(Un,t,e),di[t]=1)}function Mt(t,e){di[t]&&(di[t]--,di[t]||Bt(Un,t,e))}function Ft(t,e,n){var i=It(t,e.type);if(i){e.currentTarget=t,e.isImmediatePropagationStopped=!1,i.each(function(i){if(n){var r=new Date;r-pi>16&&(i.handler.call(t,e),pi=r)}else i.handler.call(t,e);return i.once&&Bn.off(t,e.type,i.handler),!e.isImmediatePropagationStopped})}}function Vt(t,e,n){if(t.disabled!==!0||"click"!==e){var i=/move|scroll/.test(e);if(ui[e])for(;t&&t.getAttribute&&!n.cancelBubble;)Ft(t,n,i),t=t.parentNode;else Ft(t,n,i)}}function zt(t){t=new ri(t);var e=t.type,n=t.target;if(fi[e]){e=fi[e];var i=li[e];if(i&&i.fix&&i.fix(n,t)===!1)return;t.type=e,Vt(n,e,t)}else Vt(n,e,t)}function Rt(t){for(gi=!0;t=vi.shift();)t()}function Wt(t){var e=t.cloneNode(!1);return 1==t.nodeType&&m(t.childNodes,function(t){e.appendChild(Wt(t))}),e}function Xt(t){return d(t)?x(t,Wt):Wt(t)}function Gt(t,e){var n=zi.length;return zi[n]=e?t.replace($i,"\\n"):t,'"'+n+'"'}function Yt(t,e){return zi[e]}function Zt(){return"this"}function Ut(t,e){Ri={},Xi=e||Zt,Wi=t.__MAP__,Wi||(Wi=t.__MAP__=O(t,function(){return!0}))}function Kt(){Ri=void 0,Wi=void 0,Xi=void 0,zi.length=0}function Jt(t,e,n){var i=t.charAt(0),r=t.slice(1),o=r.replace(Fi,""),s=o.match(Li)[0];if(o==r&&(Oi[s]||Wi[s]||Vi[s]))return t;var c=e+t.length,a=n.charAt(c++),u=!1,h=!0;switch(a){case"(":u=!Mi.test(o),h=!1;break;case"=":u="="!=n.charAt(c);break;case"/":case"*":case"+":case"-":case"%":case"&":case"&":u="="==n.charAt(c);break;case">":case"<":u=n.charAt(c)==a&&"="==n.charAt(c+1)}return!u&&h&&(Ri[o]=!0),""+i+Xi(o,u)+"."+o}function Qt(t,e){e=e.slice(),e.push("return "+t+";");try{return Function.apply(Function,e)}catch(e){throw Error("Invalid expression. Generated function body: "+t)}}function te(t){return(" "+t).replace(Ii,Jt).replace(Ni,Yt)}function ee(t,e){return x(t,function(t){var n=t.replace(/,?\s+/g,",").split(",");return{name:n.shift().replace(Ni,Yt),argExecutors:x(n,function(t){return Qt(te(t),e)})}})}function ne(t){return Hi.test(t)&&!Bi.test(t)&&"Math."!==t.slice(0,5)}function ie(t,e,n){var i=Yi[t];return i||(Ut(e,n),Yi[t]=i=new Gi(t,e),Kt()),i}function re(t){return t.charAt(t.length-1).toUpperCase()}function oe(t){return t.replace(Qi,re)}function se(t,e){return new Sr(t,e)}var ce=Array.prototype.slice;Object.freeze||(Object.freeze=function(t){return t}),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(arguments.length>1){var n=ce.call(arguments,1);return function(){return e.apply(t,n.concat(ce.call(arguments)))}}return function(){return e.apply(t,arguments)}});var ae=Object.prototype.hasOwnProperty,ue={hasOwn:function(t,e){return ae.call(t,e)},eq:function(t,e){return t===e}},he=Object.prototype.toString,le="[object Arguments]",fe="[object Array]",de="[object Function]",pe="[object Boolean]",ve="[object Number]",ge="[object Date]",be="[object String]",ye="[object Object]",me="[object RegExp]",xe="[object NodeList]",we=Object.prototype.toString,_e={},Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ce=/\\(\\)?/g,Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__},je=Object.setPrototypeOf||function(t,e){t.__proto__=e},Se=Object.assign||function(t){for(var e=void 0,i=void 0,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(i in e)n(e,i)&&(t[i]=e[i])}return t},ke=Object.create||function(t,e){i.prototype=t;var n=new i;return i.prototype=void 0,e&&m(e,function(t,e){n[e]=t.value}),n},Te=Array.prototype.slice,Oe=/^[a-z]/,Ae=/^\s+/,$e=/\s+$/,De=/(^\s+)|(\s+$)/g,Ne=/(\d)(?=(\d{3})+(?!\d))/g,Ie=/%(\d+\$|\*|\$)?([-+#0, ]*)?(\d+\$?|\*|\$)?(\.\d+\$?|\.\*|\.\$)?([%sfducboxXeEgGpP])/g,Le=[{reg:/([a-zA-Z]+[^aeiou])y$/,rep:"$1ies"},{reg:/([a-zA-Z]+[aeiou]y)$/,rep:"$1s"},{reg:/([a-zA-Z]+[sxzh])$/,rep:"$1es"},{reg:/([a-zA-Z]+[^sxzhy])$/,rep:"$1s"}],He=[{reg:/([a-zA-Z]+[^aeiou])ies$/,rep:"$1y"},{reg:/([a-zA-Z]+[aeiou])s$/,rep:"$1"},{reg:/([a-zA-Z]+[sxzh])es$/,rep:"$1"},{reg:/([a-zA-Z]+[^sxzhy])s$/,rep:"$1"}];Z.format=Y;var Be=[];Se(K.prototype,{super:function(t){var e=arguments.callee.caller;return e.$owner.superclass[e.$name].apply(this,t||Be)},superclass:function(){var t=arguments.callee.caller;return t.$owner.superclass}}),Se(K,{extend:function(t){var e=this;if(t){var n=this.prototype;m(t,function(t,i){p(t)&&(t.$owner=e,t.$name=i),n[i]=t}),this.assign(t.statics)}return this},assign:function(t){return t&&Se(this,t),this}});var qe=function(){function t(){i=!1;var t=n.slice(0);n.length=0;for(var e=0;e<t.length;e++)t[e]()}var e,n=[],i=!1;if("undefined"!=typeof MutationObserver){var r=1,o=new MutationObserver(t),s=document.createTextNode(r);o.observe(s,{characterData:!0}),e=function(){r=(r+1)%2,s.data=r}}else e=window.setImmediate||setTimeout;return function(r,o){var s=o?function(){r.call(o)}:r;n.push(s),i||(i=!0,e(t,0))}}(),Me="__linked_list__",Fe=1,Ve=J({statics:{LIST_KEY:Me},constructor:function(){this._id=Fe++,this.length=0,this._header=void 0,this._tail=void 0,this._version=1},_listObj:function(t){return n(t,Me)&&t[Me]},_desc:function(t){var e=this._listObj(t);return e&&e[this._id]},_newDesc:function(t){return{obj:t,prev:void 0,next:void 0,version:this._version++}},_getOrCreateDesc:function(t){var e=this._listObj(t)||(t[Me]={}),n=e[this._id];return n||(e[this._id]=this._newDesc(t))},_unlink:function(t){var e=t.prev,n=t.next;e?e.next=n:this._header=n,n?n.prev=e:this._tail=e,this.length--},_move:function(t,e,n){var i=this._header;(i===t||t.prev)&&this._unlink(t),t.prev=e,e?(t.next=e.next,e.next=t):(t.next=i,i&&(i.prev=t),this._header=t),this._tail===e&&(this._tail=t),this.length++},_remove:function(t){var e=t.obj,n=this._listObj(e);this._unlink(t),delete n[this._id]},push:function(){for(var t=0,e=0,n=arguments.length,i=void 0,r=void 0;e<n;e++)i=arguments[e],r=this._listObj(i)||(i[Me]={}),r[this._id]||(this._move(r[this._id]=this._newDesc(i),this._tail),t++);return t},pop:function(){var t=this._header;if(t)return this._remove(t),t.obj},shift:function(){var t=this._tail;if(t)return this._remove(t),t.obj},first:function(){var t=arguments.length;if(!t){var e=this._header;return e&&e.obj}for(;t--;)this._move(this._getOrCreateDesc(arguments[t]),void 0);return this},last:function(){if(!arguments.length)return this._tail&&this._tail.obj;for(var t=0,e=arguments.length;t<e;t++)this._move(this._getOrCreateDesc(arguments[t]),this._tail);return this},before:function(t){var e=arguments.length,n=this._desc(t),i=n&&n.prev;if(1==e)return i&&i.obj;for(;e-- >1;)this._move(this._getOrCreateDesc(arguments[e]),i);return this},after:function(t){var e=arguments.length,n=this._desc(t);if(1==e){var i=n&&n.next;return i&&i.obj}for(;e-- >1;)this._move(this._getOrCreateDesc(arguments[e]),n);return this},contains:function(t){return!!this._desc(t)},remove:function(){for(var t=0,e=0,n=arguments.length,i=void 0,r=void 0;e<n;e++)r=this._listObj(arguments[e]),i=r&&r[this._id],i&&(this._unlink(i),delete r[this._id],t++);return t},clean:function(){for(var t=this._header;t;)delete this._listObj(t.obj)[this._id],t=t.next;return this._header=void 0,this._tail=void 0,this.length=0,this},empty:function(){return 0==this.length},size:function(){return this.length},each:function(t,e){for(var n=this._header,i=this._version;n;){if(n.version<i&&t.call(e||this,n.obj,this)===!1)return!1;n=n.next}return!0},map:function(t,e){var n=this,i=[];return this.each(function(r){i.push(t.call(e||n,r,n))}),i},filter:function(t,e){var n=this,i=[];return this.each(function(r){t.call(e||n,r,n)&&i.push(r)}),i},toArray:function(){var t=[];return this.each(function(e){t.push(e)}),t}}),ze=J({hasConfig:tt("hasConfig"),config:tt("config"),get:tt("get"),each:tt("each")}),Re=["debug","info","warn","error"],We=document.createElement("div"),Xe=Array.prototype.slice,Ge=J({constructor:function(){We.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=We.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(t){t.appendChild(this.el)},log:function(t,e){We.innerHTML='<span style="'+t+'">'+e+"</span>",this.bodyEl.appendChild(We.childNodes[0])},parseMsg:function(t){var e=t[0];if(h(e)){var n=Z.format.apply(null,t);return[n.format].concat(Xe.call(t,n.count)).join(" ")}return t.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),Ye=window.console,Ze=J({statics:{enableSimulationConsole:function(){Ye||(Ye=new Ge,Ye.appendTo(document.body))}},constructor:function(t,e){this.module=t,this.setLevel(e)},setLevel:function(t){this.level=S(Re,t||"info")},getLevel:function(){return Re[this.level]},_print:function(t,e,n){try{Function.apply.call(Ye[t]||Ye.log,Ye,e),n&&Ye.trace&&Ye.trace()}catch(t){}},_log:function(t,e,n){t<this.level||!Ye||(e=this._parseArgs(t,e),this._print(t,e,n))},_parseArgs:function(t,e){var n=0,i=e.length,r="["+Re[t]+"] "+this.module+" - ",o=[];for(h(e[0])&&(r+=e[0],n++),o.push(r);n<i;n++)this.parseArg(o,e[n]);return o},parseArg:function(t,e){void 0===e?t.push("undefined"):e instanceof Error?t.push(e.message,"\n",e.stack):t.push(e)},debug:function(){this._log(0,arguments)},info:function(){this._log(1,arguments)},warn:function(){this._log(2,arguments)},error:function(){this._log(3,arguments)}});Ze.logger=new Ze("default","info");var Ue=Ze.logger,Ke=J({extend:ze,constructor:function(t,e,n,i){this.cfg=t||{},this.cfgStatus={},this.listens={},e=e||[],this.statusList=e,this.statusCnt=e.length;var r=S(e,n);r==-1&&(r=0),this.status=e[r],this.statusIdx=r,p(i)&&(this.checkStatus=i)},nextStatus:function(){this.statusIdx<this.statusCnt&&(this.status=this.statusList[this.statusIdx++])},register:function(t,e,n,i){return this.cfg[t]=e,this.cfgStatus[t]={statusIdx:S(this.statusList,n),validator:i},this},checkStatus:function(t,e,n,i){return n>=i},hasConfig:function(t){return n(this.cfg,t)},config:function(t,e){var i=this;if(l(t))m(t,function(t,e){i.config(e,t)});else if(n(this.cfg,t)){var r=this.cfgStatus[t],o=r.statusIdx,s=r.validator;if(o!=-1&&!this.checkStatus(this.statusList[o],this.status,o,this.statusIdx))return void Ue.warn("configuration[%s]: must use in status[%s]",t,this.statusList[o]);if(p(s)&&s(e,t,this)!==!1)return void Ue.warn("configuration[%s]: invalid value[%s]",t,e);var c=this.cfg[t];this.cfg[t]=e,m(this.listens[t],function(n){n(t,e,c,i)})}},get:function(t){return arguments.length?this.cfg[t]:ke(this.cfg)},each:function(t){m(this.cfg,function(e,n){t(e,n)})},on:function(t,e){var n=this;if(!p(e))throw new Error("Invalid Callback");return isArray(t)?(m(t,function(t){n.on(t,e)}),this):(this.hasConfig(t)&&(this.listens[t]||(this.listens[t]=[])).push(e),this)},un:function(t,e){var n=this;if(isArray(t))m(t,function(t){n.un(t,e)});else if(this.hasConfig(t)){var i=this.listens[t],r=i?S(i,e):-1;r!=-1&&i.splice(r,1)}return this}}),Je=J({extend:ze,constructor:function(){var t=[];m(arguments,function(e){f(e)?m(e,function(e){t.push(et(e))}):t.push(et(e))}),this.cfgs=t},hasConfig:function(t){return 0==m(this.cfgs,function(e){return!e.hasConfig(t)})},config:function(t,e){m(this.cfgs,function(n){n.config(t,e)})},get:function(t){if(arguments.length){var e=void 0;return m(this.cfgs,function(n){if(n.hasConfig(t))return e=n.get(t),!1}),e}var n={};return m(this.cfgs,function(t){t.each(function(t,e){n[e]=t})}),n},each:function(t){m(this.cfgs,function(e){e.each(t)})}}),Qe=Object.freeze({LinkedList:Ve,Configuration:Ke,ConfigurationChain:Je,Logger:Ze,policy:t,eq:e,hasOwnProp:n,emptyFunc:i,argsType:le,arrayType:fe,funcType:de,boolType:pe,numberType:ve,dateType:ge,stringType:be,objectType:ye,regexpType:me,nodeListType:xe,isDefine:r,isNull:o,isNil:s,isBool:c,isNumber:a,isDate:u,isString:h,isObject:l,isArray:f,isArrayLike:d,isFunc:p,isRegExp:v,isPrimitive:g,each:m,map:x,filter:w,aggregate:E,indexOf:S,lastIndexOf:k,convert:T,reverseConvert:O,keys:A,values:$,getOwnProp:D,prototypeOf:Pe,setPrototypeOf:je,assign:Se,assignIf:N,create:ke,parseExpr:I,get:L,has:H,set:B,upperFirst:M,ltrim:F,rtrim:V,trim:z,plural:R,singular:W,thousandSeparate:X,format:Z,isExtendOf:U,Base:K,dynamicClass:J,mixin:Q,nextTick:qe}),tn=new Ke({},["init","runtime"]),en=new Ke({},["init","runtime"]);en.register("bindProxy","__observi_proxy__","init");var nn=Object.prototype.hasOwnProperty,rn=en.get(),on=void 0,sn={eq:function(t,e){return t===e},obj:function(t){return t},proxy:function(t){return t},change:function(t,e){var n=rn.bindProxy,i=nn.call(t,n)?t[n]:void 0;i&&i.each(function(n){return n(t,e)})},on:function(t,e,n){if(!p(e))throw TypeError("Invalid Proxy Event Handler["+e);var i=nt.obj(t),r=rn.bindProxy,o=nn.call(i,r)?i[r]:i[r]=new Ve;if(1==o.push(e)){var s;return t===i&&(s=nt.proxy(t))!==t&&e(t,s),!0}return!1},un:function(t,e){t=nt.obj(t);var n=rn.bindProxy,i=nn.call(t,n)?t[n]:void 0;return!(!i||!p(e))&&1==i.remove(e)},clean:function(t){var e=rn.bindProxy;t=nt.obj(t),nn.call(t,e)&&(t[e]=void 0)},isEnable:function(){return on},enable:function(e){void 0===on&&(nt.eq=e.eq,nt.obj=e.obj,nt.proxy=e.proxy,t("hasOwn",function(t,e){return nn.call(nt.obj(t),e)}),t("eq",nt.eq),on=!0)},disable:function(){void 0===on&&(on=!1,nt.change=nt.on=nt.un=nt.clean=i)}};Se(nt,sn);var cn=!1,an=J({static:{interceptGetter:function(t){cn=!0,t(),cn=!1}},constructor:function(t){this.obj=t,this.proxy=t,this.setters={},this.watched={}},set:function(t,e,n){var i=this;if(queue=this.setters[t],queue){var r=nt.eq(e,n);r&&g(e)||queue.each(function(o){return o(t,e,n,i,r)})}},setter:function(t,e){return this.accessor(this.setters,t,e)},unsetter:function(t,e){return this.unaccessor(this.setters,t,e)},accessor:function(t,e,n){var i=t[e]||(t[e]=new Ve),r=1==i.push(n);return r&&!this.watched[e]&&(this.watch(e),this.watched[e]=!0),r},unaccessor:function(t,e,n){var i=t[e];return!!i&&1==i.remove(n)},watch:function(){throw new Error("abstract function watch")}}),un=new Ze("observi","info"),hn=[],ln=void 0,fn=[],dn=!1,pn=Object.prototype.hasOwnProperty,vn=!0,gn="__observi_watcher__";en.register("key.watcher",vn,"init",function(t){return vn=t}).register("lazy",gn,"init",function(t){return gn=t});var bn=_.dynamicClass({constructor:function(t,e,n){this.obj=t,this.expr=e,this.path=n,this.watchers=Array(n.length),this.callbacks=this.createCallbacks(),this.watch(t,0),this.watcher=this.watchers[0],this.handlers=new Ve},on:function(t){return this.handlers.push(t)},un:function(t){if(arguments.length)return this.handlers.remove(t);var e=this.landlers.size();return this.handlers.clean(),e},isListened:function(t){return s(t)?!this.handlers.empty():this.handlers.contains(t)},fire:function(t,e,n){var i=this.expr,r=this.watcher.proxy;this.handlers.each(function(o){return o(i,t,e,r,n)})},notify:function(){this.dirty&&(this.fire(this.newVal,this.oldVal,this.eq),this.dirty=!1)},update:function(t,e,n){if(vn)if(this.newVal=t,this.dirty){if((n=nt.eq(t,this.oldVal))&&g(t))return void(this.dirty=!1);this.eq=n}else this.oldVal=e,this.eq=n,this.dirty=!0,ct(this);else this.fire(t,e,n)},createCallbacks:function(){return x(this.path,function(t,e){return this.createCallback(e)},this)},createCallback:function(t){var e=this,n=this.path,i=t+1,r=n.length-i&&n.slice(i);return function(o,s,c,a,u){if(r){if(u)return;if(c?(c=nt.obj(c),e.unwatch(c,i),c=L(c,r)):c=void 0,s){if(nt.isEnable()){s=nt.obj(s);for(var a=e.watch(s,i),h=0,l=e.obj;h<t;)if(l=nt.obj(l[n[h++]]),!l)return;l[n[t]]=a.proxy}else e.watch(s,i);s=L(s,r)}else s=void 0;if((u=nt.eq(s,c))&&g(s))return}e.update(s,c,u)}},watch:function(t,e){var n=this.path,i=n[e],r=this.watchers[e]||(this.watchers[e]=at(t)),o=void 0;return r.setter(i,this.callbacks[e]),++e<n.length&&(o=t[i])&&(nt.isEnable()?t[i]=this.watch(nt.obj(o),e).proxy:this.watch(o,e)),r},unwatch:function(t,e){var n=this.watchers[e];if(n){var i,r=this.path,o=r[e];n.unsetter(o,this.callbacks[e]),this.watchers[e]=void 0,++e<r.length&&(i=t[o])&&this.unwatch(nt.obj(i),e)}return n}}),yn=Object.prototype.hasOwnProperty;en.register("enableES6Proxy",!0,"init"),en.register("bindES6ProxySource","__observi_es6proxy_source__","init"),en.register("bindES6Proxy","__observi_es6proxy__","init"),it("ES6Proxy",10,function(t){return window.Proxy&&t.enableES6Proxy!==!1},function(t){var e=t.bindES6ProxySource,n=t.bindES6Proxy,i=J({extend:an,constructor:function(){this.super(arguments),this.binded=!1},watch:function(t){if(!this.binded){var i=this.obj,r=this.createProxy();this.proxy=r,i[n]=r,i[e]=i,nt.change(i,r),this.binded=!0}},createProxy:function(){var t=this;return new Proxy(this.obj,{set:function(e,n,i){var r=e[n];return e[n]=i,t.set(n,i,r),!0}})}});return nt.enable({obj:function(t){return t&&yn.call(t,e)?t[e]:t},eq:function(t,e){return t===e||nt.obj(t)===nt.obj(e)},proxy:function(t){return t&&yn.call(t,n)?t[n]||t:t}}),i});var mn=Array.prototype,xn="fill,pop,push,reverse,shift,sort,splice,unshift".split(","),wn=J({extend:an,constructor:function(){this.super(arguments),this.isArray=f(this.obj),this.isArray&&this.hookArray()},watch:function(t){return this.isArray&&"length"==t},hookArray:function(){m(xn,this.hookArrayMethod,this)},hookArrayMethod:function(t){var e=this.obj,n=mn[t],i=(e.length,this);e[t]=function(){var t=e.length,r=n.apply(e,arguments);return i.set("length",e.length,t),r}}});it("ES5DefineProperty",20,function(t){if(Object.defineProperty)try{var e=function(){var t=void 0,e={};return Object.defineProperty(e,"sentinel",{get:function(){return t},set:function(e){t=e}}),e.sentinel=1,{v:e.sentinel===t}}();if("object"==typeof e)return e.v}catch(t){}return!1},function(t){var e=J({extend:wn,watch:function(t){var e=this;if(!this.super([t])){var n=this.obj[t];Object.defineProperty(this.obj,t,{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){var r=n;n=i,e.set(t,i,r)}})}}});return nt.disable(),e}),it("DefineGetterAndSetter",30,function(t){return"__defineGetter__"in{}},function(t){var e=J({extend:wn,watch:function(t){var e=this;if(!this.super([t])){var n=this.obj[t];this.obj.__defineGetter__(t,function(){return n}),this.obj.__defineSetter__(t,function(i){var r=n;n=i,e.set(t,i,r)})}}});return nt.disable(),e});var _n=Object.prototype.hasOwnProperty,En="hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Cn="concat,copyWithin,entries,every,fill,filter,find,findIndex,forEach,includes,indexOf,join,keys,lastIndexOf,map,pop,push,reduce,reduceRight,reverse,shift,slice,some,sort,splice,unshift,values".split(","),Pn=void 0,jn=J({statics:{isSupport:function(){if(void 0!==Pn)return Pn;if(Pn=!1,window.VBArray)try{window.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),Pn=!0}catch(t){un.error(t.message,t)}return Pn}},classNameGenerator:0,constructor:function(t,e,n,i){this.classPool={},this.defPropMap={},this.constBind=e,this.descBind=n,this.onProxyChange=i,this.addDefProps(t),this.initConstScript()},addDefProps:function(t){var e=this.defPropMap,n=[];m(t||[],function(t){e[t]=!0});for(var i in e)_n.call(e,i)&&n.push(i);this.defProps=n,un.info("VBProxy default props is: ",n.join(",")),this.initReserveProps()},initReserveProps:function(){this.reserveProps=En.concat(this.defProps),this.reserveArrayProps=this.reserveProps.concat(Cn),this.reservePropMap=O(this.reserveProps),this.reserveArrayPropMap=O(this.reserveArrayProps)},initConstScript:function(){this.constScript=["\tPublic [",this.descBind,"]\r\n","\tPublic Default Function [",this.constBind,"](desc)\r\n","\t\tset [",this.descBind,"] = desc\r\n","\t\tSet [",this.constBind,"] = Me\r\n","\tEnd Function\r\n"].join("")},generateClassName:function(){return"VBClass"+this.classNameGenerator++},parseClassConstructorName:function(t){return t+"Constructor"},generateSetter:function(t){var e=this.descBind;return["\tPublic Property Get [",t,"]\r\n","\tOn Error Resume Next\r\n","\t\tSet[",t,"] = [",e,'].get("',t,'")\r\n',"\tIf Err.Number <> 0 Then\r\n","\t\t[",t,"] = [",e,'].get("',t,'")\r\n',"\tEnd If\r\n","\tOn Error Goto 0\r\n","\tEnd Property\r\n"]},generateGetter:function(t){var e=this.descBind;return["\tPublic Property Let [",t,"](val)\r\n","\t\tCall [",e,'].set("',t,'",val)\r\n',"\tEnd Property\r\n","\tPublic Property Set [",t,"](val)\r\n","\t\tCall [",e,'].set("',t,'",val)\r\n',"\tEnd Property\r\n"]},generateClass:function(t,e,n){var i=this,r=["Class ",t,"\r\n",this.constScript,"\r\n"];return m(e,function(t){n[t]?r.push("\tPublic ["+t+"]\r\n"):(r.push.apply(r,i.generateSetter(t)),r.push.apply(r,i.generateGetter(t)))}),r.push("End Class\r\n"),r.join("")},generateClassConstructor:function(t,e,n){var i=[t.length,"[",t.join(","),"]","[",n.join(","),"]"].join(""),r=this.classPool[i];if(r)return r;var o=this.generateClassName();return r=this.parseClassConstructorName(o),parseVB(this.generateClass(o,t,e)),parseVB(["Function ",r,"(desc)\r\n","\tDim o\r\n","\tSet o = (New ",o,")(desc)\r\n","\tSet ",r," = o\r\n","End Function"].join("")),this.classPool[i]=r,r},create:function(t,e){function n(e){p(t[e])&&(a[e]=!0,c.push(e)),s.push(e)}var i=this,r=void 0,o=void 0,s=[],c=[],a={},u=this.descBind;return f(t)?(r=this.reserveArrayProps,o=this.reserveArrayPropMap):(r=this.reserveProps,o=this.reservePropMap),m(r,n),m(t,function(t,e){e===u||e in o||n(e)},t,!1),e||(e=this.descriptor(t),e?t=e.obj:e=new Sn(t,s,this)),proxy=window[this.generateClassConstructor(s,a,c)](e),e.proxy=proxy,m(c,function(e){proxy[e]=i.funcProxy(t[e],e in o?t:proxy)}),this.onProxyChange(t,proxy),e},funcProxy:function(t,e){
return function(){return t.apply(this===window?e:this,arguments)}},eq:function(t,e){var n=this.descriptor(t),i=this.descriptor(e);return n&&(t=n.obj),i&&(e=i.obj),t===e},obj:function(t){var e=this.descriptor(t);return e?e.obj:t},proxy:function(t){var e=this.descriptor(t);return e?e.proxy:void 0},isProxy:function(t){return _n.call(t,this.constBind)},descriptor:function(t){var e=this.descBind;return _n.call(t,e)?t[e]:void 0},destroy:function(t){this.onProxyChange(obj,void 0)}}),Sn=J({constructor:function(t,e,n){this.classGenerator=n,this.obj=t,this.defines=O(e,function(){return!1}),t[n.descBind]=this,this.accessorNR=0},isAccessor:function(t){return t&&(t.get||t.set)},hasAccessor:function(){return!!this.accessorNR},defineProperty:function(t,e){var n=this.defines,i=this.obj;return t in n||(t in i?p(i[t])&&un.warn("defineProperty not support function ["+t+"]"):i[t]=void 0,this.classGenerator.create(this.obj,this)),this.isAccessor(e)?(n[t]=e,this.accessorNR++,e.get&&(i[t]=e.get())):(n[t]&&(n[t]=!1,this.accessorNR--),i[t]=e.value),this.proxy},getPropertyDefine:function(t){return this.defines[t]||void 0},get:function(t){var e=this.defines[t];return e&&e.get?e.get.call(this.proxy):this.obj[t]},set:function(t,e){var n=this.defines[t];n&&n.set?n.set.call(this.proxy,e):this.obj[t]=e}});en.register("bindVBProxy","__observi_vbproxy__","init"),en.register("VBProxyConst","__observi_vbproxy_const__","init"),en.register("defaultProps",[],"init"),it("VBScriptProxy",40,function(t){return jn.isSupport()},function(t){var e=new jn([t.bindWatcher,t.bindObservi,t.bindProxy,Ve.LIST_KEY].concat(t.defaultProps||[]),en.get("VBProxyConst"),en.get("bindVBProxy"),nt.change),n=J({extend:wn,watch:function(t){var n=this;if(!this.super([t])&&!this.isArray){var i=this.obj,r=this.desc||(this.desc=e.descriptor(i)||e.create(i));this.proxy=r.defineProperty(t,{set:function(e){var r=i[t];i[t]=e,n.set(t,e,r)}})}}});return nt.enable({obj:function(t){return t&&e.obj(t)},eq:function(t,e){return t===e||nt.obj(t)===nt.obj(e)},proxy:function(t){return t&&(e.proxy(t)||t)}}),n}),en.register("bindObservis","__observi__","init");var kn=en.get(),Tn=Object.prototype.hasOwnProperty,On="###",An=Object.freeze({Watcher:an,registerWatcher:it,logger:un,proxy:nt,configuration:en,observe:ft,unobserve:dt,isObserved:pt,eq:vt,obj:gt,$each:bt,$map:yt,$filter:mt,$aggregate:xt,$keys:wt,$values:_t}),$n=J({statics:{commentCfg:"generateComments"},constructor:function(t){this._scope=gt(t.scope),this.el=t.el,this.tpl=t.tpl},expressionScopeProvider:function(t,e){return e?"$binding.exprScope('"+t+"')":"$scope"},scope:function(){var t=this._scope;return nt(t)||t},realScope:function(){return this._scope},propScope:function(t){for(var e=this.realScope(),i=void 0;(i=e.$parent)&&!n(e,t);)e=i;return nt(e)||e},exprScope:function(t){return this.propScope(I(t)[0])},observe:function(t,e){ft(this.exprScope(t),t,e)},unobserve:function(t,e){dt(this.exprScope(t),t,e)},get:function(t){return L(this.realScope(),t)},has:function(t){return H(this.realScope(),t)},set:function(t,e){B(this.scope(),t,e)},bind:function(){throw new Error("abstract method")},unbind:function(){throw new Error("abstract method")},destroy:function(){}});tn.register($n.commentCfg,!0,"init");var Dn=/^ag-/;tn.register("directiveReg",Dn,"init",function(t){if(!v(t))throw new Error("Invalid Directive RegExp: "+t);return Dn=t,!0});var Nn=J({isDirective:function(t){return Dn.test(t)},getDirective:function(t){return Ji.getDirective(t.replace(Dn,""))}}),In=/{([^{]+)}/g,Ln=J({constructor:function(t){this.text=t,this.index=0},nextToken:function(){var t=In.exec(this.text);if(t){var e=this.index=In.lastIndex;return{token:t[1],start:e-t[0].length,end:e}}this.index=0}}),Hn="string"==typeof document.createElement("div").textContent?"textContent":"innerText",Bn={W3C:!!window.dispatchEvent,inDoc:function(t,e){if(e=e||document.documentElement,e.contains)return e.contains(t);try{for(;t=t.parentNode;)if(t===e)return!0}catch(t){}return!1},query:function(t,e){return h(t)?e?document.querySelectorAll(t):document.querySelector(t):t},cloneNode:function(t,e){function n(t){return t.cloneNode(e!==!1)}return d(t)?x(t,n):n(t)},parent:function(t){return Et(t).parentNode},next:function(t,e){return t=Ct(t),e?t.nextSibling:t.nextElementSibling},prev:function(t,e){return t=Et(t),e?t.previousSibling:t.previousElementSibling},children:function(t,e){return t=Et(t),e?t.childNodes:t.children},remove:function(t){return Pt(t,function(t){var e=t.parentNode;e&&e.removeChild(t)}),Bn},before:function(t,e){e=Et(e);var n=e.parentNode;return Pt(t,function(t){n.insertBefore(t,e)}),Bn},after:function(t,e){e=Ct(e);var n=e.parentNode;return Pt(t,n.lastChild===e?function(t){n.insertBefore(t,e)}:function(){var t=e.nextSibling;return function(e){n.insertBefore(e,t)}}()),Bn},append:function(t,e){return t=Et(t),Pt(e,function(e){t.appendChild(e)}),Bn},prepend:function(t,e){return t.firstChild?Bn.before(e,e.firstChild):Bn.append(t,e),Bn},replace:function(t,e){var n=t.parentNode;n.replaceChild(e,t)},html:function(t,e){return arguments.length>1?t.innerHTML=e:t.innerHTML},outerHtml:function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},text:function(t,e){return 3==t.nodeType?arguments.length>1?t.data=e:t.data:arguments.length>1?t[Hn]=e:t[Hn]},focus:function(t){return t.focus(),Bn}};document.querySelectorAll||(document.querySelectorAll=function(t){var e=document,n=e.documentElement.firstChild,i=e.createElement("STYLE");if(n.appendChild(i),e.__qsaels=[],i.styleSheet)i.styleSheet.cssText=t+"{x:expression(document.__qsaels.push(this))}";else{var r=document.createTextNode(t+"{x:expression(document.__qsaels.push(this))}");i.appendChild(r)}return window.scrollBy(0,0),e.__qsaels}),document.querySelector||(document.querySelector=function(t){var e=document.querySelectorAll(t);return e.length?e[0]:null});var qn=/^(?:input|select|textarea|button|object)$/i,Mn=/^(?:a|area)$/i;Se(Bn,{prop:function(t,e,n){e=Bn.propFix[e]||e;var i=Bn.propHooks[e];return 2==arguments.length?i&&i.get?i.get(t,e):t[e]:(i&&i.set?i.set(t,e,n):t[e]=n,Bn)},attr:function(t,e,n){return 2==arguments.length?t.getAttribute(e):(t.setAttribute(e,n),Bn)},removeAttr:function(t,e){return t.removeAttribute(e),Bn},checked:function(t,e){return jt(t,"checked",arguments.length>1,e)},class:function(t,e){return jt(t,"class",arguments.length>1,e)},addClass:function(t,e){if(t.classList)t.classList.add(e);else{var n=" "+Bn.prop(t,"class")+" ";n.indexOf(" "+e+" ")===-1&&Bn.class(t,z(n+e))}return Bn},removeClass:function(t,e){return t.classList?t.classList.remove(e):Bn.class(t,z((" "+Bn.prop(t,"class")+" ").replace(new RegExp(" "+e+" ","g"),""))),Bn},style:function(t,e){return jt(t,"style",arguments.length>1,e)},propHooks:{tabIndex:{get:function(t){var e=t.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):qn.test(t.nodeName)||Mn.test(t.nodeName)&&t.href?0:void 0}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"}}),Se(Bn,{css:function(t,e,n){var i=/[_-]/.test(e)?St(e):e,r=void 0;if(e=kt(i)||i,r=Vn[i]||zn,2==arguments.length){var o=n,s=void 0;return"background"===e&&(e="backgroundColor"),n=r.get(t,e),o!==!1&&isFinite(s=parseFloat(n))?s:n}return n||0===n?(isFinite(n)&&!Wn[i]&&(n+="px"),r.set(t,e,n)):t.style[e]="",Bn},position:function(t){var e=void 0,n=void 0,i={top:0,left:0};return"fixed"===Bn.css(t,"position")?n=t.getBoundingClientRect():(e=Tt(t),n=Ot(t),"HTML"!==e.tagName&&(i=Ot(e)),i.top+=Bn.css(e,"borderTopWidth",!0),i.left+=Bn.css(e,"borderLeftWidth",!0),i.top-=Bn.scrollTop(e),i.left-=Bn.scrollLeft(e)),{top:n.top-i.top-Bn.css(t,"marginTop",!0),left:n.left-i.left-Bn.css(t,"marginLeft",!0)}},scrollTop:function(t,e){var n=At(t);return 1==arguments.length?(n?"scrollTop"in n?n.scrollTop:Xn.pageYOffset:t.pageYOffset)||0:(n?n.scrollTo(Bn.scrollLeft(t),e):t.pageYOffset=e,Bn)},scrollLeft:function(t,e){var n=At(t);return 1==arguments.length?(n?"scrollLeft"in n?n.scrollLeft:Xn.pageXOffset:t.pageXOffset)||0:(n?n.scrollTo(e,Bn.scrollTop(t)):t.pageXOffset=e,Bn)},scroll:function(t,e,n){var i=At(t);return 1==arguments.length?{left:Bn.scrollLeft(t),top:Bn.scrollTop(t)}:(i?i.scrollTo(e,n):(t.pageXOffset=e,t.pageYOffset=n),Bn)}});var Fn=Bn.cssFix={float:Bn.W3C?"cssFloat":"styleFloat"},Vn=Bn.cssHooks={},zn={},Rn=["","-webkit-","-o-","-moz-","-ms-"],Wn={animationIterationCount:!0,columnCount:!0,order:!0,flex:!0,flexGrow:!0,flexShrink:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},Xn=document.documentElement,Gn=Bn.css;zn.set=function(t,e,n){try{t.style[e]=n}catch(t){}};var Yn=void 0;window.getComputedStyle?(Yn=zn.get=function(t,e){var n=void 0,i=getComputedStyle(t,null);return i&&(n="filter"===e?i.getPropertyValue(e):i[e],""===n&&(n=t.style[e])),n},Vn.opacity={get:function(t,e){var n=Yn(t,e);return""===n?"1":ret}}):!function(){var t=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,e=/^(top|right|bottom|left)$/,n=/alpha\([^)]*\)/i,i=!!window.XDomainRequest,r="DXImageTransform.Microsoft.Alpha",o={thin:i?"1px":"2px",medium:i?"3px":"4px",thick:i?"5px":"6px"};Yn=zn.get=function(n,i){var r=n.currentStyle,s=r[i];if(t.test(s)&&!e.test(s)){var c=n.style,a=c.left,u=n.runtimeStyle.left;n.runtimeStyle.left=r.left,c.left="fontSize"===i?"1em":s||0,s=c.pixelLeft+"px",c.left=a,n.runtimeStyle.left=u}return"medium"===s&&(i=i.replace("Width","Style"),"none"===r[i]&&(s="0px")),""===s?"auto":o[s]||s},Vn.opacity={get:function(t,e){var n=t.filters.alpha||t.filters[r],i=n&&n.enabled?n.opacity:100;return i/100+""},set:function(t,e,i){var r=t.style,o=isFinite(i)&&i<=1?"alpha(opacity="+100*i+")":"",s=r.filter||"";r.zoom=1,r.filter=(n.test(s)?s.replace(n,o):s+" "+o).trim(),r.filter||r.removeAttribute("filter")}}}(),m(["top","left"],function(t){Vn[t]={get:function(t,e){var n=Yn(t,e);return/px$/.test(n)?n:Bn.position(t)[e]+"px"}}}),m(["Width","Height"],function(t){function e(t,e){var n=void 0;return n=t[i],2===e?n+Gn(t,"margin"+r[0],!0)+Gn(t,"margin"+r[1],!0):(e<0&&(n=n-Gn(t,"border"+r[0]+"Width",!0)-Gn(t,"border"+r[1]+"Width",!0)),e===-4&&(n=n-Gn(t,"padding"+r[0],!0)-Gn(t,"padding"+r[1],!0)),n)}var n=t.toLowerCase(),i="offset"+t,r="Width"==t?["Left","Right"]:["Top","Bottom"];Bn[n]=function(t){return e(t,-4)},Bn["inner"+t]=function(t){return e(t,-2)},Bn["outer"+t]=function(t,n){return e(t,n===!0?2:0)}}),Se(Bn,{val:function(t,e){var n=Bn.valHooks[t.type||t.tagName.toLowerCase()];return 1==arguments.length?n&&n.get?n.get(t):t.value||"":(n&&n.set?n.set(t,e):t.value=$t(e),Bn)},valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e="select-one"==t.type,n=t.selectedIndex;if(n<0)return e?void 0:[];for(var i=t.options,r=void 0,o=e?void 0:[],s=0,c=i.length;s<c;s++)if(r=i[s],r.selected||s==n){if(e)return Bn.val(r);o.push(Bn.val(r))}return o},set:function(t,e){var n="select-one"==t.type,i=t.options,r=void 0,o=void 0,a=void 0,u=void 0,h=void 0;if(t.selectedIndex=-1,f(e)||(e=s(e)?[]:[e]),u=e.length){n&&(u=e.length=1);var l=O(e,function(){return!1}),d=0;for(o=0,a=i.length;o<a&&(r=i[o],h=Bn.val(r),!c(l[h])||(l[h]=r.selected=!0,++d!==u));o++)e=A(l,function(t){return t===!0})}return n?e[0]:e}}}});var Zn=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Un=document.documentElement,Kn=Se(Bn,{hasListen:function(t,e,n){return Lt(t,e,n)},on:function(t,e,n,i){return Dt(t,e,n,i===!0)&&(ui[e]?qt(e,n):Ht(t,e,n)),Bn},once:function(t,e,n){return Bn.on(t,e,n,!0)},off:function(t,e,n){return Nt(t,e,n)&&(ui[e]?Mt(e,n):Bt(t,e,n)),Bn},dispatchEvent:function(t,e,n){var i=void 0;return document.createEvent?(i=document.createEvent("Events"),i.initEvent(e,!0,!0,n),Se(i,n),t.dispatchEvent(i)):Bn.inDoc(t)&&(i=document.createEventObject(),Se(i,n),t.fireEvent("on"+e,i)),i}}),Jn=/^(?:mouse|contextmenu|drag)|click/,Qn=/^key/,ti=["altKey","bubbles","cancelable","ctrlKey","currentTarget","propertyName","eventPhase","metaKey","relatedTarget","shiftKey","target","view","which"],ei={},ni={props:["char","charCode","key","keyCode"],fix:function(t,e){null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode)}},ii={props:["button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement"],fix:function(t,e){var n,i,r,o=e.button;null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||document,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0)}},ri=function(){function t(e){Zn(this,t);var n=e.type,i=ei[n],r=void 0,o=void 0;for(this.originalEvent=e,this.type=e.type,this.returnValue=!(e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()),this.timeStamp=e&&e.timeStamp||new Date+0,r=ti.length;r--;)o=ti[r],this[o]=e[o];if(i||(ei[n]=i=Jn.test(n)?ii:Qn.test(n)?ni:{}),i.props){var s=i.props;for(r=s.length;r--;)o=s[r],this[o]=e[o]}this.target||(this.target=e.srcElement||document),3==this.target.nodeType&&(this.target=this.target.parentNode),i.fix&&i.fix(this,e)}return t.prototype.preventDefault=function(){var t=this.originalEvent;this.returnValue=!1,t&&(t.returnValue=!1,t.preventDefault&&t.preventDefault())},t.prototype.stopPropagation=function(){var t=this.originalEvent;this.cancelBubble=!0,t&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())},t.prototype.stopImmediatePropagation=function(){var t=this.originalEvent;this.isImmediatePropagationStopped=!0,t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()},t}(),oi="__LISTEN__",si=Bn.W3C?function(t,e,n,i){t.addEventListener(e,n,i)}:function(t,e,n){t.attachEvent("on"+e,n)},ci=Bn.W3C?function(t,e,n){t.removeEventListener(e,n)}:function(t,e,n){t.detachEvent("on"+e,n)},ai=["click","dblclick","keydown","keypress","keyup","mousedown","mousemove","mouseup","mouseover","mouseout","wheel","mousewheel","input","change","beforeinput","compositionstart","compositionupdate","compositionend","select","cut","copy","paste","beforecut","beforecopy","beforepaste","focusin","focusout","DOMFocusIn","DOMFocusOut","DOMActivate","dragend","datasetchanged"],ui={},hi={focus:!0,blur:!0},li={},fi={},di={};m(ai,function(t){ui[t]=!0}),Bn.W3C||(delete ui.change,delete ui.select);var pi=new Date;"onmouseenter"in Un||m({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){li[t]={type:e,fix:function(t,e,n){var i=e.relatedTarget;return!i||i!==t&&!(16&t.compareDocumentPosition(i))}}}),m({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(t,e){window[t]&&!li.animationend&&(li.animationend={type:e})}),"oninput"in document.createElement("input")?navigator.userAgent.indexOf("MSIE 9")!==-1&&(li.input={type:"input",fix:function(t){t.oldValue=t.value}},document.addEventListener("selectionchange",function(t){var e=document.activeElement;if("TEXTAREA"===e.tagName||"INPUT"===e.tagName&&"text"===e.type){if(e.value==e.oldValue)return;e.oldValue=e.value,Lt(e,"input")&&(t=new ri(t),t.type="input",Vt(e,"input",t))}})):(delete ui.input,li.input={type:"propertychange",fix:function(t,e){return"value"==e.propertyName}},li.change={bind:function(t){if("checkbox"==t.type||"radio"==t.type)return t.$onchange||(t.$onchange=function(e){e.type="change",Vt(t,"change",e)},Bn.on(t,"click",t.$onchange)),!1},unbind:function(t){if("checkbox"==t.type||"radio"==t.type)return Bn.off(t,"click",t.$onchange),!1}}),void 0===document.onmousewheel&&!function(){var t=document.onwheel?"wheel":"DOMMouseScroll",e="wheel"===t?"deltaY":"detail";li.mousewheel={type:t,fix:function(t,n){return n.wheelDeltaY=n.wheelDelta=n[e]>0?-120:120,n.wheelDeltaX=0,!0}}}(),m(li,function(t,e){fi[t.type||e]=e});var vi=[],gi=void 0,bi=document.documentElement;"complete"===document.readyState?setTimeout(Rt):document.addEventListener?document.addEventListener("DOMContentLoaded",Rt):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&Rt()}),bi.doScroll&&null===window.frameElement&&window.external&&!function(){var t=function(){try{bi.doScroll("left"),Rt()}catch(e){setTimeout(t)}};t()}()),Kn.on(window,"load",Rt),Kn.ready=function(t){return gi?t():vi.push(t),Kn};var yi=J({constructor:function(t){this.scope=t,this.proxyHandler=this.proxyHandler.bind(this),nt.on(t,this.proxyHandler)},proxyHandler:function(t,e){this.scope=e||t},before:function(t,e){return e!==!1&&this.bind(),Bn.before(this.el,Bn.query(t)),this},after:function(t,e){return e!==!1&&this.bind(),Bn.after(this.el,Bn.query(t)),this},prependTo:function(t,e){return e!==!1&&this.bind(),Bn.prepend(Bn.query(t),this.el),this},appendTo:function(t,e){return e!==!1&&this.bind(),Bn.append(Bn.query(t),this.el),this},remove:function(t){Bn.remove(this.el),t!==!1&&this.unbind()},bind:function(){return this.binded||(m(this.bindings,function(t){t.bind()}),this.binded=!0),this},unbind:function(){return this.binded&&(m(this.bindings,function(t){t.unbind()}),this.binded=!1),this},destroy:function(){nt.un(this.scope,this.proxyHandler),this.binded&&m(this.bindings,function(t){t.unbind(),t.destroy()}),Bn.remove(this.el),this.bindings=void 0,this.el=void 0}}),mi=new Ze("template","debug");tn.register("directiveParser",new Nn,"init",function(t){if(!(t instanceof Nn))throw new Error("Invalid Directive Parser: "+t);return!0}),tn.register("TextParser",Ln,"init",function(t){if(!(t===Ln||p(t)&&U(t,Ln)))throw new Error("Invalid Text Parser: "+t);return!0});var xi=tn.get(),wi=1,_i=2,Ei=3,Ci=J({constructor:function(t,e){this.el=this.parseEl(t,e),this.directiveParser=xi.directiveParser,this.TextParser=xi.TextParser,this.parse()},complie:function(t){var e=Xt(this.el),n=document.createDocumentFragment(),i=new yi(t);return Bn.append(n,e),i.el=e,i.bindings=this.parseBindings(this.bindings,t,this.parseEls(e),i),i},parseBindings:function(t,e,n,i){var r=this;return x(t,function(t){var o=t.type,s={el:n[t.index],scope:e,tpl:i};if(o===wi)return s.expression=t.expression,new Ui(s);if(s.block=t.block,s.children=t.children?r.parseBindings(t.children||[],e,n):void 0,o===_i)return s.expression=t.expression,s.attr=t.attr,s.domParser=t.domParser,s.independent=t.independent,s.group=void 0,new t.directive(s);var c=new er(s);return c._setDirectives(x(t.directives,function(t){return new t.directive({el:s.el,scope:e,expression:t.expression,attr:t.attr,tpl:i,group:c})})),c})},parseEls:function(t){var e=0,n=this.elStatus;return this.eachDom(t,[],function(t,i){return i.push(t),n[e++].marked&&i},function(t,n){n.push(t),e++})},parseEl:function(t,e){if(h(t)){if(t=z(t),"<"==t.charAt(0)||t.length>30){var n=document.createElement("div");Bn.html(n,t),t=n.childNodes}t=Bn.query(t)}else e&&(t=Bn.cloneNode(t));return t},eachDom:function(t,e,n,i){var r=this;return d(t)?m(t,function(t){r._eachDom(t,e,n,i)}):this._eachDom(t,e,n,i),e},_eachDom:function(t,e,n,i){var r=this;switch(t.nodeType){case 1:(e=n(t,e))&&m(x(t.childNodes,function(t){return t}),function(t){r._eachDom(t,e,n,i)});break;case 3:i(t,e)}},parse:function(){function t(t,e){return t&&(n.push({el:t,marked:e}),i++),t}var e=this,n=[],i=0,r=this.TextParser,o=this.directiveParser;this.elStatus=n,this.bindings=this.eachDom(this.el,[],function(e,n){var r=[],s=!1,c=!1,a=void 0;if(m(e.attributes,function(t){var e=t.name,n=void 0;if(o.isDirective(e)){if(!(n=o.getDirective(e)))return void mi.warn("Directive["+e+"] is undefined");var a={type:_i,index:i,expression:t.value,directive:n,attr:e,block:Ji.isBlock(n),independent:Ji.isIndependent(n)};if(a.independent)return a.block=s=c=!0,r=[a],!1;a.block&&(s=!0),r.push(a)}}),!r.length)return t(e,!0),n;if(a=1==r.length?r[0]:{type:Ei,index:i,directives:r.sort(function(t,e){return Ji.getPriority(e.directive)-Ji.getPriority(t.directive)||0}),block:s,independent:c},a.children=!s&&[],n.push(a),c){var u=Bn.cloneNode(e,!1);Bn.removeAttr(u,r[0].attr),Bn.append(u,x(e.childNodes,function(t){return t})),a.domParser=new Ci(u,(!1))}return t(e,!s),a.children},function(n,o){var s=Bn.text(n),c=new r(s),a=void 0,u=0,h=n.parentNode;for(h.childNodes.length;a=c.nextToken();)u<a.start&&t(e.insertNotBlankText(s.substring(u,a.start),n),!1),o.push({type:wi,index:i,expression:a.token}),t(e.insertText("binding",n),!1),u=a.end;u?(t(e.insertNotBlankText(s.substr(u),n),!1),Bn.remove(n)):t(n,!1)})},insertNotBlankText:function(t,e){return t?this.insertText(t||"&nbsp;",e):void 0},insertText:function(t,e){var n=document.createTextNode(t);return Bn.before(n,e),n}}),Pi={},ji={register:function(t,e){if(Pi[t])throw Error("Translate["+t+"] is existing");p(e)&&(e={transform:e}),e.type=e.type||"normal",Pi[t]=e,mi.debug("register Translate["+e.type+":"+t+"]")},get:function(t){return Pi[t]},transform:function(t,e,n,i,r){var o=Pi[t],s=o&&o.type,c=o&&(r?o.restore:o.transform);return c?n=c.apply(e,[n].concat(i)):mi.warn("Translate["+t+"]."+(r?"Restore":"Transform")+" is undefined"),{stop:"event"==s&&n===!1,data:n,replace:"event"!==s}},restore:function(t,e,n){return this.apply(t,e,n,!1)}},Si={esc:27,tab:9,enter:13,space:32,delete:[8,46],up:38,left:37,right:39,down:40},ki={key:function(t){for(var e=t.which,n=void 0,i=1,r=arguments.length;i<r;i++)if(n=arguments[i],e==(Si[n]||n))return!0;return!1},stop:function(t){t.stopPropagation()},prevent:function(t){t.preventDefault()},self:function(t){return t.target===t.currentTarget}};m(ki,function(t,e){ji.register(e,{type:"event",transform:t})});var Ti={json:{transform:function(t,e){return"string"==typeof t?t:JSON.stringify(t,null,Number(e)||2)},restore:function(t){try{return JSON.parse(t)}catch(e){return t}}},trim:z,capitalize:function(t){return h(t)?t.charAt(0).toUpperCase()+t.slice(1):t},uppercase:function(t){return h(t)?t.toUpperCase():t},lowercase:function(t){return h(t)?t.toLowerCase():t},plural:{transform:function(t){return h(t)?R(t):t},restore:function(t){return h(t)?W(t):t}},singular:{transform:function(t,e){return h(t)?W(t):t},restore:function(t){return h(t)?R(t):t}},unit:{transform:function(t,e,n,i){return i!==!1&&(t=parseInt(t),1!=t&&0!=t&&NaN!=t&&(e=i(e))),n?Z(n,t,e):t+e}},format:{transform:function(t,e){var n=[e,t].concat(Array.prototype.slice.call(arguments,2));return e.apply(_,n)}}};m(Ti,function(t,e){ji.register(e,t)});var Oi=O("argilo,window,document,Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat".split(","),function(){return!0}),Ai=/\s/g,$i=/\n/g,Di=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\"']|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void |(\|\|)/g,Ni=/"(\d+)"/g,Ii=/[^\w$\.](?:(?:this\.)?[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*)*)/g,Li=/^[A-Za-z_$][\w$]*/,Hi=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,Bi=/^(?:true|false|null|undefined|Infinity|NaN)$/,qi=/\s*\|\s*(?:\|\s*)*/,Mi=/\.call|\.apply$/,Fi=/^this\./,Vi={};tn.register("keywords",[],"init",function(t){if(h(t)&&(t=t.replace(/\\s+/g,"").split(",")),!f(t))throw new Error("Invalid keywords: "+t);return Vi=O(t,function(){return!0}),!0});var zi=[],Ri=void 0,Wi=void 0,Xi=void 0,Gi=J({constructor:function(t,e){var n=t.replace(Di,Gt).split(qi),i=n.shift().replace(Ai,""),r=n;this.expr=i.replace(Ni,Yt),this.filterExprs=x(function(t){return t.replace(Ni,Yt)}),this.fullExpr=t,this.params=e,this.executor=Qt(te(i),e),this.filters=ee(r,e),this.identities=A(Ri),this.simplePath=ne(this.expr)},executeFilter:function(t,e,n,i){return m(this.filters,function(r){if(i!==!1||ji.get(r.name)){var o=x(r.argExecutors,function(n){return n.apply(t,e)}),s=void 0;return s=i!==!1?ji.transform(r.name,t,n,o):ji.restore(r.name,t,n,o),(s.replace||s.stop)&&(n=s.data),!s.stop}}),n},restore:function(t,e,n){return this.executeFilter(t,e,n,!1)},execute:function(t,e){return this.executor.apply(t,e)},executeAll:function(t,e){return this.executeFilter(t,e,this.executor.apply(t,e),!0)},isSimple:function(){return this.simplePath}}),Yi={};ie.cache=Yi;var Zi=["$scope","$el","$tpl","$binding"],Ui=J({extend:$n,constructor:function(t){this.super(arguments),this.expression=ie(t.expression,Zi,this.expressionScopeProvider),tn.get($n.commentCfg)&&(this.comment=document.createComment("Text Binding "+t.expression),Bn.before(this.comment,this.el)),this.observeHandler=this.observeHandler.bind(this)},value:function(){var t=this.scope();return this.expression.executeAll(t,[t,this.el,this.tpl,this])},bind:function(){var t=this;m(this.expression.identities,function(e){t.observe(e,t.observeHandler)}),this.update(this.value())},unbind:function(){var t=this;m(this.expression.identities,function(e){t.unobserve(e,t.observeHandler)})},observeHandler:function(t,e){if(this.expression.isSimple()){var n=this.scope();this.update(this.expression.executeFilter(n,[n,this.el,this.tpl,this],e))}else this.update(this.value())},update:function(t){s(t)&&(t=""),t!==Bn.text(this.el)&&Bn.text(this.el,t)}}),Ki={},Ji=J({extend:$n,independent:!1,block:!1,priority:5,constructor:function(t){this.super(arguments),this.expr=t.expression,this.attr=t.attr,this.children=t.children,this.domParser=t.domParser,this.group=t.group,tn.get($n.commentCfg)&&(this.comment=document.createComment("Directive["+this.attr+"]: "+this.expr),Bn.before(this.comment,this.el))},bindChildren:function(){this.children&&m(this.children,function(t){t.bind()})},bind:function(){this.bindChildren()},unbindChildren:function(){this.children&&m(this.children,function(t){t.unbind()})},unbind:function(){this.unbindChildren()},statics:{getPriority:function(t){return t.prototype.priority},isBlock:function(t){return t.prototype.block},isIndependent:function(t){return t.prototype.independent},getDirective:function(t){return Ki[t.toLowerCase()]},isDirective:function(t){return U(t,Ji)},register:function(t,e){var n=void 0;if(t=t.toLowerCase(),l(e))e.extend=e.extend||Ji,n=J(e);else{if(!p(e)||!U(e,Ji))throw TypeError("Invalid Directive["+t+"] "+e);n=e}if(t in Ki)throw new Error("Directive["+t+"] is existing");return Ki[t]=n,mi.debug("register Directive[%s]",t),n}}}),Qi=/^[a-z]|[_-]+[a-zA-Z]/g,tr=J({constructor:function(){this.doned=!1,this.thens=[]},then:function(t){this.doned?t():this.thens.push(t)},done:function(){if(!this.doned){this.doned=!0;for(var t=this.thens,e=0,n=t.length;e<n;e++)t[e]()}},isDone:function(){return this.doned}}),er=J({extend:$n,constructor:function(t){this.super(arguments),this.children=t.children,this.bindedCount=0,this.bindedChildren=!1,this._bind=this._bind.bind(this)},_setDirectives:function(t){this.directives=t,this.directiveCount=t.length},_bind:function(){var t=this.bindedCount;if(t<this.directiveCount){var e=this.directives[t],n=e.bind();this.bindedCount++,n&&n instanceof tr?n.then(this._bind):this._bind()}else this.children&&(m(this.children,function(t){t.bind()}),this.bindedChildren=!0)},bind:function(){this._bind()},unbind:function(){var t=this.directives,e=this.bindedCount;for(this.bindedChildren&&(m(this.children,function(t){t.unbind()}),this.bindedChildren=!1);e--;)t[e].unbind();this.bindedCount=0}});J({constructor:function(t){this.scope=t,this.proxyHandler=this.proxyHandler.bind(this),nt.on(t,this.proxyHandler)},proxyHandler:function(t,e){this.scope=e||t},before:function(t,e){return e!==!1&&this.bind(),Bn.before(this.el,Bn.query(t)),this},after:function(t,e){return e!==!1&&this.bind(),Bn.after(this.el,Bn.query(t)),this},prependTo:function(t,e){return e!==!1&&this.bind(),Bn.prepend(Bn.query(t),this.el),this},appendTo:function(t,e){return e!==!1&&this.bind(),Bn.append(Bn.query(t),this.el),this},remove:function(t){Bn.remove(this.el),t!==!1&&this.unbind()},bind:function(){return this.binded||(m(this.bindings,function(t){t.bind()}),this.binded=!0),this},unbind:function(){return this.binded&&(m(this.bindings,function(t){t.unbind()}),this.binded=!1),this},destroy:function(){nt.un(this.scope,this.proxyHandler),this.binded&&m(this.bindings,function(t){t.unbind(),t.destroy()}),Bn.remove(this.el),this.bindings=void 0,this.el=void 0}});var nr=/^\s*([\s\S]+)\s+in\s+([\S]+)(\s+track\s+by\s+([\S]+))?\s*$/,ir=/^(\(\s*([^,\s]+)(\s*,\s*([\S]+))?\s*\))|([^,\s]+)(\s*,\s*([\S]+))?$/,rr=Ji.register("each",J({extend:Ji,independent:!0,block:!0,priority:10,constructor:function(){this.super(arguments),this.observeHandler=this.observeHandler.bind(this),this.observeLenHandler=this.observeLenHandler.bind(this);var t=this.expr.match(nr);if(!t)throw Error("Invalid Expression["+this.expr+"] on Each Directive");this.scopeExpr=t[2],this.indexExpr=t[4];var e=t[1].match(ir);if(!e)throw Error("Invalid Expression["+t[1]+"] on Each Directive");this.valueAlias=e[2]||e[5],this.keyAlias=e[4]||e[7],this.begin=document.createComment("each begin"),this.end=document.createComment("each end"),Bn.replace(this.el,this.begin),Bn.after(this.end,this.begin),this.el=void 0,this.version=1},update:function(t){var e=this,n=this.domParser,i=this.realScope(),r=this.indexExpr,o=this.used,s=this.version++,c=this.used={},a=x(t,function(t,e){var n=r?L(t,r):e,i=o&&o[n],a=void 0;return i&&i.version===s&&(i=void 0),a=i||{index:n},a.version=s,a.data=nt(t),c[n]=a,a}),u=void 0,h=this.begin;o&&(u=[],m(o,function(t){t.version!=s&&u.push(t)})),m(a,function(r,o){var s=!1;if(!r.scope){var c=u&&u.pop();c?(r.scope=c.scope,r.tpl=c.tpl):(r.scope=e.createScope(i,r.data,r.index),r.tpl=n.complie(r.scope),s=!0)}s||e.initScope(r.scope,r.data,r.index),r.tpl.after(h),h=r.tpl.el,t[o]=nt(r.data)}),u&&m(u,function(t){return t.tpl.destroy()})},createScope:function(t,e,n){var i=ke(t);return i.$parent=t,i.$eachContext=this,this.initScope(i,e,n,!0),i},initScope:function(t,e,n,i){i||(t=nt(t)),t[this.valueAlias]=e,this.keyAlias&&(t[this.keyAlias]=n)},bind:function(){this.observe(this.scopeExpr,this.observeHandler),this.observe(this.scopeExpr+".length",this.observeLenHandler),this.update(this.target())},unbind:function(){this.unobserve(this.scopeExpr,this.observeHandler),this.unobserve(this.scopeExpr+".length",this.observeLenHandler)},target:function(){return this.get(this.scopeExpr)},observeHandler:function(t,e){this.update(e)},observeLenHandler:function(){this.update(this.target())}})),or=["$scope","$el","$event","$tpl","$binding"],sr=J({extend:Ji,constructor:function(){this.super(arguments),this.handler=this.handler.bind(this),this.expression=ie(this.expr,or,this.expressionScopeProvider)},handler:function(t){t.stopPropagation();var e=this.scope(),n=this.expression;if(n.executeFilter(e,[e,this.el,t,this.tpl,this],t)!==!1){var i=n.execute(e,[e,this.el,t,this.tpl,this]);n.isSimple()&&(p(i)?(e=this.exprScope(n.expr),i.call(e,e,this.el,t,this.tpl,this)):mi.warn("Invalid Event Handler:%s",this.expr,i))}},bind:function(){Bn.on(this.el,this.eventType,this.handler),this.super(arguments)},unbind:function(){this.super(arguments),Bn.off(this.el,this.eventType,this.handler)}}),cr=["blur","change","click","dblclick","error","focus","keydown","keypress","keyup","load","mousedown","mousemove","mouseout","mouseover","mouseup","resize","scroll","select","submit","unload",{name:"oninput",eventType:"input propertychange"}],ar=Se(T(cr,function(t){var e=l(t)?t.name:t;return oe(e+"Directive")},function(t){l(t)||(t={eventType:t});var e=t.name||"on"+t.eventType;return t.extend=sr,Ji.register(e,t)}),{EventDirective:sr}),ur=["$scope","$el","$tpl","$binding"],hr=J({extend:Ji,constructor:function(){this.super(arguments),this.observeHandler=this.observeHandler.bind(this),this.expression=ie(this.expr,ur,this.expressionScopeProvider)},realValue:function(){var t=this.scope();return this.expression.execute(t,[t,this.el,this.tpl,this])},value:function(){var t=this.scope();return this.expression.executeAll(t,[t,this.el,this.tpl,this])},listen:function(){var t=this;m(this.expression.identities,function(e){t.observe(e,t.observeHandler);
}),this.update(this.value())},unlisten:function(){var t=this;m(this.expression.identities,function(e){t.unobserve(e,t.observeHandler)})},bind:function(){this.listen(),this.super(arguments)},unbind:function(){this.super(arguments),this.unlisten()},blankValue:function(t){return 0==arguments.length&&(t=this.value()),s(t)?"":t},observeHandler:function(t,e){if(this.expression.isSimple()){var n=this.scope();this.update(this.expression.executeFilter(n,[n,this.el,this.tpl,this],e))}else this.update(this.value())},update:function(t){throw"abstract method"}}),lr="change",fr="input",dr="SELECT",pr="INPUT",vr="TEXTAREA",gr="radio",br="checkbox",yr={text:{block:!0,update:function(t){Bn.text(this.el,this.blankValue(t))}},html:{block:!0,update:function(t){Bn.html(this.el,this.blankValue(t))}},class:{update:function(t){t&&"string"==typeof t?this.handleArray(z(t).split(/\s+/)):t instanceof Array?this.handleArray(t):t&&"object"==typeof t?this.handleObject(t):this.cleanup()},handleObject:function(t){this.cleanup(t,!1);var e=this.prevKeys=[],n=this.el;for(var i in t)t[i]?(Bn.addClass(n,i),e.push(i)):Bn.removeClass(n,i)},handleArray:function(t){this.cleanup(t,!0);var e=this.prevKeys=[],n=this.el;m(t,function(t){t&&(e.push(t),Bn.addClass(n,t))})},cleanup:function(t,e){var i=this.prevKeys;if(i)for(var r=i.length,o=this.el;r--;){var s=i[r];t&&(e?S(t,s)!=-1:n(t,s))||Bn.removeClass(o,s)}}},style:{update:function(t){t&&h(t)?Bn.style(this.el,t):t&&l(t)&&this.handleObject(t)},handleObject:function(t){this.cleanup(t);var e=(this.prevKeys=[],this.el);m(t,function(t,n){Bn.css(e,n,t)})},cleanup:function(t){var e=this.prevKeys;if(e)for(var i=e.length,r=this.el;i--;){var o=e[i];t&&n(t,o)||Bn.css(r,o,"")}}},show:{update:function(t){Bn.css(this.el,"display",t?"":"none")}},hide:{update:function(t){Bn.css(this.el,"display",t?"none":"")}},value:{update:function(t){Bn.val(this.el,this.blankValue(t))}},if:{priority:9,bind:function(){return this.yieId=new tr,this.listen(),this.yieId},unbind:function(){this.yieId||this.unbindChildren(),this.unlisten()},update:function(t){t?(this.yieId&&(this.yieId.done(),this.yieId=void 0,this.bindChildren()),Bn.css(this.el,"display","")):Bn.css(this.el,"display","none")}},checked:{update:function(t){f(t)?Bn.checked(this.el,S(t,Bn.val(this.el))):Bn.checked(this.el,!!t)}},selected:{update:function(t){}},focus:{update:function(t){t&&Bn.focus(this.el)}},input:{priority:4,constructor:function(){if(this.super(arguments),!this.expression.isSimple())throw TypeError("Invalid Expression["+this.expression.expr+"] on InputDirective");this.onChange=this.onChange.bind(this);var t=this.tag=this.el.tagName;switch(t){case dr:this.event=lr;break;case pr:var e=this.type=this.el.type;this.event=e==gr||e==br?lr:fr;break;case vr:throw TypeError("Directive[input] not support "+t);default:throw TypeError("Directive[input] not support "+t)}},bind:function(){Bn.on(this.el,this.event,this.onChange),this.super()},unbind:function(){this.super(),Bn.off(this.el,this.event,this.onChange)},setRealValue:function(t){this.set(this.expression.expr,t)},setValue:function(t){var e=this.scope();this.setRealValue(this.expression.restore(e,[e,this.el,this.tpl,this],t))},onChange:function(t){var e=this.elVal(),n=this.val;e!=n&&this.setValue(e),t.stopPropagation()},update:function(t){var e=this.blankValue(t);e!=this.val&&this.elVal(this.val=e)},elVal:function(t){var e=this.tag;switch(e){case dr:break;case pr:var n=this.type;if(n==gr||n==br){if(0==arguments.length)return Bn.checked(this.el)?Bn.val(this.el):void 0;var i=void 0;i=t==Bn.val(this.el),Bn.checked(this.el)!=i&&Bn.checked(this.el,i)}else{if(0==arguments.length)return Bn.val(this.el);t!=Bn.val(this.el)&&Bn.val(this.el,t)}break;case vr:throw TypeError("Directive[input] not support "+e);default:throw TypeError("Directive[input] not support "+e)}}}},mr=Se(T(yr,function(t,e){return oe(e+"Directive")},function(t,e){return t.extend=hr,Ji.register(e,t)}),{SimpleDirective:hr}),xr=Se({EachDirective:rr},ar,mr),wr=new Je(tn,en),_r=0,Er={},Cr=!1,Pr=J({statics:{get:function(t){return Er[t]}},constructor:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(Cr||(tn.nextStatus(),Cr=!0),this.id=e.id||_r++,n(Er,this.id))throw new Error("Existing Template["+this.id+"]");this.parser=new Ci(t),Er[this.id]=this},complie:function(t){return this.parser.complie(t)}}),jr=Object.freeze({Template:Pr,Directive:Ji,directives:xr,DirectiveParser:Nn,TextParser:Ln,expression:ie,configuration:wr}),Sr=Pr,kr=ilos,Tr=kr.assignIf;return Tr(se,jr,An,Qe,Bn),se});
//# sourceMappingURL=argilo.min.js.map