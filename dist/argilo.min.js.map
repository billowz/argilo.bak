{"version":3,"file":"argilo.min.js","sources":["../src/helper/global.js","../src/helper/constants.js","../src/helper/is.js","../src/helper/function.js","../src/polyfill/function.js","../src/polyfill/query.js","../src/helper/string.js","../src/helper/ownProp.js","../src/helper/prototypeOf.js","../src/helper/create.js","../src/helper/each.js","../src/helper/map.js","../src/helper/reg.js","../src/helper/util.js","../node_modules/.registry.npm.taobao.org/devlevel/0.0.2/node_modules/devlevel/dist/devlevel.es.js","../src/helper/defineProperty.js","../src/helper/assign.js","../src/helper/extend.js","../src/helper/inherit.js","../src/helper/class.js","../src/helper/filter.js","../src/helper/find.js","../src/helper/indexOf.js","../src/helper/obj2array.js","../src/common/List.js","../src/common/FnList.js","../src/common/nextTick.js","../src/common/format.js","../src/common/path.js","../src/common/ASTBuilder.js","../src/observer/observer.js","../src/observer/es6.js","../src/observer/es5.js","../src/observer/vb.js","../src/observer/each.js","../src/observer/map.js","../src/observer/filter.js","../src/observer/find.js","../src/observer/indexOf.js","../src/observer/assign.js","../src/observer/obj2array.js","../src/vnode/VNode.js","../src/vnode/VText.js","../src/Expression.js","../src/vnode/expression/identityHandler.js","../src/vnode/expression/TransformExpression.js","../src/vnode/expression/transforms.js","../src/vnode/VBindingText.js","../src/vnode/VElement.js","../src/vnode/VComplexElement.js","../src/vnode/Compontent.js","../src/vnode/VComment.js","../src/vnode/Directive.js","../src/vnode/index.js","../src/vdom/util/util.js","../src/vdom/HTMLMixin.js","../src/vdom/ElementMixin.js","../src/vdom/util/hook.js","../src/vdom/ElementAttrMixin.js","../src/vdom/ElementClassMixin.js","../src/vdom/util/index.js","../src/vdom/ElementStyleMixin.js","../src/vdom/ElementValueMixin.js","../src/vdom/ElementEventMixin.js","../src/vdom/Element.js","../src/vdom/ComplexElement.js","../src/vdom/Compontent.js","../src/vdom/Comment.js","../src/vdom/Text.js","../src/vdom/elements.js","../src/vdom/expression/EventExpression.js","../src/vdom/expression/eventFilters.js","../src/vdom/directives/DomDirective.js","../src/vdom/directives/ExpressionDirective.js","../src/vdom/directives/EventDirective.js","../src/vdom/directives/eventDirectives.js","../src/vdom/directives/directives.js","../src/compile/NodeParser.js"],"sourcesContent":["/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:12:18\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-18 11:12:18\n */\nconst __global = window || global\nexport default __global\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:25:33\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:25:33\n */\n\nexport const CONSTRUCTOR = 'constructor'\nexport const PROTOTYPE = 'prototype'\nexport const PROTO = '__proto__'\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-04-26 11:34:06\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-07 16:47:11\n */\n\nimport global from './global'\nimport { CONSTRUCTOR } from './constants'\n\nconst BOOL = 'boolean',\n\tFN = 'function',\n\tNUM = 'number',\n\tSTR = 'string'\n\n/**\n * o1 === o2 || NaN === NaN\n *\n * @param {*} o1\n * @param {*} o2\n */\nexport function eq(o1, o2) {\n\treturn o1 === o2 || (o1 !== o1 && o2 !== o2)\n}\n\nexport function isNull(o) {\n\treturn o === null\n}\n\nexport function isUndef(o) {\n\treturn o === undefined\n}\n\nexport function isNil(o) {\n\treturn o === null || o === undefined\n}\n\nexport function isFn(fn) {\n\treturn typeof fn === FN\n}\n\nexport function is(o, Type) {\n\tif (o === undefined || o === null) return false\n\tconst c = o[CONSTRUCTOR]\n\tif (Type[CONSTRUCTOR] === Array) {\n\t\tif (c) {\n\t\t\tfor (var i = 0, l = Type.length; i < l; i++)\n\t\t\t\tif (c === Type[i]) return true\n\t\t} else {\n\t\t\tfor (var i = 0, l = Type.length; i < l; i++)\n\t\t\t\tif (Type[i] === Object) return true\n\t\t}\n\t\treturn false\n\t}\n\treturn c ? c === Type : Type === Object\n}\n\n// TODO object has constructor property\nexport function isObj(o) {\n\tif (o === undefined || o === null) return false\n\tconst C = o[CONSTRUCTOR]\n\treturn C === undefined || C === Object\n}\n\nfunction mkIs(Type) {\n\treturn o => o !== undefined && o !== null && o[CONSTRUCTOR] === Type\n}\n\nexport const isBool = mkIs(Boolean)\n\nexport const isNum = mkIs(Number)\n\nexport const isStr = mkIs(String)\n\nexport const isDate = mkIs(Date)\n\nexport const isReg = mkIs(RegExp)\n\nexport const isArray = Array.isArray || mkIs(Array)\n\nexport const isInt = function isInt(o) {\n\treturn o === 0 || (o ? o[CONSTRUCTOR] === Number && parseInt(o) === o.valueOf() : false)\n}\n\nexport const isTypedArray = ArrayBuffer ? ArrayBuffer.isView : () => false\n\nexport function isArrayLike(o) {\n\tif (o === undefined || o === null) return false\n\tvar C = o[CONSTRUCTOR]\n\tswitch (C) {\n\tcase undefined:\n\t\tbreak\n\tcase Array:\n\tcase String:\n\tcase global.NodeList:\n\tcase global.HTMLCollection:\n\tcase global.Int8Array:\n\tcase global.Uint8Array:\n\tcase global.Int16Array:\n\tcase global.Uint16Array:\n\tcase global.Int32Array:\n\tcase global.Uint32Array:\n\tcase global.Float32Array:\n\tcase global.Float64Array:\n\t\treturn true\n\t}\n\tconst len = o.length\n\treturn len !== undefined && typeof len === NUM && (len === 0 || (len > 0 && parseInt(len) === len && (len - 1) in o))\n}\n\nexport function isInstOf(obj, cls) {\n\treturn obj !== undefined && obj !== null && obj instanceof cls\n}\n\nexport function isPrimitive(o) {\n\tif (o === undefined || o === null) return true\n\tswitch (typeof o) {\n\tcase BOOL:\n\tcase NUM:\n\tcase STR:\n\tcase FN:\n\t\treturn true\n\t}\n\treturn false\n}\n\nconst blankStrReg = /^\\s*$/\nexport function isBlank(o) {\n\tif (!o) return true\n\tif (o[CONSTRUCTOR] === String)\n\t\treturn blankStrReg.test(o)\n\treturn o.length === 0\n}\n","/*\n * Function Util\n * - apply\n * - createFn\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-04-26 11:34:39\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-28 15:22:37\n */\n\nimport { isStr } from './is'\n\nfunction applyBuilder(max_args, scope, offset) {\n\tscope = scope ? 'scope' : ''\n\toffset = offset ? 'offset' : ''\n\tconst args = new Array(max_args + 1)\n\tconst cases = new Array(max_args + 1)\n\tfor (var i = 0; i <= max_args; i++) {\n\t\targs[i] = `${(i || scope) ? ', ' : ''}args[${offset ? `offset${i ? ' + ' + i: ''}` : i}]`\n\t\tcases[i] = `case ${i}: return fn${scope && '.call'}(${scope}${args.slice(0, i).join('')});`\n\t}\n\treturn Function(`return function(fn, ${scope && (scope + ', ')}args${offset && ', offset, len'}){\nswitch(${offset ? 'len': 'args.length'}){\n${cases.join('\\n')}\n}\n${offset && `var arr = new Array(len);\nfor(var i=0; i<len; i++) arr[i] = arr[offset + i];`}\nreturn fn.apply(${scope || 'null'}, ${offset ? 'arr':'args'});\n}`)()\n}\n\nexport const applyScope = applyBuilder(8, 1, 0)\nexport const applyNoScope = applyBuilder(8, 0, 0)\n\nexport const applyScopeN = applyBuilder(8, 1, 1)\nexport const applyNoScopeN = applyBuilder(8, 0, 1)\n\n\nexport function apply(fn, scope, args) {\n\tswitch (scope) {\n\tcase undefined:\n\tcase null:\n\t\treturn applyNoScope(fn, args)\n\t}\n\treturn applyScope(fn, scope, args)\n}\n\nexport function applyN(fn, scope, args, offset, len) {\n\tswitch (scope) {\n\tcase undefined:\n\tcase null:\n\t\treturn applyNoScopeN(fn, args, offset, len)\n\t}\n\treturn applyScopeN(fn, scope, args, offset, len)\n}\n\nexport function createFn(name, args, body) {\n\tconst l = arguments.length\n\tif (l === 1) {\n\t\tbody = name\n\t\tname = args = 0\n\t} else if (l === 2) {\n\t\tbody = args\n\t\tif (isStr(name)) {\n\t\t\targs = 0\n\t\t} else {\n\t\t\targs = name\n\t\t\tname = 0\n\t\t}\n\t}\n\treturn name ?\n\t\tFunction(`return function ${name}(${args ? args.join(', ') : ''}){${body}}`)() :\n\t\tapplyScope(Function, Function, args ? args.concat(body) : [body])\n}\n\nconst varGenReg = /\\$\\d+$/\nexport function fnName(fn) {\n\tconst name = fn.name\n\treturn name ? name.replace(varGenReg, '') : ''\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:35:27\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:35:27\n */\nimport { apply } from '../helper/function'\nimport { PROTOTYPE } from '../helper/constants'\n\nconst funcProto = Function[PROTOTYPE]\nif (!funcProto.bind) {\n\tfuncProto.bind = function bind(scope) {\n\t\tconst fn = this,\n\t\t\tlen = arguments.length - 1\n\t\tif (len > 0) {\n\t\t\tvar args = new Array(len),\n\t\t\t\ti = 0\n\t\t\tfor (; i < len; i++)\n\t\t\t\targs[i] = arguments[i + 1]\n\n\t\t\treturn function () {\n\t\t\t\tlet l = arguments.length,\n\t\t\t\t\ti = 0;\n\n\t\t\t\targs.length = len + l\n\t\t\t\tfor (; i < l; i++)\n\t\t\t\t\targs[len + i] = arguments[i]\n\t\t\t\tlet rs = apply(fn, scope, args)\n\t\t\t\tl && (args.length = len)\n\t\t\t\treturn rs\n\t\t\t}\n\t\t}\n\t\treturn function () {\n\t\t\treturn apply(fn, scope, arguments)\n\t\t}\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:35:31\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 11:07:38\n */\nconst QUERY_SELECTOR = 'querySelector',\n\tQUERY_SELECTOR_ALL = QUERY_SELECTOR + 'All',\n\tQUERY_RESULTS = '__queryResults'\n\nif (!document[QUERY_SELECTOR_ALL]) {\n\tdocument[QUERY_RESULTS] = []\n\tdocument[QUERY_SELECTOR_ALL] = function (selector) {\n\t\tconst head = document.documentElement.firstChild,\n\t\t\tstyleTag = document.createElement('STYLE')\n\n\t\thead.appendChild(styleTag)\n\t\tif (styleTag.styleSheet) { // for IE\n\t\t\tstyleTag.styleSheet.cssText = selector + `{x:expression(document[${QUERY_RESULTS}].push(this))}`\n\t\t} else { // others\n\t\t\tlet textnode = document.createTextNode(selector + `{x:expression(document[QUERY_RESULTS].push(this))}`)\n\t\t\tstyleTag.appendChild(textnode)\n\t\t}\n\t\twindow.scrollBy(0, 0)\n\t\tconst ret = document[QUERY_RESULTS]\n\t\tdocument[QUERY_RESULTS] = []\n\t\treturn ret\n\t}\n}\nif (!document[QUERY_SELECTOR]) {\n\tdocument[QUERY_SELECTOR] = function (selectors) {\n\t\tconst elements = document[QUERY_SELECTOR_ALL](selectors)\n\t\treturn elements.length ? elements[0] : null\n\t}\n}\n","import { isNil } from \"./is\"\n\n/*\n * String Util\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-04-26 18:30:18\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-08 16:57:52\n */\nconst trimReg = /(^\\s+)|(\\s+$)/g\nexport function trim(str) {\n\treturn str.replace(trimReg, '')\n}\nconst firstLetterReg = /^[a-zA-Z]/\n\nfunction upperHandler(m) {\n\treturn m.toUpperCase()\n}\nexport function upperFirst(str) {\n\treturn str.replace(firstLetterReg, upperHandler)\n}\nexport function strval(obj) {\n\treturn isNil(obj) ? '' : String(obj)\n}\n\nexport function charCode(str, index = 0) {\n\treturn str.charCodeAt(index)\n}\n\nexport function genCharCodes(start, end) {\n\tstart = charCode(start)\n\tend = charCode(end)\n\tconst codes = new Array(end - start + 1)\n\tfor (let i = start; i <= end; i++)\n\t\tcodes[i - start] = start\n\treturn codes\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-07-25 15:23:22\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:29:48\n */\n import { PROTOTYPE } from './constants'\n\nconst __hasOwn = Object[PROTOTYPE].hasOwnProperty\nexport function hasOwnProp(obj, prop) {\n\treturn __hasOwn.call(obj, prop)\n}\n\nexport function getOwnProp(obj, prop, defaultVal) {\n\treturn (obj && __hasOwn.call(obj, prop)) ? obj[prop] : defaultVal\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:12:57\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:01:15\n */\nimport { hasOwnProp } from './ownProp'\nimport { CONSTRUCTOR, PROTOTYPE, PROTO } from './constants'\n\nconst __getProto = Object.getPrototypeOf,\n\t__setProto = Object.setPrototypeOf\n\nexport const prototypeOfSupport = !!__setProto\n\nexport const prototypeOf = __setProto ? __getProto : __getProto ? function getPrototypeOf(obj) {\n\treturn obj[PROTO] || __getProto(obj)\n} : function getPrototypeOf(obj) {\n\treturn hasOwnProp(obj, PROTO) ? obj[PROTO] : obj[CONSTRUCTOR][PROTOTYPE]\n}\n\nexport const setPrototypeOf = __setProto || function getPrototypeOf(obj, proto) {\n\treturn obj[PROTO] = proto\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-07-25 15:24:51\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 11:56:38\n */\nimport { setPrototypeOf } from './prototypeOf'\nimport { CONSTRUCTOR,PROTOTYPE } from './constants'\n\nfunction FN() {}\n\nfunction doCreate(parent, props) {\n\tFN[PROTOTYPE] = parent\n\tconst obj = new FN()\n\tFN[PROTOTYPE] = undefined\n\tif (props) {\n\t\tvar k, v\n\t\tfor (k in props) {\n\t\t\tv = props[k]\n\t\t\tif (v && v[CONSTRUCTOR] === Object)\n\t\t\t\tobj[k] = v.value\n\t\t}\n\t}\n\treturn obj\n}\n\nexport default Object.create || (Object.getPrototypeOf ? doCreate : function create(parent, props) {\n\tconst obj = doCreate(parent, props)\n\tsetPrototypeOf(obj, parent)\n\treturn obj\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:11:27\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-18 11:11:27\n */\nimport { isArrayLike, isStr } from './is'\nimport { hasOwnProp } from './ownProp'\n\nexport const STOP = new String('STOP')\n\nexport const eachArray = __mkEachArrayLike(arrayValueHandler),\n\teachStr = __mkEachArrayLike(strValueHandler),\n\treachArray = __mkREachArrayLike(arrayValueHandler),\n\treachStr = __mkREachArrayLike(strValueHandler),\n\teach = __mkEach(eachStr, eachArray, eachObj),\n\treach = __mkEach(reachStr, reachArray, eachObj)\n\nexport function eachObj(obj, callback, scope, own) {\n\tif (scope) callback = callback.bind(scope)\n\tlet key\n\tif (own === false) {\n\t\tfor (key in obj)\n\t\t\tif (callback(obj[key], key, obj) === STOP)\n\t\t\t\treturn key\n\t} else {\n\t\tfor (key in obj)\n\t\t\tif (hasOwnProp(obj, key) && callback(obj[key], key, obj) === STOP)\n\t\t\t\treturn key\n\t}\n}\n\nexport function __mkEach(eachStr, eachArray, eachObj) {\n\treturn function (obj, callback, scope, own) {\n\t\tconst arrayType = isArrayLike(obj)\n\t\treturn (\n\t\t\tarrayType ?\n\t\t\tarrayType === String ? eachStr : eachArray :\n\t\t\teachObj\n\t\t)(obj, callback, scope, own)\n\t}\n}\n\nexport function __mkEachArrayLike(valueHandler) {\n\treturn function (array, callback, scope) {\n\t\tif (scope) callback = callback.bind(scope)\n\t\tfor (let i = 0, l = array.length; i < l; i++)\n\t\t\tif (callback(valueHandler(array, i), i, array) === STOP)\n\t\t\t\treturn i\n\t}\n}\n\nexport function __mkREachArrayLike(valueHandler) {\n\treturn function (array, callback, scope) {\n\t\tif (scope) callback = callback.bind(scope)\n\t\tlet i = array.length\n\t\twhile (i--) {\n\t\t\tif (callback(valueHandler(array, i), i, array) === STOP)\n\t\t\t\treturn i\n\t\t}\n\t}\n}\n\nfunction arrayValueHandler(array, i) {\n\treturn array[i]\n}\n\nfunction strValueHandler(str, i) {\n\treturn str.charAt(i)\n}\n\nexport function eachChain(array, v, callback, scope) {\n\tif (scope) callback = callback.bind(scope)\n\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\tv = callback(array[i], i, v, array)\n\t\tif (v === STOP) return STOP\n\t}\n\treturn v\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:12:45\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:29:34\n */\nimport create from './create'\nimport { each, eachArray, eachStr, eachObj, STOP, __mkEach } from './each'\n\nexport const SKIP = new String('SKIP')\n\nexport const mapArray = __mkMapArrayLike(eachArray),\n\tmapStr = __mkMapArrayLike(eachStr),\n\tmapObj = __mkMapObj(eachObj),\n\tmap = __mkEach(mapStr, mapArray, mapObj)\n\nexport function __mkMapArrayLike(each) {\n\treturn function (array, callback, scope) {\n\t\tconst l = array.length,\n\t\t\tcopy = new Array(l)\n\t\tlet j = 0\n\n\t\tif (!callback) callback = defaultMapCallback\n\t\telse if (scope) callback = callback.bind(scope)\n\n\t\teach(array, (val, i, array) => {\n\t\t\tconst ret = callback(val, i, array)\n\t\t\tif (ret === STOP || ret === SKIP)\n\t\t\t\treturn ret\n\t\t\tcopy[j++] = ret\n\t\t})\n\t\tif (j !== l)\n\t\t\tcopy.length = j\n\t\treturn copy\n\t}\n}\n\nexport function __mkMapObj(each) {\n\treturn function (obj, callback, scope, own) {\n\t\tconst copy = create(null)\n\n\t\tif (!callback) callback = defaultMapCallback\n\t\telse if (scope) callback = callback.bind(scope)\n\n\t\teach(obj, (val, key, obj) => {\n\t\t\tconst ret = callback(val, key, obj)\n\t\t\tif (ret === STOP || ret === SKIP)\n\t\t\t\treturn ret\n\t\t\tcopy[key] = ret\n\t\t}, undefined, own)\n\t\treturn copy\n\t}\n}\n\nfunction defaultMapCallback(v) {\n\treturn v\n}\n","import { mapArray } from './map'\nimport { isBool } from './is'\n\nconst REG_ESCAPE = /[-\\/\\\\^$*+?.()|[\\]{}]/g\nexport function reEscape(s) {\n\treturn s.replace(REG_ESCAPE, '\\\\$&')\n}\n\nexport function reUnion(regexps) {\n\tif (!regexps.length) return '(?!)'\n\treturn `(?:${mapArray(regexps, s => `(?:${s})`).join('|')})`\n}\n\nexport const regStickySupport = isBool(/(?:)/.sticky)\nexport const regUnicodeSupport = isBool(/(?:)/.unicode)\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:13:03\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-10-29 18:10:39\n */\nimport create from './create'\nimport { isFn, isArray, isStr } from './is'\n\nexport function array2obj(array, keyHandler, valueHandler = arrayElementHandler) {\n\tconst dist = create(null)\n\tfor (let i = 0, l = array.length, v; i < l; i++) {\n\t\tv = array[i]\n\t\tdist[keyHandler(v, i, array)] = valueHandler(v, i, array)\n\t}\n\treturn dist\n}\n\nexport function makeMap(props, split, val) {\n\tconst arglen = arguments.length\n\tif (arglen < 3) {\n\t\tif (arglen === 2) {\n\t\t\tval = split\n\t\t} else {\n\t\t\tval = true\n\t\t}\n\t\tsplit = ','\n\t}\n\n\tif (isStr(props)) {\n\t\tif (!props) return create(null)\n\t\tprops = props.split(split)\n\t}\n\tconst valueHandler = isFn(val) ? val : () => val\n\treturn array2obj(props, arrayElementHandler, valueHandler)\n}\n\nfunction arrayElementHandler(v) {\n\treturn v\n}\n\nexport function makeArray(array, split, map) {\n\tconst arglen = arguments.length\n\tif (arglen < 3) {\n\t\tif (arglen === 2)\n\t\t\tmap = split\n\t\tsplit = ','\n\t}\n\n\tif (isStr(array)) {\n\t\tif (!array) return []\n\t\tarray = array.split(split)\n\t}\n\tif (map)\n\t\tfor (var i = 0, l = array.length; i < l; i++)\n\t\t\tarray[i] = map(array[i], i)\n\treturn array\n}\n\nexport function cached(cacheKey, cacheVal) {\n\tconst cache = create(null)\n\treturn function () {\n\t\tconst key = applyNoScope(cacheKey, arguments)\n\t\tlet val = cache[key]\n\t\tif (!val)\n\t\t\tcache[key] = val = applyNoScope(cacheVal, arguments)\n\t\treturn val\n\t}\n}\n","var toStr = Object.prototype.toString;\nvar conditions = {};\nvar UNDEF = 'undefined',\n    NUL = 'null',\n    INF = 'Infinity',\n    ARR = 'Array';\nvar byteArray = ['Uint8Array', 'Int8Array'];\nvar shortArray = ['Uint16Array', 'Int16Array'];\nvar intArray = ['Uint32Array', 'Int32Array'];\nvar floatArray = ['Float32Array', 'Float64Array'];\nvar arrayBuffer = 'ArrayBuffer';\nvar typedArrays = byteArray.concat(shortArray).concat(intArray).concat(floatArray).concat(arrayBuffer);\n\naddTypeCon({\n\tbool: 'Boolean',\n\tnum: 'Number',\n\tstr: 'String',\n\tfn: 'Function',\n\tdate: 'Date',\n\treg: 'RegExp',\n\tobj: 'Object',\n\terr: 'Error',\n\tarray: ARR,\n\tarrayLike: [[ARR, 'Arguments', 'NodeList'].concat(typedArrays)],\n\tbyteArray: [byteArray],\n\tshortArray: [shortArray],\n\tintArray: [intArray],\n\tfloatArray: [floatArray],\n\ttypedArrays: [typedArrays]\n});\neach(typedArrays, function (t) {\n\treturn addTypeCon(reFirst(t), t);\n});\naddValueCon({\n\tnil: [[UNDEF, NUL]],\n\tnul: NUL,\n\tdef: [UNDEF, 1, 1],\n\tundef: [UNDEF, 0, 1],\n\tNaN: ['o', 1],\n\tinfinite: [INF, 0, 1]\n});\naddCon({\n\tfinite: [['o'], function (o) {\n\t\treturn o === o && o !== Infinity && toStr.call(o) === '[object Number]';\n\t}],\n\teq: [['a', 'b'], function (a, b) {\n\t\treturn a === b || a !== a && b !== b;\n\t}],\n\tnotEq: [['a', 'b'], function (a, b) {\n\t\treturn a !== b && (a === a || b === b);\n\t}]\n});\n\nfunction addTypeCon(name, values, notEq, notMakeNot) {\n\t_addCon(arguments, addTypeCon, function () {\n\t\treturn addEqCon(name, [toStr], ['o'], '$0.call(o)', map(arrayVal(values), function (v) {\n\t\t\treturn '\\'[object ' + v + ']\\'';\n\t\t}), notEq, notMakeNot);\n\t});\n}\n\nfunction addValueCon(name, values, notEq, notMakeNot) {\n\t_addCon(arguments, addValueCon, function () {\n\t\treturn addEqCon(name, undefined, ['o'], 'o', values, notEq, notMakeNot);\n\t});\n}\n\nfunction _addCon(args, thisCb, cb) {\n\targs.length === 1 ? each(args[0], function (v, n) {\n\t\treturn thisCb.apply(null, [n].concat(v));\n\t}) : cb();\n}\n\nfunction addEqCon(name) {\n\tvar injects = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\tvar args = arguments[2];\n\tvar conCode = arguments[3];\n\tvar values = arguments[4];\n\tvar notEq = arguments[5];\n\tvar notMakeNot = arguments[6];\n\n\tvalues = arrayVal(values);\n\tvar params = map(injects, function (v, i) {\n\t\treturn '$' + i;\n\t});\n\n\tparams.push('return function(' + args.join(',') + '){\\n' + (values.length > 1 ? 'switch(' + conCode + '){\\ncase ' + values.join(':\\n\\t\\tcase ') + ': return ' + !notEq + ';\\ndefault: return ' + !!notEq + ';\\n}' : 'return (' + conCode + ')' + (notEq ? '!' : '=') + '==' + values[0] + ';') + '\\n    }');\n\n\taddCon(name, args, Function.apply(Function, params).apply(null, injects));\n\tif (!notMakeNot) addEqCon('not' + reFirst(name, 1), injects, args, conCode, values, !notEq, 1);\n}\n\nfunction addCon(name, args, fn) {\n\tif (arguments.length === 1) each(name, function (v, n) {\n\t\tconditions[n] = v;\n\t});else conditions[name] = [args, fn];\n}\n\nfunction _if(condition, callback, isNot) {\n\tvar args = condition[0];\n\treturn new Function('condition', 'callback', 'slice', 'return function(' + args.join(',') + '){\\nif(' + (isNot ? '!' : '') + 'condition(' + args.join(',') + '))\\n    callback(slice(arguments, ' + args.length + '));\\n}')(condition[1], callback, sliceArgs);\n}\n\nfunction assignCons(obj, callback, isNot) {\n\tfor (var name in conditions) {\n\t\tobj[name] = _if(conditions[name], callback, isNot);\n\t}return obj;\n}\n\nfunction callBy(condition, cb) {\n\tvar len = arguments.length;\n\tif (len > 1) condition && cb();else if (len) condition();\n}\nfunction exception(error) {\n\tif (typeof error === 'function') error = error();\n\tif (error instanceof Error) throw error;\n\tthrow new Error(error);\n}\n\nfunction assert(condition, error) {\n\tif (!condition) exception(error);\n}\nassignCons(assert, function (args) {\n\treturn exception(args[0]);\n}, 1);\nassert.by = callBy;\n\nvar currentLevel = 1;\nvar logs = [];\nvar logMap = {};\n\nvar debug = createLog('debug', 0);\nvar info = createLog('info', 1);\nvar warn = createLog('warn', 2);\nvar error = createLog('error', 3);\n\nfunction createLog(name, level) {\n\tfunction log() {\n\t\tlevel >= currentLevel && log.print.apply(this, arguments);\n\t}\n\tlog.level = level;\n\tlog.methods = getLogMethods(name, log);\n\tlogs[level] = log;\n\tlogMap[name] = log;\n\treturn bindLog(log);\n}\n\nfunction getLogMethods(name, log) {\n\tvar mark = '[' + name + ']: ';\n\treturn assignCons({\n\t\tby: callBy,\n\t\twhen: function when(condition) {\n\t\t\tcondition && log.print.apply(log, sliceArgs(arguments, 1));\n\t\t},\n\t\tprint: function print(msg) {\n\t\t\tif (arguments.length) {\n\t\t\t\tvar args = map(arguments, function (v) {\n\t\t\t\t\treturn v;\n\t\t\t\t});\n\t\t\t\tif (typeof msg === 'string') {\n\t\t\t\t\targs[0] = mark + args[0];\n\t\t\t\t} else {\n\t\t\t\t\targs.unshift(mark);\n\t\t\t\t}\n\t\t\t\tlog.__print(args, name);\n\t\t\t}\n\t\t}\n\t}, function (args) {\n\t\treturn log.print.apply(log, args);\n\t});\n}\n\nfunction empty() {}\n\nfunction bindLog(log) {\n\tvar level = log.level,\n\t    methods = log.methods;\n\n\tfor (var method in methods) {\n\t\tlog[method] = level < currentLevel ? empty : methods[method];\n\t}return log;\n}\n\nfunction setLogLevel(level) {\n\tvar log = logMap[level];\n\tassert(log, 'invalid log level: ' + level);\n\tlevel = log.level;\n\tif (level !== currentLevel) {\n\t\tcurrentLevel = level;\n\t\teach(logs, bindLog);\n\t}\n}\n\nfunction setLogConsole(console, applyArgs) {\n\teach(logs, function (log) {\n\t\tlog.__print = applyArgs ? function (args, name) {\n\t\t\tconsole[name].apply(console, args);\n\t\t} : function (args, name) {\n\t\t\treturn console[name](args, name);\n\t\t};\n\t});\n}\nfunction isLog(level) {\n\tvar log = logMap[level];\n\tassert(log, 'invalid log level: ' + level);\n\treturn log.level >= currentLevel;\n}\n\nif (!console) console = {\n\tlog: function log() {}\n};\nif (!console.info) console.info = console.log;\nsetLogConsole(console, 1);\n\nfunction sliceArgs(args, offset) {\n\tvar len = args.length;\n\tvar arr = new Array(len - offset);\n\twhile (len-- > offset) {\n\t\tarr[len - offset] = args[len];\n\t}return arr;\n}\n\nfunction each(obj, cb) {\n\tif (obj instanceof Array) {\n\t\tvar i = obj.length;\n\t\twhile (i--) {\n\t\t\tcb(obj[i], i);\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tcb(obj[key], key);\n\t\t}\n\t}\n}\n\nfunction map(arr, cb) {\n\tvar i = arr.length,\n\t    ret = new Array(i);\n\twhile (i--) {\n\t\tret[i] = cb(arr[i], i);\n\t}return ret;\n}\n\nfunction reFirst(str, upper) {\n\treturn str.replace(/^[a-zA-Z]/, upper ? function (o) {\n\t\treturn o.toUpperCase();\n\t} : function (o) {\n\t\treturn o.toLowerCase();\n\t});\n}\n\nfunction arrayVal(val) {\n\treturn val instanceof Array ? val : [val];\n}\n\nexport { exception, assert, debug, info, warn, error, logMap as log, setLogLevel, setLogConsole, isLog, sliceArgs, each, map, reFirst, arrayVal };\n//# sourceMappingURL=devlevel.es.js.map\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 11:52:21\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 11:52:21\n */\nimport { assert } from 'devlevel'\n\nlet __defProp = Object.defineProperty\nexport const defPropSupport = __defProp && (function () {\n\ttry {\n\t\tvar val, obj = {}\n\t\t__defProp(obj, 's', {\n\t\t\tget() {\n\t\t\t\treturn val\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tval = value\n\t\t\t}\n\t\t})\n\t\tobj.s = 1\n\t\treturn obj.s === val\n\t} catch (e) {}\n})()\nif (!defPropSupport) {\n\t__defProp = function (obj, prop, desc) {\n\t\tassert(desc.get || desc.set, 'not support getter/setter on defineProperty')\n\t\tobj[prop] = desc.value\n\t\treturn obj\n\t}\n}\n\nexport const defProp = __defProp\n\nexport const defPropValue = defPropSupport ? function (obj, prop, value, configurable, writeable, enumerable) {\n\t__defProp(obj, prop, {\n\t\tvalue,\n\t\tconfigurable: configurable || false,\n\t\twriteable: writeable || false,\n\t\tenumerable: enumerable || false\n\t})\n\treturn value\n} : function (obj, prop, value) {\n\tobj[prop] = value\n\treturn value\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-07-25 15:42:57\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:25:44\n */\nimport create from './create'\nimport { hasOwnProp } from './ownProp'\n\nexport function __assign(dist, overrides, offset = 0, filter, data) {\n\tif (!dist) dist = {}\n\tlet i = offset,\n\t\tl = overrides.length,\n\t\toverride, prop\n\tfor (; i < l; i++) {\n\t\tif ((override = overrides[i]))\n\t\t\tfor (prop in override)\n\t\t\t\tif (filter(prop, dist, override, data))\n\t\t\t\t\tdist[prop] = override[prop]\n\t}\n\treturn dist\n}\n\nexport function assign(obj) {\n\treturn __assign(obj, arguments, 1, __assignFilter)\n}\n\nexport function __assignFilter(prop, dist, override) {\n\treturn hasOwnProp(override, prop)\n}\n\nexport function assignIf(obj) {\n\treturn __assign(obj, arguments, 1, __assignIfFilter)\n}\n\nexport function __assignIfFilter(prop, dist, override) {\n\treturn hasOwnProp(override, prop) && !hasOwnProp(dist, prop)\n}\n\nexport function assignBy(obj, filter) {\n\treturn __assign(obj, arguments, 2, __assignUserFilter, filter)\n}\n\nexport function __assignUserFilter(prop, dist, override, cb) {\n\treturn hasOwnProp(override, prop) && cb(prop, dist, override)\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:11:47\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 11:57:11\n */\nimport { assert } from 'devlevel'\nimport { __assign } from './assign'\nimport { CONSTRUCTOR, PROTOTYPE } from './constants'\n\nexport function __extend(cls, mixins, offset, filter, data) {\n\tassert.fn(cls, 'Invalid Class')\n\n\t__assign(cls[PROTOTYPE], mixins, offset, filter, data)\n\treturn cls\n}\n\nexport function extend(cls) {\n\treturn __extend(cls, arguments, 1, __extendFilter)\n}\n\nexport function __extendFilter(prop, proto, mixin) {\n\treturn prop !== CONSTRUCTOR\n}\n\nexport function extendIf(cls) {\n\treturn __extend(cls, arguments, 1, __extendIfFilter)\n}\n\nexport function __extendIfFilter(prop, proto, mixin) {\n\treturn prop !== CONSTRUCTOR && !(prop in proto)\n}\n\nexport function extendBy(cls, filter) {\n\treturn __extend(cls, arguments, 2, __extendUserFilter, filter)\n}\n\nexport function __extendUserFilter(prop, proto, mixin, cb) {\n\treturn prop !== CONSTRUCTOR && cb(prop, proto, mixin)\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:12:32\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-04 18:06:01\n */\nimport { assert } from 'devlevel'\nimport create from './create'\nimport { setPrototypeOf, prototypeOf } from './prototypeOf'\nimport { __extend, __extendFilter } from './extend'\nimport { isFn } from './is'\nimport { CONSTRUCTOR, PROTOTYPE } from './constants'\n\nexport function __inherit(cls, superCls) {\n\tconst proto = create(superCls[PROTOTYPE])\n\tproto[CONSTRUCTOR] = cls\n\tcls[PROTOTYPE] = proto\n\tsetPrototypeOf(cls, superCls)\n}\n\nexport function inherit(cls, superCls) {\n\tassert.fn(cls, 'Invalid Class')\n\n\tlet i = 2,\n\t\tl = arguments.length\n\n\tif (isFn(superCls))\n\t\t__inherit(cls, superCls)\n\telse i = 1\n\t__extend(cls, arguments, i, __extendFilter)\n\treturn cls\n}\n\nconst fnProto = Function[PROTOTYPE]\nconst objProto = Object[PROTOTYPE]\n\nexport function superCls(cls) {\n\tcls = prototypeOf(cls)\n\tswitch (cls) {\n\tcase Object:\n\tcase objProto:\n\tcase fnProto:\n\t\treturn undefined\n\t}\n\treturn cls\n}\n\nexport function subclassOf(cls, target) {\n\tif (target === Object) return true\n\n\tlet parent = cls\n\twhile ((parent = superCls(parent)))\n\t\tif (parent === target) return true\n\treturn false\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:11:07\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:27:21\n */\nimport { assert } from 'devlevel'\nimport { __inherit } from './inherit'\nimport { extend, extendBy } from './extend'\nimport { assign } from './assign'\nimport { applyScope } from './function'\nimport { getOwnProp } from './ownProp'\nimport { isFn } from './is'\nimport { makeMap } from './util'\nimport { CONSTRUCTOR, PROTOTYPE } from './constants'\n\nconst CLASS_NAME = 'name',\n\tEXTEND = 'extend',\n\tSTATICS = 'statics'\n\nconst KEYS = makeMap([CLASS_NAME, CONSTRUCTOR, EXTEND, STATICS, PROTOTYPE])\n\nexport default function createClass(overrides) {\n\tconst constructor = getOwnProp(overrides, CONSTRUCTOR)\n\tlet superCls = overrides[EXTEND]\n\n\tassert(!constructor || isFn(constructor), 'Invalid Constructor')\n\tassert(!superCls || isFn(superCls), 'Invalid Super Class')\n\n\tif (superCls === Object) superCls = null\n\n\tconst C = buildCls(constructor, overrides[CLASS_NAME], superCls)\n\tif (superCls)\n\t\t__inherit(C, superCls)\n\textendBy(C, keyFilter, overrides)\n\textend(C, overrides[PROTOTYPE])\n\tassign(C, overrides[STATICS])\n\treturn C\n}\n\nfunction buildCls(cls, name, superCls) {\n\tif (name)\n\t\treturn new Function('apply', 'S', `return function ${name}(){\n    ${(cls || superCls) ? `apply(S, this, arguments);`  : ''}\n}`)(applyScope, cls || superCls)\n\n\treturn cls || (superCls ? function () {\n\t\tapplyScope(superCls, this, arguments)\n\t} : function () {})\n}\n\nfunction keyFilter(prop) {\n\treturn !KEYS[prop]\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:11:54\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:28:29\n */\nimport { map, mapArray, mapStr, mapObj, SKIP } from './map'\nimport { STOP } from './each'\n\nexport const filterArray = __mkFilter(mapArray),\n\tfilterStr = __mkFilter(mapStr),\n\tfilterObj = __mkFilter(mapObj),\n\tfilter = __mkFilter(map)\n\nexport function __mkFilter(map) {\n\treturn function (obj, callback, scope, own) {\n\t\tif (scope) callback = callback.bind(scope)\n\t\treturn map(obj, (val, index, obj) => {\n\t\t\tconst ret = callback(val, index, obj)\n\t\t\tif (ret === STOP || ret === SKIP) return ret\n\t\t\treturn ret ? val : SKIP\n\t\t}, undefined, own)\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:11:59\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-18 11:11:59\n */\nimport { each, eachArray, eachStr, eachObj, reach, reachArray, reachStr, STOP } from './each'\n\nexport const findArray = __mkFind(eachArray),\n\tfindStr = __mkFind(eachStr),\n\tfindObj = __mkFind(eachObj),\n\tfind = __mkFind(each),\n\trfindArray = __mkFind(reachArray),\n\trfindStr = __mkFind(reachStr),\n\trfind = __mkFind(reach)\n\nexport function __mkFind(each) {\n\treturn function (obj, callback, scope, own) {\n\t\tif (scope) callback = callback.bind(scope)\n\t\treturn each(obj, (val, index, obj) => {\n\t\t\tif (callback(val, index, obj))\n\t\t\t\treturn STOP\n\t\t}, undefined, own)\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:12:29\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-18 11:12:29\n */\nimport { each, eachArray, eachStr, eachObj, reach, reachArray, reachStr } from './each'\n\nexport const indexOfArray = __mkTypeIndexOf(eachArray),\n\tindexOfObj = __mkTypeIndexOf(eachObj),\n\tlastIndexOfArray = __mkTypeIndexOf(reachArray),\n\tindexOf = __mkIndexOf(indexOfArray, 'indexOf'),\n\tlastIndexOf = __mkIndexOf(lastIndexOfArray, 'lastIndexOf')\n\nexport function __mkTypeIndexOf(each) {\n\treturn function (obj, val, own) {\n\t\treturn each(obj, (v, index, obj) => {\n\t\t\tif (eq(v, val)) return STOP\n\t\t}, undefined, own)\n\t}\n}\n\nexport function __mkIndexOf(indexOfArray, strIndexOf) {\n\treturn function (obj, val, own) {\n\t\tconst arrayType = isArrayLike(obj)\n\t\tif (arrayType === String) {\n\t\t\tconst i = obj[strIndexOf](val)\n\t\t\tif (i >= 0) return i\n\t\t} else {\n\t\t\treturn (arrayType ? indexOfArray : indexOfObj)(obj, val, own)\n\t\t}\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-18 11:12:49\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-10 11:37:20\n */\nimport { STOP } from './each'\nimport { SKIP } from './map'\nimport { hasOwnProp } from './ownProp'\n\nexport function obj2array(obj, valueHandler, scope, own) {\n\tconst array = []\n\tlet key, ret, i = 0\n\n\tif (scope) valueHandler = valueHandler.bind(scope)\n\tif (own === false) {\n\t\tfor (key in obj) {\n\t\t\tret = valueHandler(obj, key)\n\t\t\tif (ret === STOP) break\n\t\t\tif (ret !== SKIP)\n\t\t\t\tarray[i++] = ret\n\t\t}\n\t} else {\n\t\tfor (key in obj) {\n\t\t\tif (hasOwnProp(obj, key)) {\n\t\t\t\tret = valueHandler(obj, key, i)\n\t\t\t\tif (ret === STOP) break\n\t\t\t\tif (ret !== SKIP)\n\t\t\t\t\tarray[i++] = ret\n\t\t\t}\n\t\t}\n\t}\n\treturn array\n}\n\nexport const keys = __mkKV(obj2array, keyHandler),\n\tvalues = __mkKV(obj2array, valueHandler)\n\nexport function __mkKV(obj2array, handler) {\n\treturn function (obj, own, filter, scope) {\n\t\tif (filter) {\n\t\t\tif (scope) filter = filter.bind(scope)\n\t\t\treturn obj2array(obj, (obj, key) => {\n\t\t\t\tconst ret = filter(obj, key)\n\t\t\t\tif (!ret) return SKIP\n\t\t\t\tif (ret === STOP || ret === SKIP) return ret\n\t\t\t\treturn handler(obj, key)\n\t\t\t}, undefined, own)\n\t\t}\n\t\treturn obj2array(obj, handler, undefined, own)\n\t}\n}\n\nfunction keyHandler(obj, key) {\n\treturn key\n}\n\nfunction valueHandler(obj, key) {\n\treturn obj[key]\n}\n","/*\n * Double Linked List\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-07-23 16:07:38\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-06 14:21:28\n */\nimport { assert } from 'devlevel'\nimport { inherit, defPropValue } from '../helper';\n\nexport const DEFAULT_BINDING = '__list__'\n\nexport default function List(binding) {\n\tthis.binding = binding || DEFAULT_BINDING\n}\n\ndefPropValue(List, 'binding', DEFAULT_BINDING)\n\ninherit(List, {\n\tlength: 0,\n\thas(obj) {\n\t\tconst node = obj[this.binding]\n\t\treturn node ? node[0] === obj && node[3] === this : false\n\t},\n\tadd(obj) {\n\t\treturn __insert(this, obj, this.tail)\n\t},\n\taddFirst(obj) {\n\t\treturn __insert(this, obj)\n\t},\n\tinsertAfter(obj, target) {\n\t\treturn __insert(this, obj, target && __getNode(this, target))\n\t},\n\tinsertBefore(obj, target) {\n\t\treturn __insert(this, obj, target && __getNode(this, target)[1])\n\t},\n\taddAll(objs) {\n\t\treturn __insertAll(this, objs, this.tail)\n\t},\n\taddFirstAll(objs) {\n\t\treturn __insertAll(this, objs)\n\t},\n\tinsertAfterAll(objs, target) {\n\t\treturn __insertAll(this, objs, target && __getNode(this, target))\n\t},\n\tinsertBeforeAll(objs, target) {\n\t\treturn __insertAll(this, objs, target && __getNode(this, target)[1])\n\t},\n\tprev(obj) {\n\t\treturn __siblingObj(this, obj, 1)\n\t},\n\tnext(obj) {\n\t\treturn __siblingObj(this, obj, 2)\n\t},\n\tfirst() {\n\t\tconst node = this.head\n\t\treturn node && node[0]\n\t},\n\tlast() {\n\t\tconst node = this.tail\n\t\treturn node && node[0]\n\t},\n\tremove(obj) {\n\t\tconst node = __getNode(this, obj)\n\t\tif (this.scaning) {\n\t\t\tconst { lazyRemoves } = this\n\t\t\tobj[this.binding] = undefined // unbind list node\n\t\t\tnode[3] = undefined\n\t\t\tif (lazyRemoves) {\n\t\t\t\tlazyRemoves.push(node)\n\t\t\t} else {\n\t\t\t\tthis.lazyRemoves = [node]\n\t\t\t}\n\t\t} else {\n\t\t\t__remove(this, node)\n\t\t}\n\t\treturn --this.length\n\t},\n\teach(cb, scope) {\n\t\tassert(!this.scaning, 'Recursive calls are not allowed.')\n\t\tthis.scaning = true\n\t\tif (scope) cb = cb.bind(scope)\n\t\tlet node = this.head\n\t\twhile (node) {\n\t\t\tif (node[3] === this && cb(node[0]) === false)\n\t\t\t\tbreak\n\t\t\tnode = node[2]\n\t\t}\n\t\t__doLazyRemove(this)\n\t\tthis.scaning = false\n\t},\n\ttoArray() {\n\t\tconst array = new Array(this.length)\n\t\tlet node = this.head,\n\t\t\ti = 0\n\t\twhile (node) {\n\t\t\tif (node[3] === this)\n\t\t\t\tarray[i++] = node[0]\n\t\t\tnode = node[2]\n\t\t}\n\t\treturn array\n\t},\n\tclean() {\n\t\tif (this.length) {\n\t\t\tif (this.scaning) {\n\t\t\t\tconst { binding } = this\n\t\t\t\tconst lazyRemoves = this.lazyRemoves || (this.lazyRemoves = [])\n\t\t\t\tvar node = this.head\n\t\t\t\twhile (node) {\n\t\t\t\t\tif (node[3] === this) {\n\t\t\t\t\t\tnode[0][binding] = undefined\n\t\t\t\t\t\tlazyRemoves.push(node)\n\t\t\t\t\t}\n\t\t\t\t\tnode = node[2]\n\t\t\t\t}\n\t\t\t\tthis.length = 0\n\t\t\t} else {\n\t\t\t\t__clean(this)\n\t\t\t}\n\t\t}\n\t},\n\tclone(cb, scope) {\n\t\tconst newlist = new List(this.binding)\n\t\tif (this.length) {\n\t\t\tif (scope) cb = cb.bind(scope)\n\t\t\tvar node = this.head,\n\t\t\t\tnewtail, newhead,\n\t\t\t\tnewprev = undefined,\n\t\t\t\ti = 0\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this && (newtail = cb(node[0]))) {\n\t\t\t\t\tnewtail = __initNode(newlist, newtail)\n\t\t\t\t\tassert(!newtail[3], 'Double add List, Clone Callback should return a new Object')\n\t\t\t\t\tnewtail[3] = newlist\n\t\t\t\t\tif (newprev) {\n\t\t\t\t\t\tnewtail[1] = newprev\n\t\t\t\t\t\tnewprev[2] = newtail\n\t\t\t\t\t\tnewprev = newtail\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewprev = newhead = newtail\n\t\t\t\t\t}\n\t\t\t\t\ti++\n\t\t\t\t}\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t\ti && __doInsert(newlist, newhead, newtail, i)\n\t\t}\n\t\treturn newlist\n\t}\n})\n\nfunction __doInsert(list, nodeHead, nodeTail, len, prev) {\n\tlet next\n\tnodeHead[1] = prev\n\tif (prev) {\n\t\tnodeTail[2] = next = prev[2]\n\t\tprev[2] = nodeHead\n\t} else {\n\t\tnodeTail[2] = next = list.head\n\t\tlist.head = nodeHead\n\t}\n\tif (next) next[1] = nodeTail\n\telse list.tail = nodeTail\n\treturn (list.length += len)\n}\n\nfunction __insert(list, obj, prev) {\n\tconst node = __initNode(list, obj)\n\tif (!node[3]) {\n\t\tnode[3] = list\n\t\treturn __doInsert(list, node, node, 1, prev)\n\t}\n}\n\nfunction __insertAll(list, objs, prev) {\n\tlet l = objs.length\n\tif (!l) return\n\tconst head = __initNode(list, objs[0])\n\tassert(!head[3], 'Double add List, Object have added in this List')\n\thead[3] = list\n\tlet __prev = head,\n\t\ttail = head,\n\t\ti = 1\n\tfor (; i < l; i++) {\n\t\ttail = __initNode(list, objs[i])\n\t\tassert(!tail[3], 'Double add List, Object have added in this List')\n\t\ttail[3] = list\n\t\ttail[1] = __prev\n\t\t__prev[2] = tail\n\t\t__prev = tail\n\t}\n\treturn __doInsert(list, head, tail, l, prev)\n}\n\nfunction __initNode(list, obj) {\n\tconst { binding } = list\n\tlet node = obj[binding]\n\tif (node && node[0] === obj) {\n\t\tassert(!node[3] || node[3] === list, 'Double add List, Object is still in other List')\n\t} else {\n\t\tnode = defPropValue(obj, binding, [obj], true, true)\n\t}\n\treturn node\n}\n\nfunction __getNode(list, obj) {\n\tconst node = obj[list.binding]\n\tif (node && node[0] === obj) {\n\t\tassert(node[3] === list, 'Object is not in this List')\n\t\treturn node\n\t}\n\tassert(0, 'Object is not in List')\n}\n\nfunction __siblingObj(list, obj, key) {\n\tconst node = __getNode(list, obj)\n\tlet sibling = node[key]\n\tif (sibling) {\n\t\twhile (!sibling[3]) {\n\t\t\tsibling = sibling[key]\n\t\t\tif (!sibling) return\n\t\t}\n\t\treturn sibling[0]\n\t}\n}\n\nfunction __remove(list, node) {\n\tconst prev = node[1],\n\t\tnext = node[2]\n\tif (prev) {\n\t\tprev[2] = next\n\t} else {\n\t\tlist.head = next\n\t}\n\tif (next) {\n\t\tnext[1] = prev\n\t} else {\n\t\tlist.tail = prev\n\t}\n\tnode.length = 1\n}\n\nfunction __clean(list) {\n\tlet node, next = list.head\n\twhile (node = next) {\n\t\tnext = node[2]\n\t\tnode.length = 1\n\t}\n\tlist.head = undefined\n\tlist.tail = undefined\n\tlist.length = 0\n}\n\nfunction __doLazyRemove(list) {\n\tconst { lazyRemoves } = list\n\tif (lazyRemoves) {\n\t\tvar len = lazyRemoves.length\n\t\tif (len) {\n\t\t\tif (list.length) {\n\t\t\t\twhile (len--)\n\t\t\t\t\t__remove(list, lazyRemoves[len])\n\t\t\t} else {\n\t\t\t\t__clean(list)\n\t\t\t}\n\t\t\tlazyRemoves.length = 0\n\t\t}\n\t}\n}\n","/*\n * Function List\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:59:11\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-06 13:57:17\n */\nimport { assert } from 'devlevel'\nimport List from './List'\nimport { inherit, create, defPropValue } from '../helper'\n\nexport const DEFAULT_FN_BINDING = '__id__'\nexport const DEFAULT_SCOPE_BINDING = '__id__'\nexport default function FnList(fnBinding, scopeBinding) {\n\tthis.nodeMap = create(null)\n\tthis.list = new List()\n\tthis.fnBinding = fnBinding || DEFAULT_FN_BINDING\n\tthis.scopeBinding = scopeBinding || DEFAULT_SCOPE_BINDING\n}\n\ndefPropValue(FnList, 'fnBinding', DEFAULT_FN_BINDING)\ndefPropValue(FnList, 'scopeBinding', DEFAULT_FN_BINDING)\n\ninherit(FnList, {\n\tadd(fn, scope, data) {\n\t\tassert.fn(fn, 'fn is not a Function.')\n\t\tscope = parseScope(scope)\n\t\tconst { list, nodeMap } = this\n\t\tconst id = nodeId(fn, scope, this)\n\t\tlet node = nodeMap[id]\n\t\tif (!node) {\n\t\t\tnode = [id, fn, scope, data]\n\t\t\tvar ret = list.add(node)\n\t\t\tif (ret) nodeMap[id] = node\n\t\t\treturn ret\n\t\t}\n\t},\n\tremove(fn, scope) {\n\t\tassert.fn(fn, 'fn is not a Function.')\n\t\tconst { list, nodeMap } = this\n\t\tconst id = nodeId(fn, parseScope(scope), this)\n\t\tconst node = nodeMap[id]\n\t\tif (node) {\n\t\t\tnodeMap[id] = undefined\n\t\t\treturn list.remove(node)\n\t\t}\n\t\treturn false\n\t},\n\thas(fn, scope) {\n\t\tassert.fn(fn, 'fn is not a Function.')\n\t\treturn !!this.nodeMap[nodeId(fn, parseScope(scope), this)]\n\t},\n\tsize() {\n\t\treturn this.list.length\n\t},\n\tclean() {\n\t\tthis.nodeMap = create(null)\n\t\tthis.list.clean()\n\t},\n\teach(cb, scope) {\n\t\tassert.fn(cb, 'callback is not a Function.')\n\t\tif (scope) cb = cb.bind(scope)\n\t\tthis.list.each((node) => cb(node[1], node[2], node[3]))\n\t}\n})\n\nconst DEFAULT_SCOPE_ID = 1\nlet scopeIdGenerator = 1,\n\tfnIdGenerator = 0\n\nfunction nodeId(fn, scope, list) {\n\tconst { fnBinding, scopeBinding } = list\n\n\tlet fnId = fn[fnBinding],\n\t\tscopeId = scope ? scope[scopeBinding] : DEFAULT_SCOPE_ID\n\tif (!fnId)\n\t\tfnId = defPropValue(fn, fnBinding, ++fnIdGenerator)\n\tif (!scopeId)\n\t\tscopeId = defPropValue(scope, scopeBinding, ++scopeIdGenerator)\n\treturn `${fnId}&${scopeId}`\n}\n\nfunction parseScope(scope) {\n\treturn (!scope) ? undefined : scope\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:59:58\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-20 17:59:58\n */\nimport { assert } from 'devlevel'\nimport FnList from './FnList'\n\nconst ticks = new FnList()\nlet pending = false\nlet next\n\nfunction executeTick(fn, scope) {\n\tscope ? fn.call(scope) : fn()\n}\n\nfunction flush() {\n\tticks.each(executeTick)\n\tticks.clean()\n\tpending = false\n}\n\nif (typeof MutationObserver === 'function') { // chrome18+, safari6+, firefox14+,ie11+,opera15\n\tvar counter = 0,\n\t\tobserver = new MutationObserver(flush),\n\t\ttextNode = document.createTextNode(counter)\n\tobserver.observe(textNode, {\n\t\tcharacterData: true\n\t})\n\tnext = function () {\n\t\ttextNode.data = (counter = counter ? 0 : 1)\n\t}\n} else {\n\tnext = function () {\n\t\tsetTimeout(flush, 0)\n\t}\n}\n\nexport function nextTick(fn, scope) {\n\tticks.add(fn, scope)\n\tif (!pending) {\n\t\tpending = true\n\t\tnext()\n\t}\n}\n\nexport function clearTick(fn, scope) {\n\tticks.remove(fn, scope)\n}\n","/*\n * String format\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-07-25 14:57:08\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-11-05 15:57:16\n */\nimport { PROTOTYPE } from '../helper/constants'\n\nconst STR_ESCAPE_MAP = {\n\t\t'\\n': '\\\\n',\n\t\t'\\t': '\\\\t',\n\t\t'\\f': '\\\\f',\n\t\t'\"': '\\\\\"'\n\t},\n\tSTR_ESCAPE = /[\\n\\t\\f\"]/g\n\nexport function escapeString(str) {\n\treturn str.replace(STR_ESCAPE, str => STR_ESCAPE_MAP[str])\n}\n\nexport function pad(str, len, chr, leftAlign) {\n\tstr = String(str)\n\tconst l = str.length\n\tif (l >= len) return str\n\n\tconst padding = (new Array(len - l + 1)).join(chr || ' ')\n\treturn leftAlign ? str + padding : padding + str\n}\n\nfunction replacor(regs) {\n\treturn function (str) {\n\t\tfor (let i = 0, reg; i < 4; i++) {\n\t\t\treg = regs[i]\n\t\t\tif (reg[0].test(str))\n\t\t\t\treturn str.replace(reg[0], reg[1])\n\t\t}\n\t\treturn str\n\t}\n}\n\nexport const plural = replacor([\n\t[/([a-zA-Z]+[^aeiou])y$/, '$1ies'],\n\t[/([a-zA-Z]+[aeiou]y)$/, '$1s'],\n\t[/([a-zA-Z]+[sxzh])$/, '$1es'],\n\t[/([a-zA-Z]+[^sxzhy])$/, '$1s']\n])\n\nexport const singular = replacor([\n\t[/([a-zA-Z]+[^aeiou])ies$/, '$1y'],\n\t[/([a-zA-Z]+[aeiou])s$/, '$1'],\n\t[/([a-zA-Z]+[sxzh])es$/, '$1'],\n\t[/([a-zA-Z]+[^sxzhy])s$/, '$1']\n])\n\nconst thousandSeparationReg = /(\\d)(?=(\\d{3})+(?!\\d))/g\nexport function thousandSeparate(number) {\n\tlet split = (number + '').split('.')\n\tsplit[0] = split[0].replace(thousandSeparationReg, '$1,')\n\treturn split.join('.')\n}\n\n// ========================== formatter ===========================\n// [index]    [flags]   [min-width]       [precision]         type\n// index$|$   ,-+#0     width|index$|*|$  .width|.index$|*|$  %sfducboxXeEgGpP\nconst formatReg = /%(\\d+\\$|\\*|\\$)?([-+#0, ]*)?(\\d+\\$?|\\*|\\$)?(\\.\\d+\\$?|\\.\\*|\\.\\$)?([%sfducboxXeEgGpP])/g\nconst slice = Array[PROTOTYPE].slice\n\n\nfunction _format(str, args) {\n\tlet index = 0\n\n\t// for min-width & precision\n\tfunction parseWidth(width) {\n\t\tif (!width) {\n\t\t\twidth = 0\n\t\t} else if (width == '*') {\n\t\t\twidth = +args[index++]\n\t\t} else if (width == '$') {\n\t\t\twidth = +args[index]\n\t\t} else if (width.charAt(width.length - 1) == '$') {\n\t\t\twidth = +args[width.slice(0, -1) - 1]\n\t\t} else {\n\t\t\twidth = +width\n\t\t}\n\t\treturn isFinite(width) ? width < 0 ? undefined : width : undefined\n\t}\n\n\t// for index\n\tfunction parseArg(i) {\n\t\tif (!i || i == '*')\n\t\t\treturn args[index++]\n\t\tif (i == '$')\n\t\t\treturn args[index]\n\t\treturn args[i.slice(0, -1) - 1]\n\t}\n\n\tstr = str.replace(formatReg, function (match, idx, flags, minWidth, precision, type) {\n\t\tif (type === '%') return '%'\n\n\t\tlet value = parseArg(idx)\n\t\tminWidth = parseWidth(minWidth)\n\t\tprecision = precision && parseWidth(precision.slice(1))\n\t\tif (!precision && precision !== 0)\n\t\t\tprecision = 'fFeE'.indexOf(type) == -1 && (type == 'd') ? 0 : undefined\n\n\t\tlet leftJustify = false,\n\t\t\tpositivePrefix = '',\n\t\t\tzeroPad = false,\n\t\t\tprefixBaseX = false,\n\t\t\tthousandSeparation = false,\n\t\t\tprefix,\n\t\t\tbase,\n\t\t\tc, i, j\n\n\t\tfor (i = 0, j = flags && flags.length; i < j; i++) {\n\t\t\tc = flags.charAt(i)\n\t\t\tswitch (c) {\n\t\t\tcase ' ':\n\t\t\tcase '+':\n\t\t\t\tpositivePrefix = c\n\t\t\t\tbreak\n\t\t\tcase '-':\n\t\t\t\tleftJustify = true\n\t\t\t\tbreak\n\t\t\tcase '0':\n\t\t\t\tzeroPad = true\n\t\t\t\tbreak\n\t\t\tcase '#':\n\t\t\t\tprefixBaseX = true\n\t\t\t\tbreak\n\t\t\tcase ',':\n\t\t\t\tthousandSeparation = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tswitch (type) {\n\t\tcase 'c':\n\t\t\tvalue = +value\n\t\t\tvalue = isNaN(value) || !isFinite(value) ? '' : String.fromCharCode(value)\n\t\t\tif (value.length < minWidth)\n\t\t\t\tvalue = pad(value, minWidth, zeroPad ? '0' : ' ', leftJustify)\n\t\t\treturn value\n\t\tcase 's':\n\t\t\tif (value === undefined || value === null || (typeof value === 'number' && (isNaN(value) || !isFinite(value)))) {\n\t\t\t\tvalue = ''\n\t\t\t} else {\n\t\t\t\tvalue += ''\n\t\t\t\tif (precision && value.length > precision)\n\t\t\t\t\tvalue = value.slice(0, precision)\n\t\t\t}\n\t\t\tif (value.length < minWidth)\n\t\t\t\tvalue = pad(value, minWidth, zeroPad ? '0' : ' ', leftJustify)\n\t\t\treturn value\n\t\tcase 'd':\n\t\t\tvalue = parseInt(value)\n\t\t\tif (isNaN(value) || !isFinite(value)) {\n\t\t\t\tvalue = ''\n\t\t\t\tprefix = positivePrefix\n\t\t\t} else {\n\t\t\t\tif (value < 0) {\n\t\t\t\t\tprefix = '-'\n\t\t\t\t\tvalue = (-value)\n\t\t\t\t} else {\n\t\t\t\t\tprefix = positivePrefix\n\t\t\t\t}\n\t\t\t\tvalue += ''\n\t\t\t}\n\t\t\tif (value.length < minWidth)\n\t\t\t\tvalue = pad(value, minWidth, '0', false)\n\t\t\tif (thousandSeparation)\n\t\t\t\tvalue = value.replace(thousandSeparationReg, '$1,')\n\t\t\treturn prefix + value\n\t\tcase 'e':\n\t\tcase 'E':\n\t\tcase 'f':\n\t\tcase 'g':\n\t\tcase 'G':\n\t\tcase 'p':\n\t\tcase 'P':\n\t\t\t{\n\t\t\t\tlet number = +value\n\t\t\t\tif (isNaN(number) || !isFinite(value)) {\n\t\t\t\t\tnumber = ''\n\t\t\t\t} else {\n\t\t\t\t\tif (number < 0) {\n\t\t\t\t\t\tprefix = '-'\n\t\t\t\t\t\tnumber = -number\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprefix = positivePrefix\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (type.toLowerCase()) {\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\tnumber = precision === undefined ? number + '' : number.toFixed(precision)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'e':\n\t\t\t\t\t\tnumber = number.toExponential(precision)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'g':\n\t\t\t\t\t\tnumber = precision === undefined ? number + '' : number.toPrecision(precision)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'p':\n\t\t\t\t\t\tif (precision !== undefined) {\n\t\t\t\t\t\t\tlet sf = String(value).replace(/[eE].*|[^\\d]/g, '')\n\t\t\t\t\t\t\tsf = (number ? sf.replace(/^0+/, '') : sf).length\n\t\t\t\t\t\t\tprecision = Math.min(precision, sf)\n\t\t\t\t\t\t\tnumber = number[(!precision || precision <= sf) ? 'toPrecision' : 'toExponential'](precision)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnumber += ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (number.length < minWidth)\n\t\t\t\t\tnumber = pad(number, minWidth, '0', false)\n\t\t\t\tif (thousandSeparation) {\n\t\t\t\t\tlet split = number.split('.')\n\t\t\t\t\tsplit[0] = split[0].replace(thousandSeparationReg, '$1,')\n\t\t\t\t\tnumber = split.join('.')\n\t\t\t\t}\n\t\t\t\tvalue = prefix + number\n\t\t\t\tif ('EGP'.indexOf(type) != -1)\n\t\t\t\t\treturn value.toUpperCase()\n\t\t\t\treturn value\n\t\t\t}\n\t\tcase 'b':\n\t\t\tbase = 2\n\t\t\tbreak\n\t\tcase 'o':\n\t\t\tbase = 8\n\t\t\tbreak\n\t\tcase 'u':\n\t\t\tbase = 10\n\t\t\tbreak\n\t\tcase 'x':\n\t\tcase 'X':\n\t\t\tbase = 16\n\t\t\tbreak\n\t\tcase 'n':\n\t\t\treturn ''\n\t\tdefault:\n\t\t\treturn match\n\t\t}\n\t\tlet number = value >>> 0\n\t\tprefix = prefixBaseX && base != 10 && number && ['0b', '0', '0x'][base >> 3] || ''\n\t\tnumber = number.toString(base)\n\t\tif (number.length < minWidth)\n\t\t\tnumber = pad(number, minWidth, '0', false)\n\t\tvalue = prefix + number\n\t\tif (type == 'X') return value.toUpperCase()\n\t\treturn value\n\t})\n\n\treturn {\n\t\tformat: str, // format result\n\t\tcount: index // format param count\n\t}\n}\n\nexport function format(str) {\n\treturn _format(str, slice.call(arguments, 1)).format\n}\n\nformat.format = _format\n","/*\n * property path\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 18:00:02\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-20 18:00:02\n */\nimport { assert } from 'devlevel'\nimport { create, isArray } from '../helper'\n\nconst pathCache = create(null),\n\tpathReg = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g,\n\tescapeCharReg = /\\\\(\\\\)?/g,\n\tformatReg = /(?:\\.|^)([^a-zA-Z_$][^.]*)/g\n\nexport function parsePath(path, cache) {\n\tif (isArray(path)) return path\n\n\tassert.str(path, `Require path[Array | String]`)\n\n\tlet rs = pathCache[path]\n\tif (!rs) {\n\t\trs = []\n\t\tif (cache !== false) pathCache[path] = rs\n\t\tpath.replace(pathReg, function (match, number, quote, string) {\n\t\t\trs.push(quote ? string.replace(escapeCharReg, '$1') : (number || match))\n\t\t})\n\t}\n\treturn rs.slice()\n}\n\nexport function formatPath(path) {\n\tif (isArray(path))\n\t\treturn path.join('.').replace(formatReg, formatHandle)\n\tassert.str(path, `Require path[Array | String]`)\n\treturn path\n}\n\nfunction formatHandle(m, i) {\n\treturn `['${i}']`\n}\n\n\nexport function get(obj, path) {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tif (l === -1) return obj\n\tlet i = 0\n\tfor (; i < l; i++) {\n\t\tobj = obj[path[i]]\n\t\tif (obj === null || obj === undefined)\n\t\t\treturn undefined\n\t}\n\treturn obj ? obj[path[i]] : undefined\n}\n\nexport function set(obj, path, value) {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tif (l === -1) return\n\tlet attr, v, i = 0\n\tfor (; i < l; i++) {\n\t\tattr = path[i]\n\t\tv = obj[attr]\n\t\tif (!v) obj[attr] = v = {}\n\t\tobj = v\n\t}\n\tattr = path[i]\n\tobj[attr] = value\n}\n","import { assert, error } from 'devlevel'\nimport {\n\tinherit,\n\tisObj,\n\tisFn,\n\tisStr,\n\tisNum,\n\tisInt,\n\tisArray,\n\tisBool,\n\tisReg,\n\tapplyNoScope,\n\treEscape,\n\tregStickySupport,\n\tmakeMap,\n\tassign\n} from '../helper'\nimport { pad, escapeString } from './format'\n\n// ================================================\n// Text Stream\n// ================================================\nconst LINE_REG = /\\n/g\n\nfunction Stream(buff) {\n\tthis.orgbuff = buff\n\tthis.orglen = buff.length\n\t// [buff, offset, orgoffset, prev, char code cache]\n\tconst curr = [buff, 0, 0, null, null]\n\tthis.curr = curr\n\tthis.stack = [curr]\n}\ninherit(Stream, {\n\tenter() {\n\t\tlet { curr } = this\n\t\t// [buff, offset, orgoffset, prev, char code cache]\n\t\tthis.curr = curr = [curr[0], curr[1], curr[2], curr, null]\n\t\tthis.stack.push(curr)\n\t},\n\treset() {\n\t\tconst { curr } = this\n\t\tconst prev = curr[3]\n\t\tif (curr[2] !== prev[2]) {\n\t\t\tcurr[0] = prev[0]\n\t\t\tcurr[1] = prev[1]\n\t\t\tcurr[2] = prev[2]\n\t\t\tcurr[4] = null\n\t\t\treturn true\n\t\t}\n\t},\n\texit() {\n\t\tconst curr = this.stack.pop()\n\t\tthis.curr = curr[3]\n\t},\n\tcommit() {\n\t\tconst curr = this.stack.pop(),\n\t\t\tprev = curr[3]\n\t\tthis.curr = prev\n\t\tprev[0] = curr[0]\n\t\tprev[1] = curr[1]\n\t\tprev[2] = curr[2]\n\t\tprev[4] = curr[4]\n\t},\n\tbuff(reset) {\n\t\tconst { curr } = this\n\t\tif (reset) {\n\t\t\tcurr[0] = curr[0].substring(curr[1])\n\t\t\tcurr[1] = 0\n\t\t}\n\t\treturn curr[0]\n\t},\n\toffset() {\n\t\treturn this.curr[1]\n\t},\n\torgOffset() {\n\t\treturn this.curr[2]\n\t},\n\tupOrgOffset() {\n\t\tconst prev = this.curr[3]\n\t\treturn prev ? prev[2] : 0\n\t},\n\tnextCode() {\n\t\tconst { curr } = this\n\t\tif (curr[4] === null)\n\t\t\tcurr[4] = curr[2] < this.orglen ? curr[0].charCodeAt(curr[1]) : 0\n\t\treturn curr[4]\n\t},\n\tconsume(len) {\n\t\tif (len) {\n\t\t\tconst { curr } = this\n\t\t\tcurr[1] += len\n\t\t\tcurr[2] += len\n\t\t\tcurr[4] = null\n\t\t}\n\t},\n\tposition(offset) {\n\t\tconst { orgbuff } = this\n\t\tlet line = 0,\n\t\t\tlineOffset = 0\n\n\t\twhile (LINE_REG.exec(orgbuff) && offset >= LINE_REG.lastIndex) {\n\t\t\tlineOffset = LINE_REG.lastIndex\n\t\t\tline++\n\t\t}\n\t\tLINE_REG.lastIndex = 0\n\t\treturn [line, offset - lineOffset]\n\t},\n\tsource() {\n\t\tconst { orgbuff } = this\n\t\tlet line = 1\n\t\treturn ` 0: ${orgbuff.replace(LINE_REG, ()=>`\\n${pad((line++), 2)}: `)}`\n\t}\n})\n\n// ================================================\n// Rule Base API\n// ================================================\nlet idGen = 0\n\nexport const MatchResult = inherit(function MatchResult(parent) {\n\tthis.parent = parent\n\tthis.data = []\n}, {\n\tadd(data) {\n\t\tthis.data.push(data)\n\t},\n\taddAll(datas) {\n\t\tconst { data } = this\n\t\tconst len = data.length\n\t\tlet i = datas.length\n\t\twhile (i--)\n\t\t\tdata[len + i] = datas[i]\n\t},\n\tempty() {\n\t\tthis.setLen(0)\n\t},\n\tsetLen(len) {\n\t\tconst { data } = this\n\t\tif (data.length > len) data.length = len\n\t}\n})\n\n/**\n * static Rule options\n */\nexport function UNATTACH() {}\nexport const UNCAPTURABLE = {\n\t\tcapturable: false\n\t},\n\tUNATTACH_CAPTURABLE = {\n\t\tattach: UNATTACH,\n\t\tcapturable: false\n\t}\n\nfunction defaultErrorMsg(err) {\n\treturn err\n}\n\nfunction defaultAttach(data, rs) {\n\trs.add(data)\n}\n\nfunction defaultRuleTest() {\n\treturn true\n}\n\nconst OPTION_ATTACH = 'attach',\n\tOPTION_ERROR = 'error',\n\tOPTION_CAPTURABLE = 'capturable'\n/**\n * Rule Interface\n *\n * Overrides:\n *      Rule(name, attachFunction: <Function>)\n *\n *      Rule(name, errorMsg: <String>)\n *\n * @param {String}                  name                rule name\n * @param {Function|String|Object}  option              rule option\n * @param {Function}                option.attach       data attach callback\n * @param {Boolean}                 option.capturable   error is capturable\n * @param {Function|String}         option.error        error message or error message callback\n */\nexport function Rule(name, option) {\n\tthis.id = idGen++\n\tthis.name = name\n\tlet capturable = true,\n\t\tattach = null,\n\t\tmsg = null\n\n\tif (isObj(option)) {\n\t\tattach = option[OPTION_ATTACH]\n\t\tmsg = option[OPTION_ERROR]\n\t\tcapturable = option[OPTION_CAPTURABLE] !== false\n\t} else if (isFn(option)) {\n\t\tattach = option\n\t} else if (isStr(option)) {\n\t\tmsg = option\n\t}\n\tthis.capturable = capturable\n\tthis.attach = isFn(attach) ? attach : defaultAttach\n\tthis.msg = isStr(msg) ? () => msg : isFn(msg) ? msg : defaultErrorMsg\n}\ninherit(Rule, {\n\t$rule: true,\n\terror(stream, err, capturable, srcErr) {\n\t\terr = [stream.orgOffset(), this.msg(err), capturable && srcErr ? srcErr[2] : capturable, srcErr, this]\n\t\terr.$err = true\n\t\treturn err\n\t},\n\tsuccess(stream, data, result) {\n\t\tconst curr = stream.curr,\n\t\t\terr = this.attach(data, result, stream, this)\n\n\t\tassert(stream.curr == curr)\n\n\t\treturn err && !err.$err ? this.error(stream, err, false) : err\n\t},\n\tsetExpr(expr) {\n\t\tthis.defName = this.mkExpr(expr)\n\t\tthis.EXPECT = `Expect: ${expr}`\n\t},\n\tmkExpr(expr) {\n\t\treturn `<${this.type}: ${expr}>`\n\t},\n\ttoString() {\n\t\treturn this.name || this.defName\n\t},\n\tgetStart() { return [] },\n\ttest: defaultRuleTest\n})\n\n\n// ================================================\n// Match Rule API\n// ================================================\n\nfunction testRuleByIndex(stream) {\n\treturn this.index[stream.nextCode()]\n}\n\n/**\n * match rule interface\n *\n * @param {String}                              name        rule name\n * @param {Int | String | Array<String | Int>}  startCodes  start codes in match\n * @param {Boolean}                             ignoreCase  is match ignore case\n * @param {?}                                   option      see Rule Constructor\n */\nexport const MatchRule = inherit(function MatchRule(name, startCodes, ignoreCase, option) {\n\tRule.call(this, name, option)\n\n\tconst start = [],\n\t\tindex = []\n\teachCharCodes(startCodes, ignoreCase, code => {\n\t\tif (!index[code]) {\n\t\t\tstart.push(code)\n\t\t\tindex[code] = code\n\t\t}\n\t})\n\tthis.start = start\n\tthis.index = index\n\tthis.test = start.length ? testRuleByIndex : defaultRuleTest\n}, Rule, {\n\tcomsume(stream, data, len, result) {\n\t\tstream.consume(len)\n\t\treturn this.success(stream, data, result)\n\t},\n\tgetStart() {\n\t\treturn this.start\n\t}\n})\n\n// ================================================\n// Char Match Rule\n// ================================================\n\nfunction defaultCharMatchRuleTest() {\n\treturn stream.nextCode()\n}\n/**\n * match one char which in allow list\n * well match every char when allows is empty\n *\n * @param {String}                              name        rule name\n * @param {Int | String | Array<String | Int>}  allows      which char can be matched\n *                                                          well match every char when allows is empty\n * @param {Boolean}                             ignoreCase  is match ignore case\n * @param {?}                                   option      see Rule Constructor\n */\nexport const CharMatchRule = inherit(function CharMatchRule(name, allows, ignoreCase, option) {\n\tMatchRule.call(this, name, allows, ignoreCase, option)\n\n\tconst codes = this.start\n\tlet i = codes.length,\n\t\texpr = '*'\n\tif (i) {\n\t\tconst chars = []\n\t\twhile (i--) chars[i] = String.fromCharCode(codes[i])\n\t\texpr = `\"${chars.join('\" | \"')}\"`\n\t} else {\n\t\tthis.test = defaultCharMatchRuleTest\n\t}\n\tthis.setExpr(expr)\n}, MatchRule, {\n\ttype: 'Character',\n\tmatch: function charMatch(stream, result) {\n\t\treturn this.comsume(stream, String.fromCharCode(stream.nextCode()), 1, result)\n\t}\n})\n\n// ================================================\n// Regexp Match Rule\n// ================================================\n/**\n * match by RegExp\n *\n * optimization:\n *      Priority use sticky mode\n *\n * @param {String}                              name        rule name\n * @param {RegExp}                              regexp      regexp\n * @param {Int | Boolean}                       pick        pick match result\n *                                                          0       : [default] pick match[0]\n *                                                                    optimize: test and substring in sticky mode\n *                                                          pick > 0: pick match[pick]\n *                                                          pick < 0: pick first matched group\n *                                                          true    : pick match\n *                                                          false   : no data pick\n *                                                                    optimize: just test string in sticky mode\n * @param {Int | String | Array<String | Int>}  startCodes  start codes of regexp\n * @param {?}                                   option      see Rule Constructor\n */\nexport const RegMatchRule = inherit(function RegMatchRule(name, regexp, pick, startCodes, option) {\n\n\tpick = pick === false || isInt(pick) ? pick : !!pick || 0\n\n\tconst sticky = regStickySupport && !pick, // use exec when need pick match group data\n\t\tpattern = regexp.source,\n\t\tignoreCase = regexp.ignoreCase\n\n\t// always wrapping in a none capturing group preceded by '^' to make sure\n\t// matching can only work on start of input. duplicate/redundant start of\n\t// input markers have no meaning (/^^^^A/ === /^A/)\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\n\t// When the y flag is used with a pattern, ^ always matches only at the\n\t// beginning of the input, or (if multiline is true) at the beginning of a\n\t// line.\n\tregexp = new RegExp(sticky ? pattern : `^(?:${pattern})`,\n\t\t(ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '') + (sticky ? 'y' : ''))\n\n\tMatchRule.call(this, name, startCodes, ignoreCase, option)\n\n\tthis.regexp = regexp\n\tthis.pick = pick\n\tthis.match = createRegMatchRulePolicy(name || `reg${this.id}`, sticky, pick)\n\n\tthis.setExpr(regexp.toString())\n}, MatchRule, {\n\ttype: 'RegExp'\n})\n\n/**\n * generate match function\n *\n * sticky mode:\n *      var reg = this.regexp,\n *          buff = stream.buff(),\n *          start = stream.offset()\n *      reg.lastIndex = start\n *      if (reg.test(buff))\n *          return this.comsume(stream,\n *                              this.pick === false ? null : buff.substring(start, reg.lastIndex),\n *                              reg.lastIndex - start)\n *      return this.error(stream, this.EXPECT, this.capturable, result);\n *\n * unsticky mode:\n *      var m = this.regexp.exec(stream.buff(true))\n *      if (m) {\n *          var pick = this.pick,\n *              pickData\n *          if (pick < 0) {\n *              pick = -pick\n *              for(var i = 1; i <= pick; i++) {\n *                  if (m[i]) {\n *                      pickData = m[i]\n *                      break\n *                  }\n *              }\n *          }else {\n *              pickData = pick === true ? m : m[pick || 0]\n *          }\n *          return this.comsume(stream, pickData, m[0].length, result)\n *      }\n *      return this.error(stream, this.EXPECT, this.capturable);\n *\n */\nfunction createRegMatchRulePolicy(name, sticky, pick) {\n\tconst R = `this.regexp`,\n\t\tSTREAM = 'stream',\n\t\tS_BUFF = `${STREAM}.buff`,\n\t\tLIDX = `r.lastIndex`\n\n\tname += `_${sticky ? 'test' : 'exec'}_pick_${pick===true?'all' : pick < 0 ? 'one_'+(-pick): pick || 0}`\n\n\tlet code = sticky ?\n\t\t// sticky mode\n\t\t`var r = ${R}, b = ${S_BUFF}(), s = ${STREAM}.offset();\n\\t${LIDX} = s;\n\\tif (r.test(b))\n\\t\\t${consumCode(pick === false ? 'null': `b.substring(s, ${LIDX})`, `${LIDX} - s`)}` :\n\t\t// unsticky mode\n\t\t`var m = ${R}.exec(${S_BUFF}(true));\n\\tif (m)\n\\t\\t${consumCode(pick < 0 ? pickCode(-pick) : `m${pick === true ? '' : `[${pick || 0}]`}` , 'm[0].length')}`\n\n\treturn new Function(`return function ${name}(${STREAM}, rs){\n\\t${code}\n\\treturn this.error(${STREAM}, this.EXPECT, this.capturable);\n}`)()\n\n\tfunction consumCode(data, len) {\n\t\treturn `return this.comsume(${STREAM}, ${data}, ${len}, rs)`;\n\t}\n\n\tfunction pickCode(pick) {\n\t\tlet arr = []\n\t\tfor (var i = 1; i <= pick; i++)\n\t\t\tarr.push(`m[${i}]`)\n\t\treturn arr.join(' || ')\n\t}\n}\n\n// ================================================\n// String Match Rule\n// ================================================\n/**\n * match string\n *\n * @param {String}  name        rule name\n * @param {String}  str         match string\n * @param {Boolean} ignoreCase  is match ignore case\n * @param {?}       option      see Rule Constructor\n */\nexport const StrMatchRule = inherit(function StrMatchRule(name, str, ignoreCase, option) {\n\tRegMatchRule.call(this, name, new RegExp(reEscape(str), ignoreCase ? 'i' : ''), 0, str.charCodeAt(0), option)\n\tthis.setExpr(str)\n}, RegMatchRule, {\n\ttype: 'String'\n})\n\n\n// ================================================\n// Match API\n// ================================================\n/**\n *\n * Overrides:\n *      match(name, regexp, pick, start, option)\n *\n *      match(name, regexp, start, option)\n *\n *      match(name, regexp, option: <Object>)\n *\n *      match(regexp, pick, start, option)\n *\n *      match(regexp, start, option)\n *\n *      match(regexp, option)\n *\n *      match(name, str, ignoreCase, option)\n *\n *      match(name, str, option)\n *\n *      match(str, ignoreCase, option)\n *\n *      match(str, option: <Object>)\n *\n *      match({\n *           name,\n *           pattern: <String>\n *           ignoreCase,\n *           // option...\n *           attach: <Function>,\n *           capturable: <Boolean>,\n *           error: <Function|String>\n *      })\n *      match({\n *           name,\n *           pattern: <RegExp>\n *           pick,\n *           startCodes,\n *           // option...\n *           attach: <Function>,\n *           capturable: <Boolean>,\n *           error: <Function|String>\n *      })\n *\n * @param {String}                              name        [Option] rule name\n * @param {String | RegExp}                     pattern     match pattern: String pattern | RegExp pattern\n * @param {Boolean}                             ignoreCase  [Option] [String pattern] is match ignore Case\n * @param {Int | true}                          pick        [Option] [RegExp pattern] pick match result, default: 0\n * @param {Int | String | Array<Int | String>}  startCodes  [Option] [RegExp pattern] start codes of RegExp\n * @param {?}                                   option      [Option] see Rule Constructor\n * @return {MatchRule}\n */\nexport function match(name, pattern) {\n\tconst args = arguments\n\tlet i = 2\n\n\tif (isReg(name) || !(isReg(pattern) || isStr(pattern))) {\n\t\tpattern = name\n\t\tname = null\n\t\ti = 1\n\t}\n\n\tif (isReg(pattern)) {\n\t\tvar pick = args[i++],\n\t\t\tstartCodes = args[i++],\n\t\t\toption = args[i++]\n\n\t\tif (!isBool(pick) && !isInt(pick)) {\n\t\t\toption = startCodes\n\t\t\tstartCodes = pick\n\t\t\tpick = 0\n\t\t}\n\t\tif (!isStr(startCodes) && !isNum(startCodes) && !isArray(startCodes)) {\n\t\t\toption = startCodes\n\t\t\tstartCodes = null\n\t\t}\n\t\treturn regMatch(name, pattern, pick, startCodes, option)\n\t}\n\n\tif (isStr(pattern) || isArray(pattern)) { // string pattern | char[] pattern\n\t\tvar ignoreCase = args[i++],\n\t\t\toption = args[i++]\n\n\t\tif (!isBool(ignoreCase)) {\n\t\t\toption = ignoreCase\n\t\t\tignoreCase = false\n\t\t}\n\t\treturn strMatch(name, pattern, ignoreCase, option)\n\t}\n\n\tif (isObj(pattern)) {\n\t\tconst _pattern = pattern.pattern,\n\t\t\tname = pattern.name,\n\t\t\toption = pattern.option\n\t\tif (isReg(_pattern))\n\t\t\treturn regMatch(name, _pattern, pattern.pick, pattern.startCodes, option)\n\t\tif (isStr(_pattern))\n\t\t\treturn strMatch(name, _pattern, pattern.ignoreCase, option)\n\t}\n\terror(`Invalid Match Rule: ${pattern}`)\n}\n\nfunction strMatch(name, pattern, ignoreCase, option) {\n\tconst C = isArray(pattern) || pattern.length <= 1 ? CharMatchRule : StrMatchRule\n\treturn new C(name, pattern, ignoreCase, option)\n}\n\nconst REG_ESPEC_CHARS = makeMap('dDsStrnt0cbBfvwW', '', 1)\n\nfunction regMatch(name, pattern, pick, startCodes, option) {\n\tconst source = pattern\n\tif (!pick) {\n\t\tvar c = 0\n\t\tif (source.length == 1 && source !== '^' && source !== '$') {\n\t\t\tc = source === '.' ? '' : source\n\t\t} else if (source.length == 2 && source[0] === '\\\\' && REG_ESPEC_CHARS[source[1]]) {\n\t\t\tc = source[1]\n\t\t}\n\t\tif (c != 0)\n\t\t\treturn strMatch(name, c, pattern.ignoreCase, option)\n\t}\n\treturn new RegMatchRule(name, pattern, pick, startCodes, option)\n}\n\n// ================================================\n// Char Code Tools\n// ================================================\nfunction eachCharCodes(codes, ignoreCase, cb) {\n\tif (isStr(codes)) {\n\t\tvar i = codes.length\n\t\twhile (i--) eachCharCode(codes.charCodeAt(i), ignoreCase, cb)\n\t} else if (isArray(codes)) {\n\t\tvar i = codes.length\n\t\twhile (i--) eachCharCodes(codes[i], ignoreCase, cb)\n\t} else if (isInt(codes)) {\n\t\teachCharCode(codes, ignoreCase, cb)\n\t}\n}\n\nfunction eachCharCode(code, ignoreCase, cb) {\n\tcb(code)\n\tif (ignoreCase) {\n\t\tif (code <= 90) {\n\t\t\tif (code >= 65) cb(code + 32)\n\t\t} else if (code <= 122) {\n\t\t\tcb(code - 32)\n\t\t}\n\t}\n}\n\n// ================================================\n// Complex Rule API\n// ================================================\n\n/**\n * complex rule interface\n *\n * @param {String}              name        rule name\n * @param {Function|Array|...}  rules       complex rules\n * @param {?}                   option      see Rule Constructor\n */\nexport const ComplexRule = inherit(function ComplexRule(name, rules, option) {\n\tRule.call(this, name, option)\n\n\tconst getRules = this.getRules\n\n\tthis.getRules = function getLazyRules() {\n\t\tthis.getRules = getRules\n\n\t\tthis.rules = rules = parseComplexRules(this, isFn(rules) ? rules() : rules, [])\n\t\tconst len = this.len = rules.length\n\t\tassert(len, `Require Rules`)\n\n\t\t// parse Expression\n\t\tconst names = this.subNames()\n\t\tthis.setExpr(names.join(this.split))\n\n\t\tfor (let i = 0; i < len; i++)\n\t\t\tnames[i] = `Expect[${i}]: ${names[i]}`\n\t\tthis.EXPECTS = names\n\n\t\tthis.__init(rules, len)\n\n\t\treturn this.getRules()\n\t}\n}, Rule, {\n\t/**\n\t * parse buffer\n\t *\n\t * @param {String} buff text buff\n\t */\n\tparse(buff, errSource) {\n\t\tconst result = new MatchResult(),\n\t\t\tstream = new Stream(buff)\n\t\tlet err = this.match(stream, result)\n\t\tif (err) {\n\t\t\tconst source = stream.source()\n\t\t\tvar pos, msg = []\n\t\t\tdo {\n\t\t\t\tpos = stream.position(err[0])\n\t\t\t\tmsg.unshift(`[${pad(pos[0], 2)}:${pad(pos[1], 2)}] - ${err[4].toString()}: ${err[1]} on \"${escapeString(buff.substr(err[0], 20))}\"`)\n\t\t\t\terr = err[3]\n\t\t\t} while (err)\n\n\t\t\tif (errSource !== false) msg.push('[Source]', source)\n\n\t\t\tconst e = new SyntaxError(msg.join('\\n'))\n\t\t\te.source = source\n\t\t\tthrow e\n\t\t}\n\t\treturn result.data\n\t},\n\tcommit(stream, data, result) {\n\t\tconst err = this.success(stream, data, result)\n\n\t\tif (err) {\n\t\t\tstream.exit()\n\t\t\treturn err\n\t\t}\n\t\tstream.commit()\n\t},\n\texit(stream, msg, srcErr) {\n\t\tconst err = this.error(stream, msg, this.capturable, srcErr)\n\t\tstream.exit()\n\t\treturn err\n\t},\n\tinit() {\n\t\tthis.getRules()\n\t\treturn this\n\t},\n\t__init() {},\n\tgetRules() {\n\t\treturn this.rules\n\t},\n\tsubNames(map) {\n\t\tconst rules = this.getRules(),\n\t\t\tnames = []\n\t\tfor (let i = 0; i < this.len; i++)\n\t\t\tnames[i] = rules[i].toString(this.idStack(this.id, map))\n\t\treturn names\n\t},\n\ttoString(map) {\n\t\tthis.init()\n\t\tif (this.name) return this.name\n\t\tif (map) {\n\t\t\tconst { id } = this\n\t\t\tif (map[id]) {\n\t\t\t\tif (map[id] === 1)\n\t\t\t\t\treturn `<${this.type} -> $Self>`\n\t\t\t\treturn `<${this.type} -> $${map[id]}>`\n\t\t\t}\n\t\t\treturn this.mkExpr(this.subNames(map).join(this.split))\n\t\t}\n\t\treturn this.defName\n\t},\n\tidStack(id, map) {\n\t\tmap = assign({\n\t\t\tlevel: 0,\n\t\t\tpush: idStackPush\n\t\t}, map)\n\t\tif (id) map.push(id)\n\t\treturn map\n\t}\n})\n\nfunction idStackPush(id) {\n\tthis[id] = ++this.level\n\treturn this\n}\n\nfunction parseComplexRules(curr, rules, dist) {\n\tfor (let i = 0, l = rules.length; i < l; i++) {\n\t\tif (!rules[i]) error(`Empty Rules[${i}]: ${rules}`)\n\t\tparseRule(curr, rules[i], dist)\n\t}\n\treturn dist\n}\n\n\nfunction parseRule(curr, rule, dist) {\n\tif (rule.$rule) { // Rule Object\n\t\tdist.push(rule)\n\t} else if (isStr(rule)) { // match rule\n\t\tdist.push(match(rule, UNATTACH))\n\t} else if (isReg(rule)) {\n\t\tdist.push(match(rule, false, UNATTACH))\n\t} else if (isObj(rule)) {\n\t\tdist.push(match(rule))\n\t} else if (isArray(rule)) { // rule connections or match rule\n\t\tdist.push(applyNoScope(match, rule))\n\t} else {\n\t\terror(`Invalid Rule: ${rule}`)\n\t}\n}\n\n// ================================================\n// Complex Rules\n// ================================================\n/**\n * and complex rule interface\n *\n * @param {String}              name        rule name\n * @param {Function|Array|...}  rules       complex rules\n * @param {?}                   option      see Rule Constructor\n */\nexport const AndRule = inherit(function AndRule(name, rules, option) {\n\tComplexRule.call(this, name, rules, option)\n}, ComplexRule, {\n\ttype: 'And',\n\tsplit: ' + ',\n\t__init(rules, len) {\n\t\tconst start = [],\n\t\t\tindex = [],\n\t\t\tcodes = rules[0].getStart(this.idStack(this.id))\n\n\t\teachCharCodes(codes, false, (code) => {\n\t\t\tif (!index[code]) {\n\t\t\t\tstart.push(code)\n\t\t\t\tindex[code] = code\n\t\t\t}\n\t\t})\n\t\tthis.start = start\n\t\tthis.index = index\n\t\tthis.test = start.length ? testRuleByIndex : defaultRuleTest\n\t},\n\tgetStart(map) {\n\t\tthis.init()\n\t\tif (this.start) return this.start\n\t\tif (map) {\n\t\t\tconst { id } = this\n\t\t\tif (map[id]) return []\n\t\t\treturn this.getRules()[0].getStart(this.idStack(id, map))\n\t\t}\n\t\treturn this.start\n\t},\n\tmatch: function andMatch(stream, result) {\n\t\tconst rules = this.getRules(),\n\t\t\tlen = this.len,\n\t\t\trs = new MatchResult(result)\n\t\tlet err, i = 0\n\n\t\tstream.enter()\n\t\tfor (; i < len; i++) {\n\t\t\tif (!rules[i].test(stream) || (err = rules[i].match(stream, rs))) {\n\t\t\t\treturn this.exit(stream, this.EXPECTS[i], err)\n\t\t\t}\n\t\t}\n\t\treturn this.commit(stream, rs.data, result)\n\t}\n})\n\n\nexport const OrRule = inherit(function OrRule(name, rules, option) {\n\tComplexRule.call(this, name, rules, option)\n}, ComplexRule, {\n\ttype: 'Or',\n\tsplit: ' | ',\n\t__init(rules, len) {\n\t\tconst starts = [], // all distinct start codes\n\t\t\trStarts = [], // start codes per rule\n\t\t\tindex = [\n\t\t\t\t[] // rules witch have unkown start code\n\t\t\t]\n\n\t\tlet i, j, k, codes\n\n\t\t// get start codes of all rules\n\t\tfor (i = 0; i < len; i++) {\n\t\t\trStarts[i] = []\n\t\t\tcodes = rules[i].getStart(this.idStack(this.id))\n\t\t\teachCharCodes(codes, false, (code) => {\n\t\t\t\trStarts[i].push(code)\n\t\t\t\tif (!index[code]) { // init index\n\t\t\t\t\tindex[code] = []\n\t\t\t\t\tstarts.push(code)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// fill index\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tcodes = rStarts[i]\n\t\t\tif (!codes.length) { // rules[i] not unkown start code\n\t\t\t\tindex[0].push(rules[i]) // append rules[i] to index[0]\n\t\t\t\tcodes = starts // append rules[i] to all start code index\n\t\t\t}\n\t\t\t// append rules[i] to start code index\n\t\t\tj = codes.length\n\t\t\twhile (j--) {\n\t\t\t\tk = index[codes[j]]\n\t\t\t\tif (k.idx !== i) { // deduplication\n\t\t\t\t\tk.push(rules[i]) // append rules[i] to start code index[codes[j]]\n\t\t\t\t\tk.idx = i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.rStarts = rStarts\n\t\t// rule have unkown start code when got unkown start code from any rules\n\t\tthis.start = index[0].length ? [] : starts\n\t\tthis.test = starts.length && !index[0].length ? testRuleByIndex : this.test\n\n\t\tif (starts.length) // not use index when got unkown start code from every rules\n\t\t\tthis.index = index\n\t},\n\tgetStart(map) {\n\t\tthis.init()\n\t\tif (this.start) return this.start\n\t\tif (map) {\n\t\t\tconst { id } = this\n\t\t\tif (map[id]) return []\n\n\t\t\tconst rules = this.getRules(),\n\t\t\t\tstarts = []\n\t\t\tfor (var i = 0, start; i < this.len; i++) {\n\t\t\t\tstart = rules[i].getStart(this.idStack(id, map))\n\t\t\t\tif (!start.length) return []\n\t\t\t\tstarts[i] = start\n\t\t\t}\n\t\t\treturn starts\n\t\t}\n\t\treturn this.start\n\t},\n\tmatch: function orMatch(stream, result) {\n\t\tconst { index } = this\n\t\tconst rules = index ? index[stream.nextCode()] || index[0] : this.getRules(),\n\t\t\tlen = rules.length\n\n\t\tconst rs = new MatchResult(result)\n\t\tvar err, upErr, i\n\t\tstream.enter()\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!(err = rules[i].match(stream, rs)) &&\n\t\t\t\t!(err = this.success(stream, rs.data, result))) {\n\t\t\t\tstream.commit()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!err[2]) // not capturable error\n\t\t\t\treturn this.exit(stream, this.EXPECTS[i], err)\n\n\t\t\tif (!upErr || err[0] >= upErr[0])\n\t\t\t\tupErr = err\n\t\t\tstream.reset()\n\t\t\trs.empty()\n\t\t}\n\t\treturn this.exit(stream, this.EXPECT, upErr)\n\t}\n})\n\nfunction createRepeatRule(defType, Parent, match) {\n\treturn inherit(function AndRepeatRule(name, type, min, max, rules, option) {\n\t\tif (min < 0) min = 0\n\t\tif (max <= 0) max = 999999\n\t\tassert(min < max)\n\n\t\tParent.call(this, name, rules, option)\n\n\t\tthis.min = min\n\t\tthis.max = max\n\t\tthis.type = type || `${defType}[${min} - ${max}]`\n\t}, Parent, {\n\t\t__init(rules, len) {\n\t\t\tParent.prototype.__init.call(this, rules, len)\n\t\t\tif (!this.min)\n\t\t\t\tthis.test = defaultRuleTest\n\t\t},\n\t\tmatch\n\t})\n}\n\nexport const AndRepeatRule = createRepeatRule('AndRepeat', AndRule, function andRepeatMatch(stream, result) {\n\tconst { min, max } = this\n\tconst rules = this.getRules(),\n\t\tlen = this.len,\n\t\trs = new MatchResult(result),\n\t\tdata = rs.data\n\n\tlet err, repeat = 0,\n\t\ti, l\n\n\tstream.enter()\n\tout: for (; repeat < max; repeat++) {\n\t\tl = data.length\n\t\tstream.enter()\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!rules[i].test(stream) || (err = rules[i].match(stream, rs))) {\n\t\t\t\tif (repeat < min || (err && !err[2])) { // have no enough data or error is not capturable\n\t\t\t\t\terr = this.exit(stream, this.EXPECTS[i], err)\n\t\t\t\t\tstream.exit()\n\t\t\t\t\treturn err\n\t\t\t\t}\n\t\t\t\tstream.exit()\n\t\t\t\trs.setLen(l)\n\t\t\t\tbreak out\n\t\t\t}\n\t\t}\n\t\tstream.commit()\n\t}\n\treturn this.commit(stream, data, result)\n})\n\nexport const OrRepeatRule = createRepeatRule('OrRepeat', OrRule, function orRepeatMatch(stream, result) {\n\tconst { min, max, index } = this\n\tconst rs = new MatchResult(result),\n\t\tdata = rs.data\n\tlet err, upErr, repeat = 0,\n\t\ti, l, rules, len\n\n\tif (!index) {\n\t\trules = this.getRules()\n\t\tlen = rules.length\n\t}\n\n\tstream.enter() // outer: enter\n\tout: for (; repeat < max; repeat++) {\n\t\tif (index) {\n\t\t\trules = index[stream.nextCode()] || index[0]\n\t\t\tlen = rules.length\n\t\t}\n\t\tif (len) {\n\t\t\tupErr = null\n\t\t\tl = data.length\n\t\t\tstream.enter() // inner: enter\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (!(err = rules[i].match(stream, rs))) {\n\t\t\t\t\tstream.commit() // inner: commit\n\t\t\t\t\tcontinue out\n\t\t\t\t}\n\t\t\t\tif (!err[2]) { // not capturable error\n\t\t\t\t\terr = this.exit(stream, this.EXPECTS[i], err) // inner: exit\n\t\t\t\t\tstream.exit() // outer: exit\n\t\t\t\t\treturn err\n\t\t\t\t}\n\t\t\t\tif (!upErr || err[0] >= upErr[0])\n\t\t\t\t\tupErr = err\n\t\t\t\tstream.reset()\n\t\t\t\trs.setLen(l)\n\t\t\t}\n\t\t\tif (repeat < min) {\n\t\t\t\terr = this.exit(stream, this.EXPECT, upErr) // inner: exit\n\t\t\t\tstream.exit() // outer: exit\n\t\t\t\treturn err\n\t\t\t}\n\t\t} else if (repeat < min)\n\t\t\treturn this.exit(stream, this.EXPECT) // outer: exit\n\t\tbreak\n\t}\n\treturn this.commit(stream, data, result) // outer: commit\n})\n\n\n// ================================================\n// Rule APIs\n// ================================================\n\n/**\n * and(name, rules[], option)\n *\n * and(name, rules..., option)\n *\n * and(rules[], option)\n *\n * and(rules..., option)\n *\n * and({\n *      name,\n *      rules,\n *      option\n * })\n * @param {String}                                                  name    [option] rule name\n * @param {(Array|Arguments)<Rule|String|RegExp|Function>|Function} rules   match rules\n * @param {Function}                                                option  see Rule.option\n */\nexport function and() {\n\treturn buildComplexRule(arguments, 0,\n\t\t(name, rules, option) => new AndRule(name, rules, option))\n}\n\nexport function or() {\n\treturn buildComplexRule(arguments, 0,\n\t\t(name, rules, option) => new OrRule(name, rules, option))\n}\n\nfunction buildRepeatRule(args, i, type, min, max, C) {\n\treturn buildComplexRule(args, i,\n\t\t(name, rules, option) => new C(name, type, min, max, rules, option))\n}\n\nfunction buildAndRepeatRule(args, i, type, min, max, C) {\n\treturn buildRepeatRule(args, i, type, min, max, AndRepeatRule)\n}\nexport function any() {\n\treturn buildAndRepeatRule(arguments, 0, 'Any', 0, -1)\n}\n\nexport function many() {\n\treturn buildAndRepeatRule(arguments, 0, 'Many', 1, -1)\n}\n\nexport function option() {\n\treturn buildAndRepeatRule(arguments, 0, 'Option', 0, 1)\n}\n\nexport function repeat(min, max) {\n\treturn buildAndRepeatRule(arguments, 2, 0, min, max)\n}\n\nfunction buildOrRepeatRule(args, i, type, min, max, C) {\n\treturn buildRepeatRule(args, i, type, min, max, OrRepeatRule)\n}\nexport function anyOne() {\n\treturn buildOrRepeatRule(arguments, 0, 'AnyOne', 0, -1)\n}\n\nexport function manyOne() {\n\treturn buildOrRepeatRule(arguments, 0, 'ManyOne', 1, -1)\n}\n\nexport function optionOne() {\n\treturn buildOrRepeatRule(arguments, 0, 'OptionOne', 0, 1)\n}\n\nexport function repeatOne(min, max) {\n\treturn buildOrRepeatRule(arguments, 2, 0, min, max)\n}\n\nfunction buildComplexRule(args, i, build) {\n\tconst arglen = args.length\n\n\tlet name = 0,\n\t\trules, option = null\n\n\tif (isObj(args[i])) {\n\t\tname = args[i].name\n\t\trules = args[i].rules\n\t\toption = args[i]\n\t} else {\n\t\tif (isStr(args[i]))\n\t\t\tname = args[i++]\n\n\t\tif (isArray(args[i]) || isFn(args[i])) {\n\t\t\trules = args[i++]\n\t\t\toption = args[i]\n\t\t} else {\n\t\t\trules = []\n\t\t\tfor (; i < arglen - 1; i++)\n\t\t\t\trules.push(args[i])\n\t\t\tif (isFn(args[i]) || isObj(args[i]) || isStr(args[i])) option = args[i]\n\t\t\telse if (args[i]) rules.push(args[i])\n\t\t}\n\t}\n\treturn build(name, rules, option)\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:33:23\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-06 13:59:32\n */\nimport { assert, info } from 'devlevel'\nimport { List, FnList, nextTick, parsePath, formatPath, get, set } from '../common'\nimport { DEFAULT_BINDING } from '../common/List'\nimport { DEFAULT_FN_BINDING, DEFAULT_SCOPE_BINDING } from '../common/FnList'\nimport { inherit, create, extend, apply, defPropValue, hasOwnProp, eq, isPrimitive, isArray, makeMap, makeArray } from '../helper'\nimport es6 from './es6'\nimport es5 from './es5'\nimport vb from './vb'\nimport { PROTOTYPE } from '../helper/constants'\n\nconst OBSERVER_KEY = '__observer__'\n\n// ================= Array Hook Begin =======================\nconst ARRAY_EVENTS = makeMap('length,change')\nconst ArrayProto = Array[PROTOTYPE]\nconst arrayHooks = makeArray('fill,pop,push,reverse,shift,sort,splice,unshift', (method) => {\n\t\tconst fn = ArrayProto[method]\n\t\treturn [\n\t\t\tmethod,\n\t\t\tfunction () {\n\t\t\t\tconst len = this.length,\n\t\t\t\t\trs = apply(fn, this, arguments),\n\t\t\t\t\tnewlen = this.length,\n\t\t\t\t\tobserver = this[OBSERVER_KEY]\n\t\t\t\tobserver.__write('change', this, this)\n\t\t\t\tif (len !== newlen)\n\t\t\t\t\tobserver.__write('length', newlen, len)\n\t\t\t\treturn rs\n\t\t\t}\n\t\t]\n\t}),\n\tarrayHookLength = arrayHooks.length\n\nfunction hookArray(array) {\n\tfor (let i = 0, hook; i < arrayHookLength; i++) {\n\t\thook = arrayHooks[i]\n\t\tarray[hook[0]] = hook[1]\n\t}\n\treturn array\n}\n// ================= Array Hook End =======================\n\n\n\nexport const defaultProps = makeMap([OBSERVER_KEY, DEFAULT_BINDING, DEFAULT_FN_BINDING, DEFAULT_SCOPE_BINDING])\n// ================ init policy Begin ========================\nconst policy = es6(defaultProps) || es5(defaultProps) || vb(defaultProps)\n\nassert(policy, 'Observer is not supported.')\n\nconst { proxyEnabled = false, proxyChangeable = false, sourceOwnProperty = false } = policy\n\ninfo(`Observer: enable policy[${policy.name}]: `, {\n\tproxyEnabled,\n\tproxyChangeable,\n\tsourceOwnProperty\n}, 'default properties: ', defaultProps)\n\nexport function isDefaultProp(prop) {\n\treturn defaultProps[prop] || false\n}\n\n// ================ init policy End========================\n\nfunction noProxyChangeEventHandler() {\n\treturn false\n}\nlet disableWriteEvent = false\n\nfunction Observer(source) {\n\t// bind observer to object\n\tdefPropValue(source, OBSERVER_KEY, this)\n\tthis.source = this.proxy = source\n\tthis.bubbles = create(null)\n\tif (this.isArray = isArray(source)) {\n\t\thookArray(source)\n\t} else {\n\t\tthis.__init()\n\t}\n}\n\ninherit(Observer, {\n\t__init() {\n\t\t// implement by policy\n\t},\n\t__watch(prop) {\n\t\t// implement by policy\n\t},\n\t__write(prop, value, oldValue) { // call by policy\n\t\tif (disableWriteEvent) return\n\t\tconst list = this.bubbles[prop]\n\t\tif (!list || !list.length || (value === oldValue && isPrimitive(value)))\n\t\t\treturn\n\t\tlist.each((desc) => addChangedQueue(desc, oldValue))\n\t},\n\tobserve(path, handler, scope) {\n\t\tassert.fn(handler, 'require function handler.')\n\n\t\tpath = parsePath(path)\n\t\tconst l = path.length - 1\n\t\tassert(l >= 0, 'require non-empty path.')\n\n\t\tlet watchs = this.watchs || (this.watchs = create(null)),\n\t\t\tcurrentObserver = this,\n\t\t\tattr, desc,\n\t\t\tparent = undefined,\n\t\t\ti = 0,\n\t\t\tchildObserver, obj\n\n\t\tfor (; i <= l; i++) {\n\t\t\tattr = path[i]\n\t\t\tdesc = watchs[attr]\n\t\t\tif (!desc) {\n\t\t\t\tdesc = allocWatchDescriptor(this, currentObserver, attr, parent)\n\t\t\t\tif (currentObserver) {\n\n\t\t\t\t\tassert(!currentObserver.isArray || (ARRAY_EVENTS[attr] && i == l), () => {\n\t\t\t\t\t\tconst pathStr = formatPath(path)\n\t\t\t\t\t\tconst errorPath = formatPath(path.slice(i))\n\t\t\t\t\t\tconst arrayPath = i ? '[' + formatPath(path.slice(0, i)) + ']' : ''\n\t\t\t\t\t\treturn `invalid path[${pathStr}]: not support \"${errorPath}\" in Array${arrayPath}, change to \"change\" or \"length\".`\n\t\t\t\t\t})\n\n\t\t\t\t\tregisterBubble(currentObserver, desc)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i < l) {\n\t\t\t\tparent = desc\n\t\t\t\twatchs = desc[DESC_CHILDREN_INDEX]\n\t\t\t\tif (currentObserver) {\n\t\t\t\t\tif (obj = currentObserver.source[attr]) {\n\t\t\t\t\t\tif (!(childObserver = getObserver(obj))) {\n\t\t\t\t\t\t\tchildObserver = new Observer(obj)\n\t\t\t\t\t\t\tsetChildObserver(currentObserver, attr, childObserver)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchildObserver = undefined\n\t\t\t\t\t}\n\t\t\t\t\tcurrentObserver = childObserver\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdesc[DESC_PATH_INDEX] = path\n\t\treturn desc[DESC_HANDLERS_INDEX].add(handler, scope)\n\t},\n\tunobserve(path, handler, scope) {\n\t\tassert.fn(handler, 'require function handler.')\n\n\t\tpath = parsePath(path)\n\t\tconst l = path.length\n\n\t\tassert(l, 'require non-empty path.')\n\n\t\treturn this.watchs ? unwatch(this.watchs, path, 0, l - 1, handler, scope) : false\n\t},\n\tisObserved(path, handler, scope) {\n\t\tassert.fn(handler, 'require function handler.')\n\n\t\tpath = parsePath(path)\n\t\tconst l = path.length - 1\n\n\t\tassert(l >= 0, 'require non-empty path.')\n\n\t\tlet watchs = this.watchs,\n\t\t\ti = 0,\n\t\t\tdesc\n\n\t\tif (!watchs) return false\n\n\t\tfor (; i <= l; i++) {\n\t\t\tdesc = watchs[path[i]]\n\t\t\tif (!desc) return false\n\t\t\tif (i < l) watchs = desc[DESC_CHILDREN_INDEX]\n\t\t}\n\t\treturn handler ? desc[DESC_HANDLERS_INDEX].has(handler, scope) : !!desc[DESC_HANDLERS_INDEX].size()\n\t},\n\tset: proxyEnabled ? function (path, value, disableEvent) {\n\t\t_set(this, parsePath(path), value, disableEvent)\n\t\treturn this\n\t} : function (path, value, disableEvent) {\n\t\tif (disableEvent) {\n\t\t\tconst disabled = disableWriteEvent\n\t\t\tdisableWriteEvent = true\n\t\t\t_set(this, path, value, true)\n\t\t\tdisableWriteEvent = disabled\n\t\t} else {\n\t\t\t_set(this, path, value, true)\n\t\t}\n\t\treturn this\n\t},\n\tget(path) {\n\t\treturn get(this.source, path)\n\t},\n\t__proxyChanged: noProxyChangeEventHandler,\n\tonProxyChange: noProxyChangeEventHandler,\n\tunProxyChange: noProxyChangeEventHandler\n}, policy.impl)\n\n// ============ watch descriptor begin ===============\nconst DESC_HANDLERS_INDEX = 0,\n\tDESC_CHILDREN_INDEX = 1,\n\tDESC_CHILD_NUM_INDEX = 2,\n\tDESC_OWNER_INDEX = 3,\n\tDESC_OBSERVER_INDEX = 4,\n\tDESC_ATTR_INDEX = 5,\n\tDESC_PARENT_INDEX = 6,\n\tDESC_CHANGED_INDEX = 7,\n\tDESC_EVENT_INDEX = 8,\n\tDESC_VALUE_INDEX = 9,\n\tDESC_PATH_INDEX = 10\n\nfunction allocWatchDescriptor(owner, observer, attr, parent) {\n\tconst desc = [new FnList(), create(null), 0, owner, observer, attr, parent, NO_CHANGED, NO_CHANGED]\n\tif (parent) {\n\t\tparent[DESC_CHILDREN_INDEX][attr] = desc\n\t\tparent[DESC_CHILD_NUM_INDEX]++\n\t} else {\n\t\towner.watchs[attr] = desc\n\t}\n\treturn desc\n}\n\nfunction freeWatchDescriptor(desc) {\n\tconst parent = desc[DESC_PARENT_INDEX],\n\t\tattr = desc[DESC_ATTR_INDEX]\n\tif (parent) {\n\t\tparent[DESC_CHILDREN_INDEX][attr] = undefined\n\t\tparent[DESC_CHILD_NUM_INDEX]--\n\t} else {\n\t\tdesc[DESC_OWNER_INDEX].watchs[attr] = undefined\n\t}\n}\n// ============ watch descriptor end ===============\n\nfunction unwatch(watchs, path, level, maxLevel, handler, scope) {\n\tconst desc = watchs[path[level]]\n\tif (desc) {\n\t\tconst ret = level === maxLevel ?\n\t\t\tdesc[DESC_HANDLERS_INDEX].remove(handler, scope) :\n\t\t\tunwatch(desc[DESC_CHILDREN_INDEX], path, level + 1, maxLevel, handler, scope)\n\n\t\tif (!desc[DESC_CHILD_NUM_INDEX] && !desc[DESC_HANDLERS_INDEX].size()) {\n\t\t\tunregisterBubble(desc[DESC_OBSERVER_INDEX], desc, desc[DESC_ATTR_INDEX])\n\t\t\tfreeWatchDescriptor(desc)\n\t\t}\n\t\treturn ret\n\t}\n\treturn false\n}\n\nfunction registerBubble(observer, descriptor) {\n\tif (!observer) return false\n\tlet bubbles = observer.bubbles,\n\t\tattr = descriptor[DESC_ATTR_INDEX],\n\t\tdescs = bubbles[attr]\n\n\tif (!descs) {\n\t\tdescs = bubbles[attr] = new List()\n\t\tif (!observer.isArray)\n\t\t\tobserver.__watch(attr)\n\t}\n\treturn descs.add(descriptor)\n}\n\nfunction unregisterBubble(observer, descriptor, attr) {\n\tif (!observer) return false\n\tconst bubbles = observer.bubbles,\n\t\tdescs = bubbles[attr]\n\treturn descs && descs.remove(descriptor)\n}\n\nconst changedQueue = [],\n\teventQueue = [],\n\tNO_CHANGED = {}\n\nfunction addChangedQueue(desc, oldValue) {\n\tif (desc[DESC_CHANGED_INDEX] === NO_CHANGED) {\n\t\tdesc[DESC_CHANGED_INDEX] = oldValue\n\t\tconst l = changedQueue.length\n\t\tchangedQueue[l] = desc\n\t\tif (!l) nextTick(flushChangedQueue)\n\t}\n}\n\nfunction addEventQueue(desc, value, oldValue) {\n\tif (desc[DESC_EVENT_INDEX] === NO_CHANGED) {\n\t\tdesc[DESC_VALUE_INDEX] = value\n\t\tdesc[DESC_EVENT_INDEX] = oldValue\n\t\teventQueue.push(desc)\n\t} else {\n\t\tdesc[DESC_VALUE_INDEX] = value\n\t}\n}\n\nfunction flushChangedQueue() {\n\tlet desc,\n\t\ti = 0,\n\t\tl = changedQueue.length\n\n\tfor (; i < l; i++) {\n\t\tdesc = changedQueue[i]\n\t\tbubble(desc, observerValue(desc[DESC_OBSERVER_INDEX], desc[DESC_ATTR_INDEX]), desc[DESC_CHANGED_INDEX], addEventQueue)\n\t\tdesc[DESC_CHANGED_INDEX] = NO_CHANGED\n\t}\n\tchangedQueue.length = 0\n\n\tlet value, oldValue\n\tfor (i = 0, l = eventQueue.length; i < l; i++) {\n\t\tdesc = eventQueue[i]\n\t\tvalue = desc[DESC_VALUE_INDEX]\n\t\toldValue = desc[DESC_EVENT_INDEX]\n\t\tif (value !== oldValue || !isPrimitive(value))\n\t\t\tdesc[DESC_HANDLERS_INDEX].each((callback, scope) => {\n\t\t\t\tscope ? callback.call(scope, desc[DESC_PATH_INDEX], value, oldValue, desc[DESC_OWNER_INDEX]) :\n\t\t\t\t\tcallback(desc[DESC_PATH_INDEX], value, oldValue, desc[DESC_OWNER_INDEX])\n\t\t\t})\n\t\tdesc[DESC_EVENT_INDEX] = NO_CHANGED\n\t}\n\teventQueue.length = 0\n}\n\nfunction bubble(desc, value, oldValue, cb) {\n\tif (desc[DESC_HANDLERS_INDEX].size())\n\t\tcb(desc, value, oldValue)\n\n\tif (desc[DESC_CHILD_NUM_INDEX]) {\n\t\tnewObserver = value ? observer(value) : undefined\n\t\tsetChildObserver(desc[DESC_OBSERVER_INDEX], desc[DESC_ATTR_INDEX], newObserver)\n\t\t__bubble(desc, newObserver, cb)\n\t}\n}\n\nfunction __bubble(parent, newObserver, cb) {\n\tlet children = parent[DESC_CHILDREN_INDEX],\n\t\tattr, desc, oldObserver, nextObserver\n\n\tfor (attr in children) {\n\t\tif ((desc = children[attr]) && desc[DESC_OWNER_INDEX] && (oldObserver = desc[DESC_OBSERVER_INDEX]) !== newObserver) {\n\n\t\t\tif (desc[DESC_HANDLERS_INDEX].size())\n\t\t\t\tcb(desc, observerValue(newObserver, attr), observerValue(oldObserver, attr))\n\n\t\t\tunregisterBubble(oldObserver, desc, attr)\n\t\t\tdesc[DESC_OBSERVER_INDEX] = newObserver\n\t\t\tregisterBubble(newObserver, desc)\n\n\t\t\tif (desc[DESC_CHILD_NUM_INDEX]) {\n\t\t\t\tnextObserver = (nextObserver = newObserver.source[attr]) ? observer(nextObserver) : undefined\n\t\t\t\tsetChildObserver(newObserver, attr, nextObserver)\n\t\t\t\t__bubble(desc, nextObserver, cb)\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst setChildObserver = proxyEnabled ? function (parentObserver, attr, childObserver) {\n\tif (childObserver)\n\t\tparentObserver.source[attr] = childObserver.proxy\n} : function (parentObserver, attr, childObserver) {\n\n}\n\nfunction observerValue(observer, attr) {\n\tif (observer) {\n\t\tif (observer.isArray && attr === 'change')\n\t\t\treturn observer.proxy\n\t\treturn observer.source[attr]\n\t}\n}\n\nfunction _set(observer, path, value, setSource) {\n\tlet i = 0,\n\t\tl = path.length - 1,\n\t\tprop, obj, nextObj, source\n\n\tfor (; i < l; i++) {\n\t\tprop = path[i]\n\t\tif (observer) {\n\t\t\tsource = observer.source\n\t\t\tnextObj = source[prop]\n\t\t\tif (!nextObj || !(observer = getObserver(nextObj))) {\n\t\t\t\tif (nextObj === undefined || nextObj === null)\n\t\t\t\t\tnextObj = setSource ? source[prop] = {} : observer.proxy[prop] = {}\n\t\t\t\tobserver = undefined\n\t\t\t\tobj = nextObj\n\t\t\t}\n\t\t} else {\n\t\t\tnextObj = obj[prop]\n\t\t\tif (!nextObj) nextObj = obj[prop] = {}\n\t\t\tobj = nextObj\n\t\t}\n\t}\n\tprop = path[i]\n\tif (observer) {\n\t\tsetSource ? observer.source[prop] = value : observer.proxy[prop] = value\n\t} else {\n\t\tobj[prop] = value\n\t}\n}\n\n\n// ================== API ============================\nexport function isProxyEnabled() {\n\treturn proxyEnabled\n}\n\nexport function $set(obj, path, value) {\n\tpath = parsePath(path)\n\tconst observer = getObserver(obj)\n\tif (observer)\n\t\treturn _set(observer, path, value, !proxyEnabled)\n\tset(obj, path)\n}\n\nexport function observer(source) {\n\treturn getObserver(source) || new Observer(source)\n}\n\nexport function observe(source, path, handler, scope) {\n\tconst _observer = observer(source)\n\treturn (_observer.observe(path, handler, scope), _observer.proxy)\n}\n\nexport function unobserve(obj, path, handler, scope) {\n\tconst observer = getObserver(obj)\n\treturn observer ? (observer.unobserve(path, handler, scope), observer.proxy) : obj\n}\n\nexport function isObserved(obj, path, handler, scope) {\n\tconst observer = getObserver(obj)\n\treturn observer && observer.isObserved(path, handler, scope)\n}\n\nlet getObserver = (obj) => {\n\t\tconst observer = obj[OBSERVER_KEY]\n\t\tif (observer && observer.source === obj)\n\t\t\treturn observer\n\t},\n\t$hasOwnProp = (obj, prop) => {\n\t\treturn defaultProps[prop] ? false : hasOwnProp(obj, prop)\n\t},\n\tsource = (obj) => obj,\n\tproxy = source,\n\t$eq = eq,\n\tonProxyChange = noProxyChangeEventHandler,\n\tunProxyChange = noProxyChangeEventHandler\n\nif (proxyEnabled) {\n\tif (sourceOwnProperty) {\n\t\t$hasOwnProp = function (obj, prop) {\n\t\t\tif (defaultProps[prop]) return false\n\t\t\tconst observer = getObserver(obj)\n\t\t\treturn hasOwnProp(observer ? observer.source : obj, prop)\n\t\t}\n\t}\n\n\t$hasOwnProp = function (obj, prop) {\n\t\tif (defaultProps[prop]) return false\n\t\tconst observer = getObserver(obj)\n\t\treturn hasOwnProp(observer ? observer.source : obj, prop)\n\t}\n\n\tgetObserver = function (obj) {\n\t\tconst observer = obj[OBSERVER_KEY]\n\t\tif (observer && (observer.source === obj || observer.proxy === obj))\n\t\t\treturn observer\n\t}\n\tsource = function (obj) {\n\t\tconst observer = obj && getObserver(obj)\n\t\treturn observer ? observer.source : obj\n\t}\n\tproxy = function (obj) {\n\t\tconst observer = obj && getObserver(obj)\n\t\treturn observer ? observer.proxy : obj\n\t}\n\t$eq = function (o1, o2) {\n\t\treturn eq(o1, o2) ||\n\t\t\t((o1 && o2 && (o1 = getObserver(o1))) ? o1 === getObserver(o2) : false)\n\t}\n\tif (proxyChangeable) {\n\t\textend(Observer, {\n\t\t\t__proxyChanged() {\n\t\t\t\tconst list = this.proxyListens,\n\t\t\t\t\tsource = this.source,\n\t\t\t\t\tproxy = this.proxy\n\t\t\t\tlist && list.each((callback, scope) => {\n\t\t\t\t\tscope ? callback.call(scope, source, proxy, this) : callback(source, proxy, this)\n\t\t\t\t})\n\t\t\t},\n\t\t\tonProxyChange(fn, scope) {\n\t\t\t\tassert.fn(fn, 'require function handler.')\n\t\t\t\tlet list = this.proxyListens\n\t\t\t\tif (!list)\n\t\t\t\t\tlist = this.proxyListens = new FnList()\n\t\t\t\treturn list.add(fn, scope)\n\t\t\t},\n\t\t\tunProxyChange(fn, scope) {\n\t\t\t\tassert.fn(fn, 'require function handler.')\n\t\t\t\tlet list = this.proxyListens\n\t\t\t\treturn list && list.remove(fn, scope)\n\t\t\t}\n\t\t})\n\n\t\tonProxyChange = function (obj, fn, scope) {\n\t\t\tconst observer = getObserver(obj)\n\t\t\treturn observer && observer.onProxyChange(fn, scope)\n\t\t}\n\t\tunProxyChange = function (obj, fn, scope) {\n\t\t\tconst observer = getObserver(obj)\n\t\t\treturn observer && observer.unProxyChange(fn, scope)\n\t\t}\n\t}\n}\n\n\nexport {\n\tgetObserver,\n\t$hasOwnProp,\n\tsource,\n\tproxy,\n\t$eq,\n\tonProxyChange,\n\tunProxyChange\n}\n\nexport function $getOwnProp(obj, key, defaultVal) {\n\treturn $hasOwnProp(obj, key) ? obj[key] : defaultVal\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:09\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:09\n */\nimport { global, isFn } from '../helper'\n\nexport default function (defaultProps) {\n\tif (isFn(global.Proxy)) {\n\t\treturn {\n\t\t\tname: 'Proxy',\n\t\t\tproxyEnabled: true,\n\t\t\timpl: {\n\t\t\t\t__init() {\n\t\t\t\t\tlet isArray = this.isArray\n\t\t\t\t\tthis.proxy = new Proxy(this.source, {\n\t\t\t\t\t\tget: (source, attr, proxy) => {\n\t\t\t\t\t\t\treturn source[attr]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: (source, attr, value, proxy) => {\n\t\t\t\t\t\t\tif (defaultProps[attr]) {\n\t\t\t\t\t\t\t\tsource[attr] = value\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar oldValue = source[attr]\n\t\t\t\t\t\t\t\tsource[attr] = value\n\t\t\t\t\t\t\t\tthis.__write(attr, value, oldValue)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:14\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:14\n */\nimport { create, defProp, defPropSupport } from '../helper'\nimport { PROTOTYPE } from '../helper/constants'\n\nexport default function () {\n\tlet defineProperty, name = 'Define Property'\n\tif (defPropSupport) {\n\t\tdefineProperty = function (observer, attr) {\n\t\t\tconst source = observer.source\n\t\t\tlet value = source[attr]\n\t\t\tdefProp(source, attr, {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tget() {\n\t\t\t\t\treturn value\n\t\t\t\t},\n\t\t\t\tset(newValue) {\n\t\t\t\t\tlet oldValue = value\n\t\t\t\t\tvalue = newValue\n\t\t\t\t\tobserver.__write(attr, newValue, oldValue)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t} else if ('__defineGetter__' in {}) {\n\t\tname = 'Define getter and setter'\n\t\tconst { __defineGetter__, __defineSetter__ } = Object[PROTOTYPE]\n\t\tdefineProperty = function (observer, attr) {\n\t\t\tconst source = observer.source\n\t\t\tlet value = source[attr]\n\t\t\t__defineGetter__.call(source, attr, function () {\n\t\t\t\treturn value\n\t\t\t})\n\t\t\t__defineSetter__.call(source, attr, function (newValue) {\n\t\t\t\tlet oldValue = value\n\t\t\t\tvalue = newValue\n\t\t\t\tobserver.__write(attr, newValue, oldValue)\n\t\t\t})\n\t\t}\n\t}\n\tif (defineProperty) {\n\t\treturn {\n\t\t\tname,\n\t\t\timpl: {\n\t\t\t\t__init() {\n\t\t\t\t\tthis.defined = create(null)\n\t\t\t\t},\n\t\t\t\t__watch(attr) {\n\t\t\t\t\tconst defined = this.defined\n\t\t\t\t\tif (defined[attr]) {\n\t\t\t\t\t\tdefineProperty(this, attr)\n\t\t\t\t\t\tdefined[attr] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:35:04\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:35:04\n */\nimport { error } from 'devlevel'\nimport { global, create, hasOwnProp } from '../helper'\n\nexport default function (defaultPropMap) {\n\tif (!(function () {\n\t\t\tif (global && global.VBArray) {\n\t\t\t\ttry {\n\t\t\t\t\tglobal.execScript([\n\t\t\t\t\t\t'Function parseVB(code)',\n\t\t\t\t\t\t'\\tExecuteGlobal(code)',\n\t\t\t\t\t\t'End Function'\n\t\t\t\t\t].join('\\n'), 'VBScript')\n\t\t\t\t\treturn true\n\t\t\t\t} catch (e) {\n\t\t\t\t\terror(e.message, e)\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t})()) return false\n\n\tconst bindingProp = '__vbclass_binding__',\n\t\tconstructorProp = '__vbclass_constructor__'\n\tconst objectProps = 'hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(','),\n\t\tclassPool = create(null),\n\t\tconstructorScript = [\n\t\t\t'\\tPublic [', bindingProp, ']\\r\\n',\n\t\t\t'\\tPublic Default Function [', constructorProp, '](source)\\r\\n',\n\t\t\t'\\t\\tSet [', bindingProp, '] = source\\r\\n',\n\t\t\t'\\t\\tSet [', constructorProp, '] = Me\\r\\n',\n\t\t\t'\\tEnd Function\\r\\n\\n'\n\t\t].join('')\n\n\tlet classNameGenerator = 1\n\n\tfunction parseGetter(prop, buffer) {\n\t\tbuffer.push.call(buffer,\n\t\t\t'\\tPublic Property Let [', prop, '](val)\\r\\n',\n\t\t\t'\\t\\tCall [', bindingProp, '].doWrite(\"', prop, '\",val)\\r\\n',\n\t\t\t'\\tEnd Property\\r\\n',\n\t\t\t'\\tPublic Property Set [', prop, '](val)\\r\\n',\n\t\t\t'\\t\\tCall [', bindingProp, '].doWrite(\"', prop, '\",val)\\r\\n',\n\t\t\t'\\tEnd Property\\r\\n\\r\\n')\n\t}\n\n\tfunction parseSetter(prop, buffer) {\n\t\tbuffer.push.call(buffer,\n\t\t\t'\\tPublic Property Get [', prop, ']\\r\\n',\n\t\t\t'\\tOn Error Resume Next\\r\\n',\n\t\t\t'\\t\\tSet[', prop, '] = [', bindingProp, '].doRead(\"', prop, '\")\\r\\n',\n\t\t\t'\\tIf Err.Number <> 0 Then\\r\\n',\n\t\t\t'\\t\\t[', prop, '] = [', bindingProp, '].doRead(\"', prop, '\")\\r\\n',\n\t\t\t'\\tEnd If\\r\\n',\n\t\t\t'\\tOn Error Goto 0\\r\\n',\n\t\t\t'\\tEnd Property\\r\\n\\r\\n'\n\t\t)\n\t}\n\n\tfunction parseVBClass(className, props) {\n\t\tlet buffer = ['Class ', className, '\\r\\n', constructorScript, '\\r\\n'],\n\t\t\tprop\n\n\t\tfor (var i = 0, l = props.length; i < l; i++) {\n\t\t\tprop = props[i]\n\t\t\tparseSetter(prop, buffer)\n\t\t\tparseGetter(prop, buffer)\n\t\t}\n\t\tbuffer.push('End Class')\n\t\treturn buffer.join('')\n\t}\n\n\tfunction getOrCreateVBClass(props) {\n\t\tlet classKey = [props.sort().join('|')].join(''),\n\t\t\tproviderName = classPool[classKey]\n\t\tif (!providerName) {\n\t\t\tvar className = 'VBClass' + (classNameGenerator++)\n\t\t\tproviderName = className + 'Provider'\n\t\t\tparseVB(parseVBClass(className, props))\n\t\t\tparseVB([\n\t\t\t\t'Function ', providerName, '(desc)\\r\\n',\n\t\t\t\t'\\tDim o\\r\\n',\n\t\t\t\t'\\tSet o = (New ', className, ')(desc)\\r\\n',\n\t\t\t\t'\\tSet ', providerName, ' = o\\r\\n',\n\t\t\t\t'End Function'\n\t\t\t].join(''))\n\t\t\tclassPool[classKey] = providerName\n\t\t}\n\t\treturn providerName\n\t}\n\n\tfunction createProxy(source, vbproxy) {\n\t\tlet propMap = create(null),\n\t\t\tprops = [],\n\t\t\tprop\n\n\t\tfor (var i = 0, l = objectProps.length; i < l; i++) {\n\t\t\tprop = objectProps[i]\n\t\t\tpropMap[prop] = true\n\t\t\tprops[i] = prop\n\t\t}\n\n\t\tfor (prop in source) {\n\t\t\tif (!propMap[prop]) {\n\t\t\t\tprops.push(prop)\n\t\t\t\tpropMap[prop] = true\n\t\t\t}\n\t\t}\n\n\t\tfor (prop in defaultPropMap) {\n\t\t\tif (defaultPropMap[prop] && !propMap[prop]) {\n\t\t\t\tsource[prop] = undefined\n\t\t\t\tpropMap[prop] = true\n\t\t\t\tprops.push(prop)\n\t\t\t}\n\t\t}\n\t\treturn global[getOrCreateVBClass(props)](vbproxy)\n\t}\n\n\tfunction buildProxy(observer) {\n\t\tlet source = observer.source,\n\t\t\tproxy = observer.proxy = createProxy(source, observer),\n\t\t\tfuncs = observer.funcs = create(null),\n\t\t\tfunc\n\t\tfor (var prop in source) {\n\t\t\tfunc = source[prop]\n\t\t\tif (typeof func === 'function')\n\t\t\t\tfuncs[prop] = func.bind(proxy)\n\t\t}\n\t}\n\treturn {\n\t\tname: 'VBProxy',\n\t\tproxyEnabled: true,\n\t\tproxyChangeable: true,\n\t\tsourceOwnProperty: true,\n\t\timpl: {\n\t\t\t__init() {\n\t\t\t\tbuildProxy(this)\n\t\t\t},\n\t\t\t__watch(attr) {\n\t\t\t\tif (!(attr in this.proxy)) {\n\t\t\t\t\tbuildProxy(this)\n\t\t\t\t\tthis.__proxyChanged()\n\t\t\t\t}\n\t\t\t},\n\t\t\tdoWrite(attr, value) {\n\t\t\t\tlet {\n\t\t\t\t\tsource,\n\t\t\t\t\tproxy,\n\t\t\t\t\tfuncs\n\t\t\t\t} = this\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\tfuncs[attr] = value.bind(proxy)\n\t\t\t\t} else if (funcs[attr]) {\n\t\t\t\t\tfuncs[attr] = false\n\t\t\t\t}\n\t\t\t\tif (defaultProps[attr]) {\n\t\t\t\t\tsource[attr] = value\n\t\t\t\t} else {\n\t\t\t\t\tvar oldValue = source[attr]\n\t\t\t\t\tsource[attr] = value\n\t\t\t\t\tthis.__write(attr, value, oldValue)\n\t\t\t\t}\n\t\t\t},\n\t\t\tdoRead(attr) {\n\t\t\t\tlet {\n\t\t\t\t\tsource,\n\t\t\t\t\tproxy,\n\t\t\t\t\tfuncs\n\t\t\t\t} = this\n\t\t\t\treturn funcs[attr] || source[attr]\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:20\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:20\n */\nimport { proxy, $hasOwnProp, isDefaultProp } from './observer'\nimport { eachObj, eachStr, reachStr, __mkEachArrayLike, __mkREachArrayLike, __mkEach, STOP } from '../helper/each'\n\n\nexport const $eachArray = __mkEachArrayLike(arrayValueHandler),\n\t$reachArray = __mkREachArrayLike(arrayValueHandler),\n\t$each = __mkEach(eachStr, $eachArray, $eachObj),\n\t$reach = __mkEach(reachStr, $reachArray, $eachObj)\n\nexport function $eachObj(obj, callback, scope, own) {\n\tif (scope) callback = callback.bind(scope)\n\tlet key\n\tif (own === false) {\n\t\tfor (key in obj)\n\t\t\tif (!isDefaultProp(key) &&\n\t\t\t\tcallback(proxy(obj[key]), key, obj) === STOP)\n\t\t\t\treturn key\n\t} else {\n\t\tfor (key in obj)\n\t\t\tif ($hasOwnProp(obj, key) &&\n\t\t\t\tcallback(proxy(obj[key]), key, obj) === STOP)\n\t\t\t\treturn key\n\t}\n}\n\nfunction arrayValueHandler(array, i) {\n\tconst obj = array[i]\n\treturn obj ? proxy(obj) : obj\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:59\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:59\n */\nimport { $each, $eachArray, $eachObj } from './each'\nimport { mapStr, __mkMapArrayLike, __mkMapObj } from '../helper/map'\nimport { __mkEach } from '../helper/each'\n\nexport const $mapArray = __mkMapArrayLike($eachArray),\n\t$mapObj = __mkMapObj($eachObj),\n\t$map = __mkEach(mapStr, $mapArray, $mapObj)\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:40\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:40\n */\nimport { $map, $mapArray, $mapObj } from './map'\nimport { mapStr, __mkMapArrayLike, __mkMapObj } from '../helper/map'\nimport { __mkFilter } from '../helper/filter'\n\nexport const $filterArray = __mkFilter($mapArray),\n\t$filterObj = __mkFilter($mapObj),\n\t$filter = __mkFilter($map)\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:50\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:50\n */\nimport { $each, $eachArray, $eachObj, $reach, $reachArray } from './each'\nimport { __mkFind } from '../helper/find'\n\n\nexport const $findArray = __mkFind($eachArray),\n\t$findObj = __mkFind($eachObj),\n\t$find = __mkFind($each),\n\t$rfindArray = __mkFind($reachArray),\n\t$rfind = __mkFind($reach)\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:55\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:55\n */\nimport { $eachArray, $eachObj, $reachArray } from './each'\nimport { __mkIndexOf, __mkTypeIndexOf } from '../helper/indexOf'\n\nexport const $indexOfArray = __mkTypeIndexOf($eachArray),\n\t$indexOfObj = __mkTypeIndexOf($eachObj),\n\t$lastIndexOfArray = __mkTypeIndexOf($reachArray),\n\t$indexOf = __mkIndexOf($indexOfArray, 'indexOf'),\n\t$lastIndexOf = __mkIndexOf($lastIndexOfArray, 'lastIndexOf')\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:32:23\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:32:23\n */\nimport { __assign } from '../helper/assign';\nimport { proxy, $hasOwnProp } from './observer'\n\nexport function $assign(obj) {\n\treturn __assign(obj, arguments, 1, __assignFilter)\n}\n\nexport function $assignIf(obj) {\n\treturn __assign(obj, arguments, 1, __assignIfFilter)\n}\n\nexport function $assignBy(obj, filter) {\n\treturn __assign(obj, arguments, 2, __assignUserFilter, filter)\n}\n\nfunction __assignUserFilter(prop, dist, source, cb) {\n\treturn $hasOwnProp(source, prop) && cb(prop, dist, source)\n}\n\nfunction __assignIfFilter(prop, dist, source) {\n\treturn $hasOwnProp(source, prop) && !$hasOwnProp(dist, prop)\n}\n\nfunction __assignFilter(prop, dist, source) {\n\treturn $hasOwnProp(source, prop)\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:33:14\n * @Last Modified by:   tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-29 12:33:14\n */\nimport { proxy, $hasOwnProp, isDefaultProp } from './observer'\nimport { STOP, SKIP } from '../helper'\nimport {__mkKV} from '../helper/obj2array'\n\nexport function $obj2array(obj, valueHandler, scope, own) {\n\tconst array = []\n\tlet key, ret, i = 0\n\n\tif (scope) valueHandler = valueHandler.bind(scope)\n\tif (own === false) {\n\t\tfor (key in obj) {\n\t\t\tif (!isDefaultProp(key)) {\n\t\t\t\tret = valueHandler(obj, key)\n\t\t\t\tif (ret === STOP) break\n\t\t\t\tif (ret !== SKIP)\n\t\t\t\t\tarray[i++] = ret\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (key in obj) {\n\t\t\tif ($hasOwnProp(obj, key)) {\n\t\t\t\tret = valueHandler(obj, key)\n\t\t\t\tif (ret === STOP) break\n\t\t\t\tif (ret !== SKIP)\n\t\t\t\t\tarray[i++] = ret\n\t\t\t}\n\t\t}\n\t}\n\treturn array\n}\n\nexport const $keys = __mkKV($obj2array, keyHandler),\n\t$values = __mkKV($obj2array, valueHandler)\n\nfunction keyHandler(obj, key) {\n\treturn isDefaultProp(key) ? isDefaultProp : key\n}\n\nfunction valueHandler(obj, key) {\n\treturn proxy(obj[key])\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:35:58\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-10-20 13:09:21\n */\nimport { assert } from 'devlevel'\nimport { inherit } from '../helper'\n\nexport const CHILD_NODES = 'childNodes',\n\tPARENT = 'parent',\n\tVIRT_NODE = '$virtNode',\n\tVIRT_ELEMENT = '$virtElement',\n\tVIRT_TEXT = '$virtText',\n\tVIRT_BINDING_TEXT = '$virtBindingText',\n\tVIRT_COMPLEX_ELEMENT = '$virtComplexElement',\n\tVIRT_COMMENT = '$virtComment'\n\nexport default inherit(function VNode(comp) {\n\tassert(comp.$comp, 'Require Compontent')\n\tthis.comp = comp\n}, {\n\t[VIRT_NODE]: true,\n\tprepare() {},\n\tmount() {},\n\tunmount() {},\n\tappendTo(parent) {\n\t\tassert(parent.$virtComplexElement, 'parent should be Virtual Complex Element')\n\n\t\treturn parent.append(this)\n\t},\n\tprependTo(parent) {\n\t\tassert(parent.$virtComplexElement, 'parent should be Virtual Complex Element')\n\n\t\treturn parent.prepend(this)\n\t},\n\tinsertBeforeTo(target) {\n\t\tassert(target[PARENT], 'target is Root Node')\n\t\tassert(target[VIRT_NODE], 'target should be Virtual Node')\n\n\t\treturn target[PARENT].insertBefore(this, target)\n\t},\n\tinsertAfterTo(target) {\n\t\tassert(target[PARENT], 'target is Root Node')\n\t\tassert(target[VIRT_NODE], 'target should be Virtual Node')\n\n\t\treturn target[PARENT].insertAfter(this, target)\n\t},\n\treplaceTo(target) {\n\t\tassert(target[PARENT], 'target is Root Node')\n\t\tassert(target[VIRT_NODE], 'target should be Virtual Node')\n\n\t\treturn target[PARENT].replace(this, target)\n\t},\n\tprevSibling() {\n\t\tconst parent = this[PARENT]\n\t\treturn parent && parent[CHILD_NODES].prev(this)\n\t},\n\tnextSibling() {\n\t\tconst parent = this[PARENT]\n\t\treturn parent && parent[CHILD_NODES].next(this)\n\t},\n\tremove() {\n\t\tconst parent = this[PARENT]\n\t\tif (parent) {\n\t\t\tparent[CHILD_NODES].remove(this)\n\t\t\tthis[PARENT] = undefined\n\t\t}\n\t\treturn this\n\t}\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:36:05\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-15 19:14:12\n */\nimport VNode, { VIRT_TEXT } from './VNode'\nimport { inherit, isNil, strval } from '../helper'\n\nexport default inherit(function VText(comp, text) {\n\tVNode.call(this, comp)\n\tthis.data = text\n}, VNode, {\n\t[VIRT_TEXT]: true,\n\ttext(text) {\n\t\tconst { data } = this\n\t\tif (arguments.length === 0)\n\t\t\treturn data\n\t\ttext = strval(text)\n\t\tif (text !== data) {\n\t\t\tthis.update(text)\n\t\t\tthis.data = text\n\t\t}\n\t\treturn this\n\t}\n})\n","import { create, createFn, makeMap, apply, trim, STOP, inherit } from './helper'\n\nexport const keywords = makeMap(\n\t'argilo,Math,Date,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,parseInt,parseFloat,' +\n\t(window ? 'window,document,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent' : 'global'))\n\n\nconst wsReg = /\\s/g,\n\tnewlineReg = /\\n/g,\n\tescapeReg = /[\\{,]\\s*[\\w\\$_]+\\s*:|('(?:[^'\\\\]|\\\\.)*'|\"(?:[^\"\\\\]|\\\\.)*\"|`(?:[^`\\\\]|\\\\.)*\\$\\{|\\}(?:[^`\\\\\"']|\\\\.)*`|`(?:[^`\\\\]|\\\\.)*`)|new |typeof |void |(\\|\\|)/g,\n\trestoreReg = /\"(\\d+)\"/g,\n\tidentityReg = /[^\\w$\\.][A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*)*/g,\n\tpropReg = /^[A-Za-z_$][\\w$]*/,\n\tsimplePathReg = /^[A-Za-z_$#@][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*$/,\n\tsplitReg = /\\s*\\|\\s*(?:\\|\\s*)*/,\n\ttransformParamReg = /\\s*,\\s*|\\s+/g\n\n// escaped code\n// save escaped string\nconst escaped = []\n\nfunction escape(code) {\n\treturn code.replace(escapeReg, escapeHandler)\n}\n\nfunction restore(code) {\n\treturn code.replace(restoreReg, restoreHandler)\n}\n\nfunction escapeHandler(match) {\n\tlet i = escaped.length\n\tescaped[i] = match\n\treturn `\"${i}\"`\n}\n\nconst escapeStrReg = /\\n|\\t|\\r/g\n\nfunction escapeStrHandler(m) {\n\tswitch (m) {\n\tcase '\\n':\n\t\treturn '\\\\n'\n\tcase '\\t':\n\t\treturn '\\\\t'\n\tcase '\\r':\n\t\treturn '\\\\r'\n\t}\n}\n\nfunction restoreHandler(match, i) {\n\tconst v = escaped[i]\n\tswitch (v.charAt(0)) {\n\tcase '\"':\n\tcase \"'\":\n\tcase '`':\n\t\treturn v.replace(escapeStrReg, escapeStrHandler)\n\t}\n\treturn v\n}\n\n// identity opeartion type\nexport const IDENTITY_OPT_GET = 1,\n\tIDENTITY_OPT_SET = 2,\n\tIDENTITY_OPT_CALL = 3\n\n// parsed identities\nlet identities = create(null),\n\tidentitySize = 0\n\n// identity process callback: function(prefix, identity, opt[IDENTITY_OPT_GET | IDENTITY_OPT_SET | IDENTITY_OPT_CALL])\nlet userIdentityHandler, userKeyWords\n\nfunction isKeyword(attr) {\n\treturn keywords[attr] || (userKeyWords && userKeyWords[attr])\n}\n\nfunction identityHandler(match, i, str) {\n\tconst prefix = match.charAt(0),\n\t\tidentity = match.slice(1),\n\t\tattr = identity.match(propReg)[0]\n\n\tif (isKeyword(attr)) return match\n\n\tconst optIdx = i + match.length,\n\t\toptChar = str.charAt(optIdx)\n\n\tlet opt = IDENTITY_OPT_GET\n\tswitch (optChar) {\n\tcase '(':\n\t\topt = IDENTITY_OPT_CALL\n\t\tbreak\n\tcase '=':\n\t\tif (str.charAt(optIdx + 1) !== '=')\n\t\t\topt = IDENTITY_OPT_SET\n\t\tbreak\n\tcase '/':\n\tcase '*':\n\tcase '+':\n\tcase '-':\n\tcase '%':\n\tcase '&':\n\tcase '|':\n\tcase '~':\n\tcase '^':\n\t\tif (str.charAt(optIdx + 1) === '=')\n\t\t\topt = IDENTITY_OPT_SET\n\t\tbreak\n\tcase '>':\n\tcase '<':\n\t\tif (str.charAt(optIdx + 1) === optChar && str.charAt(optIdx + 2) === '=')\n\t\t\topt = IDENTITY_OPT_SET\n\t\tbreak\n\t}\n\n\tconst rs = userIdentityHandler(prefix, identity, opt)\n\tif (rs) {\n\t\tif (rs[1]) {\n\t\t\tif (!identities[rs[1]]) {\n\t\t\t\tidentitySize++;\n\t\t\t\tidentities[rs[1]] = true\n\t\t\t}\n\t\t}\n\t\treturn rs[0]\n\t}\n\treturn match\n}\n\nfunction makeExecutor(code, params) {\n\tconst body = 'return' + restore((' ' + code.replace(wsReg, '')).replace(identityReg, identityHandler))\n\ttry {\n\t\treturn createFn(params, body)\n\t} catch (e) {\n\t\tconsole.error(code, body)\n\t\tthrow e\n\t}\n}\n\nfunction cleanIdentities() {\n\tif (!identitySize) return []\n\n\t// get identities\n\tconst idents = new Array(identitySize)\n\tlet ident, i = 0\n\tfor (ident in identities)\n\t\tidents[i++] = ident\n\n\t// reset identities\n\tidentities = create(null)\n\tidentitySize = 0\n\treturn idents\n}\n\nfunction isSimpleExpr(code) {\n\tif (simplePathReg.test(code)) {\n\t\tconst match = code.match(propReg)\n\t\treturn match ? !isKeyword(match[0]) : false\n\t}\n\treturn false\n}\n\nconst filterSplitReg = /\\s*\\|\\s*(?:\\|\\s*)*/,\n\tfilterParamReg = /\\s*,\\s*|\\s+/g\n\n/**\n * - identity processor Prototype:\n *\n * [word: String, identity: String>] function(prefix: String, identity: String, opt: IDENTITY_OPT_GET | IDENTITY_OPT_SET | IDENTITY_OPT_CALL)\n *\n * - transforms format:\n *\n * {\n *      [name]: {\n *          transform(args){\n *              ...\n *          },\n *          restore(args){\n *          }\n *      }\n * }\n * @param {String} code                 expression code\n * @param {String[]} paramNames         parameter names\n * @param {Function} identityHandler    identity processor\n * @param {Function} parseFilter        filter processor\n * @param {Object} keywords             keywords <key, true>\n *\n */\nexport function Expression(code, paramNames, identityHandler, parseFilter, keywords) {\n\tuserIdentityHandler = identityHandler\n\tuserKeyWords = keywords\n\n\tthis.expr = code\n\n\tconst codeSplit = escape(code).split(filterSplitReg),\n\t\tlen = codeSplit.length\n\n\t// parse executor\n\tthis.executor = makeExecutor(codeSplit[0], paramNames)\n\n\tconst filters = this.filters = new Array(len - 1)\n\n\t// parse filters\n\tfor (var i = 1, j, l, name, args; i < len; i++) {\n\t\targs = trim(codeSplit[i]).split(filterParamReg)\n\t\tname = restore(args.shift())\n\t\tfor (j = 0, l = args.length; j < l; j++)\n\t\t\targs[j] = makeExecutor(args[j], paramNames)\n\t\tfilters[i - 1] = [parseFilter(name), args, name]\n\t}\n\tconst identities = this.identities = cleanIdentities()\n\tthis.simple = identities.length === 1 && isSimpleExpr(codeSplit[0]) ? codeSplit[0] : false\n\n\tescaped.length = 0\n\tuserIdentityHandler = undefined\n\tuserKeyWords = undefined\n}\ninherit(Expression, {\n\texecute(scope, args) {\n\t\tapply(this.executor, scope, args)\n\t},\n\teachFilter(cb, scope, args) {\n\t\tconst filters = this.filters\n\t\tlet i = 0,\n\t\t\tl = filters.length,\n\t\t\tfilter\n\t\tfor (; i < l; i++) {\n\t\t\tfilter = filters[i]\n\t\t\tif (cb(filter[0], new FilterParams(filter[1], scope, args)) === false)\n\t\t\t\treturn false\n\t\t}\n\t},\n\treachFilter(cb, scope, args) {\n\t\tconst filters = this.filters\n\t\tlet i = filters.length,\n\t\t\tfilter\n\t\twhile (i--) {\n\t\t\tfilter = filters[i]\n\t\t\tif (cb(filter[0], new FilterParams(filter[1], scope, args)) === false)\n\t\t\t\treturn false\n\t\t}\n\t}\n})\n\nfunction FilterParams(params, scope, args) {\n\tthis.params = params\n\tthis.scope = scope\n\tthis.args = args\n}\ninherit(FilterParams, {\n\tget(index, val) {\n\t\tconst { scope, args, params } = this\n\t\tif (arguments.length)\n\t\t\treturn params[index] ? apply(params[index], scope, args) : val\n\n\t\tlet i = params.length\n\t\tconst arr = new Array(i)\n\t\twhile (i--) {\n\t\t\tarr[i] = apply(params[i], scope, args)\n\t\t}\n\t\treturn arr\n\t},\n\titer() {\n\t\tconst { scope, args, params } = this\n\t\tconst len = params.length\n\t\tlet i = 0\n\t\treturn function () {\n\t\t\treturn i < len ? apply(params[i++], scope, args) : STOP\n\t\t}\n\t}\n})\n","/*\n * VNode Expression Identity Handler\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:58:05\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-04 16:15:24\n */\nimport { IDENTITY_OPT_GET, IDENTITY_OPT_CALL } from '../../Expression'\nimport { formatPath } from '../../common'\n\nexport const VNodeKeyword = '$node'\nexport function identityHandler(prefix, path, opt) {\n\tswitch (path[0]) {\n\tcase VNodeKeyword:\n\t\treturn undefined\n\tcase 'this':\n\t\tpath.shift()\n\t\tbreak\n\t}\n\n\tlet identity = formatPath(path),\n\t\texpr = opt === IDENTITY_OPT_GET ? 'this.$scope.' + identity : 'this.getScope(\"' + path[0] + '\").' + identity\n\n\tif (opt === IDENTITY_OPT_CALL || path[0].charAt(0) === '$')\n\t\tidentity = undefined\n\tif (prefix === '#') {\n\t\tidentity = undefined\n\t\tprefix = ''\n\t}\n\treturn [prefix + expr, identity]\n}\n","/*\n * Transform Expression\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 16:46:41\n * @Last Modified by: Tao Zeng (tao.zeng.zt@qq.com)\n * @Last Modified time: 2018-11-07 15:59:34\n */\nimport { assert } from 'devlevel'\nimport { Expression } from '../../Expression'\nimport { VNodeKeyword, identityHandler } from './identityHandler'\nimport { parsePath } from '../../common'\nimport { create, inherit,isFn } from '../../helper'\n\nexport const transforms = create(null)\n\nfunction transformIdentityHandler(prefix, identity, opt) {\n\treturn identityHandler(prefix, parsePath(identity), opt)\n}\n\nconst paramNames = [VNodeKeyword]\nexport default function TransformExpression(code, transforms, keywords) {\n\tExpression.call(this, code, paramNames, transformIdentityHandler, this.parseFilter.bind(this), keywords)\n\tthis.transforms = transforms\n}\n\ninherit(TransformExpression, Expression, {\n\tvalue(scope, args) {\n\t\treturn this.execute(scope, args)\n\t},\n\ttransformValue(scope, args) {\n\t\treturn this.transform(this.execute(scope, args), scope, args)\n\t},\n\ttransform(value, scope, args) {\n\t\tthis.eachFilter((filter, args) => {\n\t\t\tvalue = isFn(filter) ? filter(value, args) : filter.transform.call(filter, value, args)\n\t\t}, scope, args)\n\t\treturn value\n\t},\n\tcheckRestore() {\n\t\tassert.by(() => {\n\t\t\tthis.reachFilter(filter => {\n\t\t\t\tassert.fn(filter.restore, `Transform[${name}] not support restore`)\n\t\t\t})\n\t\t})\n\t},\n\trestore(value, scope, args) {\n\t\tthis.reachFilter((filter, args, name) => {\n\t\t\tassert.fn(filter.restore, `Transform[${name}] not support restore`)\n\t\t\tvalue = filter.restore.call(filter, value, args)\n\t\t}, scope, args)\n\t\treturn value\n\t},\n\tparseFilter(name) {\n\t\tconst localTransforms = this.transforms\n\t\tconst transform = (localTransforms && localTransforms[name]) || transforms[name]\n\n\t\tassert(transform, `Transform[${name}] is undefined`)\n\n\t\tassert(isFn(transform) || isFn(transform.transform),\n\t\t\t`Invalid Transform[${name}].transform handler on ${(localTransforms && localTransforms[name]) ? 'Local':'Global'} Transforms`)\n\n\t\tassert(!transform.restore || isFn(transform.transform),\n\t\t\t`Invalid Transform[${name}].restore handler on ${(localTransforms && localTransforms[name]) ? 'Local':'Global'} Transforms`)\n\n\t\treturn transform\n\t}\n})\n","/*\n * Transforms\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:57:39\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-20 18:30:39\n */\nimport { makeMap, applyNoScope, isStr, trim } from '../../helper'\nimport { format, plural, singular, thousandSeparate } from '../../common'\nimport { transforms } from './TransformExpression'\n\ntransforms.json = {\n\ttransform(value, param) {\n\t\tif (isStr(value)) return `\"${value}\"`\n\t\tconst indent = +param.get(0)\n\t\treturn JSON.stringify(value, param.get(1), isNaN(indent) ? 0 : indent)\n\t},\n\trestore(value) {\n\t\treturn (value && isStr(value)) ? JSON.parse(value) : value\n\t}\n}\n\ntransforms.trim = {\n\ttransform(value) {\n\t\treturn isStr(value) ? trim(value) : value\n\t},\n\trestore(value) {\n\t\treturn isStr(value) ? trim(value) : value\n\t}\n}\n\ntransforms.capitalize = function (value) {\n\treturn isStr(value) ? value.charAt(0).toUpperCase() + value.slice(1) : value\n}\n\ntransforms.uppercase = function (value) {\n\treturn isStr(value) ? value.toUpperCase() : value\n}\n\ntransforms.lowercase = function (value) {\n\treturn isStr(value) ? value.toLowerCase() : value\n}\n\ntransforms.plural = function (value) {\n\treturn isStr(value) ? plural(value) : value\n}\n\ntransforms.singular = function (value) {\n\treturn isStr(value) ? singular(value) : value\n}\n\ntransforms.unit = function (value, param) {\n\tlet unit = param.get(0),\n\t\tfmt = param.get(1)\n\tif (value > 1) unit = plural(unit)\n\treturn fmt ? format(fmt, value, unit) : value + ' ' + unit\n}\n\nconst units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB'],\n\tunitRestoreReg = /(KB|B|MB|GB|TB|PB)$/,\n\tunitMap = makeMap(units, (unit, i) => 1 << (i * 10))\ntransforms.bytes = {\n\ttransform(value, param) {\n\t\tconst v = +value\n\t\tif (isNaN(v)) return value\n\n\t\tconst digit = param.get(0, 2),\n\t\t\tprecision = Math.pow(10, digit),\n\t\t\ti = Math.floor(Math.log(v) / Math.log(1024))\n\t\treturn Math.round(v * precision / Math.pow(1024, i)) / precision + ' ' + units[i]\n\t},\n\trestore(value) {\n\t\tif (!isStr(value)) return value\n\t\tlet unit,\n\t\t\tv = value.replace(unitRestoreReg, function (match) {\n\t\t\t\tunit = match\n\t\t\t\treturn ''\n\t\t\t})\n\t\tif (!unit) return value\n\t\tv = +v\n\t\tif (isNaN(v)) return value\n\t\treturn Math.round(v * unitMap[unit])\n\t}\n}\n\n\ntransforms.format = function (value, param) {\n\tconst args = param.get()\n\targs.splice(1, 0, value)\n\treturn applyNoScope(format, args)\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:36:23\n * @Last Modified by: Tao Zeng (tao.zeng.zt@qq.com)\n * @Last Modified time: 2018-11-07 16:07:37\n */\nimport { VIRT_BINDING_TEXT } from './VNode'\nimport VText from './VText'\nimport TransformExpression from './expression'\nimport { inherit } from '../helper'\n\nexport default inherit(function VBindingText(comp, expr) {\n\tVText.call(this, comp)\n\tthis.expr = expr\n}, VText, {\n\t[VIRT_BINDING_TEXT]: true,\n\tprepare(text) {\n\t\treturn new TransformExpression(text)\n\t},\n\tmount() {\n\t\tconst { expr, comp } = this\n\t\tthis.text(expr.transformValue(comp, [this]))\n\t\tcomp.observeExpr(expr, this.exprHandler, this)\n\t},\n\tunmount() {\n\t\tthis.comp.unobserveExpr(this.expr, this.exprHandler, this)\n\t},\n\texprHandler(path, value) {\n\t\tconst { expr, comp } = this\n\t\tthis.text(expr.simple ? expr.transform(value, comp, [this]) : expr.transformValue(comp, [this]))\n\t}\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:36:28\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-15 19:14:23\n */\nimport { assert } from 'devlevel'\nimport VNode, { VIRT_ELEMENT } from './VNode'\nimport { inherit, fnName } from '../helper'\nimport { PROTOTYPE } from '../helper/constants'\n\nexport default inherit(function VElement(comp, option) {\n\tVNode.call(this, comp)\n\tthis.init(option)\n\tthis.initAttrs(option.attrs)\n\tthis.initDirectives(option.directives)\n}, VNode, {\n\t[VIRT_ELEMENT]: true,\n\tprepare(option) {\n\t\tconst { directives } = option\n\t\tif (directives) {\n\t\t\tconst l = directives.length\n\t\t\tassert.by(l, () => {\n\t\t\t\tfor (var i = 0, g, D; i < l; i++) {\n\t\t\t\t\tg = directives[i]\n\t\t\t\t\tD = g.Directive\n\t\t\t\t\tassert(this[D[PROTOTYPE].$nodeKey],\n\t\t\t\t\t\t`Can not bind directive[${g.dname}: ${fnName(D)}] on ${fnName(this.constructor)}, require ${D[PROTOTYPE].$nodeName}`)\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (!l)\n\t\t\t\toption.directives = null\n\t\t}\n\t},\n\tinit() {},\n\tinitDirectives(directives) {\n\t\tif (directives) {\n\t\t\tconst l = directives.length,\n\t\t\t\t__directives = new Array(l)\n\t\t\tfor (var i = 0; i < l; i++)\n\t\t\t\t__directives[i] = directives[i](this)\n\t\t\tthis.directives = __directives\n\t\t}\n\t},\n\tmount() {\n\t\tconst { directives } = this\n\t\tif (directives) {\n\t\t\tconst l = directives.length\n\t\t\tfor (var i = 0; i < l; i++)\n\t\t\t\tdirectives[i].bind()\n\t\t}\n\t},\n\tunmount() {\n\t\tconst { directives } = this\n\t\tif (directives) {\n\t\t\tvar i = directives.length\n\t\t\twhile (i--)\n\t\t\t\tdirectives[i].unbind()\n\t\t}\n\t}\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:36:34\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-15 19:13:56\n */\nimport { assert } from 'devlevel'\nimport { VIRT_NODE, VIRT_COMPLEX_ELEMENT, CHILD_NODES } from './VNode'\nimport VElement from './VElement'\nimport { List } from '../common'\nimport { inherit } from '../helper'\nimport { PROTOTYPE } from '../helper/constants'\n\nconst { prepare, mount, unmount } = VElement[PROTOTYPE]\n\nexport default inherit(function VComplexElement(comp, option) {\n\tVElement.call(this, comp, option)\n\tthis.initChildren(option.children)\n}, VElement, {\n\t[VIRT_COMPLEX_ELEMENT]: true,\n\t$childKey: VIRT_NODE,\n\t$childName: 'Virtual Node',\n\tprepare(option, N) {\n\t\tprepare.call(this, option, N)\n\t\tconst children = option.children\n\t\tif (children) {\n\t\t\tconst l = children.length\n\t\t\tfor (var i = 0, N; i < l; i++) {\n\t\t\t\tN = children[i].VNode\n\t\t\t\tassert(N[PROTOTYPE][this.$childKey], `Child Node[${i}: ${children[i].ename}] should be ${this.$childName}`)\n\t\t\t}\n\t\t}\n\t},\n\tinitChildren(children) {\n\t\tconst childNodes = this[CHILD_NODES] = new List()\n\t\tconst l = children.length\n\t\tconst __children = new Array(l)\n\t\tfor (var i = 0, child; i < l; i++) {\n\t\t\t__children[i] = child = children[i](this.comp)\n\t\t\tchild.parent = this\n\t\t\tthis.initChild(child)\n\t\t}\n\t\tchildNodes.addAll(__children)\n\t},\n\tinitChild(child) {\n\n\t},\n\tmount() {\n\t\tmount.call(this)\n\t\tthis[CHILD_NODES].each(mountChildHandler)\n\t},\n\tunmount() {\n\t\tthis[CHILD_NODES].each(unmountChildHandler)\n\t\tunmount.call(this)\n\t},\n\tchildCount() {\n\t\treturn this[CHILD_NODES].length\n\t},\n\tfirst() {\n\t\treturn this[CHILD_NODES].first()\n\t},\n\tlast() {\n\t\treturn this[CHILD_NODES].last()\n\t},\n\tprev: createSibling('prev'),\n\tnext: createSibling('next'),\n\tappend: createInsert('add'),\n\tprepend: createInsert('addFirst'),\n\tinsertBefore: createInsertSibling('insertBefore'),\n\tinsertAfter: createInsertSibling('insertAfter'),\n\treplace(node, target) {\n\t\tassert(node[this.$childKey], `node should be ${this.$childName}`)\n\t\tassert(this[CHILD_NODES].has(target), `target is not existing in this Node`)\n\n\t\tnode.remove()\n\t\tthis[CHILD_NODES].insert(node, target)\n\t\ttarget.remove()\n\t\tnode.parent = this\n\t\treturn this\n\t},\n\teachChildren(cb, scope) {\n\t\treturn this[CHILD_NODES].each(cb, scope)\n\t}\n})\n\nfunction createSibling(get) {\n\treturn function (node) {\n\t\tassert(node[this.$childKey], `node should be ${this.$childName}`)\n\n\t\treturn this[CHILD_NODES][get](node)\n\t}\n}\n\nfunction createInsert(insert) {\n\treturn function (node) {\n\t\tassert(node[this.$childKey], `node should be ${this.$childName}`)\n\n\t\tnode.remove()\n\t\tthis[CHILD_NODES][insert](node)\n\t\tnode.parent = this\n\t}\n\treturn this\n}\n\nfunction createInsertSibling(insert) {\n\treturn function (node, target) {\n\t\tassert(node[this.$childKey], `node should be ${this.$childName}`)\n\t\tassert(this[CHILD_NODES].has(target), `target is not existing in this Node`)\n\n\t\tnode.remove()\n\t\tthis[CHILD_NODES][insert](node, target)\n\t\tnode.parent = this\n\t\treturn this\n\t}\n}\n\nfunction mountChildHandler(child) {\n\tchild.mount()\n}\n\nfunction unmountChildHandler(child) {\n\tchild.unmount()\n}\n","/*\n * <CompontentTag>\n *      <div ref=\"\"\n * </CompontentTag>\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:37:24\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-05 14:01:41\n */\nimport { assert } from 'devlevel'\nimport VComplexElement from './VComplexElement'\nimport { parsePath } from '../common'\nimport { observer } from '../observer'\nimport { inherit, hasOwnProp, isObj } from '../helper'\n\nexport default inherit(function Compontent(scope, option) {\n\tVComplexElement.call(this, this, option)\n\n\tlet comp = null\n\tif (!isObj(scope)) {\n\t\tassert(scope && scope.$comp, 'Require Parent Compontent')\n\t\tcomp = scope\n\t\tscope = comp.$scope\n\t}\n\tconst obs = observer(scope)\n\tthis.scope = obs.proxy\n\tthis.$scope = obs.source\n    this.$observer = obs\n    this.parent = comp\n}, VComplexElement, {\n\t$comp: true,\n\tprepare(option) {\n\n\t},\n\tinitAttrs() {},\n\t$getScope(attr) {\n\t\tlet $observer = this.$observer,\n\t\t\tparent\n\t\twhile (!hasOwnProp($observer.source, attr) && (parent = $observer.$parent) && (attr in parent.source))\n\t\t\t$observer = parent\n\t\treturn $observer\n\t},\n\tgetScope(attr) {\n\t\treturn this.$getScope(attr).proxy\n\t},\n\tobserve(path, cb, scope) {\n\t\tpath = parsePath(path)\n\t\tthis.$getScope(path[0]).observe(path, cb, scope)\n\t\treturn this\n\t},\n\tunobserve(path, cb, scope) {\n\t\tthis.$getScope(path[0]).unobserve(path, cb, scope)\n\t\treturn this\n\t},\n\tobserveExpr(expr, cb, scope) {\n\t\tconst identities = expr.identities,\n\t\t\tl = identities.length\n\t\tfor (var i = 0; i < l; i++)\n\t\t\tthis.observe(identities[i], cb, scope)\n\t\treturn this\n\t},\n\tunobserveExpr(expr, cb, scope) {\n\t\tconst identities = expr.identities,\n\t\t\tl = identities.length\n\t\tfor (var i = 0; i < l; i++)\n\t\t\tthis.unobserve(identities[i], cb, scope)\n\t\treturn this\n\t},\n\tonProxyChange(fn, scope) {\n\t\tthis.$observer.onProxyChange(fn, scope)\n\t\treturn this\n\t},\n\tunProxyChange(fn, scope) {\n\t\tthis.$observer.unProxyChange(fn, scope)\n\t\treturn this\n\t},\n\tdestroy() {\n\n\t}\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:36:40\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-15 19:13:45\n */\nimport VNode, { VIRT_COMMENT } from './VNode'\nimport { inherit } from '../helper'\n\nexport default inherit(function VComment(comp, comment) {\n\tVNode.call(this, comp)\n\tthis.comment = comment\n}, VNode, {\n\t[VIRT_COMMENT]: true\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-29 12:36:45\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-04 18:03:59\n */\nimport { assert, info } from 'devlevel'\nimport { createClass, inherit, create, subclassOf, fnName, isObj, isFn } from '../helper'\nimport { PROTOTYPE } from '../helper/constants'\n\nexport const directives = create(null)\nexport function Directive(node, params) {\n\tthis.comp = node.comp\n\tthis.node = node\n\tthis.params = params\n}\ninherit(Directive, {\n\t$directive: true,\n\t$nodeKey: '$virtElement',\n\t$nodeName: 'Virtual Element',\n\tprepare() {},\n\tbind() {},\n\tunbind() {},\n\tobserveExpr(expr, cb, scope) {\n\t\treturn this.comp.observeExpr(expr, cb, scope)\n\t},\n\tunobserveExpr(expr, cb, scope) {\n\t\treturn this.comp.unobserveExpr(expr, cb, scope)\n\t}\n})\n\nexport function registerDirective(name, directive) {\n\tname = name.toLowerCase()\n\tassert(!directives[name], `Double Register Directive[${name}]`)\n\tif (!isFn(directive)) {\n\t\tif (!directive.extend)\n\t\t\tdirective.extend = Directive\n\t\tdirective = createClass(directive)\n\t}\n\tassert(directive[PROTOTYPE].$directive, `Invalid Directive[${name}], should extend Directive`)\n\n\tdirectives[name] = directive\n\tinfo(`Register Directive: ${fnName(directive)} [${name}]`)\n\treturn directive\n}\n\nexport function directive(name, value, params) {\n\tconst Directive = directives[name]\n\tassert(Directive, `Directive[${name}] is undefined`)\n\tif (!params) params = {}\n\tparams.value = value\n\tparams = Directive[PROTOTYPE].prepare(params, Directive) || params\n\n\tgenerator.params = params\n\tgenerator.dname = name\n\tgenerator.Directive = Directive\n\n\tfunction generator(node) {\n\t\treturn new Directive(node, params)\n\t}\n\treturn generator\n}\n","export { default as VNode } from './VNode'\nexport { default as VText } from './VText'\nexport { default as VBindingText } from './VBindingText'\nexport { default as VElement } from './VElement'\nexport { default as VComplexElement } from './VComplexElement'\nexport { default as Compontent } from './Compontent'\nexport { default as VComment } from './VComment'\nexport {default as TransformExpression, transforms} from './expression'\nexport * from './Directive'\n\nimport { assert, info, debug } from 'devlevel'\nimport { create, fnName } from '../helper'\nimport { PROTOTYPE } from '../helper/constants'\nimport { VIRT_TEXT, VIRT_BINDING_TEXT, VIRT_COMMENT, VIRT_ELEMENT, VIRT_COMPLEX_ELEMENT } from './VNode'\n\nconst VElements = create(null)\nexport const tags = create(VElements)\nlet Text, BindingText, Comment\n\nexport function registerVElement(name, VElement) {\n\tassert(!VElements[name], `Double Register Virtual Element: ${fnName(VElement)} <${name}>`)\n\tassert(VElement[PROTOTYPE][VIRT_ELEMENT], `Invalid Virtual Element: ${fnName(VElement)} <${name}>`)\n\n\tVElements[name] = VElement\n\n\tinfo(`register Virtual Element: ${fnName(VElement)} <${name}>`)\n\treturn VElement\n}\n\nexport function registerVText(VText) {\n\tassert(!Text, `Double Register Virtual Text`)\n\tassert(VText[PROTOTYPE][VIRT_TEXT], `Invalid Virtual Node: ${fnName(VText)}`)\n\n\tText = VText\n\n\tinfo(`register Virtual Text: ${fnName(VText)}`)\n\treturn Text\n}\n\nexport function registerVBindingText(VBindingText) {\n\tassert(!BindingText, `Double Register Virtual Binding Text`)\n\tassert(VBindingText[PROTOTYPE][VIRT_BINDING_TEXT], `Invalid Virtual Binding Text: ${fnName(VBindingText)}`)\n\n\tBindingText = VBindingText\n\n\tinfo(`register Virtual Binding Text: ${fnName(VBindingText)}`)\n\treturn BindingText\n}\n\nexport function registerVComment(VComment) {\n\tassert(!Comment, `Double Register Virtual Comment `)\n\tassert(VComment[PROTOTYPE][VIRT_COMMENT], `Invalid Virtual Comment: ${fnName(VComment)}`)\n\n\tComment = VComment\n\n\tinfo(`register Virtual Comment : ${fnName(VComment)}`)\n\treturn VComment\n}\n\nexport function elem(name, attrs, directives, children) {\n\tconst VElement = VElements[name]\n\tif (children && !children.length) children = undefined\n\n\tassert(VElement, `Virtual Element[${name}] is undefined`)\n\n\tassert(!children || !children.length || VElement[PROTOTYPE][VIRT_COMPLEX_ELEMENT],\n\t\t`Virtual Element[${name}] have no children`)\n\n\tconst gen = generator(VElement, {\n\t\tattrs,\n\t\tdirectives,\n\t\tchildren\n\t})\n\tgen.ename = name\n\treturn gen\n}\n\nexport function text(text, isExpr) {\n\treturn generator(isExpr ? BindingText : Text, text)\n}\n\nexport function comment(comment) {\n\treturn generator(Comment, comment)\n}\n\nfunction generator(VNode, option) {\n\toption = VNode[PROTOTYPE].prepare(option, VNode) || option\n\n\tfunction generator(comp) {\n\t\treturn new VNode(comp, option)\n\t}\n\tgenerator.VNode = VNode\n\tgenerator.option = option\n\n\treturn generator\n}\n","import { isStr, isArrayLike } from '../../helper'\n\nexport const ADD_EVENT_LISTENER = 'addEventListener',\n\tATTACH_EVENT = 'attachEvent',\n\tDOCUMENT_ELEMENT = 'documentElement',\n\tDEFAULT_VIEW = 'defaultView',\n\tPARENT_WINDOW = 'parentWindow',\n\tAPPEND_CHILD = 'appendChild',\n\tREMOVE_CHILD = 'removeChild',\n\tINSERT_BEFORE = 'insertBefore',\n\tREPLACE_CHILD = 'replaceChild',\n\tPARENT_NODE = 'parentNode',\n\tCONTAINS = 'contains',\n\tINNER_HTML = 'innerHTML',\n\tCREATE_ELEMENT = 'createElement',\n\tOWNER_DOCUMENT = 'ownerDocument',\n\tSET_ATTRIBUTE = 'setAttribute',\n\tGET_ATTRIBUTE = 'getAttribute',\n\tREMOVE_ATTRIBUTE = 'removeAttribute',\n\tCHECKED = 'checked',\n\tSELECTED = 'selected',\n\tDISABLED = 'disabled',\n\tREAD_ONLY = 'readOnly',\n\tTAB_INDEX = 'tabIndex',\n    HTML_FOR = 'htmlFor',\n\tCLASS_NAME = 'className',\n\tCURRENT_TARGET = 'currentTarget',\n\tPREVENT_DEFAULT = 'preventDefault',\n\tSTOP_PROPAGATION = 'stopPropagation',\n\tSTOP_IMMEDIATE_PROPAGATION = 'stopImmediatePropagation',\n\tCLIENT_TOP = 'clientTop',\n\tCLIENT_LEFT = 'clientLeft',\n\tSCROLL_LEFT = 'scrollLeft',\n\tSCROLL_TOP = 'scrollTop',\n\tPAGE_XOFFSET = 'pageXOffset',\n\tPAGE_YOFFSET = 'pageYOffset',\n\tCLIENTX = 'clientX',\n\tCLIENTY = 'clientY',\n\tPAGEX = 'pageX',\n\tPAGEY = 'pageY'\n\nexport const ROOTELEMENT = document[DOCUMENT_ELEMENT]\nexport const DIV = document[CREATE_ELEMENT]('div')\n\nexport function getWindow(el) {\n\treturn el.window && el.document ? el : el.nodeType === 9 ? el[DEFAULT_VIEW] || el[PARENT_WINDOW] : undefined\n}\n\nexport function inDoc(el, root) {\n\tif (!root) root = ROOTELEMENT\n\tif (root[CONTAINS]) return root[CONTAINS](el)\n\twhile (el = el[PARENT_NODE])\n\t\tif (el === root)\n\t\t\treturn true\n\treturn false\n}\n\nexport function query(selectors) {\n\treturn isStr(selectors) ? document.querySelector(selectors) : isArrayLike(selectors) ? selectors[0] : selectors\n}\n\n\nexport function prependChild(parent, el) {\n\tlet first = parent.firstChild\n\tfirst ? first !== el && parent[INSERT_BEFORE](el, first) : parent[APPEND_CHILD](el)\n}\n\nexport function insertAfter(el, prev) {\n\tvar next = prev.nextSibling\n\tnext ? next !== el && prev[PARENT_NODE][INSERT_BEFORE](el, next) : prev[PARENT_NODE][APPEND_CHILD](el)\n}\n\nexport function insertBefore(el, next) {\n\tel !== next.previousSibling && next[PARENT_NODE][INSERT_BEFORE](el, next)\n}\n","import { VIRT_NODE } from '../vnode/VNode'\nimport {\n\tPARENT_NODE,\n\tAPPEND_CHILD,\n\tREMOVE_CHILD,\n\tREPLACE_CHILD,\n\tquery,\n\tprependChild,\n\tinsertAfter,\n\tinsertBefore\n} from './util/util'\nimport { PROTOTYPE } from '../helper/constants'\n\nexport default function (VNode) {\n\tconst remove = VNode[PROTOTYPE].remove\n\treturn {\n\t\t$htmlNode: true,\n\t\tappendTo(parent) {\n\t\t\tif (parent[VIRT_NODE]) {\n\t\t\t\tparent.append(this)\n\t\t\t} else {\n\t\t\t\tquery(parent)[APPEND_CHILD](this.el)\n\t\t\t}\n\t\t\treturn this\n\t\t},\n\t\tprependTo(parent) {\n\t\t\tif (parent[VIRT_NODE]) {\n\t\t\t\tparent.prepend(this)\n\t\t\t} else {\n\t\t\t\tprependChild(query(parent), this.el)\n\t\t\t}\n\t\t\treturn this\n\t\t},\n\t\tinsertBeforeTo(target) {\n\t\t\tif (target[VIRT_NODE]) {\n\t\t\t\ttarget.parent.insertBefore(this, target)\n\t\t\t} else {\n\t\t\t\tinsertAfter(this.el, query(target))\n\t\t\t}\n\t\t\treturn this\n\t\t},\n\t\tinsertAfterTo(target) {\n\t\t\tif (target[VIRT_NODE]) {\n\t\t\t\ttarget.parent.insertAfter(this, target)\n\t\t\t} else {\n\t\t\t\tinsertBefore(this.el, query(target))\n\t\t\t}\n\t\t\treturn this\n\t\t},\n\t\treplaceTo(target) {\n\t\t\tif (target[VIRT_NODE]) {\n\t\t\t\ttarget.parent.replace(this, target)\n\t\t\t} else {\n\t\t\t\ttaget = query(target)\n\t\t\t\ttarget[PARENT_NODE][REPLACE_CHILD](this.el, target)\n\t\t\t}\n\t\t\treturn this\n\t\t},\n\t\tremove() {\n\t\t\tconst el = this.el,\n\t\t\t\tpEl = el[PARENT_NODE]\n\t\t\tpEl && pEl[REMOVE_CHILD](el)\n\t\t\treturn remove.call(this)\n\t\t}\n\t}\n\n}\n","/*\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-25 17:47:25\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 11:29:48\n */\nimport { assert } from 'devlevel'\nimport { inDoc, CREATE_ELEMENT, APPEND_CHILD, INNER_HTML } from './util/util'\n\nconst DOM_ELEMENT = '__element__'\nconst CHECKED = 'checked'\n\nconst OUTER_HTML = 'outerHTML'\n\nexport default {\n\t$htmlElement: true,\n\tinit(option) {\n\t\tconst el = document[CREATE_ELEMENT](this.tagName)\n\t\tel[DOM_ELEMENT] = this\n\t\tthis.el = el\n\t\tthis.initDomEvent()\n\t},\n\tinDoc() {\n\t\treturn inDoc(this.el)\n\t},\n\touterHtml() {\n\t\tconst el = this.el\n\t\tif (el[OUTER_HTML]) return el[OUTER_HTML]\n\t\tDIV[APPEND_CHILD](el.cloneNode(true))\n\t\tconst html = DIV[INNER_HTML]\n\t\tDIV[INNER_HTML] = ''\n\t\treturn html\n\t},\n\tfocus() {\n\t\tthis.el.focus()\n\t\treturn this\n\t}\n}\n","import { create, hasOwnProp, isObj } from '../../helper'\n\nexport default function (normal, __hooks, defKey, recive) {\n\tconst hooks = create(null),\n\t\trevices = recive && create(null)\n\t__hooks && addHook(__hooks)\n\n\treturn {\n\t\taddHook,\n\t\tgetHook(key) {\n\t\t\treturn hooks[key] || normal\n\t\t},\n\t\thookMember(key, member) {\n\t\t\tconst hook = hooks[key]\n\t\t\treturn hook && hook[member]\n\t\t},\n\t\tmemberHook(key, member) {\n\t\t\tconst hook = hooks[key]\n\t\t\tif (hook && hook[member]) return hook\n\t\t\tif (normal[member]) return normal\n\t\t},\n\t\thookRevice(key) {\n\t\t\treturn revices[key]\n\t\t}\n\t}\n\n\tfunction addHook(key, hook) {\n\t\tif (arguments.length === 1) {\n\t\t\tfor (var k in key)\n\t\t\t\tif (hasOwnProp(key, k))\n\t\t\t\t\tdoAdd(k, key[k])\n\t\t} else {\n\t\t\treturn doAdd(key, hook)\n\t\t}\n\t}\n\n\tfunction doAdd(key, hook) {\n\t\tif (!isObj(hook)) {\n\t\t\thook = {\n\t\t\t\t[defKey]: hook\n\t\t\t}\n\t\t}\n\t\tif (revices && hook[recive])\n\t\t\trevices[hook[recive]] = key\n\t\thooks[key] = hook\n\t\treturn hook\n\t}\n}\n","/*\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:54:34\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 12:47:27\n */\nimport createHook from './util/hook'\nimport {\n\tSET_ATTRIBUTE,\n\tGET_ATTRIBUTE,\n\tREMOVE_ATTRIBUTE,\n\tCHECKED,\n\tSELECTED,\n\tDISABLED,\n\tREAD_ONLY,\n\tTAB_INDEX,\n\tHTML_FOR\n} from './util/util'\nimport { $eachObj } from '../observer'\nimport { create, applyNoScope, isStr } from '../helper'\n\nconst GET_ATTRIBUTENODE = GET_ATTRIBUTE + 'Node'\n\nconst NAME = 'name',\n\tGET = 'get',\n\tSET = 'set'\n\nconst { hookMember, memberHook, addHook } = createHook({\n\tget(el, name) {\n\t\treturn el[name]\n\t},\n\tset(el, name, value) {\n\t\tel[name] = value\n\t}\n}, {\n\ttabIndex: {\n\t\tget(el, name) {\n\t\t\tlet attributeNode = el[GET_ATTRIBUTENODE]('tabindex')\n\t\t\treturn attributeNode && attributeNode.specified ?\n\t\t\t\tparseInt(attributeNode.value, 10) :\n\t\t\t\trfocusable.test(el.nodeName) ||\n\t\t\t\trclickable.test(el.nodeName) && el.href ?\n\t\t\t\t0 :\n\t\t\t\tundefined\n\t\t}\n\t}\n}, {\n\ttabindex: TAB_INDEX,\n\treadonly: READ_ONLY,\n\t'for': HTML_FOR,\n\t'class': 'className',\n\tmaxlength: 'maxLength',\n\tcellspacing: 'cellSpacing',\n\tcellpadding: 'cellPadding',\n\trowspan: 'rowSpan',\n\tcolspan: 'colSpan',\n\tusemap: 'useMap',\n\tframeborder: 'frameBorder',\n\tcontenteditable: 'contentEditable'\n}, NAME)\n\n\nexport default {\n\tinitAttrs(attrs) {\n\t\tattrs && this.attr(attrs)\n\t},\n\tattr(name, value) {\n\t\tconst el = this.el\n\t\tif (arguments.length === 1) {\n\t\t\tif (isStr(name)) return el[GET_ATTRIBUTE](name)\n\t\t\t$eachObj(name, (value, name) => {\n\t\t\t\tel[SET_ATTRIBUTE](name, value)\n\t\t\t})\n\t\t} else {\n\t\t\tel[SET_ATTRIBUTE](name, value)\n\t\t}\n\t\treturn this\n\t},\n\tremoveAttr(name) {\n\t\tthis.el[REMOVE_ATTRIBUTE](name)\n\t\treturn this\n\t},\n\tprop(name, value) {\n\t\tconst el = this.el\n\t\tif (arguments.length === 1) {\n\t\t\tif (isStr(name))\n\t\t\t\treturn getProp(el, name)\n\t\t\t$eachObj(name, (value, name) => {\n\t\t\t\tsetProp(el, name, value)\n\t\t\t})\n\t\t} else {\n\t\t\tsetProp(el, name, value)\n\t\t}\n\t\treturn this\n\t},\n\tchecked: propAccessor(CHECKED),\n\tselected: propAccessor(SELECTED),\n\tdisabled: propAccessor(DISABLED),\n\treadonly: propAccessor(READ_ONLY),\n\ttabindex: propAccessor(TAB_INDEX),\n\tfor: propAccessor(HTML_FOR)\n}\n\nexport function addDomPropHook() {\n\treturn applyNoScope(addHook, arguments)\n}\n\nfunction propAccessor(PROP) {\n\treturn function (value) {\n\t\tconst el = this.el\n\t\tif (arguments.length) {\n\t\t\tsetProp(el, PROP, value)\n\t\t\treturn this\n\t\t}\n\t\treturn getProp(el, PROP)\n\t}\n}\n\nfunction getProp(el, name) {\n\tname = hookMember(name, NAME)\n\treturn memberHook(name, GET)[GET](el, name)\n}\n\nfunction setProp(el, name, value) {\n\tname = hookMember(name, NAME)\n\tmemberHook(name, SET)[SET](el, name, value)\n}\n","/*\n * element class operations\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:48:52\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 12:43:08\n */\nimport { DIV, CLASS_NAME } from './util/util'\nimport { create, trim, isArray, isStr, isBool } from '../helper'\n\nconst CLASS_LIST = 'classList'\n\nconst wsReg = /\\s+/g\n\nconst addClass = (DIV[CLASS_LIST] ? mkClasslistUpdator('add') : function (el, className) {\n\t\tclassName = parseClassNameArray(className)\n\t\tif (className.length)\n\t\t\tel[CLASS_NAME] = trim(clearClassName(el[CLASS_NAME], className) + ' ' + className.join(' '))\n\t\treturn this\n\t}),\n\tremoveClass = (DIV[CLASS_LIST] ? mkClasslistUpdator('remove') : function (el, className) {\n\t\tclassName = parseClassNameArray(className)\n\t\tif (className.length)\n\t\t\tel[CLASS_NAME] = trim(clearClassName(el[CLASS_NAME], className))\n\t\treturn this\n\t})\nexport default {\n\tclassName(className) {\n\t\tconst el = this.el\n\t\tif (arguments.length) {\n\t\t\tel[CLASS_NAME] = parseClassName(className)\n\t\t\treturn this\n\t\t}\n\t\treturn trim(el[CLASS_NAME]).split(wsReg)\n\t},\n\taddClass,\n\tremoveClass,\n\tmargeClass(obj) {\n\t\tconst el = this.el,\n\t\t\tadds = [],\n\t\t\tclears = []\n\t\tlet name, val\n\t\tfor (name in obj) {\n\t\t\tval = obj[name]\n\t\t\tswitch (val) {\n\t\t\tcase true:\n\t\t\t\tadds.push(name)\n\t\t\tcase false:\n\t\t\t\tclears.push(name)\n\t\t\t}\n\t\t}\n\t\tel[CLASS_NAME] = trim(clearClassName(el[CLASS_NAME], clears) + ' ' + adds.join(' '))\n\t\treturn this\n\t}\n}\n\nfunction mkClasslistUpdator(method) {\n\treturn function (className) {\n\t\tclassName = parseClassNameArray(className)\n\n\t\tconst classList = this.el[CLASS_LIST]\n\t\tlet i = className.length\n\t\twhile (i--)\n\t\t\tclassList[method](className[i])\n\t\treturn this\n\t}\n}\n\nconst clearRegCache = create(null)\n\nfunction clearClassName(className, removes) {\n\tremoves = removes.join('|')\n\tconst reg = clearRegCache[removes] || (clearRegCache[removes] = new RegExp('(\\\\s+|^)(' + removes + ')', 'g'))\n\treturn className.replace(reg, '')\n}\n\nfunction parseClassName(className) {\n\tif (isStr(className)) return trim(className)\n\treturn parseClassNameArrayByObj(className).join(' ')\n}\n\nfunction parseClassNameArray(className) {\n\tif (isStr(className)) return trim(className).split(wsReg)\n\treturn parseClassNameArrayByObj(className)\n}\n\nfunction parseClassNameArrayByObj(className) {\n\tif (isArray(className)) return className\n\n\tconst names = []\n\tlet key, i = 0\n\tfor (key in className) {\n\t\tif (className[key] === true)\n\t\t\tnames[i++] = key\n\t}\n\treturn names\n}\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-09-01 10:51:15\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 11:15:03\n */\nimport { ROOTELEMENT, ADD_EVENT_LISTENER, ATTACH_EVENT } from './util'\nimport { nextTick } from '../../common'\n\nexport const W3C = !!window.dispatchEvent\nexport const IE8 = !!window.XDomainRequest\nexport const IE9 = navigator.userAgent.indexOf('MSIE 9') !== -1\n\nexport default function ready(fn) {\n\t!isReady ? readyList.push(fn) : fn()\n}\n\nlet readyList = [],\n\tisReady\n\nfunction fireReady(fn) {\n\tisReady = true\n\twhile (fn = readyList.shift())\n\t\tfn()\n\treadyList = undefined\n}\n\nconst READY_STATE = 'readyState',\n\tDO_SCROLL = 'doScroll'\n\nif (document[READY_STATE] === 'complete') {\n\tnextTick(fireReady)\n} else if (document[ADD_EVENT_LISTENER]) {\n\tdocument[ADD_EVENT_LISTENER]('DOMContentLoaded', fireReady)\n} else if (document[ATTACH_EVENT]) {\n\tdocument[ATTACH_EVENT]('onreadystatechange', function () {\n\t\tif (document[READY_STATE] === 'complete')\n\t\t\tfireReady()\n\t})\n\tif (ROOTELEMENT[DO_SCROLL] && window.frameElement === null && window.external) {\n\t\tfunction doScrollCheck() {\n\t\t\ttry {\n\t\t\t\tROOTELEMENT[DO_SCROLL]('left')\n\t\t\t\tfireReady()\n\t\t\t} catch (e) {\n\t\t\t\tnextTick(doScrollCheck)\n\t\t\t}\n\t\t}\n\t\tdoScrollCheck()\n\t}\n}\n","/*\n * element css opeartions\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:49:56\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 11:55:15\n */\nimport {\n\tinDoc,\n\tgetWindow,\n\tROOTELEMENT,\n\tOWNER_DOCUMENT,\n\tPARENT_WINDOW,\n\tDEFAULT_VIEW,\n\tREMOVE_ATTRIBUTE,\n\tCLIENT_TOP,\n\tCLIENT_LEFT,\n\tSCROLL_LEFT,\n\tSCROLL_TOP,\n\tPAGE_XOFFSET,\n\tPAGE_YOFFSET\n} from './util/util'\nimport createHook from './util/hook'\nimport { W3C, IE8 } from './util'\nimport { create, applyScope, makeMap, isNil, isStr } from '../helper'\nimport { $eachObj } from '../observer'\n\nconst numberCss = makeMap(\n\t'animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,' +\n\t'fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom')\n\nconst NAME = 'name',\n\tGET = 'get',\n\tSET = 'set'\nconst nameHooks = create(null)\nconst { memberHook, addHook } = createHook({\n\tget(el, name) {\n\t\tif (name === 'background')\n\t\t\tname = 'backgroundColor'\n\t\treturn getStyle(el, name)\n\t},\n\tset(el, name, value) {\n\t\tel.style[name] = value\n\t}\n})\nnameHooks.float = W3C ? 'cssFloat' : 'styleFloat'\n\nconst OFFSET_PARENT = 'offsetParent',\n\tGET_BOUNDING_CLIENT_RECT = 'getBoundingClientRect',\n\tFILTER = 'filter',\n\tPOSITION = 'position'\n\n\n// ========================= Mixin =================================\nfunction setCss(el, name, value) {\n\tname = camelize(name)\n\tif (isNil(value)) {\n\t\tvalue = ''\n\t} else if (!numberCss[name] && isFinite(value)) {\n\t\tvalue += 'px'\n\t}\n\tmemberHook(name, SET)[SET](el, cssHookName(name), value, name)\n}\n\nexport default {\n\tcss(name, value) {\n\t\tconst el = this.el\n\t\tif (arguments.length === 1) {\n\t\t\tif (isStr(name)) {\n\t\t\t\tname = camelize(name)\n\t\t\t\tconst value = memberHook(name, GET)[GET](el, cssHookName(name), name),\n\t\t\t\t\tnum = parseFloat(value)\n\t\t\t\treturn isFinite(num) ? num : value\n\t\t\t}\n\t\t\t$eachObj(name, (value, name) => {\n\t\t\t\tsetCss(el, name, value)\n\t\t\t})\n\t\t} else {\n\t\t\tsetCss(el, name, value)\n\t\t}\n\t\treturn this\n\t},\n\toffset() {\n\t\tconst el = this.el,\n\t\t\tdoc = el[OWNER_DOCUMENT],\n\t\t\tbox = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t}\n\n\t\tif (!doc) return box\n\n\t\tconst body = doc.body,\n\t\t\twin = doc[DEFAULT_VIEW] || doc[PARENT_WINDOW]\n\n\t\tif (!inDoc(el)) return box\n\n\t\tif (el[GET_BOUNDING_CLIENT_RECT]) {\n\t\t\tvar rect = el[GET_BOUNDING_CLIENT_RECT]()\n\t\t\tbox.top = rect.top\n\t\t\tbox.left = rect.left\n\t\t}\n\t\tconst clientTop = ROOTELEMENT[CLIENT_TOP] || body[CLIENT_TOP],\n\t\t\tclientLeft = ROOTELEMENT[CLIENT_LEFT] || body[CLIENT_LEFT],\n\t\t\tscrollTop = Math.max(win[PAGE_YOFFSET] || 0, ROOTELEMENT[SCROLL_TOP], body[SCROLL_TOP]),\n\t\t\tscrollLeft = Math.max(win[PAGE_XOFFSET] || 0, ROOTELEMENT[SCROLL_LEFT], body[SCROLL_LEFT])\n\n\t\tbox.top += scrollTop - clientTop\n\t\tbox.left += scrollLeft - clientLeft\n\t\treturn box\n\t},\n\tposition() {\n\t\tconst el = this.el\n\t\tlet top, left\n\t\tif (getStyle(el, POSITION) === 'fixed') {\n\t\t\tvar o = el[GET_BOUNDING_CLIENT_RECT]()\n\t\t\ttop = o.top\n\t\t\tleft = o.left\n\t\t} else {\n\t\t\tvar o = this.offset(el),\n\t\t\t\tp = offsetParent(el)\n\t\t\ttop = o.top - getNumStyle(p, 'borderTopWidth') + this.scrollTop(p)\n\t\t\tleft = o.left - getNumStyle(p, 'borderLeftWidth') + this.scrollLeft(p)\n\t\t\tif (p.tagName !== 'HTML') {\n\t\t\t\tvar op = this.offset(p)\n\t\t\t\ttop -= op.top\n\t\t\t\tleft -= op.left\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\ttop: top - getNumStyle(el, 'marginTop'),\n\t\t\tleft: left - getNumStyle(el, 'marginLeft')\n\t\t}\n\t},\n\tscrollTop() {\n\t\tconst el = this.el,\n\t\t\twin = getWindow(el)\n\t\treturn (win ? SCROLL_TOP in win ? win[SCROLL_TOP] : ROOTELEMENT[PAGE_YOFFSET] : el[PAGE_YOFFSET]) || 0\n\t},\n\tscrollLeft() {\n\t\tconst el = this.el,\n\t\t\twin = getWindow(el);\n\t\treturn (win ? SCROLL_LEFT in win ? win[SCROLL_LEFT] : ROOTELEMENT[PAGE_XOFFSET] : el[PAGE_XOFFSET]) || 0\n\t},\n\tscrollTo(left, top) {\n\t\tconst el = this.el,\n\t\t\twin = getWindow(el)\n\t\tif (win) {\n\t\t\twin.scrollTo(left, top)\n\t\t} else {\n\t\t\tel[PAGE_XOFFSET] = left\n\t\t\tel[PAGE_YOFFSET] = top\n\t\t}\n\t}\n}\n\nexport function addDomStyleHook() {\n\treturn applyNoScope(addHook, arguments)\n}\n\nfunction offsetParent(el) {\n\tlet p = el[OFFSET_PARENT]\n\twhile (p && getStyle(p, POSITION) === 'static')\n\t\tp = p[OFFSET_PARENT]\n\treturn p || ROOTELEMENT\n}\n\n// ========================= css opeartions =================================\n\nconst cssPrefixes = ['', '-webkit-', '-o-', '-moz-', '-ms-'],\n\thost = ROOTELEMENT.style,\n\tcssPrefixeSize = cssPrefixes.length\n\nfunction cssHookName(name) {\n\tlet fixedName = nameHooks[name]\n\tif (fixedName) return fixedName\n\tfor (var i = 0; i < cssPrefixeSize; i++) {\n\t\tfixedName = camelize(cssPrefixes[i] + name)\n\t\tif (fixedName in host) {\n\t\t\tnameHooks[name] = fixedName\n\t\t\treturn fixedName\n\t\t}\n\t}\n\tthrow new Error(`invalid style[${name}]`)\n}\n\nconst GET_COMPUTED_STYLE = 'getComputedStyle'\nconst computedStyle = !!window[GET_COMPUTED_STYLE]\n\nfunction getNumStyle(el, name) {\n\tconst val = getStyle(el, name),\n\t\ti = parseFloat(val)\n\treturn i === i ? i : 0\n}\nlet getStyle\nif (computedStyle) {\n\tgetStyle = function (el, name) {\n\t\tconst styles = window[GET_COMPUTED_STYLE](el, null)\n\t\tlet value\n\t\tif (styles) {\n\t\t\tvalue = name === FILTER ? styles.getPropertyValue(name) : styles[name]\n\t\t\tif (value === '') value = el.style[name]\n\t\t}\n\t\treturn value\n\t}\n} else {\n\tconst RUNTIME_STYLE = 'runtimeStyle',\n\t\trnumnonpx = /^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i,\n\t\trposition = /^(top|right|bottom|left)$/,\n\t\tborder = {\n\t\t\tthin: IE8 ? '1px' : '2px',\n\t\t\tmedium: IE8 ? '3px' : '4px',\n\t\t\tthick: IE8 ? '5px' : '6px'\n\t\t}\n\tgetStyle = function (el, name) {\n\t\tconst currentStyle = el.currentStyle\n\t\tlet value = currentStyle[name]\n\t\tif ((rnumnonpx.test(value) && !rposition.test(value))) {\n\t\t\tconst style = el.style,\n\t\t\t\tleft = style.left,\n\t\t\t\trsLeft = el[RUNTIME_STYLE].left;\n\n\t\t\tel[RUNTIME_STYLE].left = currentStyle.left;\n\t\t\tstyle.left = name === 'fontSize' ? '1em' : (value || 0);\n\t\t\tvalue = style.pixelLeft + 'px';\n\t\t\tstyle.left = left;\n\t\t\tel[RUNTIME_STYLE].left = rsLeft;\n\t\t}\n\t\tif (value === 'medium') {\n\t\t\tname = name.replace('Width', 'Style')\n\t\t\tif (currentStyle[name] === 'none')\n\t\t\t\tvalue = '0px';\n\t\t}\n\t\treturn value === '' ? 'auto' : border[value] || value;\n\t}\n}\n\nconst camelizeReg = /[-_][^-_]/g\n\nfunction camelize(target) {\n\treturn target ? target.replace(camelizeReg, camelizeHandler) : target\n}\n\nfunction camelizeHandler(match) {\n\treturn match.charAt(1).toUpperCase()\n}\n\n\n// ========================= hooks =================================\nconst OPACITY = 'opacity'\nif (computedStyle) {\n\taddHook(OPACITY, {\n\t\tget(el, name) {\n\t\t\tlet value = getStyle(el, name)\n\t\t\treturn value === '' ? 1 : value\n\t\t}\n\t})\n} else {\n\tconst FILTERS = FILTER + 's',\n\t\tsalpha = 'DXImageTransform.Microsoft.Alpha',\n\t\tralpha = /alpha\\([^)]*\\)/i\n\n\taddHook(OPACITY, {\n\t\tget(el, name) {\n\t\t\tconst alpha = el[FILTERS].alpha || el[FILTERS][salpha],\n\t\t\t\top = alpha && alpha.enabled ? alpha[OPACITY] : 100\n\t\t\treturn (op / 100)\n\t\t},\n\t\tset(el, name, value) {\n\t\t\tconst style = el.style,\n\t\t\t\topacity = isFinite(value) && value <= 1 ? `alpha(${OPACITY}=${value * 100})` : '',\n\t\t\t\tfilter = style[FILTER] || ''\n\t\t\tstyle.zoom = 1\n\t\t\tstyle[FILTER] = trim(ralpha.test(filter) ? filter.replace(ralpha, opacity) : filter + ' ' + opacity)\n\t\t\tif (!style[FILTER])\n\t\t\t\tstyle[REMOVE_ATTRIBUTE](FILTER)\n\t\t}\n\t})\n}\n","/*\n * Dom Value opeartions\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 17:54:59\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-01 11:43:09\n */\nimport { assert } from 'devlevel'\nimport createHook from './util/hook'\nimport { SELECTED } from './util/util'\nimport { create, applyNoScope, strval, isNil, isArray, isObj, makeMap } from '../helper'\n\nconst GET = 'get',\n\tSET = 'set'\n\nexport default {\n\tvalue(value) {\n\t\tconst el = this.el\n\t\tlet type = el.tagName\n\t\tif (type === 'INPUT') type = el.type\n\n\t\tif (arguments.length) {\n\t\t\tmemberHook(type, SET)[SET](el, value, type)\n\t\t\treturn this\n\t\t}\n\t\treturn memberHook(type, GET)[GET](el, type)\n\t}\n}\n\nexport function addDomValueHook() {\n\treturn applyNoScope(addHook, arguments)\n}\n\nconst EMPTY_MAP = create(null),\n\tSELECTED_INDEX = 'selectedIndex',\n\tSELECT_ONE = 'select-one',\n\tOPTIONS = 'options'\n\nconst { memberHook, addHook } = createHook({\n\tget(el) {\n\t\treturn el.value || ''\n\t},\n\tset(el, value) {\n\t\tel.value = strval(value)\n\t}\n}, {\n\toption: {\n\t\tget(el) {\n\t\t\treturn getOptionValue(el)\n\t\t}\n\t},\n\tselect: {\n\t\tget(el) {\n\t\t\tconst signle = el.type == SELECT_ONE,\n\t\t\t\tindex = el[SELECTED_INDEX]\n\n\t\t\tif (index < 0) return signle ? undefined : []\n\n\t\t\tconst options = el[OPTIONS],\n\t\t\t\tl = options.length\n\n\t\t\tlet option, i = 0\n\n\t\t\tif (!signle) {\n\t\t\t\tconst values = []\n\t\t\t\tfor (; i < l; i++) {\n\t\t\t\t\toption = options[i]\n\t\t\t\t\tif (option[SELECTED] || i === index)\n\t\t\t\t\t\tvalues.push(getOptionValue(option))\n\t\t\t\t}\n\t\t\t\treturn values\n\t\t\t}\n\t\t\tfor (; i < l; i++) {\n\t\t\t\toption = options[i]\n\t\t\t\tif (option[SELECTED] || i === index)\n\t\t\t\t\treturn getOptionValue(option)\n\t\t\t}\n\t\t},\n\t\tset(el, value) {\n\t\t\tconst signle = el.type == SELECT_ONE,\n\t\t\t\toptions = el[OPTIONS],\n\t\t\t\tl = options.length\n\n\t\t\tlet option, vl, val, i = 0\n\n\t\t\tif (signle) {\n\t\t\t\tfor (; i < l; i++) {\n\t\t\t\t\toption = options[i]\n\t\t\t\t\tif (getOptionValue(option) === value) {\n\t\t\t\t\t\toption[SELECTED] = true\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tel[SELECTED_INDEX] = -1\n\t\t\t\tlet map\n\t\t\t\tif (isNil(value)) {\n\t\t\t\t\tmap = EMPTY_MAP\n\t\t\t\t} else if (isArray(value)) {\n\t\t\t\t\tmap = makeMap(value)\n\t\t\t\t} else if (isObj(value)) {\n\t\t\t\t\tmap = value\n\t\t\t\t} else {\n\t\t\t\t\tmap = create(null)\n\t\t\t\t\tmap[value] = true\n\t\t\t\t}\n\t\t\t\tfor (; i < l; i++) {\n\t\t\t\t\toption = options[i]\n\t\t\t\t\tif (map[getOptionValue(option)] === true)\n\t\t\t\t\t\toption[SELECTED] = true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})\n\nfunction getOptionValue(el) {\n\tconst val = el.attributes.value\n\treturn !val || val.specified ? el.value : el.text\n}\n","import { assert } from 'devlevel'\nimport { W3C, IE9 } from './util'\nimport {\n\tROOTELEMENT,\n\tDOCUMENT_ELEMENT,\n\tOWNER_DOCUMENT,\n\tCREATE_ELEMENT,\n\tADD_EVENT_LISTENER,\n\tATTACH_EVENT,\n\tPARENT_NODE,\n\tCURRENT_TARGET,\n\tPREVENT_DEFAULT,\n\tSTOP_PROPAGATION,\n\tSTOP_IMMEDIATE_PROPAGATION,\n\tSCROLL_LEFT,\n\tSCROLL_TOP,\n\tCLIENT_TOP,\n\tCLIENT_LEFT,\n\tCLIENTX,\n\tCLIENTY,\n\tPAGEX,\n\tPAGEY,\n\tDISABLED\n} from './util/util'\nimport createHook from './util/hook'\nimport { inherit, create, applyScope, applyNoScope, hasOwnProp, isFn, isStr, makeMap } from '../helper'\nimport { FnList } from '../common'\nimport { DEFAULT_FN_BINDING } from '../common/FnList'\n\nconst TYPE = 'type'\nconst { getHook, hookRevice, addHook } = createHook(null, null, TYPE, TYPE)\n\n// ========================= Mixin =================================\nconst DOM_ELEMENT = '__element__'\n\nconst MIXIN_EVENTS = '__domEvents',\n\tMIXIN_ADD_LISTEN = '__addDomListen',\n\tMIXIN_DEL_LISTEN = '__delDomListen',\n\tMIXIN_EMIT_LISTEN = '__emitDomEvent'\n\nconst EventMixin = {\n\tinitDomEvent() {\n\t\tthis.el[DOM_ELEMENT] = this\n\t\tthis[MIXIN_EVENTS] = create(null)\n\t},\n\ton(type, fn, scope) {\n\t\tassert.fn(fn, 'Invalid Event Listener')\n\n\t\tif (this[MIXIN_ADD_LISTEN](type, fn, scope) === 1) {\n\t\t\tconst el = this.el,\n\t\t\t\thook = getHook(type)\n\t\t\tif (hook) {\n\t\t\t\tif (hook.type) type = hook.type\n\t\t\t\tif (hook.bind && hook.bind(el, type) === false)\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\tbindDispatcher(el, type)\n\t\t}\n\t},\n\tun(type, fn, scope) {\n\t\tassert.fn(fn, 'Invalid Event Listener')\n\n\t\tif (this[MIXIN_DEL_LISTEN](type, fn, scope) === 0) {\n\t\t\tconst el = this.el,\n\t\t\t\thook = getHook(type)\n\t\t\tif (hook) {\n\t\t\t\tif (hook.type) type = hook.type\n\t\t\t\tif (hook.unbind && hook.unbind(el, type) === false)\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\tunbindDispatcher(el, type)\n\t\t}\n\t},\n\tonce(type, fn, scope) {\n\t\tassert.fn(fn, 'Invalid Event Listener')\n\n\t\tconst el = this.el,\n\t\t\tbinding = fn[DEFAULT_FN_BINDING],\n\t\t\tself = this\n\n\t\tif (binding) proxy[DEFAULT_FN_BINDING] = binding\n\n\t\tthis.on(type, proxy, scope)\n\n\t\tif (!binding) fn[DEFAULT_FN_BINDING] = cb[DEFAULT_FN_BINDING]\n\n\t\tfunction proxy() {\n\t\t\tapplyScope(fn, this, arguments)\n\t\t\tself.un(type, proxy, scope)\n\t\t}\n\t}\n}\n\nEventMixin[MIXIN_ADD_LISTEN] = function (type, fn, scope) {\n\tconst events = this[MIXIN_EVENTS],\n\t\tlistens = events[type] || (events[type] = new FnList())\n\treturn listens.add(fn, scope)\n}\n\nEventMixin[MIXIN_DEL_LISTEN] = function (type, fn, scope) {\n\tconst events = this[MIXIN_EVENTS],\n\t\tlistens = events[type]\n\treturn listens && listens.remove(fn, scope)\n}\n\nEventMixin[MIXIN_EMIT_LISTEN] = function (type, event) {\n\tconst events = this[MIXIN_EVENTS],\n\t\tlistens = events[type]\n\tif (listens && listens.size()) {\n\t\tif (!event.$hookEvent) {\n\t\t\tevent = packEvent(type, event)\n\t\t\tconst target = event.target\n\t\t\tevent.targetEl = target\n\t\t\tevent.target = target[DOM_ELEMENT]\n\t\t}\n\t\tevent.current = this\n\t\tevent[IS_IMMEDIATE_PROPAGATION_STOPPED] = false\n\t\tlistens.each((fn, scope) => {\n\t\t\treturn fn.call(scope || this, event, this) !== false &&\n\t\t\t\t!event[IS_IMMEDIATE_PROPAGATION_STOPPED]\n\t\t})\n\t}\n\treturn event\n}\n\nexport default EventMixin\n\nexport function addDomEventHook() {\n\treturn applyNoScope(addHook, arguments)\n}\n\nconst ORIGINAL_EVENT = 'originalEvent',\n\tRETURN_VALUE = 'returnValue',\n\tGET_PREVENT_DEFAULT = 'getPreventDefault',\n\tTIME_STAMP = 'timeStamp',\n\tORIGINAL_PROPS = 'originalProps',\n\tIS_IMMEDIATE_PROPAGATION_STOPPED = 'isImmediatePropagationStopped',\n\tCANCEL_BUBBLE = 'cancelBubble'\n\n\n// ========================= event tool =================================\nconst addEventListener = W3C ? function (el, type, fn) {\n\t\tel[ADD_EVENT_LISTENER](type, fn, type !== 'focus' && type !== 'blur')\n\t} : function (el, type, fn) {\n\t\tel[ATTACH_EVENT]('on' + type, fn)\n\t},\n\tremoveEventListener = W3C ? function (el, type, fn) {\n\t\tel.removeEventListener(type, fn)\n\t} : function (el, type, fn) {\n\t\tel.detachEvent('on' + type, fn)\n\t}\n\n\n// ========================= bind event dispatcher =================================\n\nconst bubbleUpEvents = makeMap(\n\t'click,dblclick,keydown,keypress,keyup,mousedown,mousemove,mouseup,mouseover,' +\n\t'mouseout,wheel,mousewheel,input,beforeinput,compositionstart,compositionupdate,' +\n\t'compositionend,cut,copy,paste,beforecut,beforecopy,beforepaste,focusin,focusout,' +\n\t'DOMFocusIn,DOMFocusOut,DOMActivate,dragend,datasetchanged')\n\nif (W3C)\n\tbubbleUpEvents.change = bubbleUpEvents.select = true\n\nfunction listenEl(el) {\n\treturn bubbleUpEvents[el.type] ? ROOTELEMENT : el\n}\n\nconst DOM_DISPATCH_EVENTS = '__dispatch_events__'\n\nfunction bindDispatcher(el, type) {\n\tel = listenEl(el)\n\tconst events = el[DOM_DISPATCH_EVENTS] || (el[DOM_DISPATCH_EVENTS] = create(null)),\n\t\tnum = events[type] || 0\n\tif (!num) addEventListener(el, type, dispatch)\n\tevents[type] = num + 1\n}\n\nfunction unbindDispatcher(el, type) {\n\tel = listenEl(el)\n\tconst events = el[DOM_DISPATCH_EVENTS],\n\t\tnum = events && events[type]\n\tif (num) {\n\t\tif (num === 1)\n\t\t\tremoveEventListener(el, type, dispatch)\n\t\tevents[type] = num - 1\n\t}\n}\n\n// ========================= hook =================================\nconst keyEventReg = /^key/,\n\tCHARCODE = 'charCode',\n\tKEYCODE = 'keyCode',\n\tWHICH = 'which',\n\tkeyEventProps = ['char', 'key', CHARCODE, KEYCODE],\n\tkeyEventHook = {\n\t\tfix(event, original) {\n\t\t\tevent[ORIGINAL_PROPS](keyEventProps)\n\t\t\tif (!event[WHICH])\n\t\t\t\tevent[WHICH] = original[CHARCODE] != null ? original[CHARCODE] : original[KEYCODE]\n\t\t}\n\t},\n\tmouseEventReg = /^(?:mouse|contextmenu|drag)|click/,\n\tBUTTON = 'button',\n\tmouseEventProps = [BUTTON, BUTTON + 's', CLIENTX, CLIENTY, 'offsetX', 'offsetY', PAGEX, PAGEY, 'screenX', 'screenY', 'toElement'],\n\tmouseEventHook = {\n\t\tfix(event, original) {\n\t\t\tconst button = original[BUTTON]\n\t\t\tevent[ORIGINAL_PROPS](mouseEventProps)\n\t\t\tif (!event[PAGEX] && original[CLIENTX]) {\n\t\t\t\tvar eventDoc = event.target[OWNER_DOCUMENT] || document,\n\t\t\t\t\tdoc = eventDoc[DOCUMENT_ELEMENT],\n\t\t\t\t\tbody = eventDoc.body\n\t\t\t\tevent[PAGEX] = original[CLIENTX] + (doc && doc[SCROLL_LEFT] || body && body[SCROLL_LEFT] || 0) -\n\t\t\t\t\t(doc && doc[CLIENT_LEFT] || body && body[CLIENT_LEFT] || 0)\n\t\t\t\tevent[PAGEY] = original[CLIENTY] + (doc && doc[SCROLL_TOP] || body && body[SCROLL_TOP] || 0) -\n\t\t\t\t\t(doc && doc[CLIENT_TOP] || body && body[CLIENT_TOP] || 0)\n\t\t\t}\n\t\t\tif (!event[WHICH] && button !== undefined)\n\t\t\t\tevent[WHICH] = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)))\n\t\t}\n\t}\n\nlet last = 0\nconst moveEventReg = /move|scroll/\n\nfunction dispatch(event) {\n\tlet type = event.type,\n\t\ttarget = eventTarget(event)\n\n\ttype = hookRevice(type) || type\n\tif (moveEventReg.test(type)) {\n\t\tvar now = new Date()\n\t\tif (now - last < 16) return\n\t\tlast = now\n\t}\n\tlet elem\n\tif (target[DISABLED] !== true || type !== 'click') {\n\t\tif (bubbleUpEvents[type]) {\n\t\t\tdo {\n\t\t\t\tif (elem = target[DOM_ELEMENT])\n\t\t\t\t\tevent = elem[MIXIN_EMIT_LISTEN](type, event)\n\t\t\t\ttarget = target[PARENT_NODE]\n\t\t\t} while (target && !event[CANCEL_BUBBLE])\n\t\t} else {\n\t\t\telem = target[DOM_ELEMENT]\n\t\t\tif (elem) elem[MIXIN_EMIT_LISTEN](type, event)\n\t\t}\n\t}\n}\n\nfunction packEvent(type, originalEvent) {\n\tconst event = new Event(originalEvent, type)\n\tlet hook = getHook(type)\n\tif (!hook) {\n\t\tif (mouseEventReg.test(type)) {\n\t\t\thook = mouseEventHook\n\t\t} else if (keyEventReg.test(type)) {\n\t\t\thook = keyEventHook\n\t\t} else {\n\t\t\thook = {}\n\t\t}\n\t\thook = addHook(type, hook)\n\t}\n\thook.fix && hook.fix(event, originalEvent)\n\treturn event\n}\n\n// ========================= Event =================================\nfunction eventTarget(event) {\n\tconst target = event.target || event.srcElement || document\n\treturn target.nodeType == 3 ? target[PARENT_NODE] : target\n}\n\n\nconst eventProps = 'altKey,bubbles,cancelable,ctrlKey,eventPhase,metaKey,shiftKey,view'.split(',')\n\t.concat(RELATED_TARGET, PROPERTY_NAME, WHICH, CURRENT_TARGET)\n\n\nfunction Event(event, type) {\n\tthis.type = type || event.type\n\tthis[ORIGINAL_EVENT] = event\n\tthis.target = eventTarget(event)\n\tthis[RETURN_VALUE] = !(event.defaultPrevented || event[RETURN_VALUE] === false || (event[GET_PREVENT_DEFAULT] && event[GET_PREVENT_DEFAULT]()))\n\tthis[TIME_STAMP] = event[TIME_STAMP] || new Date().getTime()\n\tthis[ORIGINAL_PROPS](eventProps)\n}\n\nconst EventProto = Event.prototype\nEventProto.$hookEvent = true\nEventProto[ORIGINAL_PROPS] = function (props) {\n\tconst e = this[ORIGINAL_EVENT]\n\tfor (var i = 0, l = props.length; i < l; i++) {\n\t\tthis[props[i]] = e[props[i]]\n\t}\n}\n\nEventProto[PREVENT_DEFAULT] = function () {\n\tconst e = this[ORIGINAL_EVENT]\n\tthis[RETURN_VALUE] = false\n\te[RETURN_VALUE] = false\n\te[PREVENT_DEFAULT] && e[PREVENT_DEFAULT]()\n}\n\nEventProto[STOP_PROPAGATION] = function () {\n\tconst e = this[ORIGINAL_EVENT]\n\tthis[CANCEL_BUBBLE] = true\n\te[CANCEL_BUBBLE] = true\n\te[STOP_PROPAGATION] && e[STOP_PROPAGATION]()\n}\n\nEventProto[STOP_IMMEDIATE_PROPAGATION] = function () {\n\tconst e = this[ORIGINAL_EVENT]\n\tthis[IS_IMMEDIATE_PROPAGATION_STOPPED] = true\n\te[STOP_IMMEDIATE_PROPAGATION] && e[STOP_IMMEDIATE_PROPAGATION]()\n\tthis[STOP_PROPAGATION]()\n}\n\n\n// ========================= hooks =================================\n\nconst PROPERTY_NAME = 'propertyName',\n\tRELATED_TARGET = 'relatedTarget'\n\n// firefox, chrome: mouseenter and mouseleave\nif (ROOTELEMENT.onmouseenter === undefined) {\n\tfunction fix(event) {\n\t\tlet el = event.target,\n\t\t\tt = event[RELATED_TARGET]\n\t\treturn !t || (t !== el && !(el.compareDocumentPosition(t) & 16))\n\t}\n\taddHook({\n\t\t'mouseover': {\n\t\t\ttype: 'mouseenter',\n\t\t\tfix\n\t\t},\n\t\t'mouseout': {\n\t\t\ttype: 'mouseleave',\n\t\t\tfix\n\t\t}\n\t})\n}\n\n// IE9+, W3C: animationend\nif (window.AnimationEvent) {\n\taddHook('animationend', 'AnimationEvent')\n} else if (window.WebKitAnimationEvent) {\n\taddHook('animationend', 'WebKitAnimationEvent')\n}\n\n// IE6-11, chrome: mousewheel, wheelDetla\n// IE9-11: wheel deltaY\n// firefox: DOMMouseScroll detail, wheel detlaY\n// chrome: wheel deltaY\nif (document.onmousewheel === undefined) {\n\tconst fixWheelType = document.onwheel ? 'wheel' : 'DOMMouseScroll',\n\t\tfixWheelDelta = fixWheelType === 'wheel' ? 'deltaY' : 'detail',\n\t\tWHEEL_DELTA = 'wheelDelta',\n\t\tWHEEL_DELTAY = WHEEL_DELTA + 'Y'\n\taddHook('mousewheel', {\n\t\ttype: fixWheelType,\n\t\tfix(event) {\n\t\t\tevent[WHEEL_DELTAY] = event[WHEEL_DELTA] = event[fixWheelDelta] > 0 ? -120 : 120\n\t\t\tevent[WHEEL_DELTAY] = 0\n\t\t}\n\t})\n}\n\nconst INPUT = 'input'\n\n// IE6-9: input\n// IE6-8: change\nif (document[CREATE_ELEMENT](INPUT).oninput === undefined) { // IE6-IE8: input, change\n\tdelete bubbleUpEvents[INPUT]\n\taddHook(INPUT, {\n\t\ttype: 'propertychange',\n\t\tfix(event) {\n\t\t\treturn event[PROPERTY_NAME] === 'value'\n\t\t}\n\t})\n\tlet changeEventNum = 0\n\tconst DOM_CHANGE_EVENT = '__change_event'\n\taddHook('change', {\n\t\tbind(el) {\n\t\t\tif (el.type == 'checkbox' || el.type == 'radio') {\n\t\t\t\tif (changeEventNum++ === 0)\n\t\t\t\t\taddEventListener(ROOTELEMENT, 'click', changeEventDispath)\n\t\t\t\tel[DOM_CHANGE_EVENT] = true\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tunbind(el) {\n\t\t\tif (el.type == 'checkbox' || el.type == 'radio') {\n\t\t\t\tif (--changeEventNum === 0)\n\t\t\t\t\tremoveEventListener(ROOTELEMENT, 'click', changeEventDispath)\n\t\t\t\tel[DOM_CHANGE_EVENT] = false\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t})\n\n\tfunction changeEventDispath(event) {\n\t\tconst target = eventTarget(event)\n\t\tif (target[DOM_CHANGE_EVENT])\n\t\t\tdispatch(packEvent('change', event))\n\t}\n} else if (IE9) { // IE9: input\n\tconst OLD_VALUE = 'oldValue'\n\taddHook(INPUT, {\n\t\tfix(event) {\n\t\t\tconst el = event.target\n\t\t\tel[OLD_VALUE] = el.value\n\t\t}\n\t})\n\n\t// http://stackoverflow.com/questions/6382389/oninput-in-ie9-doesnt-fire-when-we-hit-backspace-del-do-cut\n\taddEventListener('selectionchange', function (event) {\n\t\tvar actEl = document.activeElement\n\t\tswitch (actEl.tagName) {\n\t\tcase 'INPUT':\n\t\t\tif (actEl.type !== 'text') return\n\t\tcase 'TEXTAREA':\n\t\t\tif (actEl.value !== actEl[OLD_VALUE]) {\n\t\t\t\tactEl[OLD_VALUE] = actEl.value\n\t\t\t\tdispatch(packEvent(INPUT, event))\n\t\t\t}\n\t\t}\n\t})\n}\n","/*\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-25 17:47:25\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-31 18:36:56\n */\nimport { assert } from 'devlevel'\nimport { VElement } from '../vnode'\nimport HTMLMixin from './HTMLMixin'\nimport ElementMixin from './ElementMixin'\nimport ElementAttrMixin from './ElementAttrMixin'\nimport ElementClassMixin from './ElementClassMixin'\nimport ElementStyleMixin from './ElementStyleMixin'\nimport ElementValueMixin from './ElementValueMixin'\nimport ElementEventMixin from './ElementEventMixin'\nimport { inherit } from '../helper'\n\n\nexport default inherit(function Element(comp, option) {\n\t\tVElement.call(this, comp, option)\n\t}, VElement, HTMLMixin(VElement), ElementMixin,\n\tElementAttrMixin, ElementClassMixin,\n\tElementStyleMixin, ElementValueMixin, ElementEventMixin)\n","import { VComplexElement } from '../vnode'\nimport HTMLMixin from './HTMLMixin'\nimport ElementMixin from './ElementMixin'\nimport ElementAttrMixin from './ElementAttrMixin'\nimport ElementClassMixin from './ElementClassMixin'\nimport ElementStyleMixin from './ElementStyleMixin'\nimport ElementValueMixin from './ElementValueMixin'\nimport ElementEventMixin from './ElementEventMixin'\nimport { DIV, PARENT_NODE, APPEND_CHILD, REPLACE_CHILD, INNER_HTML } from './util/util'\nimport { inherit, isStr } from '../helper'\nimport { PROTOTYPE } from '../helper/constants'\n\nconst { append, appendAll, prepend, insertBefore, insertAfter, replace } = VComplexElement[PROTOTYPE]\n\nconst __TEXT_CONTENT = 'textContent'\nconst TEXT_CONTENT = isStr(DIV[__TEXT_CONTENT]) ? __TEXT_CONTENT : 'innerText'\n\nexport default inherit(function ComplexElement(comp, option) {\n\t\tVComplexElement.call(this, comp, option)\n\t}, VComplexElement, HTMLMixin(VComplexElement), ElementMixin,\n\tElementAttrMixin, ElementClassMixin,\n\tElementStyleMixin, ElementValueMixin, ElementEventMixin, {\n\t\t$htmlComplexElement: true,\n\t\t$childKey: '$htmlNode',\n\t\t$childName: 'HTML Virtual Node',\n\t\tinitChild(child) {\n\t\t\tthis.el[APPEND_CHILD](child.el)\n\t\t},\n\t\thtml(html) {\n\t\t\tconst el = this.el\n\t\t\tif (arguments.length) {\n\t\t\t\tel[INNER_HTML] = html\n\t\t\t\treturn this\n\t\t\t}\n\t\t\treturn el[INNER_HTML]\n\t\t},\n\t\ttext(text) {\n\t\t\tconst el = this.el\n\t\t\tif (arguments.length) {\n\t\t\t\tel[TEXT_CONTENT] = text\n\t\t\t\treturn this\n\t\t\t}\n\t\t\treturn el[TEXT_CONTENT]\n\t\t},\n\t\tappend(node) {\n\t\t\tappend.call(this, node)\n\t\t\tthis.el[APPEND_CHILD](node.el)\n\t\t\treturn this\n\t\t},\n\t\tprepend(node) {\n\t\t\tprepend.call(this, node)\n\t\t\tprependChild(this.el, node.el)\n\t\t\treturn this\n\t\t},\n\t\tinsertBefore(node, target) {\n\t\t\tinsertBefore.call(this, node, target)\n\t\t\tdoInsertBefore(node.el, target.el)\n\t\t\treturn this\n\t\t},\n\t\tinsertAfter(node, target) {\n\t\t\tinsertAfter.call(this, node, target)\n\t\t\tdoInsertAfter(node.el, target.el)\n\t\t\treturn this\n\t\t},\n\t\treplace(node, target) {\n\t\t\treplace.call(this, node, target)\n\t\t\ttarget.el[PARENT_NODE][REPLACE_CHILD](node.el, target.el)\n\t\t\treturn this\n\t\t}\n\t})\n","import { Compontent } from '../vnode'\nimport HTMLMixin from './HTMLMixin'\nimport { inherit } from '../helper'\n\nexport default inherit(function HTMLCompontent(option) {\n\tCompontent.call(this, option)\n}, Compontent, {\n\t$htmlComp: true\n})\n","import { VComment, registerVComment } from '../vnode'\nimport HTMLMixin from './HTMLMixin'\nimport { inherit } from '../helper'\n\nexport default registerVComment(inherit(function Comment(comment) {\n\tVComment.call(this, comment)\n\tthis.el = document.createComment(comment)\n}, VComment, HTMLMixin(VComment), {\n\t$htmlComment: true\n}))\n","import { VText, VBindingText, registerVText, registerVBindingText } from '../vnode'\nimport HTMLMixin from './HTMLMixin'\nimport { inherit } from '../helper'\n\nconst TextMixin = {\n\tupdate(text) {\n\t\tthis.el.data = text\n\t}\n}\n\nexport const HTMLText = registerVText(inherit(function Text(comp, text) {\n\tVText.call(this, comp, text)\n\tthis.el = textNode(text)\n}, VText, HTMLMixin(VText), TextMixin))\n\nexport const HTMLBindingText = registerVBindingText(inherit(function BindingText(comp, expr) {\n\tVBindingText.call(this, comp, expr)\n\tthis.el = textNode('')\n}, VBindingText, HTMLMixin(VBindingText), TextMixin))\n\nfunction textNode(text) {\n\treturn document.createTextNode(text)\n}\n","/*\n *\n * Void elements:\n *      area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr\n *\n * The template elements\n *      template\n *\n * Raw text elements\n *      script, style\n *\n * escapable raw text elements\n *      textarea, title\n *\n * Normal elements\n *      All other allowed HTML elements are normal elements.\n *\n *      Main root:               html\n *      Document metadata:       link, meta, style, title\n *      Sectioning root:         body\n *      Content sectioning:      address, article, aside, footer, header, h1, h2, h3, h4, h5, h6, hgroup, nav, section\n *      Text content:            blockquote, dd, dir, div, dl, dt, figcaption, figure, hr, li, main, ol, p, pre, ul\n *      Inline text semantics:   a, abbr, b, bdi, bdo, br, cite, code, data, dfn, em, i, kbd, mark, nobr, q, rp,\n *                               rt, rtc, ruby, s, samp, small, span, strong, sub, sup, time, tt, u, var, wbr\n *      Image and multimedia:    area, audio, img, map, track, video\n *      Embedded content:        applet, embed, iframe, noembed, object, param, picture, source\n *      Scripting:               canvas, noscript, script\n *      Demarcating edits:       del, ins\n *      Table content:           caption, col, colgroup, table, tbody, td, tfoot, th, thead, tr\n *      Forms:                   button, datalist, fieldset, form, input, label, legend, meter,\n *                               optgroup, option, output, progress, select, textarea\n *      Interactive elements:    details, dialog, menu, menuitem, summary\n *      Web Components:          content, element, shadow, slot, template\n *\n *      Obsolete and deprecated elements:\n *           acronym, applet, basefont, bgsound, big, blink, center, command, content, dir, element,\n *           font, frame, frameset, image, isindex, keygen, listing, marquee, menuitem, multicol, nextid,\n *           nobr, noembed, noframes, plaintext, shadow, spacer, strike, tt, xmp\n *\n * Foreign elements\n *      Elements from the MathML namespace and the SVG namespace.\n *\n *      SVG:\n *          https://developer.mozilla.org/en-US/docs/Web/SVG/Element\n *\n *      MathML:\n *          https://developer.mozilla.org/en-US/docs/Web/MathML/Element\n *\n * links:\n *      https://www.w3.org/TR/html5/syntax.html#writing-html-documents\n *      https://developer.mozilla.org/my/docs/Web/HTML/Element\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-25 18:55:34\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-27 14:29:35\n */\nimport { registerVElement } from '../vnode'\nimport Element from './Element'\nimport ComplexElement from './ComplexElement'\nimport { inherit, createClass } from '../helper';\n\nregister(Element, 'area,br,col,embed,hr,img,input,param,source,track,wbr')\n\nregister(ComplexElement, 'address,article,aside,footer,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n\t'blockquote,dd,dir,div,dl,dt,figcaption,figure,li,main,ol,p,pre,ul,a,abbr,b,bdi,bdo,cite,code,data,dfn,em,i,kbd,' +\n\t'mark,nobr,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,tt,u,var,audio,map,video,applet,iframe,' +\n\t'noembed,object,picture,canvas,noscript,del,ins,caption,colgroup,table,tbody,td,tfoot,th,thead,tr,' +\n\t'button,datalist,fieldset,form,label,legend,meter,optgroup,option,output,progress,select,details,' +\n\t'dialog,menu,menuitem,summary,content,element,shadow,slot')\n\nregister(ComplexElement, 'template')\nregister(ComplexElement, 'textarea')\nregister(ComplexElement, 'script')\nregister(ComplexElement, 'style')\nregister(ComplexElement, 'link,meta,base')\nregister(ComplexElement, 'title')\n\nfunction register(Element, tags) {\n\ttags = tags.split(',')\n\tfor (let i = 0, l = tags.length; i < l; i++) {\n\t\tregisterVElement(tags[i], createClass({\n\t\t\textend: Element,\n\t\t\tname: Element.name,\n\t\t\ttagName: tags[i]\n\t\t}))\n\t}\n}\n","/*\n * Dom Event Expression\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 16:46:41\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-04 17:04:17\n */\nimport { assert } from 'devlevel'\nimport { Expression } from '../../Expression'\nimport { VNodeKeyword, identityHandler } from '../../vnode/expression/identityHandler'\nimport { parsePath } from '../../common'\nimport { create, inherit, isFn } from '../../helper'\n\nexport const eventFilters = create(null)\n\nexport const EventKeyword = '$event'\n\nfunction eventIdentityHandler(prefix, identity, opt) {\n\tidentity = parsePath(identity)\n\tif (identity[0] !== EventKeyword)\n\t\treturn doIdentityHandler(prefix, identity, opt)\n}\n\nconst paramNames = [VNodeKeyword, EventKeyword]\nexport function EventExpression(code, eventFilters, keywords) {\n\tExpression.call(this, code, paramNames, eventIdentityHandler, this.parseFilter.bind(this), keywords)\n\tthis.eventFilters = eventFilters\n}\n\nfunction doFilter(filter, args) {\n\treturn filter(args[1], args)\n}\ninherit(EventExpression, Expression, {\n\ttransformValue(scope, args) {\n\t\treturn this.transform(this.execute(scope, args), scope, args)\n\t},\n\tfilter(scope, args) {\n\t\treturn this.eachFilter(doFilter, scope, args) !== false\n\t},\n\tparseFilter(name) {\n\t\tconst localFilters = this.eventFilters\n\t\tconst filter = (localFilters && localFilters[name]) || eventFilters[name]\n\n\t\tassert(filter, `EventFilter[${name}] is undefined`)\n\n\t\tassert(isFn(filter),\n\t\t\t`Invalid EventFilter[${name}] on ${(localFilters && localFilters[name]) ? 'Local':'Global'} EventFilters`)\n\t\treturn filter\n\t}\n})\n","/*\n * Dom Event Filters\n *\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 18:15:02\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-05 15:30:40\n */\nimport { assert } from 'devlevel'\nimport { eventFilters } from './EventExpression'\nimport { create, makeMap, applyNoScope, isStr, isArray, isInt } from '../../helper'\nimport { STOP_PROPAGATION } from '../util/util'\n\nexport const keyCodes = {\n\tesc: 27,\n\ttab: 9,\n\tenter: 13,\n\tspace: 32,\n\t'delete': [8, 46],\n\tup: 38,\n\tleft: 37,\n\tright: 39,\n\tdown: 40\n}\n\neventFilters.key = function (e, param) {\n\tconst which = e.which,\n\t\tcodes = param.get(),\n\t\tl = codes.length\n\n\tif (!l) return true\n\n\tfor (var i = 0, code, key, j, m; i < l; i++) {\n\t\tcode = codes[i]\n\t\tif (isStr(code)) {\n\t\t\tkey = code\n\t\t\tcode = +code\n\t\t\tif (isNaN(code)) { // key code\n\t\t\t\tcode = keyCodes[key]\n\t\t\t\tassert(isInt(code) || isArray(code), `Invalid Key Code[${key}]`)\n\t\t\t\tif (isArray(code)) { // multi code\n\t\t\t\t\tfor (j = 0, m = code.length; j < m; j++)\n\t\t\t\t\t\tif (which === code[j])\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (which === code)\n\t\t\treturn true\n\t}\n\treturn false\n}\n\neventFilters.stop = function (e) {\n\te[STOP_PROPAGATION]()\n}\n\neventFilters.prevent = function (e) {\n\te.preventDefault()\n}\n\neventFilters.self = function (e) {\n\treturn e.target === e.currentTarget\n}\n","import { Directive } from '../../vnode'\nimport { isFn, inherit } from '../../helper'\nimport { EventExpression } from '../expression'\n\nexport default inherit(function DomDirective(node, expr, params) {\n\tDirective.call(this, node, params)\n}, Directive, {\n\t$nodeKey: '$htmlElement',\n\t$nodeName: 'HTML Virtual Element',\n})\n","import { assert } from 'devlevel'\nimport DomDirective from './DomDirective'\nimport { isFn, inherit, isNil } from '../../helper'\nimport { TransformExpression } from '../../vnode'\n\nexport default inherit(function ExpressionDirective(node, params) {\n\tDomDirective.call(this, node, params)\n\tthis.expr = params.expr\n}, DomDirective, {\n\tprepare(params) {\n\t\tparams.expr = new TransformExpression(params.value)\n\t},\n\trealValue() {\n\t\treturn this.expr.value(this.comp, [this.node])\n\t},\n\tvalue() {\n\t\treturn this.expr.transformValue(this.comp, [this.node])\n\t},\n\ttransform(value) {\n\t\treturn this.expr.transform(value, this.comp, [this.node])\n\t},\n\tblankValue(value) {\n\t\tif (!arguments.length) value = this.value()\n\t\treturn isNil(value) ? '' : value\n\t},\n\tobserveHandler(path, value) {\n\t\tthis.update(this.expr.simple ? this.transform(value) : this.value())\n\t},\n\tbind() {\n\t\tthis.observeExpr(this.expr, this.observeHandler, this)\n\t\tthis.update(this.value())\n\t},\n\tunbind() {\n\t\tthis.unobserveExpr(this.expr, this.observeHandler, this)\n\t},\n\tupdate(value) {\n\t\tthrow new Error(`abstract method`)\n\t}\n})\n","import { assert } from 'devlevel'\nimport DomDirective from './DomDirective'\nimport { isFn, inherit } from '../../helper'\nimport { EventExpression } from '../expression'\nimport { STOP_PROPAGATION } from '../util/util'\n\nexport default inherit(function EventDirective(node, expr, params) {\n\tDomDirective.call(this, node, params)\n\tthis.expr = params.expr\n}, DomDirective, {\n\tprepare(params) {\n\t\tparams.expr = new EventExpression(params.value)\n\t},\n\thandler(e) {\n\t\tconst expr = this.expr,\n\t\t\tcomp = this.comp,\n\t\t\tnode = this.node,\n\t\t\targs = [node, e]\n\n\t\te[STOP_PROPAGATION]()\n\n\t\tif (expr.filter(comp, args)) {\n\t\t\tconst ret = expr.value(comp, args)\n\t\t\tif (isFn(ret)) {\n\t\t\t\tret.call(comp, e, node)\n\t\t\t} else {\n\t\t\t\tassert(!expr.sample, `Invalid Event Handler: ${this.params.value}`)\n\t\t\t}\n\t\t}\n\t},\n\tbind() {\n\t\tconst node = this.node,\n\t\t\thandler = this.handler,\n\t\t\ttype = this.eventType\n\t\tif (type.push) {\n\t\t\tfor (var i = 0; i < type.length; i++)\n\t\t\t\tnode.on(type[i], handler, this)\n\t\t} else {\n\t\t\tnode.on(type, handler, this)\n\t\t}\n\t},\n\tunbind() {\n\t\tconst node = this.node,\n\t\t\thandler = this.handler,\n\t\t\ttype = this.eventType\n\t\tif (type.push) {\n\t\t\tfor (var i = 0; i < type.length; i++)\n\t\t\t\tnode.un(type[i], handler, this)\n\t\t} else {\n\t\t\tnode.un(type, handler, this)\n\t\t}\n\t}\n})\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 19:54:12\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-08-27 15:26:30\n */\nimport EventDirective from './EventDirective'\nimport { registerDirective } from '../../vnode'\nimport { array2obj, map, upperFirst, isStr } from '../../helper'\n\nexport default array2obj(map(\n\t[\n\t\t'blur', 'change', 'click', 'dblclick', 'error', 'focus', 'keydown', 'keypress', 'keyup',\n\t\t'load', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'resize', 'scroll',\n\t\t'select', 'submit', 'unload',\n\t\t{\n\t\t\teventName: 'input',\n\t\t\teventType: ['input', 'propertychange']\n\t\t}\n\t], event => {\n\t\tif (isStr(event)) event = { eventName: event, eventType: event }\n\t\tevent.extend = EventDirective\n\t\tevent.name = upperFirst(event.eventName) + 'EventDirective'\n\t\treturn registerDirective('on' + event.eventName, event)\n\t}), directive => directive.name)\n","/*\n * @Author: tao.zeng (tao.zeng.zt@gmail.com)\n * @Date: 2018-08-20 19:53:22\n * @Last Modified by: tao.zeng (tao.zeng.zt@gmail.com)\n * @Last Modified time: 2018-09-05 15:29:52\n */\nimport { assert } from 'devlevel'\nimport ExpressionDirective from './ExpressionDirective'\nimport { registerDirective } from '../../vnode'\nimport { isStr, upperFirst, isObj, assignBy, create, isArray, eachObj, isArrayLike } from '../../helper'\nimport { PROTOTYPE } from '../../helper/constants'\nimport { STOP_PROPAGATION } from '../util/util'\n\nconst DISPLAY = 'display',\n\tNONE = 'none'\neachObj({\n\t// ================ text =================\n\ttext: {\n\t\tupdate(value) {\n\t\t\tthis.node.text(this.blankValue(value))\n\t\t}\n\t},\n\t// ================ html =================\n\thtml: {\n\t\tupdate(value) {\n\t\t\tthis.node.html(this.blankValue(value))\n\t\t}\n\t},\n\t// ================ show =================\n\tshow: {\n\t\tupdate(value) {\n\t\t\tthis.node.css(DISPLAY, value ? '' : NONE)\n\t\t}\n\t},\n\t// ================ hide =================\n\thide: {\n\t\tupdate(value) {\n\t\t\tthis.node.css(DISPLAY, value ? NONE : '')\n\t\t}\n\t},\n\t// ================ focus =================\n\tfocus: {\n\t\tupdate(value) {\n\t\t\tif (value) this.node.focus()\n\t\t}\n\t},\n\t// ================ value (input/textarea/select/option) =================\n\tvalue: {\n\t\tupdate(value) {\n\t\t\tthis.node.value(this.blankValue(value))\n\t\t}\n\t},\n\t// ================ checked (radio/checkbox) =================\n\tchecked: {\n\t\tupdate(value) {\n\t\t\tconst node = this.node\n\t\t\tnode.checked(boolVal(node.value(), value))\n\t\t}\n\t},\n\t// ================ selected (option) =================\n\tselected: {\n\t\tupdate(value) {\n\t\t\tconst node = this.node\n\t\t\tnode.selected(boolVal(node.value(), value))\n\t\t}\n\t},\n\t// ================ class =================\n\t'class': {\n\t\tupdate(value) {\n\t\t\tif (isStr(value)) value = trim(value).split(/\\s+/g)\n\n\t\t\tconst cache = create(null),\n\t\t\t\toldCache = this.cache\n\t\t\tif (oldCache) {\n\t\t\t\tfor (var k in oldCache)\n\t\t\t\t\tif (oldCache[k] === true)\n\t\t\t\t\t\tcache[k] = false\n\t\t\t}\n\t\t\tif (isArrayLike(value)) {\n\t\t\t\tvar i = value.length\n\t\t\t\twhile (i--) cache[value[i]] = true\n\t\t\t} else if (value) {\n\t\t\t\tfor (var k in value)\n\t\t\t\t\tif (value[k] === true) cache[k] = true\n\t\t\t}\n\t\t\tthis.cache = cache\n\t\t\tthis.node.margeClass(cache)\n\t\t}\n\t},\n\t// =================== style =======================\n\tstyle: {\n\t\tupdate(value) {\n\t\t\tlet ncsses\n\t\t\tif (typeof value === 'string' && (value = trim(value))) {\n\t\t\t\tvar split = value.split(styleSplitReg)\n\t\t\t\tncsses = {}\n\t\t\t\tfor (var i = 0, l = split.length, s; i < l; i++) {\n\t\t\t\t\ts = split[i].split(cssSplitReg)\n\t\t\t\t\tncsses[s[0]] = s[1]\n\t\t\t\t}\n\t\t\t} else if (isObj(value)) {\n\t\t\t\tncsses = value\n\t\t\t}\n\t\t\tlet csses = this.csses\n\t\t\tif (csses) {\n\t\t\t\tif (ncsses) {\n\t\t\t\t\tfor (var name in csses)\n\t\t\t\t\t\tif (!ncsses[name])\n\t\t\t\t\t\t\tcss(el, name, '')\n\t\t\t\t} else {\n\t\t\t\t\tfor (var name in csses)\n\t\t\t\t\t\tcss(el, name, '')\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.csses = ncsses\n\t\t\tif (ncsses) {\n\t\t\t\tfor (var name in ncsses)\n\t\t\t\t\tcss(el, name, ncsses[name])\n\t\t\t}\n\t\t}\n\t}\n}, (directive, name) => {\n\t__register(name, directive)\n})\n\nfunction __register(name, directive) {\n\tdirective.extend = ExpressionDirective\n\tdirective.name = upperFirst(name) + 'Directive'\n\tregisterDirective(name, directive)\n}\n\n// ================================= input =======================\nconst EVENT_CHANGE = 'change',\n\tEVENT_INPUT = 'input',\n\tEVENT_CLICK = 'click',\n\tSELECT = 'select',\n\tOPTION = 'option',\n\tTEXTAREA = 'textarea',\n\tINPUT = 'input',\n\tINPUT_RADIO = 'radio',\n\tINPUT_CHECKBOX = 'checkbox'\n\nconst { prepare, bind, unbind } = ExpressionDirective[PROTOTYPE]\n\n__register('input', {\n\tprepare(params, D) {\n\t\tprepare.call(this, params, D)\n\t\tparams.expr.checkRestore()\n\t},\n\tconstructor(node, params) {\n\t\tExpressionDirective.call(this, node, params)\n\n\t\tassert(this.expr.simple, `Invalid Expression[${params.value}] on directive[input]`)\n\n\t\tlet type = node.tagName,\n\t\t\tevent = EVENT_CHANGE,\n\t\t\tdomValue = this.elemValue\n\t\tswitch (type) {\n\t\tcase INPUT:\n\t\t\tswitch (node.el.type) {\n\t\t\tcase INPUT_RADIO:\n\t\t\tcase INPUT_CHECKBOX:\n\t\t\t\ttype = itype\n\t\t\t\tdomValue = this.checkedValue\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tevent = EVENT_INPUT\n\t\t\t}\n\t\t\tbreak\n\t\tcase TEXTAREA:\n\t\t\tevent = EVENT_INPUT\n\t\t\tbreak\n\t\tcase SELECT:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthrow new TypeError(`<${type}> not support Directive[input], should be <input | textarea | select>`)\n\t\t}\n\t\tthis.type = type\n\t\tthis.event = event\n\t\tthis.domValue = domValue\n\t},\n\tupdate(value) {\n\t\tthis.node.value(this.blankValue(value))\n\t},\n\telemValue(value) {\n\t\tconst node = this.node\n\t\tif (arguments.length === 0)\n\t\t\treturn node.value()\n\t\tnode.value(value)\n\t},\n\tcheckedValue(value) {\n\t\tconst node = this.node\n\t\tif (arguments.length === 0)\n\t\t\treturn node.checked() ? node.value() : undefined\n\t\tnode.checked(value == node.value())\n\t},\n\tonChange(e) {\n\t\tconst expr = this.expr\n\t\tthis.comp.set(expr.simple, expr.restore(this.domValue(), this.comp, [this.node]))\n\t\te[STOP_PROPAGATION]()\n\t},\n\tbind() {\n\t\tbind.call(this)\n\t\tthis.node.on(this.event, this.onChange, this)\n\t},\n\tunbind() {\n\t\tthis.node.un(this.event, this.onChange, this)\n\t\tunbind.call(this)\n\t}\n})\n\nfunction boolVal(elValue, value) {\n\tif (isArray(value)) {\n\t\tvar i = value.length\n\t\twhile (i--)\n\t\t\tif (value[i] === elValue)\n\t\t\t\treturn true\n\t\treturn false\n\t} else if (isStr(value)) {\n\t\treturn value === elValue\n\t} else if (isObj(value)) {\n\t\treturn !!value[elValue]\n\t}\n\treturn !!value\n}\n","import { assert } from 'devlevel'\nimport { match, and, or, any, option, many, anyOne, UNATTACH, UNCAPTURABLE } from '../common/ASTBuilder'\nimport { makeMap, reEscape } from '../helper'\nimport { escapeString } from '../common/format'\n\nconst EXPR_START = '{',\n\tEXPR_END = '}'\n\nconst AutoCloseElems = makeMap('input'),\n\tContentElems = makeMap('textarea')\n\nconst EXPR_START_LEN = EXPR_START.length,\n\tEXPR_END_LEN = EXPR_END.length\n\nconst EXPR_KEY_WORDS = `\"'\\`[{`\n\nconst EXPR_KEYS = match(EXPR_KEY_WORDS.split(''), UNATTACH),\n\tEXPR_STR = match(/\"(?:[^\\\\\"\\n]|\\\\.)*\"|'(?:[^\\\\'\\n]|\\\\.)*'|`(?:[^\\\\`]|\\\\.)*`/, false, `'\"\\``, UNATTACH),\n\tExprObject = and('ExprObject', () => [\n\t\t'{',\n\t\tanyOne('ObjBody', [\n\t\t\tEXPR_STR, // match by \"'`\n\t\t\tExprObject, // match by {\n\t\t\tExprArray, // match by ]\n\t\t\tEXPR_KEYS, // consume start char when EXPR_STR | ExprObject | ExprArray match failed\n\t\t\tnew RegExp(`[^${reEscape(EXPR_KEY_WORDS+'}')}]+`) // consume chars which before start codes of EXPR_STR | ExprObject | ExprArray and \"}\"\n\t\t], UNATTACH),\n\t\t'}'\n\t], UNATTACH),\n\tExprArray = and('ExprArray', () => [\n\t\t'[',\n\t\tanyOne('ArrayBody', [\n\t\t\tEXPR_STR,\n\t\t\tExprObject,\n\t\t\tExprArray,\n\t\t\tEXPR_KEYS,\n\t\t\tnew RegExp(`[^${reEscape(EXPR_KEY_WORDS+']')}]+`)\n\t\t], UNATTACH),\n\t\t']'\n\t]),\n\tExpr = and('Expr', [\n\t\t\t['ExprStart', EXPR_START, attachOffset],\n\t\t\tanyOne('ExprBody', [\n\t\t\t\tEXPR_STR,\n\t\t\t\tExprObject,\n\t\t\t\tExprArray,\n\t\t\t\tmatch((EXPR_KEY_WORDS + EXPR_START[0]).split(''), UNATTACH),\n\t\t\t\tnew RegExp(`[^${reEscape(EXPR_KEY_WORDS + EXPR_START[0] + EXPR_END[0])}]+`)\n\t\t\t], UNATTACH),\n\t\t\t['ExprEnd', EXPR_END, attachOffset]\n\t\t],\n\t\t(d, rs, stream) => {\n\t\t\tconst content_start = d[0],\n\t\t\t\texpr_end = d[1]\n\t\t\trs.add([stream.orgbuff.substring(content_start, expr_end - EXPR_END_LEN),\n\t\t\t\tcontent_start - EXPR_START_LEN, expr_end\n\t\t\t])\n\t\t}\n\t)\n\n\nfunction createStringRule(name, mask, mline) {\n\treturn and(name, [\n\t\tmatch(mask, attachOffset),\n\t\tanyOne([\n\t\t\tExpr,\n\t\t\tEXPR_START[0], // consume expr start char when parse expr failed\n\t\t\tnew RegExp(`(?:[^\\\\\\\\${mline ? '':'\\\\n'}${mask}${reEscape(EXPR_START[0])}]|\\\\\\\\.)+`) // string fragment\n\t\t]),\n\t\tmatch(mask, attachOffset)\n\t], (d, rs, stream) => {\n\t\tconst buff = stream.orgbuff\n\t\tlet start = d[0],\n\t\t\tend = d[2] - 1,\n\t\t\texprs = d[1]\n\t\tif (exprs.length) {\n\t\t\tconst offset = start - 1\n\t\t\tvar i = 0,\n\t\t\t\tl = exprs.length,\n\t\t\t\testart\n\t\t\tconst expr = []\n\n\t\t\tfor (; i < l; i++) {\n\t\t\t\testart = exprs[i][1]\n\t\t\t\tif (start < estart)\n\t\t\t\t\texpr.push(exprStr(buff, start, estart))\n\t\t\t\texpr.push(`(${exprs[i][0]})`)\n\t\t\t\tstart = exprs[i][2]\n\t\t\t}\n\t\t\tif (start < end)\n\t\t\t\texpr.push(exprStr(buff, start, end))\n\n\t\t\trs.add(['expr', expr.join(' + '), offset, end + 1])\n\t\t} else {\n\t\t\trs.add(['string', buff.substring(start, end)])\n\t\t}\n\t})\n\n\tfunction exprStr(buff, start, end) {\n\t\treturn `\"${escapeString(buff.substring(start, end))}\"`\n\t}\n}\n\n\nconst ATTR_NAME = match('AttrName', /([@:$_a-zA-Z][\\w-\\.]*)\\s*/, 1),\n\tAttrValue = or('AttrValue', [\n\t\tcreateStringRule('SQString', \"'\"),\n\t\tcreateStringRule('DQString', '\"'),\n\t\tcreateStringRule('MString', '`', true),\n\t\tand(Expr, attachValue('expr', expr => expr[0][0])),\n\t\tmatch('Number', /-?(0|[1-9]\\d*)(\\.\\d+)?([eE][+-]?\\d+)?/, '-0123456789', attachValue('number', num => +num)),\n\t\tmatch('NaN', attachStaticValue('number', NaN)),\n\t\tmatch('undefined', attachStaticValue('undefined', undefined)),\n\t\tmatch('null', attachStaticValue('null', undefined)),\n\t\tmatch('true', attachStaticValue('boolean', true)),\n\t\tmatch('false', attachStaticValue('boolean', false))\n\t], {\n\t\tcapturable: false,\n\t\tattach(val, rs) {\n\t\t\trs.add(val[0])\n\t\t}\n\t}),\n\tAttrs = any('Attrs', [\n\t\tATTR_NAME,\n\t\toption('AttrValue', [\n\t\t\t[/=\\s*/, false, '=', UNATTACH],\n\t\t\tAttrValue,\n\t\t\t/\\s*/\n\t\t])\n\t], (d, rs) => {\n\t\tconst attrs = {}\n\t\tfor (let i = 0, l = d.length; i < l; i += 2)\n\t\t\tattrs[d[i]] = d[i + 1][0]\n\t\trs.add(attrs)\n\t})\n\nconst ELEM_NAME_REG = '[_a-zA-Z][\\\\w-]*',\n\tELEM_NAME = match('ElemName', new RegExp(`<(${ELEM_NAME_REG})\\\\s*`), 1, '<'),\n\tNodeCollection = anyOne('NodeCollection', () => [\n\t\tElem,\n\t\tand(Expr, (d, rs, stream) => {\n\t\t\trs.add({ type: 'expr', data: d[0][0] })\n\t\t}),\n\t\tmatch('<', (d, rs, stream, rule) => { //consume one char when Elem match failed\n\t\t\tif (stream.nextCode() === 47) // is close element\n\t\t\t\treturn rule.error(stream, 'expect: /<[^\\/]/', true)\n\t\t\tattachText(d, rs, stream, rule) // not element\n\t\t}),\n\t\tmatch(EXPR_START[0], attachText), // consume one char when Expr match failed\n\t\tmatch(new RegExp(`[^\\\\\\\\<${reEscape(EXPR_START[0])}]+|\\\\\\\\${reEscape(EXPR_START[0])}`), attachText)\n\t]),\n\tElem = and('Elem', [\n\t\tELEM_NAME,\n\t\tAttrs,\n\t\tor('ElemBody', [\n\t\t\tmatch(/\\/>\\s*/, false, '/', UNATTACH),\n\t\t\tand('childNodes', [\n\t\t\t\tmatch(/>/, false, '>', UNATTACH),\n\t\t\t\tNodeCollection,\n\t\t\t\toption([\n\t\t\t\t\tmatch('ElemClose', new RegExp(`<\\/(${ELEM_NAME_REG})>\\\\s*`), 1, '<')\n\t\t\t\t], (close, childNodesResult, stream) => {\n\t\t\t\t\tconst closeTag = close[0],\n\t\t\t\t\t\telemResult = childNodesResult.parent.parent,\n\t\t\t\t\t\ttag = elemResult.data[0]\n\n\t\t\t\t\tif (closeTag) {\n\t\t\t\t\t\tif (closeTag !== tag) {\n\t\t\t\t\t\t\tif (AutoCloseElems[tag]) {\n\t\t\t\t\t\t\t\tstream.reset()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn `expect: </${tag}>`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (!AutoCloseElems[tag]) {\n\t\t\t\t\t\treturn `expect: </${tag}>`\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t])\n\t\t])\n\t], (d, rs) => {\n\t\tconst tag = d[0],\n\t\t\tchildren = d[2][0] && d[2][0][0],\n\t\t\telem = { type: 'elem', tag, attrs: d[1], children }\n\n\t\trs.add(elem)\n\n\t\tif (children && AutoCloseElems[tag]) {\n\t\t\trs.addAll(children)\n\t\t\tchildren.length = 0\n\t\t}\n\t})\n\n\nfunction attachText(text, rs) {\n\tconst data = rs.data,\n\t\tlen = data.length\n\tlet prev\n\tif (len && (prev = data[len - 1]) && prev.type === 'text') {\n\t\tprev.data += text\n\t} else {\n\t\trs.add({ type: 'text', data: text })\n\t}\n}\n\nconst ElemContent = and('Elem-Content', [\n\t/\\s*/,\n\tmany(Elem),\n\tmatch('EOF', /\\s*$/, UNATTACH)\n], (d, rs) => {\n\trs.addAll(d[0])\n}).init()\n\nexport default ElemContent\n\nfunction attachValue(type, valHandler) {\n\treturn function (value, rs) {\n\t\trs.add([type, valHandler(value)])\n\t}\n}\n\nfunction attachStaticValue(type, val) {\n\treturn attachValue(type, v => v)\n}\n\nfunction attachOffset(d, rs, stream) {\n\trs.add(stream.orgOffset())\n}\n"],"names":["__global","window","global","CONSTRUCTOR","PROTOTYPE","PROTO","BOOL","FN","NUM","STR","eq","o1","o2","isNil","o","undefined","isFn","fn","isObj","C","Object","mkIs","Type","isBool","Boolean","isNum","Number","isStr","String","isDate","Date","isReg","RegExp","isArray","Array","isInt","parseInt","valueOf","isTypedArray","ArrayBuffer","isView","isArrayLike","NodeList","HTMLCollection","Int8Array","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","len","length","isPrimitive","blankStrReg","applyBuilder","max_args","scope","offset","args","cases","i","slice","join","Function","applyScope","applyNoScope","applyScopeN","applyNoScopeN","apply","createFn","name","body","l","arguments","concat","varGenReg","fnName","replace","funcProto","bind","this","rs","QUERY_SELECTOR","QUERY_SELECTOR_ALL","QUERY_RESULTS","document","selector","head","documentElement","firstChild","styleTag","createElement","appendChild","styleSheet","cssText","textnode","createTextNode","scrollBy","ret","selectors","elements","trimReg","trim","str","firstLetterReg","upperHandler","m","toUpperCase","upperFirst","strval","obj","charCode","index","charCodeAt","__hasOwn","hasOwnProperty","hasOwnProp","prop","call","getOwnProp","defaultVal","__getProto","getPrototypeOf","__setProto","setPrototypeOf","prototypeOfSupport","prototypeOf","proto","doCreate","parent","props","k","v","value","create","STOP","eachArray","__mkEachArrayLike","arrayValueHandler","eachStr","strValueHandler","reachArray","__mkREachArrayLike","reachStr","each","__mkEach","eachObj","reach","callback","own","key","arrayType","valueHandler","array","charAt","SKIP","mapArray","__mkMapArrayLike","mapStr","mapObj","__mkMapObj","map","copy","j","defaultMapCallback","val","REG_ESCAPE","reEscape","s","regStickySupport","sticky","regUnicodeSupport","unicode","array2obj","keyHandler","arrayElementHandler","dist","makeMap","split","arglen","makeArray","toStr","toString","conditions","UNDEF","ARR","byteArray","shortArray","intArray","floatArray","typedArrays","addTypeCon","values","notEq","notMakeNot","addEqCon","arrayVal","_addCon","thisCb","cb","n","injects","conCode","params","push","reFirst","addCon","assignCons","isNot","condition","_if","sliceArgs","callBy","exception","error","Error","assert","t","addValueCon","a","b","currentLevel","logs","createLog","level","log","methods","getLogMethods","mark","msg","unshift","__print","bindLog","method","empty","arr","upper","toLowerCase","console","info","setLogConsole","applyArgs","__defProp","defineProperty","defPropSupport","get","set","e","desc","defProp","defPropValue","configurable","writeable","enumerable","__assign","overrides","filter","data","override","assign","__assignFilter","__assignIfFilter","__assignUserFilter","__extend","cls","mixins","extend","__extendFilter","mixin","__extendIfFilter","extendBy","__extendUserFilter","__inherit","superCls","inherit","fnProto","objProto","CLASS_NAME","EXTEND","STATICS","KEYS","createClass","constructor","buildCls","keyFilter","filterArray","__mkFilter","filterStr","filterObj","findArray","__mkFind","findStr","findObj","find","rfindArray","rfind","indexOfArray","__mkTypeIndexOf","indexOfObj","lastIndexOfArray","indexOf","__mkIndexOf","lastIndexOf","strIndexOf","obj2array","keys","__mkKV","handler","DEFAULT_BINDING","List","binding","__doInsert","list","nodeHead","nodeTail","prev","next","tail","__insert","node","__initNode","__insertAll","objs","__prev","__getNode","__siblingObj","sibling","__remove","__clean","has","add","addFirst","insertAfter","target","insertBefore","addAll","addFirstAll","insertAfterAll","insertBeforeAll","first","last","remove","scaning","lazyRemoves","__doLazyRemove","toArray","clean","clone","newlist","newtail","newhead","newprev","DEFAULT_FN_BINDING","DEFAULT_SCOPE_BINDING","FnList","fnBinding","scopeBinding","nodeMap","parseScope","id","nodeId","size","DEFAULT_SCOPE_ID","scopeIdGenerator","fnIdGenerator","fnId","scopeId","ticks","pending","executeTick","flush","MutationObserver","counter","observer","textNode","observe","characterData","setTimeout","nextTick","STR_ESCAPE_MAP","STR_ESCAPE","escapeString","pad","chr","leftAlign","padding","replacor","regs","reg","test","plural","singular","thousandSeparationReg","formatReg","_format","parseWidth","width","isFinite","format","match","idx","flags","minWidth","precision","type","parseArg","prefix","base","c","leftJustify","positivePrefix","zeroPad","prefixBaseX","thousandSeparation","isNaN","fromCharCode","number","toFixed","toExponential","toPrecision","sf","Math","min","count","pathCache","pathReg","escapeCharReg","parsePath","path","cache","quote","string","formatPath","formatHandle","attr","LINE_REG","Stream","buff","orgbuff","orglen","curr","stack","enter","reset","exit","pop","commit","substring","orgOffset","upOrgOffset","nextCode","consume","position","line","lineOffset","exec","lastIndex","source","idGen","MatchResult","datas","setLen","UNATTACH","UNATTACH_CAPTURABLE","attach","capturable","defaultErrorMsg","err","defaultAttach","defaultRuleTest","Rule","option","testRuleByIndex","stream","$rule","srcErr","$err","success","result","setExpr","expr","defName","mkExpr","EXPECT","getStart","MatchRule","startCodes","ignoreCase","start","eachCharCodes","code","comsume","defaultCharMatchRuleTest","CharMatchRule","allows","codes","chars","RegMatchRule","regexp","pick","pattern","multiline","createRegMatchRulePolicy","R","STREAM","S_BUFF","LIDX","consumCode","pickCode","StrMatchRule","regMatch","strMatch","_pattern","REG_ESPEC_CHARS","eachCharCode","ComplexRule","rules","getRules","parseComplexRules","parseRule","names","subNames","EXPECTS","__init","parse","errSource","pos","substr","SyntaxError","init","idStack","idStackPush","rule","AndRule","OrRule","starts","rStarts","upErr","createRepeatRule","defType","Parent","max","prototype","AndRepeatRule","repeat","out","OrRepeatRule","and","buildComplexRule","or","buildRepeatRule","buildAndRepeatRule","any","many","buildOrRepeatRule","anyOne","build","manyOne","optionOne","repeatOne","OBSERVER_KEY","ARRAY_EVENTS","ArrayProto","arrayHooks","newlen","__write","arrayHookLength","defaultProps","policy","Proxy","proxyEnabled","impl","proxy","oldValue","_this","es6","newValue","__defineGetter__","__defineSetter__","defined","__watch","es5","defaultPropMap","VBArray","execScript","bindingProp","constructorProp","objectProps","classPool","constructorScript","classNameGenerator","getOrCreateVBClass","classKey","sort","providerName","className","parseVB","parseVBClass","buffer","buildProxy","func","createProxy","vbproxy","propMap","funcs","proxyChangeable","sourceOwnProperty","__proxyChanged","doWrite","doRead","vb","isDefaultProp","noProxyChangeEventHandler","disableWriteEvent","Observer","bubbles","hookArray","hook","addChangedQueue","DESC_CHANGED_INDEX","NO_CHANGED","changedQueue","flushChangedQueue","childObserver","watchs","currentObserver","allocWatchDescriptor","registerBubble","DESC_CHILDREN_INDEX","getObserver","setChildObserver","DESC_PATH_INDEX","DESC_HANDLERS_INDEX","unobserve","unwatch","maxLevel","DESC_CHILD_NUM_INDEX","unregisterBubble","DESC_OBSERVER_INDEX","DESC_ATTR_INDEX","freeWatchDescriptor","isObserved","disableEvent","_set","disabled","onProxyChange","unProxyChange","DESC_OWNER_INDEX","DESC_PARENT_INDEX","DESC_EVENT_INDEX","DESC_VALUE_INDEX","owner","descriptor","descs","eventQueue","addEventQueue","bubble","observerValue","newObserver","__bubble","oldObserver","nextObserver","children","parentObserver","setSource","nextObj","_observer","$hasOwnProp","$eq","proxyListens","$eachArray","$reachArray","$each","$eachObj","$reach","$mapArray","$mapObj","$map","$filterArray","$filterObj","$filter","$findArray","$findObj","$find","$rfindArray","$rfind","$indexOfArray","$indexOfObj","$lastIndexOfArray","$indexOf","$lastIndexOf","$obj2array","$keys","$values","CHILD_NODES","PARENT","VIRT_NODE","VIRT_ELEMENT","VIRT_TEXT","VIRT_BINDING_TEXT","VIRT_COMPLEX_ELEMENT","VIRT_COMMENT","VNode","comp","$comp","prepare","mount","unmount","appendTo","$virtComplexElement","append","prependTo","prepend","insertBeforeTo","insertAfterTo","replaceTo","prevSibling","nextSibling","VText","text","update","keywords","wsReg","newlineReg","restoreReg","identityReg","propReg","simplePathReg","escaped","restore","restoreHandler","escapeHandler","escapeStrReg","escapeStrHandler","userIdentityHandler","userKeyWords","IDENTITY_OPT_GET","IDENTITY_OPT_SET","IDENTITY_OPT_CALL","identities","identitySize","isKeyword","identityHandler","identity","optIdx","optChar","opt","makeExecutor","filterSplitReg","filterParamReg","Expression","paramNames","parseFilter","codeSplit","escape","escapeReg","executor","filters","shift","cleanIdentities","ident","idents","simple","isSimpleExpr","FilterParams","execute","eachFilter","reachFilter","iter","VNodeKeyword","transforms","transformIdentityHandler","TransformExpression","transformValue","transform","checkRestore","by","localTransforms","json","param","indent","JSON","stringify","capitalize","uppercase","lowercase","unit","fmt","units","unitRestoreReg","unitMap","bytes","digit","pow","floor","round","splice","VBindingText","observeExpr","exprHandler","unobserveExpr","VElement","initAttrs","attrs","initDirectives","directives","g","D","Directive","$nodeKey","dname","$nodeName","__directives","unbind","VComplexElement","initChildren","$childKey","$childName","N","ename","child","childNodes","__children","initChild","mountChildHandler","unmountChildHandler","childCount","createSibling","createInsert","createInsertSibling","insert","eachChildren","Compontent","$scope","obs","$observer","$getScope","$parent","getScope","destroy","VComment","comment","registerDirective","directive","$directive","Text","BindingText","Comment","VElements","tags","registerVElement","registerVText","registerVBindingText","registerVComment","isExpr","generator","ADD_EVENT_LISTENER","ATTACH_EVENT","DOCUMENT_ELEMENT","DEFAULT_VIEW","PARENT_WINDOW","APPEND_CHILD","INSERT_BEFORE","REPLACE_CHILD","PARENT_NODE","CONTAINS","INNER_HTML","CREATE_ELEMENT","OWNER_DOCUMENT","SET_ATTRIBUTE","GET_ATTRIBUTE","REMOVE_ATTRIBUTE","SELECTED","DISABLED","READ_ONLY","TAB_INDEX","HTML_FOR","PREVENT_DEFAULT","STOP_PROPAGATION","STOP_IMMEDIATE_PROPAGATION","CLIENT_TOP","CLIENT_LEFT","SCROLL_LEFT","SCROLL_TOP","PAGE_XOFFSET","PAGE_YOFFSET","CLIENTX","CLIENTY","PAGEX","ROOTELEMENT","DIV","getWindow","el","nodeType","inDoc","root","query","querySelector","previousSibling","$htmlNode","prependChild","taget","pEl","OUTER_HTML","$htmlElement","tagName","initDomEvent","outerHtml","cloneNode","html","focus","normal","__hooks","defKey","recive","hooks","revices","addHook","getHook","hookMember","member","memberHook","hookRevice","doAdd","NAME","GET","SET","createHook","tabIndex","attributeNode","specified","rfocusable","nodeName","rclickable","href","tabindex","readonly","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","contenteditable","removeAttr","getProp","setProp","checked","propAccessor","selected","PROP","CLASS_LIST","parseClassName","parseClassNameArrayByObj","addClass","mkClasslistUpdator","parseClassNameArray","clearClassName","removeClass","margeClass","adds","clears","classList","clearRegCache","removes","W3C","dispatchEvent","IE8","XDomainRequest","IE9","navigator","userAgent","readyList","fireReady","READY_STATE","DO_SCROLL","frameElement","external","doScrollCheck","numberCss","nameHooks","getStyle","style","float","OFFSET_PARENT","GET_BOUNDING_CLIENT_RECT","FILTER","POSITION","setCss","camelize","cssHookName","css","num","parseFloat","doc","box","top","left","win","rect","clientTop","clientLeft","scrollTop","scrollLeft","p","offsetParent","getNumStyle","op","scrollTo","cssPrefixes","host","cssPrefixeSize","fixedName","GET_COMPUTED_STYLE","computedStyle","styles","getPropertyValue","RUNTIME_STYLE","rnumnonpx","rposition","border","thin","medium","thick","currentStyle","rsLeft","pixelLeft","camelizeReg","camelizeHandler","OPACITY","FILTERS","ralpha","alpha","enabled","opacity","zoom","EMPTY_MAP","SELECTED_INDEX","SELECT_ONE","OPTIONS","getOptionValue","select","signle","options","vl","attributes","DOM_ELEMENT","MIXIN_EVENTS","MIXIN_ADD_LISTEN","MIXIN_DEL_LISTEN","MIXIN_EMIT_LISTEN","EventMixin","on","bindDispatcher","events","listenEl","DOM_DISPATCH_EVENTS","addEventListener","dispatch","un","unbindDispatcher","removeEventListener","once","self","listens","event","$hookEvent","packEvent","targetEl","current","IS_IMMEDIATE_PROPAGATION_STOPPED","ORIGINAL_EVENT","RETURN_VALUE","GET_PREVENT_DEFAULT","TIME_STAMP","ORIGINAL_PROPS","CANCEL_BUBBLE","detachEvent","bubbleUpEvents","change","keyEventReg","CHARCODE","KEYCODE","WHICH","keyEventProps","keyEventHook","fix","original","mouseEventReg","BUTTON","mouseEventProps","mouseEventHook","button","eventDoc","moveEventReg","elem","eventTarget","now","originalEvent","Event","srcElement","eventProps","RELATED_TARGET","PROPERTY_NAME","defaultPrevented","getTime","EventProto","onmouseenter","compareDocumentPosition","AnimationEvent","WebKitAnimationEvent","onmousewheel","fixWheelType","onwheel","fixWheelDelta","WHEEL_DELTA","WHEEL_DELTAY","INPUT","oninput","changeEventDispath","DOM_CHANGE_EVENT","changeEventNum","OLD_VALUE","actEl","activeElement","Element","HTMLMixin","ElementMixin","ElementAttrMixin","ElementClassMixin","ElementStyleMixin","ElementValueMixin","ElementEventMixin","appendAll","__TEXT_CONTENT","TEXT_CONTENT","ComplexElement","$htmlComplexElement","doInsertBefore","doInsertAfter","$htmlComp","createComment","$htmlComment","TextMixin","HTMLText","HTMLBindingText","register","eventFilters","EventKeyword","eventIdentityHandler","doIdentityHandler","EventExpression","doFilter","localFilters","keyCodes","esc","tab","space","up","right","down","which","stop","prevent","preventDefault","currentTarget","DomDirective","ExpressionDirective","realValue","blankValue","observeHandler","EventDirective","sample","eventType","eventName","DISPLAY","__register","show","hide","boolVal","oldCache","ncsses","styleSplitReg","cssSplitReg","csses","elValue","domValue","elemValue","itype","checkedValue","TypeError","onChange","EXPR_START","AutoCloseElems","EXPR_START_LEN","EXPR_END_LEN","EXPR_KEY_WORDS","EXPR_KEYS","EXPR_STR","ExprObject","ExprArray","Expr","attachOffset","d","content_start","expr_end","createStringRule","mask","mline","end","exprs","estart","exprStr","Attrs","attachValue","attachStaticValue","NaN","ELEM_NAME_REG","ELEM_NAME","NodeCollection","Elem","attachText","close","childNodesResult","closeTag","tag","ElemContent","valHandler","assignIf","assignBy","extendIf","subclassOf","eachChain","isNull","isUndef","is","isInstOf","isBlank","applyN","genCharCodes","reUnion","regexps","cached","cacheKey","cacheVal","clearTick","thousandSeparate","isProxyEnabled","$set","$getOwnProp","$assign","$assignIf","$assignBy","gen"],"mappings":"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"}