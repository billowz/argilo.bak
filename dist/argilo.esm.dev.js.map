{"version":3,"file":"argilo.esm.dev.js","sources":["/argilo/src/util/consts.ts","/argilo/src/util/dkeys.ts","/argilo/src/util/ctor.ts","/argilo/src/util/toStr.ts","/argilo/src/util/is.ts","/argilo/src/util/fn.ts","/argilo/src/util/reg.ts","/argilo/src/util/proto/polyfill.ts","/argilo/src/util/proto/index.ts","/argilo/src/util/defProp/polyfill.ts","/argilo/src/util/defProp/index.ts","/argilo/src/util/ownProp.ts","/argilo/src/util/create/polyfill.ts","/argilo/src/util/create/index.ts","/argilo/src/util/deepEq.ts","/argilo/src/util/string.ts","/argilo/src/util/assign.ts","/argilo/src/util/collection/Control.ts","/argilo/src/util/collection/each.ts","/argilo/src/util/collection/map.ts","/argilo/src/util/collection/idxOf.ts","/argilo/src/util/collection/reduce.ts","/argilo/src/util/collection/obj2arr.ts","/argilo/src/util/collection/arr2obj.ts","/argilo/src/util/collection/index.ts","/argilo/src/util/mixin.ts","/argilo/src/util/index.ts","/argilo/src/path/index.ts","/argilo/src/format/index.ts","/argilo/src/assert/index.ts","/argilo/src/list/List.ts","/argilo/src/list/FnList.ts","/argilo/src/list/index.ts","/argilo/src/nextTick/index.ts","/argilo/src/ast/Source.ts","/argilo/src/ast/util.ts","/argilo/src/ast/Rule.ts","/argilo/src/ast/MatchContext.ts","/argilo/src/ast/ComplexRule.ts","/argilo/src/ast/AndRule.ts","/argilo/src/ast/OrRule.ts","/argilo/src/ast/MatchRule.ts","/argilo/src/ast/CharMatchRule.ts","/argilo/src/ast/RegMatchRule.ts","/argilo/src/ast/StringMatchRule.ts","/argilo/src/ast/api.ts","/argilo/src/ast/index.ts","/argilo/src/observer/IObserver.ts","/argilo/src/observer/ProxyPolicy.ts","/argilo/src/observer/arrayHook.ts","/argilo/src/observer/AccessorPolicy.ts","/argilo/src/observer/VBPolicy.ts","/argilo/src/observer/Observer.ts","/argilo/src/observer/index.ts","/argilo/src/index.ts"],"sourcesContent":["/**\n *\n * @module util\n * @author Tao Zeng (tao.zeng.zt@qq.com)\n * @created 2018-11-09 15:23:35\n * @modified 2018-11-09 15:23:35 by Tao Zeng (tao.zeng.zt@qq.com)\n */\n\nexport const P_CTOR = 'constructor'\n\nexport const P_PROTOTYPE = 'prototype'\n\nexport const P_PROTO= '__proto__'\n\nexport const P_OWNPROP = 'hasOwnProperty'\n\nexport const T_BOOL = 'boolean'\n\nexport const T_FN = 'function'\n\nexport const T_NUM = 'number'\n\nexport const T_STRING = 'string'\n\nexport const T_UNDEF = 'undefined'\n\nexport const GLOBAL: any =\n\ttypeof window !== T_UNDEF\n\t\t? window\n\t\t: typeof global !== T_UNDEF\n\t\t? global\n\t\t: typeof self !== T_UNDEF\n\t\t? self\n\t\t: {}\n\nexport type IArray<T> =\n\t| T[]\n\t| string\n\t| {\n\t\t\tlength: number\n\t\t\t[Symbol.iterator](): IterableIterator<T>\n\t  }\n\nexport function EMPTY_FN() {}\n\nexport function NULL_CTOR() {}\nNULL_CTOR[P_PROTOTYPE] = null\n","/**\n * @module util/dkeys\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Mar 11 2019 17:22:13 GMT+0800 (China Standard Time)\n * @modified Sat Mar 23 2019 17:42:04 GMT+0800 (China Standard Time)\n */\nimport { NULL_CTOR } from './consts'\n\nexport const DKeyMap = new NULL_CTOR()\n\nexport const DKeys = []\n\nexport function isDKey(key: string) {\n\treturn DKeyMap[key] || false\n}\n\nexport function addDKey(key: string) {\n\tif (!DKeyMap[key]) {\n\t\tDKeyMap[key] = true\n\t\tDKeys.push(key)\n\t}\n\treturn key\n}\n\nexport function addDKeys(...keys: string[]): void\n\nexport function addDKeys() {\n\tconst args = arguments,\n\t\tl = args.length\n\tfor (var i = 0; i < l; i++) {\n\t\taddDKey(args[i] + '')\n\t}\n}\n\nexport function getDKeys() {\n\treturn DKeys\n}\n\nexport function getDKeyMap() {\n\treturn DKeys\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 11:50:32 GMT+0800 (China Standard Time)\n */\n\nimport { T_FN, P_CTOR } from './consts'\n\nexport function getCtor(o: any) {\n\tlet C = o[P_CTOR]\n\treturn typeof C === T_FN ? C : Object\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:26:55 GMT+0800 (China Standard Time)\n */\nconst toString = Object.prototype.toString\nexport function toStr(obj: any): String {\n\treturn toString.call(obj)\n}\n\nexport function toStrType(obj: any) {\n\treturn toString.call(obj).match(/^\\[object ([^\\]]+)\\]$/)[1]\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:26:03 GMT+0800 (China Standard Time)\n */\n\nimport { P_CTOR, GLOBAL, T_BOOL, T_FN, T_NUM, T_STRING, T_UNDEF } from './consts'\nimport { getCtor } from './ctor'\nimport { toStr } from './toStr'\n\n/**\n * is equals\n * > o1 === o2 || NaN === NaN\n */\nexport function eq(o1: any, o2: any): boolean {\n\treturn o1 === o2 || (o1 !== o1 && o2 !== o2)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    primitive type                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * is null\n */\nexport function isNull(o: any): boolean {\n\treturn o === null\n}\n\n/**\n * is undefined\n */\nexport function isUndef(o: any): boolean {\n\treturn o === undefined\n}\n\n/**\n * is null or undefined\n */\nexport function isNil(o: any): boolean {\n\treturn o === null || o === undefined\n}\n\n/**\n * is boolean\n */\nexport const isBool: (o: any) => boolean = mkIsPrimitive(T_BOOL)\n\n/**\n * is a number\n */\nexport const isNum: (o: any) => boolean = mkIsPrimitive(T_NUM)\n\n/**\n * is a string\n */\nexport const isStr: (o: any) => boolean = mkIsPrimitive(T_STRING)\n\n/**\n * is a function\n */\nexport const isFn: (o: any) => boolean = mkIsPrimitive(T_FN)\n\n/**\n * is integer number\n */\nexport function isInt(o: any): boolean {\n\treturn o === 0 || (o ? typeof o === T_NUM && o % 1 === 0 : false)\n}\n\n/**\n * is primitive type\n * - null\n * - undefined\n * - boolean\n * - number\n * - string\n * - function\n */\nexport function isPrimitive(o: any): boolean {\n\tif (o === undefined || o === null) {\n\t\treturn true\n\t}\n\tswitch (typeof o) {\n\t\tcase T_BOOL:\n\t\tcase T_NUM:\n\t\tcase T_STRING:\n\t\tcase T_FN:\n\t\t\treturn true\n\t}\n\treturn false\n}\n\nfunction mkIsPrimitive(type: string): (o: any) => boolean {\n\treturn function is(o: any): boolean {\n\t\treturn typeof o === type\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    reference type                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * is instanceof\n */\nexport function instOf(obj: any, Cls: Function): boolean {\n\treturn obj !== undefined && obj !== null && obj instanceof Cls\n}\n\n/**\n * is child instance of Type\n */\nexport function is(o: any, Type: Function | Function[]): boolean {\n\tif (o !== undefined && o !== null) {\n\t\tconst C = o[P_CTOR] || Object\n\t\tif (Type[P_CTOR] === Array) {\n\t\t\tvar i = Type.length\n\t\t\twhile (i--) {\n\t\t\t\tif (C === (Type as Function[])[i]) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn C === Type\n\t\t}\n\t}\n\treturn false\n}\n\n/**\n * is boolean or Boolean\n */\nexport const isBoolean: (o: any) => boolean = mkIs(Boolean)\n\n/**\n * is number or Number\n */\nexport const isNumber: (o: any) => boolean = mkIs(Number)\n\n/**\n * is string or String\n */\nexport const isString: (o: any) => boolean = mkIs(String)\n\n/**\n * is Date\n */\nexport const isDate: (o: any) => boolean = mkIs(Date)\n\n/**\n * is RegExp\n */\nexport const isReg: (o: any) => boolean = mkIs(RegExp)\n\n/**\n * is Array\n */\nexport const isArray: (o: any) => boolean = Array.isArray || mkIs(Array)\n\n/**\n * is Typed Array\n */\nexport const isTypedArray: (o: any) => boolean = isFn(ArrayBuffer) ? ArrayBuffer.isView : () => false\n\n/**\n * is Array or pseudo-array\n * - Array\n * - String\n * - IArguments\n * - NodeList\n * - HTMLCollection\n * - Typed Array\n * - {length: int, [length-1]: any}\n */\nexport function isArrayLike(o: any): boolean {\n\tif (o && o[P_CTOR]) {\n\t\tswitch (o[P_CTOR]) {\n\t\t\tcase Array:\n\t\t\tcase String:\n\t\t\tcase GLOBAL.NodeList:\n\t\t\tcase GLOBAL.HTMLCollection:\n\t\t\tcase GLOBAL.Int8Array:\n\t\t\tcase GLOBAL.Uint8Array:\n\t\t\tcase GLOBAL.Int16Array:\n\t\t\tcase GLOBAL.Uint16Array:\n\t\t\tcase GLOBAL.Int32Array:\n\t\t\tcase GLOBAL.Uint32Array:\n\t\t\tcase GLOBAL.Float32Array:\n\t\t\tcase GLOBAL.Float64Array:\n\t\t\t\treturn true\n\t\t}\n\t\tconst len = o.length\n\t\treturn typeof len === T_NUM && (len === 0 || (len > 0 && len % 1 === 0 && len - 1 in o))\n\t}\n\treturn o === ''\n}\n\n/**\n * is simple Object\n * TODO object may has constructor property\n */\nexport function isObj(o: any): boolean {\n\treturn o !== undefined && o !== null && getCtor(o) === Object\n}\n\n/**\n * is simple Object\n * TODO object may has constructor property\n */\nexport function isObject(o: any): boolean {\n\treturn toStr(o) === '[object Object]'\n}\n\nfunction mkIs(Type: Function): (o: any) => boolean {\n\treturn function is(o: any): boolean {\n\t\treturn o !== undefined && o !== null && o[P_CTOR] === Type\n\t}\n}\n\nconst blankStrReg = /^\\s*$/\n/**\n * is empty\n * - string: trim(string).length === 0\n * - array: array.length === 0\n * - pseudo-array: pseudo-array.length === 0\n */\nexport function isBlank(o: any): boolean {\n\tif (o) {\n\t\tif (o[P_CTOR] === String) {\n\t\t\treturn blankStrReg.test(o)\n\t\t}\n\t\treturn o.length === 0\n\t}\n\treturn true\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:26:23 GMT+0800 (China Standard Time)\n */\n\nimport { GLOBAL, P_PROTOTYPE } from './consts'\nimport { isNil } from './is'\n\n// ========================================================================================\n/*                                                                                      *\n *                                    create function                                   *\n *                                                                                      */\n// ========================================================================================\n\n/**\n * create function by code string\n * @param body\tfunction body\n * @param args\tfunction argument names\n * @param name\tfunction name\n */\nexport function createFn<T extends (...args: any[]) => any>(body: string, args?: string[], name?: string): T {\n\treturn name\n\t\t? Function(`return function ${name}(${args ? args.join(', ') : ''}){${body}}`)()\n\t\t: applyScope(Function, Function, args && args.length ? args.concat(body) : [body])\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                    function apply                                    *\n *                                                                                      */\n// ========================================================================================\n\n/**\n * generate apply function\n */\nfunction applyBuilder<T extends (...args: any[]) => any>(maxArgs: number, scope: any, offset: any): T {\n\tscope = scope ? 'scope' : ''\n\toffset = offset ? 'offset' : ''\n\tconst args = new Array(maxArgs + 1)\n\tconst cases = new Array(maxArgs + 1)\n\tfor (let i = 0; i <= maxArgs; i++) {\n\t\targs[i] = `${i || scope ? ', ' : ''}args[${offset ? `offset${i ? ' + ' + i : ''}` : i}]`\n\t\tcases[i] = `case ${i}: return fn${scope && '.call'}(${scope}${args.slice(0, i).join('')});`\n\t}\n\treturn Function(`return function(fn, ${scope && scope + ', '}args${offset && ', offset, len'}){\nswitch(${offset ? 'len' : 'args.length'}){\n${cases.join('\\n')}\n}\n${offset &&\n\t`var arr = new Array(len);\nfor(var i=0; i<len; i++) arr[i] = arr[offset + i];`}\nreturn fn.apply(${scope || 'null'}, ${offset ? 'arr' : 'args'});\n}`)()\n}\n\n/**\n * apply function with scope\n * @param fn\ttarget function\n * @param scope\tscope of function\n * @param args\targuments of function\n */\nexport const applyScope: (fn: (...args: any[]) => any, scope: any, args: any[] | IArguments) => any = applyBuilder(\n\t8,\n\t1,\n\t0\n)\n\n/**\n * apply function without scope\n * @param fn\t\ttarget function\n * @param args\targuments of function\n */\nexport const applyNoScope: (fn: (...args: any[]) => any, args: any[] | IArguments) => any = applyBuilder(8, 0, 0)\n\n/**\n * apply function with scope\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport const applyScopeN: (\n\tfn: (...args: any[]) => any,\n\tscope: any,\n\targs: any[] | IArguments,\n\toffset: number,\n\tlen: number\n) => any = applyBuilder(8, 1, 1)\n\n/**\n * apply function without scope\n * @param fn\t\ttarget function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport const applyNoScopeN: (\n\tfn: (...args: any[]) => any,\n\targs: any[] | IArguments,\n\toffset: number,\n\tlen: number\n) => any = applyBuilder(8, 0, 1)\n\n/**\n * apply function\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n */\nexport function apply(fn: (...args: any[]) => any, scope: any, args: any[] | IArguments): any {\n\tif (scope === undefined || scope === null || scope === GLOBAL) {\n\t\treturn applyNoScope(fn, args || [])\n\t}\n\treturn applyScope(fn, scope, args || [])\n}\n\n/**\n * apply function\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport function applyN(\n\tfn: (...args: any[]) => any,\n\tscope: any,\n\targs: any[] | IArguments,\n\toffset: number,\n\tlen: number\n): any {\n\tif (scope === undefined || scope === null || scope === GLOBAL) {\n\t\treturn applyNoScopeN(fn, args, offset, len)\n\t}\n\treturn applyScopeN(fn, scope, args, offset, len)\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                     function name                                    *\n *                                                                                      */\n// ========================================================================================\n\nconst varGenReg = /\\$\\d+$/\n\n/**\n * get function name\n */\nexport function fnName(fn: (...args: any[]) => any): string {\n\tconst name: string = (fn as any).name\n\treturn name ? name.replace(varGenReg, '') : 'anonymous'\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                         bind                                         *\n *                                                                                      */\n// ========================================================================================\n\nlet _bind: <T extends (...args: any[]) => any>(fn: T, scope: any, ...args: any[]) => T\n\nconst funcProto = Function[P_PROTOTYPE]\nif (funcProto.bind) {\n\t_bind = function bind<T extends (...args: any[]) => any>(fn: T, scope: any): T {\n\t\tconst args = arguments,\n\t\t\targLen = args.length\n\t\tif (isNil(scope)) {\n\t\t\treturn argLen > 2 ? bindPolyfill(fn, scope, args, 2) : fn\n\t\t}\n\t\treturn applyScopeN(fn.bind, fn, args, 1, argLen - 1)\n\t}\n} else {\n\tfuncProto.bind = function bind(scope) {\n\t\treturn bindPolyfill(this as any, scope, arguments, 1)\n\t}\n\t_bind = function bind<T extends (...args: any[]) => any>(fn: T, scope: any): T {\n\t\treturn bindPolyfill(fn, scope, arguments, 2)\n\t}\n}\n\n/**\n * bind scope or arguments on function\n * - return source function when without arguments and scope is undefined or null\n * - only bind arguments when scope is undefined or null, well can call the new function proxy with some scope\n *\n * @example\n * \t\tfunction example() {\n * \t\t\tconsole.log(this, arguments);\n * \t\t}\n * \t\tvar proxy = bind(example, null) \t// proxy === example\n * \t\tproxy() \t\t\t\t\t\t\t// log: window | undefined, []\n * \t\tproxy.call(1) \t\t\t\t\t\t// log: 1, []\n *\n * \t\tproxy = bind(example, null, 1) \t\t// proxy !== example\n * \t\tproxy() \t\t\t\t\t\t\t// log: window | undefined, [1]\n * \t\tproxy(2) \t\t\t\t\t\t\t// log: window | undefined, [1, 2]\n * \t\tproxy.call(1, 2) \t\t\t\t\t// log: 1, [1, 2]\n *\n * \t\tproxy = bind(example, {}, 1, 2)\t\t// proxy !== example\n * \t\tproxy() \t\t\t\t\t\t\t// log: {}, [1]\n * \t\tproxy(2) \t\t\t\t\t\t\t// log: {}, [1, 2, 2]\n * \t\tproxy.call(1, 2) \t\t\t\t\t// log: {}, [1, 2, 2]\n *\n * @param fn\tsource function\n * @param scope\tbind scope\n * @param args\tbind arguments\n * @return function proxy\n */\nexport const bind: <T extends (...args: any[]) => any>(fn: T, scope: any, ...args: any[]) => T = _bind\n\n/**\n * bind\n * > not bind scope when scope is null or undefined\n * @param fn\t\tsource function\n * @param scope\t\tbind scope\n * @param args\t\tbind arguments\n * @param argOffset\toffset of args\n * @return function proxy\n */\nfunction bindPolyfill<T extends (...args: any[]) => any>(\n\tfn: T,\n\tscope: any,\n\tbindArgs: any[] | IArguments,\n\targOffset: number\n): T {\n\tconst argLen = bindArgs.length - argOffset\n\tif (scope === undefined) {\n\t\tscope = null\n\t}\n\tif (argLen > 0) {\n\t\t// bind with arguments\n\t\treturn function bindProxy() {\n\t\t\tconst args = arguments\n\t\t\tlet i = args.length\n\t\t\tif (i) {\n\t\t\t\tconst params = new Array(argLen + i)\n\t\t\t\twhile (i--) {\n\t\t\t\t\tparams[argLen + i] = args[i]\n\t\t\t\t}\n\t\t\t\ti = argLen\n\t\t\t\twhile (i--) {\n\t\t\t\t\tparams[i] = bindArgs[i + argOffset]\n\t\t\t\t}\n\t\t\t\treturn apply(fn, scope === null ? this : scope, params) // call with scope or this\n\t\t\t}\n\t\t\treturn applyN(fn, scope === null ? this : scope, bindArgs, argOffset, argLen) // call with scope or this\n\t\t} as any\n\t}\n\tif (scope === null) {\n\t\treturn fn\n\t}\n\tif (scope === GLOBAL) {\n\t\t// bind on GLOBAL\n\t\treturn function bindProxy() {\n\t\t\treturn applyNoScope(fn, arguments)\n\t\t} as any\n\t}\n\treturn function bindProxy() {\n\t\treturn applyScope(fn, scope, arguments)\n\t} as any\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Sep 06 2018 18:27:51 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:25:13 GMT+0800 (China Standard Time)\n */\n\nimport { isBool } from './is'\n\n/**\n * whether to support sticky on RegExp\n */\nexport const stickyReg = isBool(/(?:)/.sticky)\n\n/**\n * whether to support unicode on RegExp\n */\nexport const unicodeReg = isBool(/(?:)/.unicode)\n\nconst REG_ESCAPE = /[-\\/\\\\^$*+?.()|[\\]{}]/g\n\n/**\n * escape string for RegExp\n */\nexport function reEscape(str: string): string {\n\treturn str.replace(REG_ESCAPE, '\\\\$&')\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:23:56 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 11:49:38 GMT+0800 (China Standard Time)\n */\nimport { P_CTOR, P_PROTO, P_PROTOTYPE } from '../consts'\nimport { addDKey } from '../dkeys'\n\nconst $getProto = Object.getPrototypeOf,\n\t$setProto = Object.setPrototypeOf\n\n/**\n * whether to support Object.getPrototypeOf and Object.setPrototypeOf\n */\nexport const prototypeOf = !!$setProto\n\n/**\n * whether to support `__proto__`\n */\nexport const protoProp = { [P_PROTO]: [] } instanceof Array\n\n!protoProp && addDKey(P_PROTO)\n\n/**\n * get prototype\n */\nexport const protoOf: (o: any) => any = $setProto\n\t? $getProto\n\t: $getProto\n\t? function getPrototypeOf(obj) {\n\t\t\treturn obj[P_PROTO] || $getProto(obj)\n\t  }\n\t: function getPrototypeOf(obj) {\n\t\t\treturn obj[P_PROTO] || obj[P_CTOR][P_PROTOTYPE]\n\t  }\n\n/**\n * set prototype\n * > properties on the prototype are not inherited on older browsers\n */\nexport const __setProto: <T>(obj: any, proto: any) => any =\n\t$setProto ||\n\tfunction setPrototypeOf(obj, proto) {\n\t\tobj[P_PROTO] = proto\n\t\treturn obj\n\t}\n\n/**\n * set prototype\n * > the properties on the prototype will be copied on the older browser\n */\nexport const setProto: <T>(obj: any, proto: any) => any =\n\t$setProto ||\n\t(protoProp\n\t\t? __setProto\n\t\t: function setPrototypeOf(obj, proto) {\n\t\t\t\tfor (let p in proto) {\n\t\t\t\t\tif (!(p in obj)) obj[p] = proto[p]\n\t\t\t\t}\n\t\t\t\treturn __setProto(obj, proto)\n\t\t  })\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:27:56 GMT+0800 (China Standard Time)\n */\n\n//#if _TARGET === 'es3'\n\nexport { prototypeOf, protoProp, protoOf, __setProto, setProto } from './polyfill'\n\n/*#else\n\nexport { prototypeOf, protoProp, protoOf, __setProto, setProto } from './main'\n\n//#endif */\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:57 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:28:30 GMT+0800 (China Standard Time)\n */\nimport { P_PROTOTYPE } from '../consts'\n\nconst { __defineGetter__, __defineSetter__ } = Object[P_PROTOTYPE] as any\nlet $defProp: (o: any, p: PropertyKey, attributes: PropertyDescriptor & ThisType<any>) => any = Object.defineProperty\n\n/**\n * whether to support Object.defineProperty\n * @constant\n */\nexport let propDescriptor: boolean = false\nif ($defProp) {\n\ttry {\n\t\tvar val: number,\n\t\t\tobj: { s?: number } = {}\n\t\t$defProp(obj, 's', {\n\t\t\tget() {\n\t\t\t\treturn val\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tval = value\n\t\t\t}\n\t\t})\n\t\tobj.s = 1\n\t\tpropDescriptor = obj.s === val\n\t} catch (e) {}\n}\n\n/**\n * whether to support `__defineGetter__` and `__defineSetter__`\n */\nexport const propAccessor: boolean = propDescriptor || !!__defineSetter__\n\nif (!propDescriptor)\n\t$defProp = __defineSetter__\n\t\t? function defineProperty(obj, prop, desc) {\n\t\t\t\tconst { get, set } = desc\n\t\t\t\tif ('value' in desc || !(prop in obj)) obj[prop] = desc.value\n\t\t\t\tget && __defineGetter__.call(obj, prop, get)\n\t\t\t\tset && __defineSetter__.call(obj, prop, set)\n\t\t\t\treturn obj\n\t\t  }\n\t\t: function defineProperty(obj, prop, desc) {\n\t\t\t\tif (desc.get || desc.set) throw new TypeError('property accessors are not supported.')\n\t\t\t\tif ('value' in desc || !(prop in obj)) obj[prop] = desc.value\n\t\t\t\treturn obj\n\t\t  }\n\n/**\n * define property\n */\nexport const defProp = $defProp\n\n/**\n * define property by value\n */\nexport const defValue: <V>(\n\tobj: any,\n\tprop: string,\n\tvalue: V,\n\tenumerable?: boolean,\n\tconfigurable?: boolean,\n\twritable?: boolean\n) => V = propDescriptor\n\t? function defValue(obj, prop, value, configurable, writable, enumerable) {\n\t\t\t$defProp(obj, prop, {\n\t\t\t\tvalue,\n\t\t\t\tenumerable: enumerable !== false,\n\t\t\t\tconfigurable: configurable !== false,\n\t\t\t\twritable: writable !== false\n\t\t\t})\n\t\t\treturn value\n\t  }\n\t: function defValue(obj, prop, value) {\n\t\t\tobj[prop] = value\n\t\t\treturn value\n\t  }\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:28:25 GMT+0800 (China Standard Time)\n */\n\n//#if _TARGET === 'es3'\n\nexport { propDescriptor, propAccessor, defProp, defValue } from './polyfill'\n\n/*#else\n\nexport { propDescriptor, propAccessor, defProp, defValue } from './main'\n\n//#endif */\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:57 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 12:42:51 GMT+0800 (China Standard Time)\n */\n\nimport { P_PROTOTYPE, P_OWNPROP } from './consts'\n\nconst __hasOwn = Object[P_PROTOTYPE][P_OWNPROP]\n\n/**\n * has own property\n */\nexport const hasOwnProp: (obj: any, prop: string) => boolean = (obj: any, prop: string): boolean => {\n\treturn __hasOwn.call(obj, prop)\n}\n\n/**\n * get owner property value\n * @param prop \t\t\tproperty name\n * @param defaultVal \tdefault value\n */\nexport function getOwnProp(obj: any, prop: string, defaultVal?: any): any {\n\treturn hasOwnProp(obj, prop) ? obj[prop] : defaultVal\n}\n","/**\n * Object.create polyfill\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:11:37 GMT+0800 (China Standard Time)\n */\n\nimport { P_PROTOTYPE } from '../consts'\nimport { defProp } from '../defProp'\nimport { hasOwnProp } from '../ownProp'\nimport { __setProto } from '../proto'\n\nfunction __() {}\n\n/**\n * create shim\n */\nfunction doCreate(o: object | null, props?: PropertyDescriptorMap & ThisType<any>): any {\n\t__[P_PROTOTYPE] = o\n\tconst obj = new __()\n\t__[P_PROTOTYPE] = null\n\tif (props) {\n\t\tfor (var k in props) {\n\t\t\tif (hasOwnProp(props, k)) {\n\t\t\t\tdefProp(obj, k, props[k])\n\t\t\t}\n\t\t}\n\t}\n\treturn obj\n}\n\n/**\n * create object\n */\nexport const create =\n\tObject.create ||\n\t(Object.create = Object.getPrototypeOf\n\t\t? doCreate\n\t\t: function create(o: object | null, props?: PropertyDescriptorMap & ThisType<any>): any {\n\t\t\t\tconst obj = doCreate(o, props)\n\t\t\t\t__setProto(obj, o)\n\t\t\t\treturn obj\n\t\t  })\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:11:29 GMT+0800 (China Standard Time)\n */\n\n//#if _TARGET === 'es3'\n\nexport { create } from './polyfill'\n\n/*#else\n\nexport { create } from './main'\n\n//#endif */\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 12:14:41 GMT+0800 (China Standard Time)\n */\nimport { eq, isReg, isTypedArray, isDate, isArray, isPrimitive } from './is'\nimport { hasOwnProp } from './ownProp'\nimport { create } from './create'\nimport { getCtor } from './ctor'\nimport { DKeyMap } from './dkeys'\n\nconst REG_PROPS = ['source', 'global', 'ignoreCase', 'multiline']\n\nexport function deepEq(actual: any, expected: any): boolean {\n\treturn doDeepEq(actual, expected, eq, doDeepEqObj)\n}\n\nexport function doDeepEq(\n\tactual: any,\n\texpected: any,\n\teq: (actual: any, expected: any) => boolean,\n\teqObj: (actual: any, expected: any) => boolean\n) {\n\tif (eq(actual, expected)) return true\n\tif (actual && expected && getCtor(actual) === getCtor(expected)) {\n\t\tif (isPrimitive(actual)) return String(actual) === String(expected)\n\t\tif (isDate(actual)) return actual.getTime() === expected.getTime()\n\t\tif (isReg(actual)) return eqProps(actual, expected, REG_PROPS)\n\t\tif (isArray(actual)) return eqArray(actual, expected, eq, eqObj)\n\t\tif (isTypedArray(actual)) return eqTypeArray(actual, expected)\n\t\treturn eqObj(actual, expected)\n\t}\n\treturn false\n}\n\nexport function doDeepEqObj(actual: any, expected: any): boolean {\n\tconst cache = create(null)\n\tlet k: string\n\tfor (k in actual) {\n\t\tif (!DKeyMap[k] && notEqObjKey(actual, expected, k)) {\n\t\t\treturn false\n\t\t}\n\t\tcache[k] = true\n\t}\n\tfor (k in expected) {\n\t\tif (!cache[k] && !DKeyMap[k] && notEqObjKey(actual, expected, k)) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}\n\nfunction notEqObjKey(actual: any, expected: any, k: string): boolean {\n\treturn hasOwnProp(actual, k) ? !hasOwnProp(expected, k) || !deepEq(actual[k], expected[k]) : hasOwnProp(expected, k)\n}\n\nfunction eqProps(actual: any, expected: any, props: string[]): boolean {\n\tlet i = props.length\n\twhile (i--)\n\t\tif (actual[props[i]] !== expected[props[i]]) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n\nfunction eqTypeArray(actual: any, expected: any) {\n\tlet i = actual.length\n\tif (i !== expected.length) {\n\t\treturn false\n\t}\n\twhile (i--)\n\t\tif (actual[i] !== expected[i]) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n\nfunction eqArray(\n\tactual: any,\n\texpected: any,\n\teq: (actual: any, expected: any) => boolean,\n\teqObj: (actual: any, expected: any) => boolean\n) {\n\tlet i = actual.length\n\tif (i !== expected.length) {\n\t\treturn false\n\t}\n\twhile (i--)\n\t\tif (!doDeepEq(actual[i], expected[i], eq, eqObj)) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:10:44 GMT+0800 (China Standard Time)\n */\n\n//========================================================================================\n/*                                                                                      *\n *                                       char code                                      *\n *                                                                                      */\n//========================================================================================\n\n/**\n * get char code\n * > string.charCodeAt\n */\nexport function charCode(str: string, index?: number): number {\n\treturn str.charCodeAt(index || 0)\n}\n\n/**\n * get char by char code\n * > String.fromCharCode\n */\nexport function char(code: number): string {\n\treturn String.fromCharCode(code)\n}\n\nexport function cutStr(str: string, start: number, end?: number) {\n\treturn str.substring(start, end)\n}\n\nexport function cutLStr(str: string, start: number, len?: number) {\n\treturn str.substr(start, len)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         trim                                         *\n *                                                                                      */\n//========================================================================================\n\nconst TRIM_REG = /(^\\s+)|(\\s+$)/g\n\n/**\n * trim\n */\nexport function trim(str: string): string {\n\treturn str.replace(TRIM_REG, '')\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         case                                         *\n *                                                                                      */\n//========================================================================================\n\nconst FIRST_LOWER_LETTER_REG = /^[a-z]/,\n\tFIRST_UPPER_LETTER_REG = /^[A-Z]/\n\nexport function upper(str: string): string {\n\treturn str.toUpperCase()\n}\n\nexport function lower(str: string): string {\n\treturn str.toLowerCase()\n}\n\nexport function upperFirst(str: string): string {\n\treturn str.replace(FIRST_LOWER_LETTER_REG, upper)\n}\n\nexport function lowerFirst(str: string): string {\n\treturn str.replace(FIRST_UPPER_LETTER_REG, lower)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        escape                                        *\n *                                                                                      */\n//========================================================================================\n\nconst STR_ESCAPE_MAP = {\n\t\t'\\n': '\\\\n',\n\t\t'\\t': '\\\\t',\n\t\t'\\f': '\\\\f',\n\t\t'\"': '\\\\\"',\n\t\t\"'\": \"\\\\'\"\n\t},\n\tSTR_ESCAPE = /[\\n\\t\\f\"']/g\n\nexport function escapeStr(str: string): string {\n\treturn str.replace(STR_ESCAPE, str => STR_ESCAPE_MAP[str])\n}\n","/**\n * Object.assign shim\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:13 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:11:20 GMT+0800 (China Standard Time)\n */\nimport { hasOwnProp } from './ownProp'\nimport { DKeyMap } from './dkeys'\n\n/**\n * @param prop\n * @param target\n * @param source\n * @return is assign\n */\nexport type AssignFilter<T, O> = (prop: string, target: T, source: O) => boolean\n\n/**\n *\n * @param target\n * @param sources\n * @param filter\n * @param startOffset \tstart offset in sources, default: 0\n * @param endOffset \tend offset in sources, default: sources.length-1\n */\nexport function doAssign<T extends object, U>(target: T, sources: [U], filter: AssignFilter<T, U>): T & U\nexport function doAssign<T extends object, U, V>(target: T, sources: [U, V], filter: AssignFilter<T, U | V>): T & U & V\nexport function doAssign<T extends object, U, V, W>(\n\ttarget: T,\n\tsources: [U, V],\n\tfilter: AssignFilter<T, U | V | W>\n): T & U & W\nexport function doAssign<T extends object>(\n\ttarget: T,\n\tsources: any[] | IArguments,\n\tfilter: AssignFilter<T, object>,\n\tstartOffset?: number,\n\tendOffset?: number\n): any\nexport function doAssign<T extends object>(\n\ttarget: T,\n\tsources: any[] | IArguments,\n\tfilter: AssignFilter<T, object>,\n\tstartOffset?: number,\n\tendOffset?: number\n): any {\n\tconst l = endOffset || sources.length\n\tlet i = startOffset || 0,\n\t\tsource: any,\n\t\tprop: string\n\ttarget || (target = {} as T)\n\tfor (; i < l; i++) {\n\t\tif ((source = sources[i])) {\n\t\t\tfor (prop in source) {\n\t\t\t\tif (!DKeyMap[prop] && filter(prop, target, source)) {\n\t\t\t\t\ttarget[prop] = source[prop]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * assign properties\n * > Object.assign shim\n */\nexport function assign<T, U>(target: T, source: U): T & U\nexport function assign<T, U, V>(target: T, source: U, source2: V): T & U & V\nexport function assign<T, U, V, W>(target: T, source: U, source2: V, source3: W): T & U & W\nexport function assign(target: object, ...args: any[]): any\nexport function assign(target: object): any {\n\treturn doAssign(target, arguments, defaultAssignFilter, 1)\n}\n\n/**\n * assign un-exist properties\n */\nexport function assignIf<T, U>(target: T, source: U): T & U\nexport function assignIf<T, U, V>(target: T, source: U, source2: V): T & U & V\nexport function assignIf<T, U, V, W>(target: T, source: U, source2: V, source3: W): T & U & W\nexport function assignIf(target: object, ...args: any[]): any\nexport function assignIf(target: object): any {\n\treturn doAssign(target, arguments, assignIfFilter, 1)\n}\n\n/**\n * default assign filter\n * - property is owner in source\n * @see {AssignFilter}\n */\nexport function defaultAssignFilter(prop: string, target: object, source: object): boolean {\n\treturn hasOwnProp(source, prop)\n}\n\n/**\n * assign if filter\n * - property is owner in source\n * - property not in target object\n * @see {AssignFilter}\n */\nexport function assignIfFilter(prop: string, target: object, source: object): boolean {\n\treturn hasOwnProp(source, prop) && !(prop in target)\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:10:41 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:37:44 GMT+0800 (China Standard Time)\n */\nexport class Control {\n\tprivate __desc: string\n\n\tconstructor(desc: string) {\n\t\tthis.__desc = desc\n\t}\n\n\ttoString() {\n\t\treturn this.__desc\n\t}\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:10:41 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 09:49:19 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { hasOwnProp } from '../ownProp'\nimport { isArrayLike, isBool } from '../is'\nimport { DKeyMap } from '../dkeys'\n\n/**\n * STOP Control\n * > stop each/map/indexOf...\n */\nexport const STOP = new Control('STOP')\n//========================================================================================\n/*                                                                                      *\n *                                each object properties                                *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on object\n * - will stop each on return STOP\n */\nexport type EachPropCallback<T extends {}> = (prop: string, obj: T) => Control | void\n\n/**\n * each properties\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties, default: true\n * @return stoped property name or false\n */\nexport function eachProps<T extends {}>(obj: T, callback: EachPropCallback<T>, own: boolean): false | string\nexport function eachProps<T extends {}>(\n\tobj: T,\n\tcallback: EachPropCallback<T>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function eachProps<T extends {}>(\n\tobj: T,\n\tcallback: EachPropCallback<T>,\n\tscope?: any,\n\town?: boolean\n): false | string {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tlet k: string\n\tif (own === false) {\n\t\tfor (k in obj) if (!DKeyMap[k] && callback(k, obj) === STOP) return k\n\t} else {\n\t\tfor (k in obj) if (!DKeyMap[k] && hasOwnProp(obj, k) && callback(k, obj) === STOP) return k\n\t}\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      each object                                     *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on object\n * - will stop each on callback return STOP\n */\nexport type EachObjCallback<E> = (value: E, prop: string, obj: { [key: string]: E }) => Control | void\n\n/**\n * each object\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties, default: true\n * @return stoped property name or false\n */\nexport function eachObj<E>(obj: { [key: string]: E }, callback: EachObjCallback<E>, own: boolean): false | string\nexport function eachObj<E>(\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function eachObj<E>(\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string {\n\tconst args = arguments\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tlet k: string\n\tif (own === false) {\n\t\tfor (k in obj) if (!DKeyMap[k] && callback(obj[k], k, obj) === STOP) return k\n\t} else {\n\t\tfor (k in obj) if (!DKeyMap[k] && hasOwnProp(obj, k) && callback(obj[k], k, obj) === STOP) return k\n\t}\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      each array                                      *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on array\n * - will stop each on callback return STOP\n */\nexport type EachArrayCallback<E> = (data: E, index: number, array: IArray<E>) => Control | void\n\n/**\n * each array\n * - will stop each on callback return STOP\n * @param array\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @return stoped index or false\n */\nexport function eachArray<E>(array: IArray<E>, callback: EachArrayCallback<E>, scope?: any): false | number {\n\tcallback = bind(callback, scope)\n\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\tif (callback(array[i], i, array) === STOP) return i\n\t}\n\treturn false\n}\n\n/**\n * reverse each array\n * - will stop each on callback return STOP\n * @param array\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @return stoped index or false\n */\nexport function reachArray<E>(array: IArray<E>, callback: EachArrayCallback<E>, scope?: any): false | number {\n\tcallback = bind(callback, scope)\n\tlet i = array.length\n\twhile (i--) if (callback(array[i], i, array) === STOP) return i\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         each                                         *\n *                                                                                      */\n//========================================================================================\n\nexport function doEach<E>(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: IArray<E>,\n\tcallback: EachArrayCallback<E>,\n\tscope?: any\n): false | number\nexport function doEach<E>(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\town?: boolean\n): false | string\nexport function doEach<E>(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: any,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): false | number | string {\n\tif (isArrayLike(obj)) return _eachArray(obj, callback, scope)\n\treturn _eachObj(obj, callback, scope, own)\n}\n\n/**\n * each\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties on object, default: true\n * @return stoped index or false\n */\n\nexport function each<E>(obj: IArray<E>, callback: EachArrayCallback<E>, scope?: any): false | number\nexport function each<E>(obj: { [key: string]: E }, callback: EachObjCallback<E>, own?: boolean): false | string\nexport function each<E>(\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function each<E>(obj: any, callback: any, scope?: any, own?: boolean): false | number | string {\n\treturn doEach(eachArray, eachObj, obj, callback, scope, own)\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:31:21 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { create } from '../create'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool } from '../is'\n\n/**\n * SKIP Control\n * > skip map\n */\nexport const SKIP = new Control('SKIP')\n\n//========================================================================================\n/*                                                                                      *\n *                                    map object                                   *\n *                                                                                      */\n//========================================================================================\n\n/**\n * callback on object\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param value\tproperty value\n * @param prop\tproperty name\n * @param obj\tmap target\n */\nexport type MapObjCallback<T, E> = (data: E, prop: string, obj: { [key: string]: E }) => T | Control\n\nexport function doMapObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function doMapObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function doMapObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tconst copy: { [key: string]: T } = create(null)\n\teach(\n\t\tobj,\n\t\t(value, prop, obj) => {\n\t\t\tconst v = callback(value, prop, obj)\n\t\t\tif (v === STOP) return STOP\n\t\t\tif (v !== SKIP) copy[prop] = v as T\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn copy\n}\n\n/**\n * object: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param obj\t\tmap target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\tmap own properties, default: true\n */\nexport function mapObj<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function mapObj<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function mapObj<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } {\n\treturn doMapObj(eachObj, obj, callback, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     indexof Array                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * callback on array\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param data\titem data\n * @param index\titem index\n * @param array\tmap target\n */\nexport type MapArrayCallback<T, E> = (data: E, index: number, array: IArray<E>) => T | Control\n\nexport function doMapArray<T, E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tcallback: MapArrayCallback<T, E>,\n\tscope?: any\n): T[] {\n\tcallback = bind(callback, scope)\n\tconst copy: T[] = []\n\tlet j = 0\n\teach(array, (data, index, array) => {\n\t\tconst v = callback(data, index, array)\n\t\tif (v === STOP) return STOP\n\t\tif (v !== SKIP) copy[j++] = v as T\n\t})\n\treturn copy\n}\n\n/**\n * array: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param array\t\tmap target\n * @param value\t\tcallback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function mapArray<T, E>(array: IArray<E>, callback: MapArrayCallback<T, E>, scope?: any): T[] {\n\treturn doMapArray(eachArray, array, callback, scope)\n}\n\n/**\n * revice array: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param array\t\tmap target\n * @param value\t\tmap value of callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function rmapArray<T, E>(array: IArray<E>, callback: MapArrayCallback<T, E>, scope?: any): T[] {\n\treturn doMapArray(reachArray, array, callback, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       map                                       *\n *                                                                                      */\n//========================================================================================\n\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray<E>,\n\tcallback: MapArrayCallback<T, E>,\n\tscope?: any\n): T[]\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } | T[] {\n\tif (isArrayLike(obj)) return doMapArray(eacharray, obj, callback, scope)\n\treturn doMapObj(eachobj, obj, callback, scope, own)\n}\n\n/**\n * map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param obj\t\tmap target\n * @param value\t\tmap value of callback\n * @param scope\t\tscope of callback\n * @param own\t\tmap own properties on object, default: true\n * @return array index or property name or -1\n */\nexport function map<T, E>(obj: IArray<E>, callback: MapArrayCallback<T, E>, scope?: any): T[]\nexport function map<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function map<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function map<T, E>(obj: any, callback: any, scope?: any, own?: boolean): { [key: string]: T } | T[] {\n\treturn doMap(eachArray, eachObj, obj, callback, scope, own)\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:32:32 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool, isFn, eq } from '../is'\n\nfunction parseCallback(value: any, scope: any): any {\n\tif (isFn(value)) return bind(value, scope)\n\treturn function defaultHandler(data: any, idx: any, obj: any) {\n\t\treturn eq(data, value)\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    index of object                                   *\n *                                                                                      */\n//========================================================================================\n\n/**\n * indexOf callback on object\n * - will stop find on callback return STOP\n * @param value\tproperty value\n * @param prop\tproperty name\n * @param obj\t\tindexOf target\n * @return\n * - boolean: is finded\n * - void: find next\n * - STOP: stop find\n */\nexport type IdxOfObjCallback<E> = (value: E, prop: string, obj: { [key: string]: E }) => boolean | Control | void\n\nexport function doIdxOfObj<E>(each: typeof eachObj, obj: { [key: string]: E }, value: E, own?: boolean): -1 | string\nexport function doIdxOfObj<E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\town?: boolean\n): -1 | string\nexport function doIdxOfObj<E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): -1 | string\n\nexport function doIdxOfObj<E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E> | E,\n\tscope?: any,\n\town?: boolean\n): -1 | string {\n\tif (isBool(scope)) {\n\t\town = scope\n\t\tscope = null\n\t}\n\tconst callback: IdxOfObjCallback<E> = parseCallback(value, scope)\n\tlet idx: -1 | string = -1\n\teach(\n\t\tobj,\n\t\t(data, prop, obj) => {\n\t\t\tconst r = callback(data, prop, obj)\n\t\t\tif (r === true) {\n\t\t\t\tidx = prop\n\t\t\t\treturn STOP\n\t\t\t} else if (r === STOP) return r\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn idx\n}\n\n/**\n * object: indexOf\n * - will stop find on callback return STOP\n * @param obj\t\tfind target\n * @param callback\tfind value or callback\n * @param scope\t\tscope of callback\n * @param own\t\tfind own properties, default: true\n * @return property name or -1\n */\nexport function idxOfObj<E>(obj: { [key: string]: E }, value: E, own?: boolean): -1 | string\nexport function idxOfObj<E>(obj: { [key: string]: E }, value: IdxOfObjCallback<E>, own?: boolean): -1 | string\nexport function idxOfObj<E>(\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): -1 | string\nexport function idxOfObj<E>(\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E> | E,\n\tscope?: any,\n\town?: boolean\n): -1 | string {\n\treturn doIdxOfObj(eachObj, obj, value as any, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     indexof Array                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * indexOf callback on array\n * - will stop find on callback return STOP\n * @param data\titem data\n * @param index\titem index\n * @param array\tindexOf target\n * @return\n * - boolean: is finded\n * - void: find next\n * - STOP: stop find\n */\nexport type IdxOfArrayCallback<E> = (data: E, index: number, array: IArray<E>) => boolean | Control | void\n\nexport function doIdxOfArray<E>(each: typeof eachArray, array: IArray<E>, value: E): number\nexport function doIdxOfArray<E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tvalue: IdxOfArrayCallback<E>,\n\tscope?: any\n): number\nexport function doIdxOfArray<E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tvalue: IdxOfArrayCallback<E> | E,\n\tscope?: any\n): number {\n\tconst callback: IdxOfArrayCallback<E> = parseCallback(value, scope)\n\tlet idx = -1\n\teach(array, (data, index, array) => {\n\t\tconst r = callback(data, index, array)\n\t\tif (r === true) {\n\t\t\tidx = index\n\t\t\treturn STOP\n\t\t} else if (r === STOP) return r\n\t})\n\treturn idx\n}\n\n/**\n * array: indexOf\n * - will stop find on callback return STOP\n * @param array\t\tfind target\n * @param value\t\tfind value or callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function idxOfArray<E>(array: IArray<E>, value: E): number\nexport function idxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E>, scope?: any): number\nexport function idxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E> | any, scope?: any): number {\n\treturn doIdxOfArray(eachArray, array, value, scope)\n}\n\n/**\n * revice array: indexOf\n * - will stop find on callback return STOP\n * @param array\t\tfind target\n * @param value\t\tfind value of callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function ridxOfArray<E>(array: IArray<E>, value: E): number\nexport function ridxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E>, scope?: any): number\nexport function ridxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E> | any, scope?: any): number {\n\treturn doIdxOfArray(reachArray, array, value, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       index of                                       *\n *                                                                                      */\n//========================================================================================\n// find by value\nexport function doIdxOf<E>(eacharray: typeof eachArray, eachobj: typeof eachObj, obj: IArray<E>, value: E): number\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: E,\n\town?: boolean\n): string\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E } | IArray<E>,\n\tvalue: E,\n\town?: boolean\n): number | string\n// find by callback\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray<E>,\n\tvalue: IdxOfArrayCallback<E>,\n\tscope?: any\n): number\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\town?: boolean\n): -1 | string\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): -1 | string\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\tvalue: any,\n\tscope?: any,\n\town?: boolean\n): number | string {\n\tif (isArrayLike(obj)) return doIdxOfArray(eacharray, obj, value, scope)\n\treturn doIdxOfObj(eachobj, obj, value, scope, own)\n}\n\n/**\n * indexOf\n * - will stop find on callback return STOP\n * @param obj\t\tfind target\n * @param value\t\tfind value of callback\n * @param scope\t\tscope of callback\n * @param own\t\tfind own properties on object, default: true\n * @return array index or property name or -1\n */\nexport function idxOf<E>(obj: IArray<E>, value: E): number | string\nexport function idxOf<E>(obj: { [key: string]: E }, value: E, own?: boolean): number | string\nexport function idxOf<E>(obj: { [key: string]: E } | IArray<E>, value: E, own?: boolean): number | string\nexport function idxOf<E>(obj: IArray<E>, value: IdxOfArrayCallback<E>, scope?: any): number\nexport function idxOf<E>(obj: { [key: string]: E }, value: IdxOfObjCallback<E>, own?: boolean): -1 | string\nexport function idxOf<E>(obj: { [key: string]: E }, value: IdxOfObjCallback<E>, scope?: any, own?: boolean): -1 | string\nexport function idxOf<E>(obj: any, value: any, scope?: any, own?: boolean): number | string {\n\treturn doIdxOf(eachArray, eachObj, obj, value, scope, own)\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:30:27 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool } from '../is'\n\n//========================================================================================\n/*                                                                                      *\n *                                     reduce object                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * reduce callback on object\n * - will stop reduce on return STOP\n */\nexport type ReduceObjCallback<T, E> = (accumulator: T, value: E, prop: string, obj: { [key: string]: E }) => T | Control\n\nexport function doReduceObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n): T\nexport function doReduceObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduceObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\teach(\n\t\tobj,\n\t\t(value, prop, obj) => {\n\t\t\tconst rs = callback(accumulator, value, prop, obj)\n\t\t\tif (rs === STOP) return STOP\n\t\t\taccumulator = rs as T\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn accumulator\n}\n\n/**\n * reduce object\n * - will stop reduce on callback return STOP\n * @param obj\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n * @param own\t\t\treduce own properties, default: true\n */\nexport function reduceObj<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n)\nexport function reduceObj<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n)\nexport function reduceObj<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T {\n\treturn doReduceObj(eachObj, obj, accumulator, callback, scope, own)\n}\n//========================================================================================\n/*                                                                                      *\n *                                     reduce array                                     *\n *                                                                                      */\n//========================================================================================\n\n/**\n * reduce callback on array\n * - will stop reduce on return STOP\n */\nexport type ReduceArrayCallback<T, E> = (accumulator: T, data: E, index: number, array: IArray<E>) => T | Control\n\nexport function doReduceArray<T, E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T {\n\tcallback = bind(callback, scope)\n\teach(array, (data, index, array) => {\n\t\tconst rs = callback(accumulator, data, index, array)\n\t\tif (rs === STOP) return STOP\n\t\taccumulator = rs as T\n\t})\n\treturn accumulator\n}\n\n/**\n * reduce array\n * - will stop reduce on callback return STOP\n * @param array\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n */\nexport function reduceArray<T, E>(\n\tarray: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T {\n\treturn doReduceArray(eachArray, array, accumulator, callback, scope)\n}\n\n/**\n * revice reduce array\n * - will stop reduce on callback return STOP\n * @param array\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n */\nexport function rreduceArray<T, E>(\n\tarray: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T {\n\treturn doReduceArray(reachArray, array, accumulator, callback, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        reduce                                        *\n *                                                                                      */\n//========================================================================================\n\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n): T\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\taccumulator: T,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): T {\n\tif (isArrayLike(obj)) return doReduceArray(eacharray, obj as IArray<E>, accumulator, callback, scope)\n\treturn doReduceObj(eachobj, obj, accumulator, callback, scope, own)\n}\n\n/**\n * reduce\n * - will stop reduce on callback return STOP\n * @param obj\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n * @param own\t\t\treduce own properties of reduce object, default: true\n */\nexport function reduce<T, E>(obj: IArray<E>, accumulator: T, callback: ReduceArrayCallback<T, E>, scope?: any): T\nexport function reduce<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n): T\nexport function reduce<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function reduce<T, E>(obj: any, accumulator: T, callback: any, scope?: any, own?: boolean): T {\n\treturn doReduce(eachArray, eachObj, obj, accumulator, callback, scope, own)\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Jul 26 2018 10:47:47 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:49:02 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { STOP, eachObj, eachProps } from './each'\nimport { SKIP } from './map'\nimport { isBool, isFn } from '../is'\nimport { bind } from '../fn'\n\n//========================================================================================\n/*                                                                                      *\n *                                         keys                                         *\n *                                                                                      */\n//========================================================================================\n\nexport type ObjKeyHandler<T> = (prop: string, obj: object) => T | Control\n\nfunction defaultObjKeyHandler(prop: string, obj: object): any {\n\treturn prop\n}\nexport function doObjKeys<T>(each: typeof eachProps, obj: object, own?: boolean): T[]\nexport function doObjKeys<T>(each: typeof eachProps, obj: object, callback: ObjKeyHandler<T>, own?: boolean): T[]\nexport function doObjKeys<T>(\n\teach: typeof eachProps,\n\tobj: object,\n\tcallback: ObjKeyHandler<T>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function doObjKeys<T>(\n\teach: typeof eachProps,\n\tobj: object,\n\tcallback_own?: ObjKeyHandler<T> | boolean,\n\tscope_own?: any,\n\town?: boolean\n): T[]\nexport function doObjKeys<T>(each: typeof eachProps, obj: object): T[] {\n\tconst rs: T[] = [],\n\t\targs = arguments\n\tlet handler: ObjKeyHandler<T> = defaultObjKeyHandler,\n\t\ti = 2,\n\t\tj = 0\n\tif (isFn(args[i])) {\n\t\thandler = args[i++]\n\t\tif (!isBool(args[i])) handler = bind(handler, args[i++])\n\t}\n\teach(\n\t\tobj,\n\t\t(prop, obj) => {\n\t\t\tconst val = handler(prop, obj)\n\t\t\tif (val === STOP) return STOP\n\t\t\tif (val !== SKIP) rs[j++] = val as T\n\t\t},\n\t\tnull,\n\t\targs[i]\n\t)\n\treturn rs\n}\n\n/**\n * @param obj\t\ttarget\n * @param handler\tkey handler\n * @param scope\t\tscope or handler\n * @param own\t\tis get own properties, default: true\n */\nexport function keys<T>(obj: object, own?: boolean): T[]\nexport function keys<T>(obj: object, callback: ObjKeyHandler<T>, own?: boolean): T[]\nexport function keys<T>(obj: object, callback: ObjKeyHandler<T>, scope?: any, own?: boolean): T[]\nexport function keys<T>(obj: object, callback?: ObjKeyHandler<T> | boolean, scope?: any, own?: boolean): T[] {\n\treturn doObjKeys(eachProps, obj, callback, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        values                                        *\n *                                                                                      */\n//========================================================================================\n\nexport type ObjValueHandler<T, E> = (value: E, prop: string, obj: { [key: string]: E }) => T | Control\n\nfunction defaultObjValueHandler<E>(value: any, prop: string, obj: { [key: string]: E }): any {\n\treturn value\n}\nexport function doObjValues<T, E>(each: typeof eachObj, obj: { [key: string]: E }, own?: boolean): T[]\nexport function doObjValues<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: ObjValueHandler<T, E>,\n\town?: boolean\n): T[]\nexport function doObjValues<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: ObjValueHandler<T, E>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function doObjValues<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback_own?: ObjValueHandler<T, E> | boolean,\n\tscope_own?: any,\n\town?: boolean\n): T[]\nexport function doObjValues<T, E>(each: typeof eachObj, obj: { [key: string]: E }): T[] {\n\tconst rs: T[] = [],\n\t\targs = arguments\n\tlet handler: ObjValueHandler<T, E> = defaultObjValueHandler,\n\t\ti = 1,\n\t\tj = 0\n\tif (isFn(args[i])) {\n\t\thandler = args[i++]\n\t\tif (!isBool(args[i])) handler = bind(handler, args[i++])\n\t}\n\teach(\n\t\tobj,\n\t\tfunction(data, prop, obj) {\n\t\t\tconst val = handler(data, prop, obj)\n\t\t\tif (val === STOP) return STOP\n\t\t\tif (val !== SKIP) rs[j++] = val as T\n\t\t},\n\t\tnull,\n\t\targs[i]\n\t)\n\treturn rs\n}\n\n/**\n * @param obj\t\ttarget\n * @param handler\tvalue handler\n * @param scope\t\tscope or handler\n * @param own\t\tis get own properties, default: true\n */\nexport function values<T, E>(obj: { [key: string]: E }, own?: boolean): T[]\nexport function values<T, E>(obj: { [key: string]: E }, callback: ObjValueHandler<T, E>, own?: boolean): T[]\nexport function values<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: ObjValueHandler<T, E>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function values<T, E>(\n\tobj: { [key: string]: E },\n\tcallback?: ObjValueHandler<T, E> | boolean,\n\tscope?: any,\n\town?: boolean\n): T[] {\n\treturn doObjValues(eachObj, obj, callback, scope, own)\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Nov 16 2018 16:29:04 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:38:40 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { eachArray } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isFn, isStr, isArray } from '../is'\nimport { create } from '../create'\n\n/**\n * @return STOP or SKIP or [key: string, value: any]\n */\nexport type Arr2ObjCallback<E, T> = (data: E, index: number, array: IArray<E>) => Control | [string, T]\n\nexport function doArr2Obj<E, T>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tcallback: Arr2ObjCallback<E, T>,\n\tscope?: any\n): { [key: string]: T } {\n\tconst obj: { [key: string]: T } = create(null)\n\tcallback = bind(callback, scope)\n\teach(array, (data, index, array) => {\n\t\tconst r: Control | [string, any] = callback(data, index, array)\n\t\tif (isArray(r)) {\n\t\t\tobj[r[0]] = r[1]\n\t\t} else {\n\t\t\treturn r as Control\n\t\t}\n\t})\n\treturn obj\n}\n\n/**\n * convert array to object\n */\nexport function arr2obj<E, T>(array: IArray<E>, callback: Arr2ObjCallback<E, T>, scope?: any): { [key: string]: T } {\n\treturn doArr2Obj(eachArray, array, callback, scope)\n}\n\n/**\n * convert array or string to object\n * @param array\n * @param val\tvalue or callback\n * @param split\tsplit char on string\n */\nexport function makeMap<E, T>(array: IArray<E>, val: Arr2ObjCallback<E, T>, split?: string): { [key: string]: T }\nexport function makeMap<E, T>(array: IArray<E>, val?: T, split?: string): { [key: string]: T }\nexport function makeMap(array: any, val?: any, split?: string) {\n\tif (isStr(array)) array = (array as string).split(isStr(split) ? split : ',')\n\treturn arr2obj(array, isFn(val) ? val : data => [data, val])\n}\n","/**\n * @module util/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Nov 15 2018 12:13:54 GMT+0800 (China Standard Time)\n * @modified Thu Mar 28 2019 19:39:52 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nexport { STOP, eachProps, eachArray, eachObj, each } from './each'\nexport { SKIP, mapArray, mapObj, map } from './map'\nexport { idxOfArray, idxOfObj, idxOf } from './idxOf'\nexport { reduceArray, reduceObj, reduce } from './reduce'\nexport { keys, values } from './obj2arr'\nexport { arr2obj, makeMap } from './arr2obj'\n\nexport function makeArray<T>(len: number, callback: (index: number) => T): T[] {\n\tconst array = new Array(len)\n\tlet i = len\n\twhile (i--) array[i] = callback(i)\n\treturn array\n}\nexport type EachControl = Control\n","/**\n * @module util\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 18 2018 16:41:03 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:25:40 GMT+0800 (China Standard Time)\n */\n\nimport { hasOwnProp } from './ownProp'\n\nexport function mixin<B>(behaviour: B) {\n\treturn function mixin<M extends B, T extends { new (...args: Array<any>): M }>(Class: T) {\n\t\tconst proto = Class.prototype\n\t\tfor (var k in behaviour) if (hasOwnProp(behaviour, k)) proto[k] = behaviour[k]\n\t\treturn Class\n\t}\n}\n","/**\n * @module util\n * @preferred\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Nov 21 2018 10:21:41 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:07:41 GMT+0800 (China Standard Time)\n */\n\nexport { isDKey, addDKey, addDKeys, getDKeys, getDKeyMap } from './dkeys'\nexport * from './fn'\nexport * from './is'\nexport * from './reg'\nexport * from './proto'\nexport * from './defProp'\nexport * from './ownProp'\nexport * from './deepEq'\nexport * from './toStr'\nexport * from './string'\nexport * from './create'\nexport * from './assign'\nexport * from './collection'\nexport * from './mixin'\n","/**\n * @module util/path\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Nov 30 2018 14:41:02 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:47:29 GMT+0800 (China Standard Time)\n */\n\nimport { create, mapArray, defValue, addDKey, isArray } from '../util'\n\nexport const PATH_BINDING = addDKey('__path__')\nconst pathCache: { [key: string]: string[] } = create(null)\n\n// (^ | .) prop | (index | \"string prop\" | 'string prop')\nconst pathReg = /(?:^|\\.)([a-zA-Z$_][\\w$]*)|\\[\\s*(?:(\\d+)|\"((?:[^\\\\\"]|\\\\.)*)\"|'((?:[^\\\\']|\\\\.)*)')\\s*\\]/g\n\nexport function parsePath(propPath: string | string[], cacheable?: boolean): string[] {\n\tlet path: string[]\n\tif (isArray(propPath)) {\n\t\tpath = propPath as string[]\n\t} else if ((path = pathCache[propPath as string])) {\n\t\treturn path\n\t} else {\n\t\tpath = []\n\t\tvar match: string[],\n\t\t\tidx = 0,\n\t\t\tcidx: number,\n\t\t\ti = 0\n\t\twhile ((match = pathReg.exec(propPath as string))) {\n\t\t\tcidx = pathReg.lastIndex\n\t\t\tif (cidx !== idx + match[0].length)\n\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t`Invalid Path: \"${propPath}\", unkown character[${(propPath as string).charAt(\n\t\t\t\t\t\tidx\n\t\t\t\t\t)}] at offset:${idx}`\n\t\t\t\t)\n\t\t\tpath[i++] = match[1] || match[2] || match[3] || match[4]\n\t\t\tidx = cidx\n\t\t}\n\t\tif (propPath.length > idx + 1) {\n\t\t\tthrow new SyntaxError(\n\t\t\t\t`Invalid Path: \"${propPath}\", unkown character[${(propPath as string).charAt(idx)}] at offset:${idx}`\n\t\t\t)\n\t\t}\n\t\tif (cacheable !== false && i) {\n\t\t\tpathCache[propPath as string] = path\n\t\t}\n\t}\n\tif (!path.length) throw new Error(`Empty Path: ${propPath}`)\n\treturn path\n}\n\nexport function formatPath(path: string | (string[] & { path?: string })): string {\n\treturn isArray(path)\n\t\t? (path as string[] & { path?: string }).path ||\n\t\t\t\tdefValue(path, PATH_BINDING, mapArray(path, formatPathHandler).join(''))\n\t\t: (path as string)\n}\n\nfunction formatPathHandler(prop: string): string {\n\treturn `[\"${String(prop).replace(\"'\", '\\\\\"')}\"]`\n}\n\nexport function get<T>(obj: any, path: string | string[]): any {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0\n\tfor (; i < l; i++) {\n\t\tobj = obj[path[i]]\n\t\tif (obj === null || obj === undefined) return\n\t}\n\treturn obj[path[i]]\n}\n\nexport function set(obj: any, path: string | string[], value: any) {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0,\n\t\tv: any\n\tfor (; i < l; i++) {\n\t\tv = obj[path[i]]\n\t\tobj = v === null || v === undefined ? (obj[path[i]] = {}) : v\n\t}\n\tobj[path[i]] = value\n}\n","/**\n * @module format\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 03 2018 19:46:41 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:50:54 GMT+0800 (China Standard Time)\n */\n\nimport { create, createFn, charCode, upper, escapeStr, cutStr, isFn, isNil } from '../util'\nimport { get, parsePath } from '../path'\n\n//========================================================================================\n/*                                                                                      *\n *                                     pad & shorten                                    *\n *                                                                                      */\n//========================================================================================\n\nexport function pad(str: string, len: number, chr?: string, leftAlign?: boolean | number): string {\n\treturn len > str.length ? __pad(str, len, chr, leftAlign) : str\n}\n\nexport function shorten(str: string, len: number, suffix?: string): string {\n\treturn len < str.length ? ((suffix = suffix || ''), str.substr(0, len - suffix.length) + suffix) : str\n}\n\nfunction __pad(str: string, len: number, chr: string, leftAlign: boolean | number): string {\n\tconst pad = new Array(len - str.length + 1).join(chr || ' ')\n\treturn leftAlign ? str + pad : pad + str\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       Separator                                      *\n *                                                                                      */\n//========================================================================================\n\nexport const thousandSeparate = mkSeparator(3),\n\tbinarySeparate = mkSeparator(8, '01'),\n\toctalSeparate = mkSeparator(4, '0-7'),\n\thexSeparate = mkSeparator(4, '\\\\da-fA-F')\n\nfunction mkSeparator(group: number, valReg?: string): (numStr: string) => string {\n\tvalReg = valReg || '\\\\d'\n\tconst reg = new RegExp(\n\t\t`^(?:[+-]|\\\\s+|0[xXbBoO])|([${valReg}])(?=([${valReg}]{${group}})+(?![${valReg}]))|[^${valReg}].*`,\n\t\t'g'\n\t)\n\treturn numStr => numStr.replace(reg, separatorHandler)\n}\nfunction separatorHandler(m: string, d: string) {\n\treturn d ? d + ',' : m\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                   plural & singular                                  *\n *                                                                                      */\n//========================================================================================\n\nconst PLURAL_REG = /([a-zA-Z]+)([^aeiou])y$|([sxzh])$|([aeiou]y)$|([^sxzhy])$/\nexport function plural(str: string): string {\n\treturn str.replace(PLURAL_REG, pluralHandler)\n}\nfunction pluralHandler(m, v, ies, es, ys, s) {\n\treturn v + (ies ? ies + 'ies' : es ? es + 'es' : (ys || s) + 's')\n}\n\nconst SINGULAR_REG = /([a-zA-Z]+)([^aeiou])ies$|([sxzh])es$|([aeiou]y)s$|([^sxzhy])s$/\nexport function singular(str: string): string {\n\treturn str.replace(SINGULAR_REG, singularHandler)\n}\nfunction singularHandler(m: string, v: string, ies: string, es: string, ys: string, s: string) {\n\treturn v + (ies ? ies + 'y' : es || ys || s)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     format flags                                     *\n *                                                                                      */\n//========================================================================================\n\ntype FormatFlags = number\n\nexport const FORMAT_XPREFIX: FormatFlags = 0x1,\n\tFORMAT_PLUS: FormatFlags = 0x2,\n\tFORMAT_ZERO: FormatFlags = 0x4,\n\tFORMAT_SPACE: FormatFlags = 0x8,\n\tFORMAT_SEPARATOR: FormatFlags = 0x10,\n\tFORMAT_LEFT: FormatFlags = 0x20\n\nconst FLAG_MAPPING = {\n\t'#': FORMAT_XPREFIX,\n\t'+': FORMAT_PLUS,\n\t'0': FORMAT_ZERO,\n\t' ': FORMAT_SPACE,\n\t',': FORMAT_SEPARATOR,\n\t'-': FORMAT_LEFT\n}\nfunction parseFlags(f: string): FormatFlags {\n\tlet flags: FormatFlags = 0\n\tif (f) {\n\t\tvar i = f.length\n\t\twhile (i--) flags |= FLAG_MAPPING[f.charAt(i)]\n\t}\n\treturn flags\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      format Rule                                     *\n *                                                                                      */\n//========================================================================================\n\n//   0      1      2     3     4       5       6           7         8      9           10             11             12        13\n// [match, expr, index, prop, flags, width, width-idx, width-prop, fill, precision, precision-idx, precision-prop, shorten-suffix, type]\nconst paramIdxR = `(\\\\d+|\\\\$|@)`,\n\tparamPropR = `(?:\\\\{((?:[a-zA-Z$_][\\\\w$_]*|\\\\[(?:\\\\d+|\"(?:[^\\\\\\\\\"]|\\\\\\\\.)*\"|'(?:[^\\\\\\\\']|\\\\\\\\.)*')\\\\])(?:\\\\.[a-zA-Z$_][\\\\w$_]*|\\\\[(?:\\\\d+|\"(?:[^\\\\\\\\\"]|\\\\\\\\.)*\"|'(?:[^\\\\\\\\']|\\\\\\\\.)*')\\\\])*)\\\\})`,\n\twidthR = `(?:([1-9]\\\\d*)|&${paramIdxR}${paramPropR})`,\n\tfillR = `(?:=(.))`,\n\tshortenSuffixR = `(?:=\"((?:[^\\\\\\\\\"]|\\\\\\\\.)*)\")`,\n\tformatReg = new RegExp(\n\t\t`\\\\\\\\.|(\\\\{${paramIdxR}?${paramPropR}?(?::([#,+\\\\- 0]*)(?:${widthR}${fillR}?)?(?:\\\\.${widthR}${shortenSuffixR}?)?)?([a-zA-Z_][a-zA-Z0-9_$]*)?\\\\})`,\n\t\t'g'\n\t)\n\n//========================================================================================\n/*                                                                                      *\n *                                      Formatters                                      *\n *                                                                                      */\n//========================================================================================\n\nexport type FormatCallback = (\n\tval: any,\n\tflags: FormatFlags,\n\twidth: number,\n\tfill: string,\n\tprecision: number,\n\tshortenSuffix: string\n) => string\n\nconst formatters: {\n\t[k: string]: FormatCallback\n} = create(null)\n\nexport function extendFormatter(obj: { [key: string]: FormatCallback }) {\n\tvar fmt: FormatCallback, name: string\n\tfor (name in obj) {\n\t\tfmt = obj[name]\n\t\tisFn(fmt) && (formatters[name] = fmt)\n\t}\n}\n\nexport function getFormatter(name: string): FormatCallback {\n\tconst f = formatters[name || 's']\n\tif (f) return f\n\tthrow new Error(`Invalid Formatter: ${name}`)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                           format by every parameter object                           *\n *                                                                                      */\n//========================================================================================\n\n/**\n * Syntax:\n * @example\n * \t'{'\n * \t\t(<parameter>)?\n * \t\t(\n * \t\t\t':'\n * \t\t\t(<flags>)?\n * \t\t\t(\n * \t\t\t\t<width> ('=' <fill-char>)?\n * \t\t\t)?\n * \t\t\t(\n * \t\t\t\t'.'\n * \t\t\t\t<precision> ('=' '\"' <shorten-suffix> '\"')?\n * \t\t\t)?\n * \t\t)?\n * \t\t(<type>)?\n * \t'}'\n *\n * - parameter\n * \t\t- {}\t\t\t\t\tformat by next unused argument\n * \t\t- {<number>}\t\t\tformat by arguments[number]\n * \t\t- {@}\t\t\t\t\tformat by current used argument\n * \t\t- {$}\t\t\t\t\tformat by next unused argument\n * \t\t- {{name}}\t\t\t\tformat by \"name\" property on next unused argument\n * \t\t- {<number>{name}}\t\tformat by \"name\" property on arguments[number]\n * \t\t- {@{name}}\t\t\t\tformat by \"name\" property on current used argument\n * \t\t- {${name}}\t\t\t\tformat by \"name\" property on next unused argument\n * @example\n * \t\tformat('<{} {}>', 'abc')\t\t\t\t// return \"<abc undefined>\"\n * \t\tformat('<{$} {$}>', 'abc')\t\t\t\t// return \"<abc undefined>\"\n * \t\tformat('<{@} {} {@}>', 'abc')\t\t\t// return \"<abc abc abc>\"\n * \t\tformat('<{0} {} {0}>', 'abc')\t\t\t// return \"<abc abc abc>\"\n * \t\tformat('<{0{value}} {${value}} {@{value}} {{value.a}}>', {value: 'abc'}, {value: {a: 'cbd'}})\n * \t\t// return \"<abc abc abc bcd>\"\n * \t\tformat('<{0{[0]}} {${[0]}} {@{[0]}} {{[0].a}}>', ['abc'], [{a: 'cbd'}])\n * \t\t// return \"<abc abc abc bcd>\"\n *\n * - flags\n * \t\t- {:#}    \tFORMAT_XPREFIX\n * \t\t\t\t\tensure the leading \"0\" for any octal\n * \t\t\t\t\tprefix non-zero hexadecimal with \"0x\" or \"0X\"\n * \t\t\t\t\tprefix non-zero binary with \"0b\" or \"0B\"\n * \t\t- {:+}    \tFORMAT_PLUS\n * \t\t\t\t\tForces to preceed the result with a plus or minus sign (+ or -) even for positive numbers.\n * \t\t\t\t\tBy default, only negative numbers are preceded with a - sign\n * \t\t- {:0}\t\tFORMAT_ZERO\n * \t\t\t\t\tLeft-pads the number with zeroes (0) instead of spaces when padding is specified\n * \t\t- {: }   \tFORMAT_SPACE\n * \t\t\t\t\tIf no sign is going to be written, a blank space is inserted before the value\n * \t\t- {:,}\t\tFORMAT_SEPARATOR\n * \t\t\t\t\tuse thousand separator on decimal number\n * \t\t\t\t\thexadecimal number: FFFFFFFF => FFFF,FFFF\n * \t\t\t\t\toctal number: 77777777 => 7777,7777\n * \t\t\t\t\tbinary number: 1111111111111111 => 11111111,11111111\n * \t\t{:-}    \tFORMAT_LEFT\n * \t\t\t\t\tLeft-justify within the given field width; Right justification is the default\n * @example\n * \t\tformat('<{: d}>',  12);\t\t// return \"< 12>\"\n *\t\tformat('<{: d}>',   0);\t\t// return \"< 0>\"\n *\t\tformat('<{: d}>', -12);\t\t// return \"<-12>\"\n *\t\tformat('<{:+d}>',  12);\t\t// return \"<+12>\"\n *\t\tformat('<{:+d}>',   0);\t\t// return \"<+0>\"\n *\t\tformat('<{:+d}>', -12);\t\t// return \"<-12>\"\n *\t\tformat('<{:6s}>',  12);\t\t// return \"<    12>\"\n *\t\tformat('<{:-6s}>', 12);\t\t// return \"<12    >\"\n *\t\tformat('<{:#o}>',  12);\t\t// return \"<014>\"\n *\t\tformat('<{:#x}>',  12);\t\t// return \"<0xc>\"\n *\t\tformat('<{:#X}>',  12);\t\t// return \"<0XC>\"\n *\t\tformat('<{:#b}>',  12);\t\t// return \"<0b1100>\"\n *\t\tformat('<{:#B}>',  12);\t\t// return \"<0B1100>\"\n\n * - width\n * \t\tMinimum number of characters to be printed.\n * \t\tIf the value to be printed is shorter than this number, the result is padded with pad char(default is space).\n * \t\tThe value is not truncated even if the result is larger.\n *\t\t- width value\n * \t\t\t{:<number>}\n * \t\t\t{:&@}\n * \t\t\t{:&$}\n * \t\t\t{:&<number>}\n * \t\t\t{:&@{<prop>}}\n * \t\t\t{:&${<prop>}}\n * \t\t\t{:&<number>{<prop>}}\n *\t\t- pad char\n * \t\t\t{:&@=<pad-char>}\n * \t\t\t{:&$=<pad-char>}\n * \t\t\t{:&<number>=<pad-char>}\n * \t\t\t{:&@{<prop>}=<pad-char>}\n * \t\t\t{:&${<prop>}=<pad-char>}\n * \t\t\t{:&<number>{<prop>}=<pad-char>}\n * @example\n * - precision\n * \t\tFor integer specifiers (d,  o, u, x, X): precision specifies the minimum number of digits to be written.\n * \t\tIf the value to be written is shorter than this number, the result is padded with leading zeros.\n * \t\tThe value is not truncated even if the result is longer. A precision of 0 means that no character is written for the value 0.\n * \t\tFor a, A, e, E, f and F specifiers: this is the number of digits to be printed after the decimal point (by default, this is 6).\n * \t\tFor g and G specifiers: This is the maximum number of significant digits to be printed.\n * \t\tFor s: this is the maximum number of characters to be printed. By default all characters are printed until the ending null character is encountered.\n * \t\tIf the period is specified without an explicit value for precision, 0 is assumed.\n * \t\t- precision value\n * \t\t\t{:.<number>}\n * \t\t\t{:.&@}\n * \t\t\t{:.&$}\n * \t\t\t{:.&<number>}\n * \t\t\t{:.&@{<prop>}}\n * \t\t\t{:.&${<prop>}}\n * \t\t\t{:.&<number>{<prop>}}\n * \t\t- shorten suffix\n * \t\t\t{:.&@=\"<suffix>\"}\n * \t\t\t{:.&$=\"<suffix>\"}\n * \t\t\t{:.&<number>=\"<suffix>\"}\n * \t\t\t{:.&@{<prop>}=\"<suffix>\"}\n * \t\t\t{:.&${<prop>}=\"<suffix>\"}\n * \t\t\t{:.&<number>{<prop>}=\"<suffix>\"}\n * - type\n * \t\t- default types\n *\t\t\t- {c}\t\tCharacter\n * \t\t\t- {s}\t\tString\n * \t\t\t- {j}\t\tJSON String\n * \t\t\t- {y}\t\tDate Year\n * \t\t\t- {m}\t\tDate Month\n * \t\t\t- {w}\t\tDate Weekly\n * \t\t\t- {W}\t\tDate Weekly\n * \t\t\t- {D}\t\tDate\n * \t\t\t- {H}\t\tDate\n * \t\t\t- {M}\t\tDate\n * \t\t\t- {S}\t\tDate\n * \t\t\t- {d} \t\tSigned decimal integer\n *\t\t\t- {u}\t\tUnsigned decimal integer\n *\t\t\t- {o}\t\tUnsigned octal\n *\t\t\t- {x}\t\tUnsigned hexadecimal integer\n *\t\t\t- {X}\t\tUnsigned hexadecimal integer (uppercase)\n *\t\t\t- {f}\t\tDecimal floating point, lowercase,\n *\t\t\t- {e}\t\tScientific notation (mantissa/exponent), lowercase\n *\t\t\t- {E}\t\tScientific notation (mantissa/exponent), uppercase\n *\t\t\t- {g}\t\tUse the shortest representation: %e or %f\n *\t\t\t- {G}\t\tUse the shortest representation: %E or %F\n * - Rules\n * \t\t- property-path\n * \t\t\t\t(\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t[a-zA-Z$_][\\w$_]*|\n * \t\t\t\t\t\t\\[\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\\d+|\n * \t\t\t\t\t\t\t\"(?:[^\\\\\"]|\\\\.)*\"|\n * \t\t\t\t\t\t\t'(?:[^\\\\']|\\\\.)*'\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t\\]\n * \t\t\t\t\t)\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t\\.[a-zA-Z$_][\\w$_]*|\n * \t\t\t\t\t\t\\[\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\\d+|\n * \t\t\t\t\t\t\t\"(?:[^\\\\\"]|\\\\.)*\"|\n * \t\t\t\t\t\t\t'(?:[^\\\\']|\\\\.)*'\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t\\]\n * \t\t\t\t\t)*\n * \t\t\t\t)\n * \t\t- expression\n * \t\t\t/\\\\.|\t\t\t\t\t\t\t\t\t\t\t\t// escape\n * \t\t\t(\t\t\t\t\t\t\t\t\t\t\t\t\t// 1: expression\n * \t\t\t\t\\{\n * \t\t\t\t(\\d+|\\$|@)?\t\t\t\t\t\t\t\t\t\t// 2: parameter index\n * \t\t\t\t(?:\\{<property-path>\\})?\t\t\t\t\t\t// 3: property path of parameter\n * \t\t\t\t(?:\n * \t\t\t\t\t:\n * \t\t\t\t\t([#,+\\- ]*)\t\t\t\t\t\t\t\t\t// 4: flags\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t(\\d+)|\t\t\t\t\t\t\t\t// 5: width\n * \t\t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\t&\n * \t\t\t\t\t\t\t\t(\\d+|\\$|@)\t\t\t\t\t\t// 6: parameter index of width\n * \t\t\t\t\t\t\t\t(?:\\{<property-path>\\})?\t\t// 7: property path of width parameter\n * \t\t\t\t\t\t\t)\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t(?:=(.))?\t\t\t\t\t\t\t\t// 8: pad fill\n * \t\t\t\t\t)?\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t\\.\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t(\\d+)|\t\t\t\t\t\t\t\t// 9: width\n * \t\t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\t&\n * \t\t\t\t\t\t\t\t(\\d+|\\$|@)\t\t\t\t\t\t// 10: parameter index of width\n * \t\t\t\t\t\t\t\t(?:\\{<property-path>\\})?\t\t// 11: property path of width parameter\n * \t\t\t\t\t\t\t)\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t=\n * \t\t\t\t\t\t\t\"\n * \t\t\t\t\t\t\t((?:[^\\\\\"]|\\\\.)*)\t\t\t\t\t// 12: shorten su\n * \t\t\t\t\t\t\t\"\n * \t\t\t\t\t\t)\n * \t\t\t\t\t)?\n * \t\t\t\t)?\n * \t\t\t\t([a-zA-Z_][a-zA-Z0-9_$]*)?\t\t\t\t\t\t// 13: data type\n * \t\t\t\t\\}\n * \t\t\t)/\n * @param fmt \t\tformat String\n * @param args\t\tformat arguments\n * @param offset\tstart offset of arguments\n * @param getParam\tget parameter on arguments callback\n */\nexport function vformat<T>(fmt: string, args: T, offset?: number, getParam?: (args: T, idx: number) => any): string {\n\toffset = offset || 0\n\tconst start = offset\n\tgetParam = getParam || defaultGetParam\n\treturn fmt.replace(formatReg, function(\n\t\ts,\n\t\tm,\n\t\tparam,\n\t\tparamProp,\n\t\tflags,\n\t\twidth,\n\t\twidx,\n\t\twprop,\n\t\tfill,\n\t\tprecision,\n\t\tpidx,\n\t\tpprop,\n\t\tshortenSuffix,\n\t\ttype\n\t) {\n\t\tif (!m) return s.charAt(1)\n\t\treturn getFormatter(type)(\n\t\t\tparseParam(param || '$', paramProp),\n\t\t\tparseFlags(flags),\n\t\t\tparseWidth(width, widx, wprop) || 0,\n\t\t\tfill,\n\t\t\tparseWidth(precision, pidx, pprop),\n\t\t\tshortenSuffix\n\t\t)\n\t})\n\n\tfunction parseWidth<T>(width: string, idx: string, prop: string): number {\n\t\tif (width) return (width as any) >> 0\n\t\tif (idx) {\n\t\t\tconst w = parseParam(idx, prop) >> 0\n\t\t\tif (isFinite(w)) return w\n\t\t}\n\t}\n\n\tfunction parseParam<T>(paramIdx: string, prop: string): any {\n\t\tlet param = getParam(\n\t\t\targs,\n\t\t\tparamIdx === '$'\n\t\t\t\t? offset++\n\t\t\t\t: paramIdx === '@'\n\t\t\t\t? offset === start\n\t\t\t\t\t? offset\n\t\t\t\t\t: offset - 1\n\t\t\t\t: (paramIdx as any) >> 0\n\t\t)\n\t\treturn prop ? get(param, prop) : param\n\t}\n}\n\nfunction defaultGetParam(args: any, idx: number) {\n\treturn args[idx]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        format                                        *\n *                                                                                      */\n//========================================================================================\n\n/**\n * @see vformat\n * @param fmt\tformat string\n * @param args\tformat arguments\n */\nexport function format(fmt: string, ...args: any): string\nexport function format(fmt: string): string {\n\treturn vformat(fmt, arguments, 0, getFormatParam)\n}\n\nfunction getFormatParam(args: IArguments, idx: number) {\n\treturn args[idx + 1]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       formatter                                      *\n *                                                                                      */\n//========================================================================================\n\nconst GET_PARAM_VAR = 'getp',\n\tGET_PROP_VAR = 'get',\n\tSTATE_VAR = 'state'\nfunction createFormatter(m: string[], getParam?: (args: IArguments, idx: number) => any) {\n\treturn createFn(\n\t\t`return function(args, ${STATE_VAR}){\nreturn fmt(${getParamCode(m[2] || '$', m[3])},\n\"${parseFlags(m[4])}\",\n${getWidthCode(m[5], m[6], m[7], '0')},\n\"${m[8] ? escapeStr(m[8]) : ' '}\",\n${getWidthCode(m[9], m[10], m[11], 'void 0')},\n\"${m[12] ? escapeStr(m[12]) : ''}\");\n}`,\n\t\t['fmt', GET_PROP_VAR, GET_PARAM_VAR]\n\t)(getFormatter(m[13]), get, getParam)\n}\n\nfunction getWidthCode(width: string, idx: string, prop: string, def: string): string {\n\treturn width ? width : idx ? getParamCode(idx, prop) : def\n}\n\nfunction getParamCode(idx: string, prop: string): string {\n\tlet code = `${GET_PARAM_VAR}(args, ${\n\t\tidx === '$'\n\t\t\t? `${STATE_VAR}[0]++`\n\t\t\t: idx === '@'\n\t\t\t? `${STATE_VAR}[0] === ${STATE_VAR}[1] ? ${STATE_VAR}[0] : ${STATE_VAR}[0] - 1`\n\t\t\t: idx\n\t})`\n\tif (prop) {\n\t\tconst path = parsePath(prop)\n\t\tvar i = path.length\n\t\tconst strs = new Array(i)\n\t\twhile (i--) strs[i] = `\"${escapeStr(path[i])}\"`\n\t\treturn `${GET_PROP_VAR}(${code}, [${strs.join(', ')}])`\n\t}\n\treturn code\n}\n\nexport type Formatter = (...args: any[]) => string\nexport type FormatParamLoader = (args: IArguments, idx: number) => any\n/**\n * @see vformat\n * @param fmt\t\tformat string\n * @param offset\tstart offset of arguments\n * @param getParam\tget parameter on arguments callback\n */\nexport function formatter(fmt: string, offset?: number, getParam?: FormatParamLoader): Formatter {\n\tlet m,\n\t\tlastIdx = 0,\n\t\tmStart,\n\t\tmEnd,\n\t\tarr = [],\n\t\tcodes = [],\n\t\ti = 0\n\toffset = offset || 0\n\twhile ((m = formatReg.exec(fmt))) {\n\t\tmEnd = formatReg.lastIndex\n\t\tmStart = mEnd - m[0].length\n\t\tlastIdx < mStart && pushStr(cutStr(fmt, lastIdx, mStart), 0)\n\t\tif (m[1]) {\n\t\t\tcodes[i] = `arr[${i}](arguments, ${STATE_VAR})`\n\t\t\tarr[i++] = createFormatter(m, getParam || defaultGetParam)\n\t\t} else {\n\t\t\tpushStr(m[0].charAt(1), i)\n\t\t}\n\t\tlastIdx = mEnd\n\t}\n\tlastIdx < fmt.length && pushStr(cutStr(fmt, lastIdx), i)\n\treturn createFn(`return function(){var ${STATE_VAR} = [${offset}, ${offset}]; return ${codes.join(' + ')}}`, [\n\t\t'arr'\n\t])(arr)\n\n\tfunction pushStr(str, append) {\n\t\tif (append && arr[i - 1].match) {\n\t\t\tarr[i - 1] += str\n\t\t} else {\n\t\t\tcodes[i] = `arr[${i}]`\n\t\t\tarr[i++] = str\n\t\t}\n\t}\n}\n/*\nsetTimeout(() => {\n\tvar f,\n\t\tn = 100000\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tf = formatter(`{:.10=\"...\"}`)\n\t}\n\tconsole.timeEnd()\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tf('abbdddded')\n\t}\n\tconsole.timeEnd()\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tformat(`{:.10=\"...\"}`, 'abbdddded')\n\t}\n\tconsole.timeEnd()\n\tconsole.log(formatter(`{:.10=\"...\"}`).toString())\n}) */\n//========================================================================================\n/*                                                                                      *\n *                                  default formatters                                  *\n *                                                                                      */\n//========================================================================================\n\nfunction strFormatter(toStr: (val: any, flags: FormatFlags) => string): FormatCallback {\n\treturn function(val, flags, width, fill, precision, shortenSuffix) {\n\t\tconst str = toStr(val, flags)\n\t\treturn width > str.length\n\t\t\t? __pad(str, width, fill, flags & FORMAT_LEFT)\n\t\t\t: shorten(str, precision, shortenSuffix)\n\t}\n}\n\nfunction numFormatter(\n\tparseNum: (val: any) => number,\n\tgetPrefix: (num: number, flags: FormatFlags) => string,\n\ttoStr: (num: number, flags: FormatFlags, precision: number) => string,\n\tseparator: (numStr: string) => string\n): FormatCallback {\n\treturn function(val, flags, width, fill, precision) {\n\t\tconst num = parseNum(val)\n\t\tif (!isFinite(num)) return String(num)\n\n\t\tconst prefix = getPrefix(num, flags),\n\t\t\tplen = prefix.length\n\t\tlet str = toStr(num < 0 ? -num : num, flags, precision)\n\n\t\treturn flags & FORMAT_ZERO\n\t\t\t? ((str = prefix + pad(str, width - plen, '0')), flags & FORMAT_SEPARATOR ? separator(str) : str)\n\t\t\t: (flags & FORMAT_SEPARATOR && (str = separator(str)), pad(prefix + str, width, fill, flags & FORMAT_LEFT))\n\t}\n}\n\nfunction decimalPrefix(num: number, flags: FormatFlags): string {\n\treturn num < 0 ? '-' : flags & FORMAT_PLUS ? '+' : flags & FORMAT_SPACE ? ' ' : ''\n}\n\n//──── base formatter ───────────────────────────────────────────────────────────────────────\nconst BASE_RADIXS = {\n\tb: [2, binarySeparate],\n\to: [8, octalSeparate],\n\tu: [10, thousandSeparate],\n\tx: [16, hexSeparate]\n}\nconst BASE_PREFIXS = ['0b', '0o', '0x']\nfunction baseFormatter(type: string): FormatCallback {\n\tconst base = BASE_RADIXS[type.toLowerCase()],\n\t\tn = base[0],\n\t\t__toStr = num => num.toString(n),\n\t\ttoStr = type === 'X' ? num => upper(__toStr(num)) : __toStr\n\tlet xprefix = n === 10 ? '' : BASE_PREFIXS[n >> 3]\n\tcharCode(type) < 96 && (xprefix = upper(xprefix))\n\treturn numFormatter(v => v >>> 0, (num, flags) => (flags & FORMAT_XPREFIX ? xprefix : ''), toStr, base[1])\n}\n\n//──── float formatter ───────────────────────────────────────────────────────────────────\nfunction floatFormatter(type: string): FormatCallback {\n\tconst ____toStr = upper(type) === 'E' ? toExponential : type === 'f' ? toFixed : toPrecision,\n\t\t__toStr = (num, flags, precision) => ____toStr(num, precision) || String(num),\n\t\ttoStr = charCode(type) > 96 ? __toStr : (num, flags, precision) => upper(__toStr(num, flags, precision))\n\treturn numFormatter(parseFloat, decimalPrefix, toStr, thousandSeparate)\n}\n\nfunction toExponential(num: number, precision: number): string {\n\treturn num.toExponential(precision)\n}\nfunction toPrecision(num: number, precision: number): string {\n\treturn precision && num.toPrecision(precision)\n}\nfunction toFixed(num: number, precision: number): string {\n\treturn precision >= 0 && num.toFixed(precision)\n}\n\n//──── register formatters ───────────────────────────────────────────────────────────────\nextendFormatter({\n\ts: strFormatter(toStr),\n\tj: strFormatter(v => (isNil(v) || isFn(v) ? toStr(v) : ((v = JSON.stringify(v)), v === undefined) ? toStr(v) : v)),\n\tc(val: any) {\n\t\tconst num = val >> 0\n\t\treturn num > 0 ? String.fromCharCode(num) : ''\n\t},\n\td: numFormatter(val => val >> 0, decimalPrefix, toStr, thousandSeparate),\n\te: floatFormatter('e'),\n\tE: floatFormatter('E'),\n\tf: floatFormatter('f'),\n\tg: floatFormatter('g'),\n\tG: floatFormatter('G'),\n\tb: baseFormatter('b'),\n\tB: baseFormatter('B'),\n\to: baseFormatter('o'),\n\tO: baseFormatter('O'),\n\tu: baseFormatter('u'),\n\tx: baseFormatter('x'),\n\tX: baseFormatter('X')\n})\n\nfunction toStr(v: any): string {\n\treturn String(v)\n}\n","/**\n * @module assert\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Nov 28 2018 11:01:45 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 17:42:54 GMT+0800 (China Standard Time)\n */\n\nimport {\n\tcreate,\n\tupperFirst,\n\tcreateFn,\n\teachObj,\n\tmakeArray,\n\tdeepEq,\n\teq,\n\tisBool,\n\tisNum,\n\tisStr,\n\tisBoolean,\n\tisNumber,\n\tisString,\n\tisDate,\n\tisNull,\n\tisUndef,\n\tisNil,\n\tisFn,\n\tisInt,\n\tisPrimitive,\n\tisReg,\n\tisArray,\n\tisArrayLike,\n\tisTypedArray,\n\tisObj,\n\tisBlank\n} from '../util'\nimport { T_UNDEF, T_FN, T_STRING, T_NUM, T_BOOL, P_CTOR } from '../util/consts'\nimport { formatter, Formatter } from '../format'\n\nexport interface assert {\n\t(msg?: string, ...args: any[]): never\n\tis(actual: any, msg?: string, ...args: any[]): assert\n\tnot(actual: any, msg?: string, ...args: any[]): assert\n\n\teq(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tnotEq(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\n\teql(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tnotEql(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\n\tblank(actual: any, msg?: string, ...args: any[]): assert\n\tnotBlank(actual: any, msg?: string, ...args: any[]): assert\n\n\tnul(actual: any, msg?: string, ...args: any[]): assert\n\tnotNul(actual: any, msg?: string, ...args: any[]): assert\n\n\tnil(actual: any, msg?: string, ...args: any[]): assert\n\tnotNil(actual: any, msg?: string, ...args: any[]): assert\n\n\tundef(actual: any, msg?: string, ...args: any[]): assert\n\tnotUndef(actual: any, msg?: string, ...args: any[]): assert\n\n\tbool(actual: any, msg?: string, ...args: any[]): assert\n\tnotBool(actual: any, msg?: string, ...args: any[]): assert\n\n\tnum(actual: any, msg?: string, ...args: any[]): assert\n\tnotNum(actual: any, msg?: string, ...args: any[]): assert\n\n\tint(actual: any, msg?: string, ...args: any[]): assert\n\tnotInt(actual: any, msg?: string, ...args: any[]): assert\n\n\tstr(actual: any, msg?: string, ...args: any[]): assert\n\tnotStr(actual: any, msg?: string, ...args: any[]): assert\n\n\tfn(actual: any, msg?: string, ...args: any[]): assert\n\tnotFn(actual: any, msg?: string, ...args: any[]): assert\n\n\tprimitive(actual: any, msg?: string, ...args: any[]): assert\n\tnotPrimitive(actual: any, msg?: string, ...args: any[]): assert\n\n\tboolean(actual: any, msg?: string, ...args: any[]): assert\n\tnotBoolean(actual: any, msg?: string, ...args: any[]): assert\n\n\tnumber(actual: any, msg?: string, ...args: any[]): assert\n\tnotNumber(actual: any, msg?: string, ...args: any[]): assert\n\n\tstring(actual: any, msg?: string, ...args: any[]): assert\n\tnotString(actual: any, msg?: string, ...args: any[]): assert\n\n\tdate(actual: any, msg?: string, ...args: any[]): assert\n\tnotDate(actual: any, msg?: string, ...args: any[]): assert\n\n\treg(actual: any, msg?: string, ...args: any[]): assert\n\tnotReg(actual: any, msg?: string, ...args: any[]): assert\n\n\tarray(actual: any, msg?: string, ...args: any[]): assert\n\tnotArray(actual: any, msg?: string, ...args: any[]): assert\n\n\ttypedArray(actual: any, msg?: string, ...args: any[]): assert\n\tnotTypedArray(actual: any, msg?: string, ...args: any[]): assert\n\n\tarrayLike(actual: any, msg?: string, ...args: any[]): assert\n\tnotArrayLike(actual: any, msg?: string, ...args: any[]): assert\n\n\tobj(actual: any, msg?: string, ...args: any[]): assert\n\tnotObj(actual: any, msg?: string, ...args: any[]): assert\n\n\tnan(actual: any, msg?: string, ...args: any[]): assert\n\tnotNan(actual: any, msg?: string, ...args: any[]): assert\n\n\tfinite(actual: number | string, msg?: string, ...args: any[]): assert\n\tnotFinite(actual: any, msg?: string, ...args: any[]): assert\n\n\tless(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tnotLess(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\n\tgreater(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tnotGreater(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\n\tmatch(actual: string, expect: any, msg?: string, ...args: any[]): assert\n\tnotMatch(actual: string, expect: any, msg?: string, ...args: any[]): assert\n\n\trange(actual: number, start: number, end: number, msg?: string, ...args: any[]): assert\n\tnotRange(actual: number, start: number, end: number, msg?: string, ...args: any[]): assert\n\n\tthrow(fn: () => any, err?: Error | string, msg?: string, ...args: any[]): assert\n\tnotThrow(fn: () => any, err?: Error | string, msg?: string, ...args: any[]): assert\n\n\texecutor<T extends (...args: any[]) => any>(fn: T, maxCall: number, msg?: string): T & { called: number }\n}\n\nconst formatters: { [msg: string]: Formatter } = create(null)\nfunction mkError(Err: { new (message?: string): Error }, msg: string, args: any[] | IArguments, msgIdx: number): Error {\n\tconst fmtter =\n\t\tformatters[msg] ||\n\t\t(formatters[msg] = formatter(msg, msgIdx, (args, offset) => args[0][offset >= msgIdx ? offset + 1 : offset]))\n\treturn popErrStack(new Err(fmtter(args)), 2)\n}\n\nexport function popErrStack(err: Error, i: number): Error {\n\twhile (i-- > 0) {\n\t\terr.stack = err.stack.replace(/(\\n\\s{4}at[^\\n]*)/, '')\n\t}\n\treturn err\n}\n\nexport const assert = function assert(msg?: string): never {\n\tthrow mkError(Error, msg || 'Error', arguments, 0)\n} as assert\n\nfunction mkThrowAssertor(th: boolean, dmsg: string, ERROR?: any) {\n\treturn function throwErr(fn: () => any, expect: Error | string, msg?: string) {\n\t\tlet err: Error\n\t\ttry {\n\t\t\tfn()\n\t\t} catch (e) {\n\t\t\terr = e\n\t\t}\n\t\tif (\n\t\t\tth !==\n\t\t\t!!(\n\t\t\t\terr &&\n\t\t\t\t(!expect ||\n\t\t\t\t\t(isStr(expect)\n\t\t\t\t\t\t? expect === err.message\n\t\t\t\t\t\t: err[P_CTOR] === (expect as Error)[P_CTOR] &&\n\t\t\t\t\t\t  (!(expect as Error).message || (expect as Error).message === err.message)))\n\t\t\t)\n\t\t) {\n\t\t\targuments[0] = err\n\t\t\t!expect && (arguments[1] = ERROR)\n\t\t\tthrow mkError(Error, msg || dmsg, arguments, 2)\n\t\t}\n\t\treturn assert\n\t}\n}\n\nassert.throw = mkThrowAssertor(true, `expected catched error {0s} is {1s}`, new Error())\nassert.notThrow = mkThrowAssertor(false, `expected catched error {0s} is not {1s}`)\n\n/**\n * @param name \t\tname of the assertor\n * @param condition condition, function or expression\n * @param args \t\tname or length of the parameters\n * @param dmsg  \tthe default message\n * @param Err  \t\tthe Error Constructor, default Error\n */\nfunction mkAssertor<T extends (...args: any[]) => assert>(\n\tname: string,\n\tcondition: string | ((...args: any) => boolean) | [string | ((...args: any) => boolean), string?],\n\targs: string | string[] | number,\n\tdmsg: string,\n\tErr?: { new (message?: string): Error }\n): T {\n\tconst params: string[] = isStr(args)\n\t\t\t? (args as string).split(/,/g)\n\t\t\t: isNum(args)\n\t\t\t? makeArray(args as number, i => `arg${i + 1}`)\n\t\t\t: (args as string[]),\n\t\tparamStr = params.join(', '),\n\t\tcond = isArray(condition) ? condition[0] : condition,\n\t\texpr = (isArray(condition) ? condition[1] : '') + (isStr(cond) ? `(${cond})` : `cond(${paramStr})`)\n\n\treturn (assert[name] = createFn(\n\t\t`return function assert${upperFirst(name)}(${paramStr}, msg){\n\tif (${expr})\n\t\tthrow mkErr(Err, msg || dmsg, arguments, ${params.length});\n\treturn assert;\n}`,\n\t\t['Err', 'mkErr', 'dmsg', 'cond', 'assert']\n\t)(Err || Error, mkError, dmsg, cond, assert))\n}\n\n// [condition, argcount?, [msg, not msg], Error]\nfunction mkAssertors(apis: {\n\t[method: string]: [\n\t\tstring | ((...args: any) => boolean), // condition, function or expression\n\t\tstring | number | string[], // arguments\n\t\t[string, string], // expect or [err msg, not err msg]\n\t\t({ new (message?: string): Error })? // the Error Constructor, default Error\n\t]\n}) {\n\teachObj(apis, (desc, name) => {\n\t\tconst condition = desc[0],\n\t\t\targs = desc[1],\n\t\t\tmsg = desc[2],\n\t\t\tErr = desc[3] || TypeError\n\n\t\tmsg[0] && mkAssertor(name, [condition, '!'], args, msg[0], Err)\n\t\tmsg[1] && mkAssertor('not' + upperFirst(name), condition, args, msg[1], Err)\n\t})\n}\n\nconst UNDEFINED = T_UNDEF,\n\tBOOLEAN = T_BOOL,\n\tNUMBER = T_NUM,\n\tSTRING = T_STRING,\n\tFUNCTION = T_FN,\n\tNULL = 'null',\n\tINTEGER = 'integer',\n\tARRAY = 'Array',\n\tTYPED_ARRAY = 'TypedArray'\n\nmkAssertor('is', '!o', 'o', expectMsg('exist'))\nmkAssertor('not', 'o', 'o', expectMsg('exist', true))\nmkAssertors({\n\teq: [eq, 2, mkMsg(objFormatter(1))],\n\teql: [deepEq, 2, mkMsg(objFormatter(1))],\n\tnul: [isNull, 1, mkMsg(NULL)],\n\tnil: [isNil, 1, mkMsg(typeExpect(NULL, UNDEFINED))],\n\tundef: [isUndef, 1, mkMsg(UNDEFINED)],\n\tbool: [isBool, 1, mkMsg(BOOLEAN)],\n\tnum: [isNum, 1, mkMsg(NUMBER)],\n\tint: [isInt, 1, mkMsg(INTEGER)],\n\tstr: [isStr, 1, mkMsg(STRING)],\n\tfn: [isFn, 1, mkMsg(FUNCTION)],\n\tprimitive: [\n\t\tisPrimitive,\n\t\t1,\n\t\tmkMsg(`Primitive type(${typeExpect(NULL, UNDEFINED, BOOLEAN, NUMBER, INTEGER, STRING, FUNCTION)})`)\n\t],\n\tboolean: [isBoolean, 1, mkMsg(packTypeExpect(BOOLEAN))],\n\tnumber: [isNumber, 1, mkMsg(packTypeExpect(NUMBER))],\n\tstring: [isString, 1, mkMsg(packTypeExpect(STRING))],\n\tdate: [isDate, 1, mkMsg('Date')],\n\treg: [isReg, 1, mkMsg('RegExp')],\n\tarray: [isArray, 1, mkMsg(ARRAY)],\n\ttypedArray: [isTypedArray, 1, mkMsg('TypedArray')],\n\tarrayLike: [\n\t\tisArrayLike,\n\t\t1,\n\t\tmkMsg(typeExpect(ARRAY, packTypeExpect(STRING), 'Arguments', TYPED_ARRAY, 'NodeList', 'HTMLCollection'))\n\t],\n\tobj: [isObj, 1, mkMsg('Object')],\n\tnan: [isNaN, 1, mkMsg('NaN')],\n\tfinite: [isFinite, 1, mkMsg('Finite')],\n\tblank: [isBlank, 1, mkMsg('Blank')],\n\tless: ['o<t', 'o,t', mkMsg(objFormatter(1), 'less than')],\n\tgreater: ['o>t', 'o,t', mkMsg(objFormatter(1), 'greater than')],\n\tmatch: ['reg.test(str)', 'str,reg', mkMsg(objFormatter(1), 'match')],\n\trange: ['o>=s&&o<e', 'o,s,e', mkMsg(`[{1} - {2})`)]\n})\n\nfunction mkMsg(expect: string, to?: string): [string, string] {\n\treturn [expectMsg(expect, false, to), expectMsg(expect, true, to)]\n}\nfunction expectMsg(expect: string, not?: boolean, to?: string): string {\n\treturn `expected ${objFormatter(0)} ${not ? 'not ' : ''}${to || 'to'} ${expect}`\n}\n\nfunction objFormatter(idx: number): string {\n\treturn `{${idx}:.80=\"...\"j}`\n}\n\nfunction packTypeExpect(base: string, all?: boolean): string {\n\treturn all ? typeExpect(base, upperFirst(base)) : upperFirst(base)\n}\nfunction typeExpect(...types: string[]): string\nfunction typeExpect(): string {\n\treturn Array.prototype.join.call(arguments, ' | ')\n}\n","/**\n * Double Linked List\n * @module util/list\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 18:28:27 GMT+0800 (China Standard Time)\n */\n\nimport { bind, defValue, addDKey } from '../util'\nimport { assert } from '../assert'\nimport { EMPTY_FN } from '../util/consts'\n\nconst DEFAULT_BINDING = addDKey('__list__')\n\ninterface ListNode<T> extends Array<any> {\n\t0: T // target\n\t1: ListNode<T> // prev node\n\t2: ListNode<T> // next node\n\t3: List<T> // list\n\t4: number // version\n\ttoJSON?: () => any\n}\n\nexport class List<T> {\n\tstatic readonly binding: string = DEFAULT_BINDING\n\n\treadonly binding: string\n\tprivate __head?: ListNode<T>\n\tprivate __tail?: ListNode<T>\n\tprivate __length: number = 0\n\tprivate __scaning: boolean = false\n\tprivate __lazyRemoves?: ListNode<T>[]\n\tprivate __ver: number = 0\n\tconstructor(binding?: string) {\n\t\tthis.binding = binding || DEFAULT_BINDING\n\t}\n\tsize(): number {\n\t\treturn this.__length\n\t}\n\thas(obj: T): boolean {\n\t\tconst node: ListNode<T> = obj[this.binding]\n\t\treturn node ? node[0] === obj && node[3] === this : false\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tadd(obj: T): number {\n\t\treturn this.__insert(obj, this.__tail)\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\taddFirst(obj: T): number {\n\t\treturn this.__insert(obj)\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tinsertAfter(obj: T, target?: T): number {\n\t\treturn this.__insert(obj, target && this.__getNode(target))\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tinsertBefore(obj: T, target?: T): number {\n\t\treturn this.__insert(obj, target && this.__getNode(target)[1])\n\t}\n\t/**\n\t *\n\t * @param objs\n\t * @return new length\n\t */\n\taddAll(objs: T[]): number {\n\t\treturn this.__insertAll(objs, this.__tail)\n\t}\n\taddFirstAll(objs: T[]): number {\n\t\treturn this.__insertAll(objs)\n\t}\n\tinsertAfterAll(objs: T[], target?: T): number {\n\t\treturn this.__insertAll(objs, target && this.__getNode(target))\n\t}\n\tinsertBeforeAll(objs: T[], target?: T): number {\n\t\treturn this.__insertAll(objs, target && this.__getNode(target)[1])\n\t}\n\tprev(obj: T): T {\n\t\treturn this.__siblingObj(obj, 1)\n\t}\n\tnext(obj: T): T {\n\t\treturn this.__siblingObj(obj, 2)\n\t}\n\tfirst(): T {\n\t\tconst node: ListNode<T> = this.__head\n\t\treturn node && node[0]\n\t}\n\tlast(): T {\n\t\tconst node: ListNode<T> = this.__tail\n\t\treturn node && node[0]\n\t}\n\teach(cb: (obj: T) => boolean | void, scope?: any) {\n\t\tif (this.__length) {\n\t\t\tassert.not(this.__scaning, 'Nested calls are not allowed.')\n\t\t\tthis.__scaning = true\n\n\t\t\tconst __ver = ++this.__ver\n\n\t\t\tcb = bind(cb, scope)\n\t\t\tvar node = this.__head,\n\t\t\t\terr: Error\n\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this) {\n\t\t\t\t\tif (__ver === node[4]) break\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (cb(node[0]) === false) break\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terr = e\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t\tthis.__doLazyRemove()\n\t\t\tthis.__scaning = false\n\t\t\tif (err) throw err\n\t\t}\n\t}\n\teachUnsafe(cb: (obj: T) => boolean | void, scope?: any) {\n\t\tif (this.__length) {\n\t\t\tvar node = this.__head\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this && cb(node[0]) === false) break\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t}\n\t}\n\ttoArray(): T[] {\n\t\tconst array: T[] = new Array(this.__length)\n\t\tlet node = this.__head,\n\t\t\ti = 0\n\t\twhile (node) {\n\t\t\tif (node[3] === this) array[i++] = node[0]\n\t\t\tnode = node[2]\n\t\t}\n\t\treturn array\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tremove(obj: T): number {\n\t\treturn this.__remove(this.__getNode(obj))\n\t}\n\tclean() {\n\t\tif (this.__length) {\n\t\t\tif (this.__scaning) {\n\t\t\t\tvar node = this.__head\n\t\t\t\twhile (node) {\n\t\t\t\t\tnode[3] === this && this.__lazyRemove(node)\n\t\t\t\t\tnode = node[2]\n\t\t\t\t}\n\t\t\t\tthis.__length = 0\n\t\t\t} else {\n\t\t\t\tthis.__clean()\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate __initNode(obj: T): ListNode<T> {\n\t\tconst { binding } = this\n\t\tlet node: ListNode<T> = obj[binding]\n\t\tif (node && node[0] === obj) {\n\t\t\tif (node[3] === this) {\n\t\t\t\tthis.__remove(node)\n\t\t\t\treturn this.__initNode(obj)\n\t\t\t} else if (node[3]) {\n\t\t\t\tassert('Object is still in some List')\n\t\t\t}\n\t\t\tnode[3] = this\n\t\t\tnode[4] = this.__ver\n\t\t} else {\n\t\t\tnode = [obj, , , this, this.__ver]\n\t\t\tnode.toJSON = EMPTY_FN\n\t\t\tdefValue(obj, binding, node, false)\n\t\t}\n\t\treturn node\n\t}\n\n\tprivate __getNode(obj: T): ListNode<T> {\n\t\tconst node: ListNode<T> = obj[this.binding]\n\t\tassert.is(node && node[0] === obj && node[3] === this, 'Object is not in this List')\n\t\treturn node\n\t}\n\n\tprivate __siblingObj(obj: T, siblingIdx: number): T {\n\t\tconst node: ListNode<T> = this.__getNode(obj)\n\t\tlet sibling: ListNode<T> = node[siblingIdx]\n\t\tif (sibling) {\n\t\t\twhile (!sibling[3]) {\n\t\t\t\tsibling = sibling[siblingIdx]\n\t\t\t\tif (!sibling) return\n\t\t\t}\n\t\t\treturn sibling[0]\n\t\t}\n\t}\n\n\tprivate __doInsert(nodeHead: ListNode<T>, nodeTail: ListNode<T>, len: number, prev?: ListNode<T>): number {\n\t\tlet next: ListNode<T>\n\t\tnodeHead[1] = prev\n\t\tif (prev) {\n\t\t\tnodeTail[2] = next = prev[2]\n\t\t\tprev[2] = nodeHead\n\t\t} else {\n\t\t\tnodeTail[2] = next = this.__head\n\t\t\tthis.__head = nodeHead\n\t\t}\n\t\tif (next) next[1] = nodeTail\n\t\telse this.__tail = nodeTail\n\t\treturn (this.__length += len)\n\t}\n\n\tprivate __insert(obj: T, prev?: ListNode<T>): number {\n\t\tconst node = this.__initNode(obj)\n\t\treturn this.__doInsert(node, node, 1, prev)\n\t}\n\n\tprivate __insertAll(objs: T[], prev?: ListNode<T>): number {\n\t\tlet l = objs.length\n\t\tif (l) {\n\t\t\tconst head = this.__initNode(objs[0])\n\t\t\tvar __prev = head,\n\t\t\t\ttail = head,\n\t\t\t\ti = 1\n\t\t\tfor (; i < l; i++) {\n\t\t\t\ttail = this.__initNode(objs[i])\n\t\t\t\ttail[1] = __prev\n\t\t\t\t__prev[2] = tail\n\t\t\t\t__prev = tail\n\t\t\t}\n\t\t\treturn this.__doInsert(head, tail, l, prev)\n\t\t}\n\t\treturn -1\n\t}\n\n\tprivate __remove(node: ListNode<T>): number {\n\t\tthis.__scaning ? this.__lazyRemove(node) : this.__doRemove(node)\n\t\treturn --this.__length\n\t}\n\n\tprivate __lazyRemove(node: ListNode<T>): void {\n\t\tconst { __lazyRemoves: lazyRemoves } = this\n\t\tnode[0][this.binding] = null // unbind this node\n\t\tnode[3] = null\n\t\tif (lazyRemoves) {\n\t\t\tlazyRemoves.push(node)\n\t\t} else {\n\t\t\tthis.__lazyRemoves = [node]\n\t\t}\n\t}\n\n\tprivate __doLazyRemove() {\n\t\tconst { __lazyRemoves: lazyRemoves } = this\n\t\tif (lazyRemoves) {\n\t\t\tvar len = lazyRemoves.length\n\t\t\tif (len) {\n\t\t\t\tif (this.__length) {\n\t\t\t\t\twhile (len--) this.__doRemove(lazyRemoves[len])\n\t\t\t\t} else {\n\t\t\t\t\tthis.__clean()\n\t\t\t\t}\n\t\t\t\tlazyRemoves.length = 0\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate __doRemove(node: ListNode<T>) {\n\t\tconst prev = node[1],\n\t\t\tnext = node[2]\n\t\tif (prev) {\n\t\t\tprev[2] = next\n\t\t} else {\n\t\t\tthis.__head = next\n\t\t}\n\t\tif (next) {\n\t\t\tnext[1] = prev\n\t\t} else {\n\t\t\tthis.__tail = prev\n\t\t}\n\t\tnode.length = 1\n\t}\n\n\tprivate __clean() {\n\t\tlet node: ListNode<T>,\n\t\t\tnext = this.__head\n\t\twhile ((node = next)) {\n\t\t\tnext = node[2]\n\t\t\tnode.length = 1\n\t\t}\n\t\tthis.__head = null\n\t\tthis.__tail = null\n\t\tthis.__length = 0\n\t}\n}\n","/**\n * Function List\n * @module util/list\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:05:16 GMT+0800 (China Standard Time)\n */\n\nimport { List } from './List'\nimport { create, defValue, addDKey } from '../util'\n\nconst DEFAULT_FN_BINDING = addDKey('__flist_id__')\nconst DEFAULT_SCOPE_BINDING = addDKey(DEFAULT_FN_BINDING)\n\ntype FnNode<T extends Function> = [string, T, any, any]\nexport class FnList<T extends Function> {\n\tstatic readonly fnBinding: string = DEFAULT_FN_BINDING\n\tstatic readonly scopeBinding: string = DEFAULT_SCOPE_BINDING\n\n\treadonly fnBinding: string\n\treadonly scopeBinding: string\n\tprivate readonly __list: List<FnNode<T>>\n\tprivate __nodeMap: { [key: string]: FnNode<T> }\n\n\tconstructor(fnBinding?: string, scopeBinding?: string) {\n\t\tthis.__nodeMap = create(null)\n\t\tthis.__list = new List()\n\t\tthis.fnBinding = fnBinding || DEFAULT_FN_BINDING\n\t\tthis.scopeBinding = scopeBinding || DEFAULT_SCOPE_BINDING\n\t}\n\t/**\n\t * add executable function\n\t * @param fn\t\tfunction\n\t * @param scope\t\tscope of function\n\t * @param data\t\tuser data of [function + scope]\n\t * @return executable function id, can remove executable function by id: {@link FnList#removeId}\n\t */\n\tadd(fn: T, scope?: any, data?: any): string {\n\t\tscope = parseScope(scope)\n\t\tconst { __list: list, __nodeMap: nodeMap } = this\n\t\tconst id = this.id(fn, scope)\n\t\tlet node = nodeMap[id]\n\t\tif (!node) {\n\t\t\tnode = [id, fn, scope, data]\n\t\t\tif (list.add(node)) nodeMap[id] = node\n\t\t\treturn id\n\t\t}\n\t}\n\n\t/**\n\t * remove executable function by id\n\t *\n\t * @param id\n\t */\n\tremoveId(id: string): number {\n\t\tconst { __list: list, __nodeMap: nodeMap } = this\n\t\tconst node = nodeMap[id]\n\t\tif (node) {\n\t\t\tnodeMap[id] = undefined\n\t\t\treturn list.remove(node)\n\t\t}\n\t\treturn -1\n\t}\n\tremove(fn: T, scope?: any): number {\n\t\treturn this.removeId(this.id(fn, parseScope(scope)))\n\t}\n\thas(fn: T, scope?: any): string {\n\t\tconst id = this.id(fn, parseScope(scope))\n\t\treturn this.__nodeMap[id] && id\n\t}\n\thasId(id: string): boolean {\n\t\treturn !!this.__nodeMap[id]\n\t}\n\tsize(): number {\n\t\treturn this.__list.size()\n\t}\n\tclean() {\n\t\tthis.__nodeMap = create(null)\n\t\tthis.__list.clean()\n\t}\n\teach(cb: (fn: T, scope: any, data: any, __node: FnNode<T>) => boolean | void, scope?: any) {\n\t\tcb = cb.bind(scope)\n\t\tthis.__list.each(node => cb(node[1], node[2], node[3], node))\n\t}\n\teachUnsafe(cb: (fn: T, scope: any, data: any, __node: FnNode<T>) => boolean | void, scope?: any) {\n\t\tthis.__list.eachUnsafe(node => cb(node[1], node[2], node[3], node))\n\t}\n\tid(fn: T, scope?: any): string {\n\t\tconst { fnBinding, scopeBinding } = this\n\n\t\tlet fnId = fn[fnBinding],\n\t\t\tscopeId = scope ? scope[scopeBinding] : DEFAULT_SCOPE_ID\n\t\tif (!fnId) fnId = defValue(fn, fnBinding, ++fnIdGenerator, false, false, false)\n\t\tif (!scopeId) scopeId = defValue(scope, scopeBinding, ++scopeIdGenerator, false, false, false)\n\t\treturn `${fnId}#${scopeId}`\n\t}\n}\n\nconst DEFAULT_SCOPE_ID = 1\nlet scopeIdGenerator = 1,\n\tfnIdGenerator = 0\n\nfunction parseScope(scope: any): any {\n\treturn !scope ? undefined : scope\n}\n","/**\n * @module util/list\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:06:18 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:05:08 GMT+0800 (China Standard Time)\n */\n\nexport * from './List'\nexport * from './FnList'\n","/**\n * @module util/nextTick\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:04:49 GMT+0800 (China Standard Time)\n */\nimport { FnList } from '../list'\nimport { T_FN } from '../util/consts'\n\nlet next: () => void\nif (typeof MutationObserver === T_FN) {\n\t// chrome18+, safari6+, firefox14+,ie11+,opera15\n\tconst textNode = document.createTextNode(v)\n\n\tnew MutationObserver(flush).observe(textNode, {\n\t\tcharacterData: true\n\t})\n\tvar v = ''\n\tnext = function() {\n\t\ttextNode.data = v = v ? '' : '0'\n\t}\n} else {\n\tnext = function() {\n\t\tsetTimeout(flush, 0)\n\t}\n}\n\nconst ticks = [new FnList<() => void>(), new FnList<() => void>()]\nlet pending: FnList<() => void>,\n\ti = 0\n\nfunction executeTick(fn: () => void, scope?: any) {\n\tscope ? fn.call(scope) : fn()\n}\n\nfunction flush() {\n\tconst t = pending\n\tpending = null\n\tt.each(executeTick)\n\tt.clean()\n}\n\nexport function nextTick(fn: () => void, scope?: any): string {\n\tif (!pending) {\n\t\tpending = ticks[++i & 1]\n\t\tnext()\n\t}\n\treturn pending.add(fn, scope)\n}\n\nexport function clearTick(fn: () => void, scope?: any) {\n\treturn pending.remove(fn, scope)\n}\n\nexport function clearTickId(id: string) {\n\treturn pending.removeId(id)\n}\n","/**\n * @module util/Source\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 17 2018 10:41:21 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:58:29 GMT+0800 (China Standard Time)\n */\n\nimport { pad } from '../format'\nimport { escapeStr } from '../util'\n\nconst LINE_REG = /([^\\n]+)?(\\n|$)/g\nexport class Source {\n\treadonly buff: string\n\treadonly len: number\n\tprivate __lines: ([number, string])[]\n\tprivate __linePos: number\n\tconstructor(buff: string) {\n\t\tthis.buff = buff\n\t\tthis.len = buff.length\n\t\tthis.__lines = []\n\t\tthis.__linePos = 0\n\t}\n\tposition(offset: number): [number, number, string] {\n\t\tconst { buff, len, __lines: lines, __linePos: linePos } = this\n\t\tlet i = lines.length,\n\t\t\tp: number\n\t\tif (offset < linePos) {\n\t\t\twhile (i--) {\n\t\t\t\tp = offset - lines[i][0]\n\t\t\t\tif (p >= 0) return [i + 1, p, lines[i][1]]\n\t\t\t}\n\t\t} else {\n\t\t\tif (linePos < len) {\n\t\t\t\tvar m: string[]\n\t\t\t\tLINE_REG.lastIndex = p = linePos\n\t\t\t\twhile ((m = LINE_REG.exec(buff))) {\n\t\t\t\t\tlines[i++] = [p, m[1] || '']\n\t\t\t\t\tp = LINE_REG.lastIndex\n\t\t\t\t\tif (!p || offset < p) break\n\t\t\t\t}\n\t\t\t\tthis.__linePos = p || len\n\t\t\t}\n\t\t\treturn i ? [i, (offset > len ? len : offset) - lines[i - 1][0], lines[i - 1][1]] : [1, 0, '']\n\t\t}\n\t}\n\tsource(escape?: boolean): string {\n\t\tconst { buff } = this\n\t\tlet line = 1,\n\t\t\ttoSourceStr = escape ? escapeSourceStr : sourceStr\n\n\t\treturn buff.replace(LINE_REG, (m, s, t) => pad(String(line++), 3) + ': ' + toSourceStr(m, s, t))\n\t}\n}\n\nfunction sourceStr(m: string, s: string, t: string) {\n\treturn m || ''\n}\n\nfunction escapeSourceStr(m: string, s: string, t: string) {\n\treturn s ? escapeStr(s) + t : t\n}\n","/**\n * utilities for ast builder\n *\n * @module util/AST\n * @author Tao Zeng (tao.zeng.zt@qq.com)\n * @created 2018-11-09 13:22:51\n * @modified 2018-11-09 13:22:51 by Tao Zeng (tao.zeng.zt@qq.com)\n */\nimport { charCode, isStr, isArray, isInt, isNum } from '../util'\n\nexport function genCharCodes(start: number | string, end: number | string, ignoreCase?: boolean) {\n\tlet s: number = isNum(start) ? (start as number) : charCode(start as string),\n\t\te: number = isNum(end) ? (end as number) : charCode(end as string),\n\t\tcodes: number[] = new Array(e - s),\n\t\ti = 0\n\tif (ignoreCase) {\n\t\tvar c: number\n\t\tfor (; s <= e; s++) {\n\t\t\tcodes[i++] = s\n\t\t\tc = getAnotherCode(s)\n\t\t\tcodes[i++] = c\n\t\t}\n\t} else {\n\t\tfor (; s <= e; s++) codes[i++] = s\n\t}\n\treturn codes\n}\n\n/**\n * each char codes\n */\nexport function eachCharCodes(codes: number | string | any[], ignoreCase: boolean, cb: (code: number) => void) {\n\tlet i: number\n\tif (isStr(codes)) {\n\t\ti = (codes as any).length\n\t\twhile (i--) eachCharCode(charCode(codes as any, i), ignoreCase, cb)\n\t} else if (isArray(codes)) {\n\t\ti = (codes as any).length\n\t\twhile (i--) eachCharCodes((codes as any)[i], ignoreCase, cb)\n\t} else if (isInt(codes)) {\n\t\teachCharCode(codes as any, ignoreCase, cb)\n\t}\n}\nfunction eachCharCode(code: number, ignoreCase: boolean, cb: (code: number) => void): void {\n\tcb(code)\n\tif (ignoreCase) {\n\t\tvar c = getAnotherCode(code)\n\t\tc && cb(c)\n\t}\n}\n\nfunction getAnotherCode(code: number) {\n\treturn code <= 90 ? (code >= 65 ? code + 32 : 0) : code <= 122 ? code - 32 : 0\n}\n","/**\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:58:23 GMT+0800 (China Standard Time)\n */\nimport { MatchContext } from './MatchContext'\nimport { eachCharCodes } from './util'\nimport { assert } from '../assert'\nimport { isBool, mixin } from '../util'\n\n@mixin({ $ruleErr: true })\nexport class MatchError {\n\treadonly $ruleErr: boolean\n\treadonly rule: Rule\n\treadonly context: MatchContext\n\treadonly source: MatchError\n\treadonly target: MatchError\n\tcapturable: boolean\n\treadonly pos: number\n\tmsg: string\n\tconstructor(msg: string, capturable: boolean, source: MatchError, context: MatchContext, rule: Rule) {\n\t\t!isBool(capturable) && (capturable = rule.capturable)\n\t\tthis.capturable = capturable && source ? source.capturable : capturable\n\t\tthis.msg = msg\n\t\tthis.source = source\n\t\tthis.target = source ? source.target : this\n\t\tthis.context = context\n\t\tthis.rule = rule\n\t\tthis.pos = context.startPos()\n\t}\n\tposition(): [number, number, string] {\n\t\treturn this.context.source.position(this.pos)\n\t}\n}\n\nexport type onMatchCallback = (data: any, len: number, context: MatchContext, rule: Rule) => MatchError | string | void\nexport type onErrorCallback = (err: MatchError, context: MatchContext, rule: Rule) => MatchError | string | void\n\nfunction defaultErr(err: MatchError) {\n\treturn err\n}\n\nfunction defaultMatch(data: any, len: number, context: MatchContext) {\n\tcontext.add(data)\n}\n\nexport type RuleOptions = {\n\t/**\n\t * error is capturable\n\t */\n\tcapturable?: boolean\n\t/**\n\t * matched callback\n\t */\n\tmatch?: (data: any, len: number, context: MatchContext, rule: Rule) => MatchError | string | void\n\t/**\n\t * error callback\n\t */\n\terr?: (err: MatchError, context: MatchContext, rule: Rule) => MatchError | string | void\n}\n\nlet idGen = 0\n/**\n * Abstract Rule\n */\n@mixin({ $rule: true })\nexport class Rule {\n\treadonly $rule: boolean\n\t// rule type (for debug)\n\ttype: string\n\t// rule id\n\treadonly id: number\n\t// rule name\n\treadonly name: string\n\t// error is capturable\n\treadonly capturable: boolean\n\t// rule expression (for debug)\n\tprotected expr: string\n\t// rule EXPECT content (for debug)\n\tprotected EXPECT: string\n\t// matched callback\n\treadonly onMatch: onMatchCallback\n\t// error callback\n\treadonly onErr: onErrorCallback\n\t// index of start codes\n\tprotected startCodeIdx: any[]\n\t// start codes\n\tprotected startCodes: number[]\n\n\t/**\n\t * @param name\t\t\trule name\n\t * @param capturable\terror is capturable\n\t * @param onMatch\t\tcallback on matched, allow modify the match result or return an error\n\t * @param onErr\t\t\tcallback on Error, allow to ignore error or modify error message or return new error\n\t */\n\tconstructor(name: string, options: RuleOptions) {\n\t\tthis.id = idGen++\n\t\tthis.name = name\n\t\tthis.capturable = options.capturable !== false\n\t\tthis.onMatch = options.match || defaultMatch\n\t\tthis.onErr = options.err || defaultErr\n\t}\n\n\t/**\n\t * create Error\n\t * @param msg \t\t\terror message\n\t * @param context \t\tmatch context\n\t * @param capturable \tis capturable error\n\t * @param src \t\t\tsource error\n\t */\n\tmkErr(msg: string, context: MatchContext, capturable?: boolean, source?: MatchError): MatchError {\n\t\treturn new MatchError(msg, capturable, source, context, this)\n\t}\n\n\t/**\n\t * match fail\n\t * @param msg \t\t\terror message\n\t * @param context \t\tmatch context\n\t * @param capturable \tis capturable error\n\t * @param src \t\t\tsource error\n\t * @return Error|void: may ignore Error in the error callback\n\t */\n\tprotected error(msg: string, context: MatchContext, src?: MatchError, capturable?: boolean): MatchError {\n\t\tconst err = this.mkErr(msg, context, capturable, src)\n\t\tconst userErr = this.onErr(err, context, this)\n\t\tif (userErr) return (userErr as any).$ruleErr ? (userErr as MatchError) : ((err[0] = String(userErr)), err)\n\t}\n\n\t/**\n\t * match success\n\t * > attach the matched result by match callback\n\t * @param data \t\tmatched data\n\t * @param len  \t\tmatched data length\n\t * @param context \tmatch context\n\t * @return Error|void: may return Error in the match callback\n\t */\n\tprotected matched(data: any, len: number, context: MatchContext): MatchError {\n\t\tconst err = this.onMatch(data, len, context, this)\n\t\tif (err) return (err as any).$ruleErr ? (err as MatchError) : this.mkErr(String(err), context, false)\n\t}\n\n\tprotected enter(context: MatchContext) {\n\t\treturn context.create()\n\t}\n\n\t/**\n\t * match\n\t * @param context match context\n\t */\n\tmatch(context: MatchContext): MatchError {\n\t\treturn assert()\n\t}\n\n\t/**\n\t * get start char codes\n\t */\n\tgetStart(stack?: number[]): number[] {\n\t\treturn this.startCodes\n\t}\n\n\t/**\n\t * prepare test before match\n\t */\n\ttest(context: MatchContext): boolean {\n\t\treturn true\n\t}\n\n\tprotected startCodeTest(context: MatchContext): boolean {\n\t\treturn this.startCodeIdx[context.nextCode()]\n\t}\n\n\tprotected setStartCodes(start: number | string | any[], ignoreCase?: boolean) {\n\t\tconst codes: number[] = [],\n\t\t\tindex: number[] = []\n\t\teachCharCodes(start, ignoreCase, code => {\n\t\t\tif (!index[code]) {\n\t\t\t\tcodes.push(code)\n\t\t\t\tindex[code] = code\n\t\t\t}\n\t\t})\n\t\tthis.startCodes = codes\n\t\tthis.setCodeIdx(index)\n\t}\n\n\tprotected setCodeIdx(index: any[]) {\n\t\tif (index.length > 1) {\n\t\t\tthis.startCodeIdx = index\n\t\t\tthis.test = this.startCodeTest\n\t\t}\n\t}\n\n\t//──── for debug ─────────────────────────────────────────────────────────────────────────\n\t/**\n\t * make rule expression\n\t * @param expr expression text\n\t */\n\tprotected mkExpr(expr: string): string {\n\t\treturn `<${this.type}: ${expr}>`\n\t}\n\n\t/**\n\t * set rule expression\n\t * \t\t1. make rule expression\n\t * \t\t2. make Expect text\n\t */\n\tprotected setExpr(expr: string) {\n\t\tthis.expr = this.mkExpr(expr)\n\t\tthis.EXPECT = `Expect: ${expr}`\n\t}\n\n\tgetExpr(stack?: number[]): string {\n\t\treturn this.name || this.expr\n\t}\n\n\t/**\n\t * toString by name or expression\n\t */\n\ttoString(): string {\n\t\treturn this.getExpr()\n\t}\n}\n","/**\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:57:26 GMT+0800 (China Standard Time)\n */\nimport { Source } from './Source'\nimport { char, charCode, cutStr } from '../util'\nimport { assert } from '../assert'\n\nexport type CheckPoint = [number, number]\n/**\n * Match Context of Rule\n */\nexport class MatchContext {\n\t// start offset of original buff\n\treadonly source: Source\n\n\t// parent context\n\treadonly parent: MatchContext\n\n\t// matched result list\n\tresult: any[]\n\n\tdata: any\n\n\t// template buff\n\tprivate __buff: string\n\n\t// current offset of template buff\n\tprivate __offset: number\n\n\t// current offset of original buff\n\tprivate __orgOffset: number\n\n\t// advanced characters\n\tprivate __advanced: number\n\n\t// cached character\n\tprivate __code: number\n\n\tconstructor(source: Source, buff: string, offset: number, orgOffset: number, parent?: MatchContext) {\n\t\tthis.source = source\n\t\tthis.parent = parent\n\t\tthis.result = []\n\t\tthis.__buff = buff\n\t\tthis.__offset = offset\n\t\tthis.__orgOffset = orgOffset\n\t\tthis.__advanced = 0\n\t\tparent ? ((this.__code = parent.__code), (this.data = parent.data)) : this.__flushCode()\n\t}\n\n\tprivate __flushCode() {\n\t\tconst { __buff: buff, __offset: offset } = this\n\t\tthis.__code = offset < buff.length ? charCode(buff, offset) : 0\n\t}\n\n\t/**\n\t * create sub Context\n\t */\n\tcreate() {\n\t\treturn new MatchContext(this.source, this.__buff, this.__offset, this.__orgOffset + this.__advanced, this)\n\t}\n\n\tprivate __setAdvanced(advanced: number) {\n\t\tassert.notLess(advanced, 0)\n\n\t\tconst offset = this.__offset - this.__advanced + advanced\n\t\tif (offset < 0) {\n\t\t\tthis.__buff = this.source.buff\n\t\t\tthis.__offset = this.__orgOffset + advanced\n\t\t}\n\t\tthis.__advanced = advanced\n\t\tthis.__offset = offset\n\t\tthis.__flushCode()\n\t}\n\n\t/**\n\t * commit context state to parent context\n\t */\n\tcommit() {\n\t\tconst { __advanced: advanced } = this\n\t\tthis.parent.advance(advanced)\n\t\tthis.__orgOffset += advanced\n\t\tthis.__advanced = 0\n\t\tthis.data = null\n\t}\n\n\t/**\n\t * marge context state\n\t */\n\tmargeState(context: MatchContext) {\n\t\tthis.__setAdvanced(context.__orgOffset + context.__advanced - this.__orgOffset)\n\t}\n\n\t/**\n\t * rollback state and result\n\t * @param checkpoint \trollback to checkpoint\n\t */\n\trollback(checkpoint?: CheckPoint) {\n\t\tlet advanced = 0,\n\t\t\tresultLen = 0\n\n\t\tcheckpoint && ((advanced = checkpoint[0]), (resultLen = checkpoint[1]))\n\n\t\tthis.__setAdvanced(advanced)\n\n\t\tconst { result } = this\n\t\tif (result.length > resultLen) result.length = resultLen\n\t}\n\n\t/**\n\t * get a check point\n\t */\n\tcheckpoint(): CheckPoint {\n\t\treturn [this.__advanced, this.result.length]\n\t}\n\n\t/**\n\t * advance buffer position\n\t */\n\tadvance(i: number) {\n\t\tthis.__offset += i\n\t\tthis.__advanced += i\n\t\tthis.__flushCode()\n\t}\n\n\t/**\n\t * advanced buff length\n\t */\n\tadvanced(): number {\n\t\treturn this.__advanced\n\t}\n\n\t/**\n\t * get buffer\n\t * @param reset reset buffer string from 0\n\t */\n\tbuff(reset?: boolean): string {\n\t\tlet { __buff: buff } = this\n\t\tif (reset) {\n\t\t\tthis.__buff = buff = cutStr(buff, this.__offset)\n\t\t\tthis.__offset = 0\n\t\t}\n\t\treturn buff\n\t}\n\n\torgBuff() {\n\t\treturn this.source.buff\n\t}\n\n\toffset(): number {\n\t\treturn this.__offset\n\t}\n\n\tstartPos(): number {\n\t\treturn this.__orgOffset\n\t}\n\n\tcurrPos(): number {\n\t\treturn this.__orgOffset + this.__advanced\n\t}\n\n\tpos(): [number, number] {\n\t\tconst { __orgOffset: offset } = this\n\t\treturn [offset, offset + this.__advanced]\n\t}\n\n\t/**\n\t * get next char code\n\t * @return number char code number\n\t */\n\tnextCode() {\n\t\treturn this.__code\n\t}\n\n\tnextChar() {\n\t\treturn char(this.__code)\n\t}\n\n\t//──── result opeartions ───────────────────────────────────────────────────────────────────\n\t/**\n\t * append result\n\t */\n\tadd(data: any) {\n\t\tconst { result } = this\n\t\tresult[result.length] = data\n\t}\n\n\t/**\n\t * append resultset\n\t */\n\taddAll(data: any[]) {\n\t\tconst { result } = this\n\t\tconst len = result.length\n\t\tlet i = data.length\n\t\twhile (i--) result[len + i] = data[i]\n\t}\n\n\t/**\n\t * get result size\n\t */\n\tresultSize() {\n\t\treturn this.result.length\n\t}\n}\n","/**\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:56:06 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError, onMatchCallback, onErrorCallback, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { assert } from '../assert'\nimport { idxOfArray, escapeStr } from '../util'\nimport { pad } from '../format'\nimport { Source } from './Source'\n\nexport type ComplexRuleBuilder = (rule: Rule) => Rule[]\n\nconst MAX = -1 >>> 0\n/**\n * Abstract Complex Rule\n */\nexport class ComplexRule extends Rule {\n\treadonly split: string\n\tprivate builder: ComplexRuleBuilder\n\tprotected EXPECTS: string[]\n\tprotected rules: Rule[]\n\tprotected readonly rMin: number\n\tprotected readonly rMax: number\n\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param builder \t\tcallback of build rules\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, repeat: [number, number], builder: ComplexRuleBuilder, options: RuleOptions) {\n\t\tsuper(name, options)\n\n\t\tlet [rMin, rMax] = repeat\n\n\t\trMin < 0 && (rMin = 0)\n\t\trMax <= 0 && (rMax = MAX)\n\n\t\tassert.notGreater(rMin, rMax)\n\n\t\tthis.rMin = rMin\n\t\tthis.rMax = rMax\n\n\t\tthis.builder = builder\n\n\t\tif (rMin !== rMax || rMin !== 1) {\n\t\t\tthis.match = this.rmatch\n\n\t\t\t// for debug\n\t\t\tthis.type = `${this.type}[${rMin}${rMin === rMax ? '' : ` - ${rMax === MAX ? 'MAX' : rMax}`}]`\n\t\t}\n\t}\n\tparse(buff: string, data?: any): any[] {\n\t\tconst ctx = new MatchContext(new Source(buff), buff, 0, 0)\n\t\tctx.data = data\n\t\tlet err = this.match(ctx)\n\t\tif (err) {\n\t\t\tconst msg = []\n\t\t\tvar pos: [number, number, string]\n\t\t\tdo {\n\t\t\t\tpos = err.position()\n\t\t\t\tmsg.unshift(\n\t\t\t\t\t`[${pad(String(pos[0]), 3)}:${pad(String(pos[1]), 2)}] - ${err.rule.toString()}: ${\n\t\t\t\t\t\terr.msg\n\t\t\t\t\t} on \"${escapeStr(pos[2])}\"`\n\t\t\t\t)\n\t\t\t} while ((err = err.source))\n\t\t\tmsg.push('[Source]', ctx.source.source())\n\t\t\tthrow new SyntaxError(msg.join('\\n'))\n\t\t}\n\t\treturn ctx.result\n\t}\n\tinit(): ComplexRule {\n\t\tconst rules = this.builder(this)\n\t\tlet i = rules && rules.length\n\n\t\tassert.is(i, `Require Complex Rules`)\n\n\t\tthis.rules = rules\n\n\t\t// generate expression and expect string for debug\n\t\tconst names = this.rnames(rules)\n\t\tthis.setExpr(names.join(this.split))\n\t\twhile (i--) names[i] = `Expect[${i}]: ${names[i]}`\n\t\tthis.EXPECTS = names\n\n\t\tthis.__init(rules)\n\n\t\tthis.builder = null\n\n\t\treturn this\n\t}\n\t__init(rules: Rule[]) {}\n\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\treturn assert()\n\t}\n\n\tprotected setCodeIdx(index: any[]) {\n\t\tthis.rMin && super.setCodeIdx(index)\n\t}\n\n\tgetRules(): Rule[] {\n\t\treturn this.rules || (this.init(), this.rules)\n\t}\n\n\tgetStart(stack?: number[]): number[] {\n\t\tconst { id, startCodes } = this\n\t\treturn startCodes\n\t\t\t? startCodes\n\t\t\t: (stack && ~idxOfArray(stack, id)) || this.rules\n\t\t\t? []\n\t\t\t: (this.init(), this.startCodes)\n\t}\n\n\tconsume(context: MatchContext): MatchError {\n\t\tconst err = this.matched(context.result, context.advanced(), context.parent)\n\t\t!err && context.commit()\n\t\treturn err\n\t}\n\n\t// for debug\n\tprivate rnames(rules: Rule[], stack?: number[]): string[] {\n\t\tlet i = rules.length\n\t\tconst names: string[] = new Array(i),\n\t\t\tid = this.id\n\t\twhile (i--) names[i] = rules[i].getExpr(stack ? stack.concat(id) : [id])\n\t\treturn names\n\t}\n\n\tgetExpr(stack?: number[]): string {\n\t\tconst { id, name } = this\n\t\tlet i: number\n\n\t\treturn name\n\t\t\t? name\n\t\t\t: stack\n\t\t\t? ~(i = idxOfArray(stack, id))\n\t\t\t\t? `<${this.type} -> $${stack[i]}>`\n\t\t\t\t: this.mkExpr(this.rnames(this.getRules(), stack).join(this.split))\n\t\t\t: this.expr\n\t}\n}\n","/**\n *\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:09:18 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError } from './Rule'\nimport { MatchContext, CheckPoint } from './MatchContext'\nimport { ComplexRule } from './ComplexRule'\nimport { mixin } from '../util'\n\n/**\n * AND Complex Rule\n */\n@mixin({ type: 'And', split: ' ' })\nexport class AndRule extends ComplexRule {\n\t__init(rules: Rule[]) {\n\t\tthis.setStartCodes(rules[0].getStart([this.id]))\n\t}\n\tmatch(context: MatchContext): MatchError {\n\t\tconst rules = this.getRules(),\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\t\tlet err: MatchError,\n\t\t\ti: number = 0\n\t\tfor (; i < len; i++) if ((err = this.testRule(rules[i], i, ctx))) return err\n\t\treturn this.consume(ctx)\n\t}\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\tconst { rMin, rMax } = this\n\t\tconst rules = this.getRules(),\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\n\t\tlet err: MatchError,\n\t\t\trepeat: number = 0,\n\t\t\ti: number,\n\t\t\tcp: CheckPoint\n\n\t\tout: for (; repeat < rMax; repeat++) {\n\t\t\tcp = ctx.checkpoint()\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif ((err = this.testRule(rules[i], i, ctx))) {\n\t\t\t\t\tif (repeat < rMin) return err\n\t\t\t\t\tctx.rollback(cp)\n\t\t\t\t\tbreak out\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.consume(ctx)\n\t}\n\ttestRule(rule: Rule, i: number, ctx: MatchContext): MatchError {\n\t\tlet err: MatchError\n\t\tif (!rule.test(ctx)) {\n\t\t\treturn this.error(this.EXPECTS[i], ctx)\n\t\t} else if ((err = rule.match(ctx))) {\n\t\t\treturn this.error(this.EXPECTS[i], ctx, err)\n\t\t}\n\n\t\t// return (!rule.test(ctx) || (err = rule.match(ctx))) && (err = this.error(this.EXPECTS[i], ctx, err))\n\t}\n}\n","/**\n *\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:09:35 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError } from './Rule'\nimport { MatchContext, CheckPoint } from './MatchContext'\nimport { ComplexRule } from './ComplexRule'\nimport { eachCharCodes } from './util'\nimport { mixin } from '../util'\n\n/**\n * OR Complex Rule\n */\n@mixin({ type: 'Or', split: ' | ' })\nexport class OrRule extends ComplexRule {\n\tindex: Rule[][]\n\t__init(rules: Rule[]) {\n\t\tconst { id } = this\n\t\tconst len = rules.length,\n\t\t\tstarts: number[] = [], // all distinct start codes\n\t\t\trStarts: number[][] = [], // start codes per rule\n\t\t\tindex: Rule[][] = [\n\t\t\t\t[] // rules which without start code\n\t\t\t]\n\n\t\tlet i: number, j: number, k: Rule[] & { idx: number }, codes: number[]\n\n\t\t// get start codes of all rules\n\t\tfor (i = 0; i < len; i++) {\n\t\t\trStarts[i] = [] // init rule start codes\n\t\t\teachCharCodes(rules[i].getStart([id]), false, code => {\n\t\t\t\trStarts[i].push(code) // append to rule start codes\n\t\t\t\tif (!index[code]) {\n\t\t\t\t\tindex[code] = [] // init start code index\n\t\t\t\t\tstarts.push(code) // append to all start codes\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// fill index\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tcodes = rStarts[i] // append rule to start code index by rule start codes\n\t\t\tif (!codes.length) {\n\t\t\t\t// rule without start code\n\t\t\t\tindex[0].push(rules[i]) // append rule to index[0]\n\t\t\t\tcodes = starts // append rule to start code index by all start codes\n\t\t\t}\n\n\t\t\t// append rule to start code index (by rule start codes or all start codes)\n\t\t\tj = codes.length\n\t\t\twhile (j--) {\n\t\t\t\tk = index[codes[j]] as Rule[] & { idx: number }\n\t\t\t\tif (k.idx !== i) {\n\t\t\t\t\t// deduplication\n\t\t\t\t\tk.push(rules[i]) // append rules[i] to start code index[codes[j]]\n\t\t\t\t\tk.idx = i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// rule have unkown start code when got unkown start code from any rules\n\t\tconst startCodes = !index[0].length && starts\n\t\tthis.startCodes = startCodes || []\n\t\tstartCodes && this.setCodeIdx(index)\n\t\tthis.index = index\n\t}\n\n\tmatch(context: MatchContext): MatchError {\n\t\tconst index = this.index || (this.init(), this.index),\n\t\t\trules: Rule[] = index[context.nextCode()] || index[0],\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\n\t\tlet err: MatchError,\n\t\t\tupErr: MatchError,\n\t\t\ti = 0\n\n\t\tfor (; i < len; i++) {\n\t\t\terr = rules[i].match(ctx) || this.consume(ctx)\n\t\t\tif (!err) return\n\t\t\tif (!err.capturable) {\n\t\t\t\tupErr = err\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (!upErr || err.pos >= upErr.pos) upErr = err\n\t\t\tctx.rollback()\n\t\t}\n\t\treturn this.error(this.EXPECT, ctx, upErr)\n\t}\n\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\tconst { rMin, rMax } = this\n\t\tconst index = this.index || (this.init(), this.index),\n\t\t\tctx = context.create()\n\n\t\tlet rules: Rule[],\n\t\t\tlen: number,\n\t\t\terr: MatchError,\n\t\t\tupErr: MatchError,\n\t\t\trepeat: number = 0,\n\t\t\ti: number,\n\t\t\tcp: CheckPoint\n\n\t\tout: for (; repeat < rMax; repeat++) {\n\t\t\trules = index[ctx.nextCode()] || index[0]\n\t\t\tupErr = null\n\t\t\tif ((len = rules.length)) {\n\t\t\t\tcp = ctx.checkpoint()\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\terr = rules[i].match(ctx)\n\t\t\t\t\tif (!err) continue out\n\t\t\t\t\tif (!err.capturable) {\n\t\t\t\t\t\tupErr = err\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tif (!upErr || err.pos >= upErr.pos) upErr = err\n\t\t\t\t\tctx.rollback(cp)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (repeat < rMin || (upErr && !upErr.capturable)) return this.error(this.EXPECT, ctx, upErr)\n\t\t\tbreak\n\t\t}\n\t\treturn this.consume(ctx)\n\t}\n}\n","/**\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:11:19 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\n\n/**\n * Match Rule Interface\n */\nexport class MatchRule extends Rule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param start \t\tstart char codes, prepare test by start char codes before match\n\t * @param ignoreCase\tignore case for the start char codes\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, start: number | string | any[], ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, options)\n\t\tthis.setStartCodes(start, ignoreCase)\n\t}\n\n\t/**\n\t * consume matched result\n\t * @param data \t\tmatched result\n\t * @param len \t\tmatched chars\n\t * @param context \tmatch context\n\t */\n\tcomsume(data: string | string[], len: number, context: MatchContext): MatchError {\n\t\tcontext.advance(len)\n\t\treturn this.matched(data, len, context)\n\t}\n}\n","/**\n *\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:57:09 GMT+0800 (China Standard Time)\n */\n\nimport { RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { MatchRule } from './MatchRule'\nimport { char, mixin } from '../util'\n\n/**\n * match a character in the allowed list\n * > well match any character if the allowed list is empty\n *\n * > must call test() before match\n */\n@mixin({ type: 'Character' })\nexport class CharMatchRule extends MatchRule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param allows \t\tallowed character codes for match\n\t * \t\t\t\t\t\twell match any character if the allowed list is empty\n\t * @param ignoreCase\tignore case for the allowed character codes\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, allows: number | string | any[], ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, allows, ignoreCase, options)\n\n\t\t// generate expression for debug\n\t\tconst codes = this.startCodes\n\t\tlet i = codes.length,\n\t\t\texpr = '*'\n\t\tif (i) {\n\t\t\tconst chars = []\n\t\t\twhile (i--) chars[i] = char(codes[i])\n\t\t\texpr = `\"${chars.join('\" | \"')}\"`\n\t\t}\n\t\tthis.setExpr(expr)\n\t}\n\tmatch(context: MatchContext) {\n\t\treturn this.comsume(context.nextChar(), 1, context)\n\t}\n}\n","/**\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:58:09 GMT+0800 (China Standard Time)\n */\n\nimport { MatchError, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { MatchRule } from './MatchRule'\nimport { mixin, createFn, create, mapArray, cutLStr, stickyReg, isInt } from '../util'\n\n/**\n * match string by RegExp\n *\n * optimization:\n * - Priority use sticky mode {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky}\n *\n */\n@mixin({ type: 'RegExp' })\nexport class RegMatchRule extends MatchRule {\n\treadonly regexp: RegExp\n\treadonly pick: boolean | number\n\tprivate picker: (m: string[]) => string | string[]\n\tprivate spicker: (buff: string, start: number, end: number) => string\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param regexp\t\tregular\n\t * @param pick\t\t\tpick regular matching results\n\t * \t\t\t\t\t\t    0: pick results[0] (optimize: test and substring in sticky mode)\n\t * \t\t\t\t\t\t  > 0: pick results[{pick}]\n\t * \t\t\t\t\t\t  < 0: pick first non-blank string from 1 to -{pick} index on results\n\t * \t\t\t\t\t\t true: pick results\n\t * \t\t\t\t\t\tfalse: not pick result, result is null (optimize: just test string in sticky mode)\n\t * @param start\t\t\tstart character codes in the regular, optimize performance by start character codes\n\t * @param capturable\terror is capturable\n\t * @param onMatch\t\tmatch callback\n\t * @param onErr\t\t\terror callback\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tregexp: RegExp,\n\t\tpick: boolean | number,\n\t\tstart: number | string | any[],\n\t\toptions: RuleOptions\n\t) {\n\t\tpick = pick === false || isInt(pick) ? pick : !!pick || 0\n\n\t\tconst sticky = stickyReg && !pick, // use exec mode when need pick match group data\n\t\t\tpattern = regexp.source,\n\t\t\tignoreCase = regexp.ignoreCase\n\n\t\t// always wrapping in a none capturing group preceded by '^' to make sure\n\t\t// matching can only work on start of input. duplicate/redundant start of\n\t\t// input markers have no meaning (/^^^^A/ === /^A/)\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\n\t\t// When the y flag is used with a pattern, ^ always matches only at the\n\t\t// beginning of the input, or (if multiline is true) at the beginning of a\n\t\t// line.\n\t\tregexp = new RegExp(\n\t\t\tsticky ? pattern : `^(?:${pattern})`,\n\t\t\t(ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '') + (sticky ? 'y' : '')\n\t\t)\n\n\t\tsuper(name, start, ignoreCase, options)\n\n\t\tthis.regexp = regexp\n\t\tthis.pick = pick\n\t\tthis.match = sticky ? this.stickyMatch : this.execMatch\n\n\t\tsticky ? (this.spicker = pick === false ? pickNone : pickTestStr) : (this.picker = mkPicker(pick))\n\n\t\tthis.setExpr(pattern)\n\t}\n\t/**\n\t * match on sticky mode\n\t */\n\tstickyMatch(context: MatchContext): MatchError {\n\t\tconst reg = this.regexp,\n\t\t\tbuff = context.buff(),\n\t\t\tstart = context.offset()\n\t\treg.lastIndex = start\n\t\tlet len: number\n\t\treturn reg.test(buff)\n\t\t\t? ((len = reg.lastIndex - start), this.comsume(this.spicker(buff, start, len), len, context))\n\t\t\t: this.error(this.EXPECT, context)\n\t}\n\t/**\n\t * match on exec mode\n\t */\n\texecMatch(context: MatchContext): MatchError {\n\t\tconst m = this.regexp.exec(context.buff(true))\n\t\treturn m ? this.comsume(this.picker(m), m[0].length, context) : this.error(this.EXPECT, context)\n\t}\n}\n\nconst cache = create(null)\nfunction mkPicker(pick: number | boolean): (m: string[]) => string | string[] {\n\treturn (\n\t\tcache[pick as any] ||\n\t\t(cache[pick as any] =\n\t\t\tpick === false\n\t\t\t\t? pickNone\n\t\t\t\t: pick === true\n\t\t\t\t? pickAll\n\t\t\t\t: pick >= 0\n\t\t\t\t? createFn(`return m[${pick}]`, ['m'], `pick_${pick}`)\n\t\t\t\t: createFn(\n\t\t\t\t\t\t`return ${mapArray(new Array(-pick), (v, i) => `m[${i + 1}]`).join(' || ')}`,\n\t\t\t\t\t\t['m'],\n\t\t\t\t\t\t`pick_1_${-pick}`\n\t\t\t\t  ))\n\t)\n}\n\nfunction pickNone(): string {\n\treturn null\n}\n\nfunction pickAll(m: string[]): string[] {\n\treturn m\n}\n\nfunction pickTestStr(buff: string, start: number, end: number): string {\n\treturn cutLStr(buff, start, end)\n}\n","/**\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:58:56 GMT+0800 (China Standard Time)\n */\n\nimport { RuleOptions } from './Rule'\nimport { RegMatchRule } from './RegMatchRule'\nimport { reEscape, mixin, charCode } from '../util'\n\n@mixin({ type: 'String' })\nexport class StringMatchRule extends RegMatchRule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param str \t\t\tmatch string\n\t * @param ignoreCase\tignore case\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, str: string, ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, new RegExp(reEscape(str), ignoreCase ? 'i' : ''), 0, charCode(str), options)\n\t\tthis.setExpr(str)\n\t}\n}\n","/**\n * AST Parser API\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:58:52 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:59:23 GMT+0800 (China Standard Time)\n */\n\nimport { ComplexRuleBuilder } from './ComplexRule'\nimport { CharMatchRule } from './CharMatchRule'\nimport { StringMatchRule } from './StringMatchRule'\nimport { RegMatchRule } from './RegMatchRule'\nimport { onMatchCallback, onErrorCallback, Rule, MatchError, RuleOptions } from './Rule'\nimport { MatchRule } from './MatchRule'\nimport { AndRule } from './AndRule'\nimport { OrRule } from './OrRule'\nimport { MatchContext } from './MatchContext'\nimport { mapArray, SKIP, isObj, isReg, isStr, isBool, isNum, isInt, isArray, isArrayLike, isFn } from '../util'\nimport { EMPTY_FN } from '../util/consts'\nimport { assert } from '../assert'\n\n//========================================================================================\n/*                                                                                      *\n *                                      match tools                                     *\n *                                                                                      */\n//========================================================================================\n\nexport const discardMatch: onMatchCallback = EMPTY_FN\n\nexport function appendMatch(data: any, len: number, context: MatchContext) {\n\tcontext.addAll(data)\n}\nexport function attachMatch(\n\tcallback: (data: any, len: number, context: MatchContext, rule: Rule) => any\n): onMatchCallback\nexport function attachMatch(val: any): onMatchCallback\nexport function attachMatch(val: any) {\n\tconst callback: (data: any, len: number, context: MatchContext, rule: Rule) => any = isFn(val) ? val : () => val\n\treturn (data: any, len: number, context: MatchContext, rule: Rule) => {\n\t\tcontext.add(callback(data, len, context, rule))\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       match api                                      *\n *                                                                                      */\n//========================================================================================\n\nexport function match(desc: MatchRuleDescriptor): MatchRule\n\n//──── named regexp match api ────────────────────────────────────────────────────────────\n// pick, start, cap\n// pick, cap\n// pick, start\n// pick\n// start, cap\n// start\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick?: boolean | number,\n\tstartCodes?: number | string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tstartCodes: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(name: string, pattern: RegExp, onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\n//──── regexp match api ──────────────────────────────────────────────────────────────────\nexport function match(\n\tpattern: RegExp,\n\tpick?: boolean | number,\n\tstartCodes?: number | string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tstartCodes: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(pattern: RegExp, onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\n//──── named string match api ────────────────────────────────────────────────────────────\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tignoreCase?: boolean,\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tignoreCase: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\n//──── string match api ──────────────────────────────────────────────────────────────────\nexport function match(\n\tpattern: number | string | any[],\n\tignoreCase?: boolean,\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tpattern: number | string | any[],\n\tignoreCase: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(pattern: number | string | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\nexport function match(): MatchRule {\n\treturn mkMatch(arguments)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     and rule api                                     *\n *                                                                                      */\n//========================================================================================\n\n//──── and ───────────────────────────────────────────────────────────────────────────────\nexport function and(desc: ComplexRuleDescriptor): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function and(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [1, 1])\n}\n\n//──── and any ───────────────────────────────────────────────────────────────────────────\nexport function any(desc: ComplexRuleDescriptor): AndRule\nexport function any(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function any(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [0, -1])\n}\n\n//──── and many ──────────────────────────────────────────────────────────────────────────\nexport function many(desc: ComplexRuleDescriptor): AndRule\nexport function many(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function many(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [1, -1])\n}\n\n//──── and option ────────────────────────────────────────────────────────────────────────\nexport function option(desc: ComplexRuleDescriptor): AndRule\nexport function option(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [0, 1])\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      or rule api                                     *\n *                                                                                      */\n//========================================================================================\n\n//──── or ────────────────────────────────────────────────────────────────────────────────\nexport function or(desc: ComplexRuleDescriptor): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): OrRule\nexport function or(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [1, 1])\n}\n\n//──── or any ────────────────────────────────────────────────────────────────────────────\nexport function anyOne(desc: ComplexRuleDescriptor): OrRule\nexport function anyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [0, -1])\n}\n\n//──── or many ───────────────────────────────────────────────────────────────────────────\nexport function manyOne(desc: ComplexRuleDescriptor): OrRule\nexport function manyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [1, -1])\n}\n\n//──── or option ─────────────────────────────────────────────────────────────────────────\nexport function optionOne(desc: ComplexRuleDescriptor): OrRule\nexport function optionOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [0, 1])\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                  Match Rule Builder                                  *\n *                                                                                      */\n//========================================================================================\n\nexport type MatchRuleDescriptor = {\n\tname?: string\n\tpattern: RegExp | number | string | any[]\n\tpick?: boolean | number\n\tstartCodes?: number | string | any[]\n\tignoreCase?: boolean\n} & RuleOptions\n\nfunction mkMatch(args: IArguments | any[], defaultMatchCallback?: onMatchCallback): MatchRule {\n\tlet name: string,\n\t\tpattern: number | string | any[],\n\t\tregexp: RegExp,\n\t\tpick: boolean | number = 0,\n\t\tstartCodes: number | string | any[],\n\t\tignoreCase: boolean = false,\n\t\toptions: RuleOptions\n\tif (isObj(args[0])) {\n\t\tconst desc = args[0] as MatchRuleDescriptor,\n\t\t\tp = desc.pattern\n\t\tif (isReg(p)) {\n\t\t\tregexp = p as RegExp\n\t\t\tpick = desc.pick\n\t\t\tstartCodes = desc.startCodes\n\t\t} else if (isStrOrCodes(p)) {\n\t\t\tpattern = p as number | string | any[]\n\t\t\tignoreCase = desc.ignoreCase\n\t\t}\n\t\tname = desc.name\n\t\toptions = desc\n\t} else {\n\t\tvar i = 1\n\t\tif (isStr(args[0]) && isMatchPattern(args[1])) {\n\t\t\tname = args[0]\n\t\t\tisReg(args[1]) ? (regexp = args[1]) : (pattern = args[1])\n\t\t\ti = 2\n\t\t} else if (isMatchPattern(args[0])) {\n\t\t\tisReg(args[0]) ? (regexp = args[0]) : (pattern = args[0])\n\t\t}\n\n\t\tif (regexp) {\n\t\t\tif (isBool(args[i]) || isInt(args[i])) pick = args[i++]\n\t\t\tif (isStrOrCodes(args[i])) startCodes = args[i++]\n\t\t} else {\n\t\t\tif (isBool(args[i])) ignoreCase = args[i++]\n\t\t}\n\t\toptions = parseRuleOptions(args, i)\n\t}\n\n\t!options.match && (options.match = defaultMatchCallback)\n\n\treturn regexp\n\t\t? new RegMatchRule(name, regexp, options.match === discardMatch ? false : pick, startCodes, options)\n\t\t: pattern\n\t\t? strMatch(name, pattern, ignoreCase, options)\n\t\t: assert('invalid match rule {j}', args)\n}\n\nfunction isStrOrCodes(pattern): boolean {\n\treturn isStr(pattern) || isNum(pattern) || isArray(pattern)\n}\n\nfunction isMatchPattern(pattern): boolean {\n\treturn isReg(pattern) || isStrOrCodes(pattern)\n}\n\nfunction strMatch(name: string, pattern: string | number | any[], ignoreCase: boolean, options: RuleOptions) {\n\tconst C = isStr(pattern) && (pattern as string).length > 1 ? StringMatchRule : CharMatchRule\n\treturn new C(name, pattern, ignoreCase, options)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                 complex rule builder                                 *\n *                                                                                      */\n//========================================================================================\n\nexport type ComplexRuleDescriptor = {\n\tname?: string\n\trules: ((rule: Rule) => any[]) | any[]\n\trepeat?: [number, number]\n\tcapturable?: boolean\n\tonMatch?: onMatchCallback\n\tonErr?: onErrorCallback\n} & RuleOptions\n\nfunction mkComplexRule<T extends AndRule | OrRule>(\n\targs: IArguments,\n\tRule: typeof AndRule | typeof OrRule,\n\tdefaultRepeat: [number, number]\n): T {\n\tlet name: string,\n\t\tbuilder: ComplexRuleBuilder,\n\t\trules: ((rule: Rule) => any[]) | any[],\n\t\trepeat: [number, number],\n\t\toptions: RuleOptions\n\tif (isObj(args[0])) {\n\t\tconst desc = args[0] as ComplexRuleDescriptor,\n\t\t\tr = desc.rules\n\t\tif (isArray(r) || isFn(r)) rules = r\n\t\trepeat = desc.repeat\n\t\tname = desc.name\n\t\toptions = desc\n\t} else {\n\t\tvar i = 0\n\t\tif (isStr(args[i])) name = args[i++]\n\t\tif (isArray(args[i]) || isFn(args[i])) rules = args[i++]\n\t\tif (isArray(args[i])) repeat = args[i++]\n\t\toptions = parseRuleOptions(args, i)\n\t}\n\tif (!repeat) repeat = defaultRepeat\n\tif (rules) {\n\t\tbuilder = rulesBuilder(rules)\n\t\treturn new Rule(name, repeat, builder, options) as T\n\t}\n}\n\nfunction rulesBuilder(rules: ((rule: Rule) => any[]) | any[]): (rule: Rule) => Rule[] {\n\treturn function(_rule) {\n\t\treturn mapArray(isFn(rules) ? (rules as ((rule: Rule) => any[]))(_rule) : (rules as any[]), (r, i) => {\n\t\t\tif (!r) return SKIP\n\t\t\tlet rule: Rule = r.$rule ? r : mkMatch(isArray(r) ? r : [r], discardMatch)\n\t\t\tassert.is(rule, '{}: Invalid Rule Configuration on index {d}: {j}', _rule, i, r)\n\t\t\treturn rule\n\t\t})\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         tools                                        *\n *                                                                                      */\n//========================================================================================\n\nfunction parseRuleOptions(args: IArguments | any[], i: number) {\n\tconst options: RuleOptions = {}\n\tif (isBool(args[i])) options.capturable = args[i++]\n\toptions.match = args[i++]\n\toptions.err = args[i]\n\treturn options\n}\n","/**\n *\n * @module util/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 11:36:55 GMT+0800 (China Standard Time)\n */\n\nexport * from './Source'\nexport * from './Rule'\nexport * from './MatchContext'\nexport * from './ComplexRule'\nexport * from './AndRule'\nexport * from './OrRule'\nexport * from './api'\nexport { genCharCodes } from './util'\n","/**\n *\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:32:29 GMT+0800 (China Standard Time)\n */\n\nimport { addDKey } from '../util'\n\n/**\n * Observer Key\n */\nexport const OBSERVER_KEY = addDKey('__observer__')\n\n/**\n * the property of observe an array change\n */\nexport const ARRAY_CHANGE = '$change',\n\tARRAY_LENGTH = 'length'\n\nexport type ObserverTarget = any[] | {}\n\n/**\n * change callback for observer\n * @param path \t\tthe observe path\n * @param value \tnew value\n * @param original\toriginal value\n */\nexport type ObserverCallback<T extends ObserverTarget> = (\n\tpath: string[],\n\tvalue: any,\n\toriginal: any,\n\tobserver: IObserver<T>\n) => void\n\nexport type IWatcher = {\n\t/**\n\t * notify topics\n\t * @param original the original value\n\t */\n\tnotify(original: any): void\n}\n\nexport interface IObserver<T extends ObserverTarget> {\n\t/**\n\t * target of the observer\n\t */\n\treadonly target: T\n\n\t/**\n\t * observer proxy\n\t */\n\treadonly proxy: T\n\n\t/**\n\t * is array object\n\t */\n\treadonly isArray: boolean\n\n\t/**\n\t * observe changes in the observer's target\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t * @return listen-id\n\t */\n\tobserve(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): string\n\n\t/**\n\t * get listen-id of callback in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t * @return listen-id\n\t */\n\tobserved(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): string\n\n\t/**\n\t * has listen-id in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param id\t\tlisten-id\n\t * @return listen-id\n\t */\n\tobservedId(propPath: string | string[], id: string): boolean\n\n\t/**\n\t * cancel observing the changes in the observer's target\n\t * @param propPath\tproperty path for unobserve, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t */\n\tunobserve(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): void\n\n\t/**\n\t * cancel observing the changes in the observer's target by listen-id\n\t * @param propPath\tproperty path for unobserve, parse string path by {@link parsePath}\n\t * @param id \t\tlisten-id\n\t */\n\tunobserveId(propPath: string | string[], id: string): void\n\n\t/**\n\t * set value\n\t * @param propPath \tproperty path for set, parse string path by {@link parsePath}\n\t * @param value\t\tthe value\n\t */\n\tset(propPath: string | string[], value: any): void\n\n\t/**\n\t * get value\n\t * @param propPath \tproperty path for get, parse string path by {@link parsePath}\n\t * @return the value\n\t */\n\tget(propPath: string | string[]): any\n\n\t/**\n\t * notify change on the property\n\t * @param prop\t\tthe property\n\t * @param original \tthe original value\n\t */\n\tnotify(prop: string, original: any): void\n\n\t/**\n\t * notify the observer that properties in the target have changed\n\t *\n\t * @param props \t\tnotify properties, notify all watchers when the props is null or undefined\n\t * @param getOriginal\tget the original value\n\t * @param execludes\t\tdo not notify watchers in execludes\n\t */\n\tnotifies(\n\t\tprops: string[],\n\t\tgetOriginal: (prop: string, ob: IObserver<T>) => any,\n\t\texecludes?: { [key: string]: any }\n\t): void\n\n\t/**\n\t * get wather by property\n\t * @param prop the property\n\t */\n\twatcher(prop: string): IWatcher\n\n\t/**\n\t * get or create wather by property\n\t * @param prop the property\n\t */\n\tinitWatcher(prop: string): IWatcher\n}\n","/**\n * Observe implementation on the Proxy of ES6\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Tue Apr 09 2019 10:49:10 GMT+0800 (China Standard Time)\n */\n\nimport { IObserver, ObserverTarget, IWatcher, ARRAY_CHANGE } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport { GLOBAL } from '../util/consts'\n\n/**\n * @ignore\n */\nexport default function(): ObservePolicy {\n\tif (GLOBAL.Proxy)\n\t\treturn {\n\t\t\t__name: 'Proxy',\n\t\t\t__proxy: 'proxy',\n\t\t\t__createProxy<T extends ObserverTarget>(observer: IObserver<T>, target: T, isArray: boolean): T {\n\t\t\t\tlet setter: (source: ObserverTarget, prop: string, value: any) => boolean\n\t\t\t\tif (isArray) {\n\t\t\t\t\tconst changeWatcher: IWatcher = observer.initWatcher(ARRAY_CHANGE)\n\t\t\t\t\tsetter = (source, prop, value) => {\n\t\t\t\t\t\tconst watcher: IWatcher = observer.watcher(prop)\n\t\t\t\t\t\twatcher && watcher.notify(source[prop])\n\t\t\t\t\t\tsource[prop] = value\n\t\t\t\t\t\tchangeWatcher.notify(observer.proxy)\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetter = (source, prop, value) => {\n\t\t\t\t\t\tconst watcher: IWatcher = observer.watcher(prop)\n\t\t\t\t\t\twatcher && watcher.notify(source[prop])\n\t\t\t\t\t\tsource[prop] = value\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn new Proxy(target, {\n\t\t\t\t\tset: setter\n\t\t\t\t}) as T\n\t\t\t}\n\t\t}\n}\n","/**\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Apr 04 2019 20:42:20 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 13:31:48 GMT+0800 (China Standard Time)\n */\n\nimport { ARRAY_LENGTH, ARRAY_CHANGE, IObserver, OBSERVER_KEY } from './IObserver'\nimport { eachObj, eachArray, isFn, applyScope, defValue, SKIP } from '../util'\nimport { P_PROTOTYPE } from '../util/consts'\n\ntype ArrayHook = [string, (...args: any[]) => any]\nconst arrayHooks = []\nconst ARRAY_LEN_CHANGE = [ARRAY_LENGTH, ARRAY_CHANGE]\nconst arrayHookCfg: {\n\t[methods: string]: [string[]?, { [prop: string]: any }?] | ((ob: IObserver<any[]>, args: IArguments) => void)\n} = {\n\tpush: [ARRAY_LEN_CHANGE],\n\tpop: [ARRAY_LEN_CHANGE],\n\tsplice(ob: IObserver<any[]>, args: IArguments) {\n\t\tconst { target, proxy } = ob\n\t\tconst start = args[0],\n\t\t\td = args.length - 2 - args[1]\n\t\tob.notifies(null, prop =>\n\t\t\tprop === ARRAY_CHANGE\n\t\t\t\t? proxy\n\t\t\t\t: prop === ARRAY_LENGTH\n\t\t\t\t? d\n\t\t\t\t\t? target[prop]\n\t\t\t\t\t: SKIP\n\t\t\t\t: prop > start && (d || prop < start + args[1])\n\t\t\t\t? target[prop]\n\t\t\t\t: SKIP\n\t\t)\n\t},\n\tshift: [],\n\tunshift: [],\n\t'fill,reverse,sort': [null, { length: 1 }]\n}\neachObj(arrayHookCfg, (hooker, methods) => {\n\teachArray(methods.split(','), method => {\n\t\tconst fn = Array[P_PROTOTYPE][method]\n\t\tlet hook: (...args: any[]) => any\n\t\tif (isFn(hooker)) {\n\t\t\tconst cb: (ob: IObserver<any[]>, args: IArguments) => void = hooker as ((ob: IObserver<any[]>) => void)\n\t\t\thook = function() {\n\t\t\t\tconst ob: IObserver<any[]> = this[OBSERVER_KEY]\n\t\t\t\tcb(ob, arguments)\n\t\t\t\treturn applyScope(fn, ob.target, arguments)\n\t\t\t}\n\t\t} else {\n\t\t\tconst [props, execludes] = hooker as [string[]?, { [prop: string]: any }?]\n\t\t\thook = function() {\n\t\t\t\tconst ob: IObserver<any[]> = this[OBSERVER_KEY]\n\t\t\t\tob.notifies(props, getArrayOriginValue, execludes)\n\t\t\t\treturn applyScope(fn, ob.target, arguments)\n\t\t\t}\n\t\t}\n\t\tarrayHooks.push([method, hook])\n\t})\n})\n\nfunction getArrayOriginValue(prop: string, ob: IObserver<any[]>) {\n\treturn prop === ARRAY_CHANGE ? ob.proxy : ob.target[prop]\n}\n\n/**\n * apply observer hooks on Array\n * @param array\n */\nexport function applyArrayHooks(array: any[]) {\n\tlet hook: ArrayHook,\n\t\ti = arrayHooks.length\n\twhile (i--) {\n\t\thook = arrayHooks[i]\n\t\tdefValue(array, hook[0], hook[1], false, false, false)\n\t}\n}\n","/**\n * Observe implementation on the Object.defineProperty of ES5 or `__defineGetter__` and `__defineSetter__`\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 20:46:05 GMT+0800 (China Standard Time)\n */\n\nimport { IObserver, IWatcher, ARRAY_CHANGE, ObserverTarget, ARRAY_LENGTH } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport { propAccessor, defProp } from '../util'\nimport { applyArrayHooks } from './arrayHook'\n\n/**\n * @ignore\n */\nexport default function(): ObservePolicy {\n\tif (propAccessor)\n\t\treturn {\n\t\t\t__name: 'Accessor',\n\t\t\t__createProxy<T extends ObserverTarget>(observer: IObserver<T>, target: T, isArray: boolean): T {\n\t\t\t\tisArray && applyArrayHooks(target as any[])\n\t\t\t\treturn target\n\t\t\t},\n\t\t\t__watch<T extends ObserverTarget>(observer: IObserver<T>, prop: string, watcher: IWatcher): Error {\n\t\t\t\tconst { target } = observer\n\t\t\t\tlet setter: (newValue: any) => void\n\t\t\t\tif (!observer.isArray) {\n\t\t\t\t\tsetter = (newValue: any) => {\n\t\t\t\t\t\twatcher.notify(value)\n\t\t\t\t\t\tvalue = newValue\n\t\t\t\t\t}\n\t\t\t\t} else if (prop !== ARRAY_CHANGE && prop !== ARRAY_LENGTH) {\n\t\t\t\t\tconst changeWatcher: IWatcher = observer.initWatcher(ARRAY_CHANGE)\n\t\t\t\t\tsetter = (newValue: any) => {\n\t\t\t\t\t\twatcher.notify(value)\n\t\t\t\t\t\tvalue = newValue\n\t\t\t\t\t\tchangeWatcher.notify(target)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tvar value: any = target[prop]\n\t\t\t\ttry {\n\t\t\t\t\tdefProp(target, prop, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: setter\n\t\t\t\t\t})\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn e\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\n","/**\n * Observe implementation on the VBScript of MSIE\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 20:45:57 GMT+0800 (China Standard Time)\n */\nimport { ObserverTarget, IWatcher, IObserver } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport { GLOBAL, P_CTOR, P_OWNPROP } from '../util/consts'\nimport { create, isFn, getDKeys, addDKeys } from '../util'\nimport { applyArrayHooks } from './arrayHook';\n\ndeclare function execScript(code: string, type: string): void\ndeclare function parseVB(code: string): void\n\nexport default function(): ObservePolicy {\n\tif (GLOBAL.VBArray) {\n\t\ttry {\n\t\t\texecScript(['Function parseVB(code)', '\\tExecuteGlobal(code)', 'End Function'].join('\\n'), 'VBScript')\n\n\t\t\taddDKeys(VBPROXY_KEY, VBPROXY_CTOR_KEY)\n\n\t\t\treturn {\n\t\t\t\t__name: 'VBProxy',\n\t\t\t\t__proxy: 'vb',\n\t\t\t\t__createProxy<T extends ObserverTarget>(observer: IObserver<T>, target: T, isArray: boolean): T {\n\t\t\t\t\treturn isArray ? (applyArrayHooks(target as any[]), target) : new VBProxy(target, observer).__proxy\n\t\t\t\t},\n\t\t\t\t__watch<T extends ObserverTarget>(observer: IObserver<T>, prop: string, watcher: IWatcher): Error {\n\t\t\t\t\tif (!observer.isArray && !observer.target[VBPROXY_KEY].__props[prop]) {\n\t\t\t\t\t\treturn new Error(`property[${prop}] is not defined`)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e.message, e)\n\t\t}\n\t}\n}\n\nexport class VBProxy<T extends {}> {\n\tprivate readonly __source: T\n\t/**\n\t * function property map\n\t * \t- key: property name\n\t * \t- value: [scoped function, original function]\n\t */\n\tprivate readonly __fns: { [name: string]: [Function, Function] }\n\treadonly __props: { [prop: string]: boolean }\n\tprivate readonly __observer: IObserver<T>\n\treadonly __proxy: T\n\n\tconstructor(source: T, observer: IObserver<T>) {\n\t\tconst props = [],\n\t\t\tpropMap: { [prop: string]: boolean } = create(null),\n\t\t\t__fns: string[] = [],\n\t\t\tfns: { [prop: string]: [Function, Function] } = create(null)\n\t\tlet prop: string,\n\t\t\ti = 0,\n\t\t\tj = 0\n\n\t\tfor (prop in source) {\n\t\t\tpropMap[prop] = true\n\t\t\tprops[i++] = prop\n\t\t\tif (isFn(source[prop])) __fns[j++] = prop\n\t\t}\n\t\tapplyProps(props, propMap, OBJECT_DEFAULT_PROPS)\n\t\tapplyProps(props, propMap, getDKeys())\n\t\tconst proxy = loadClassFactory(props)(this)\n\n\t\twhile (j--) {\n\t\t\tprop = __fns[j]\n\t\t\tfns[prop] = [, source[prop]]\n\t\t}\n\n\t\tthis.__source = source\n\t\tthis.__observer = observer\n\t\tthis.__proxy = proxy\n\t\tthis.__fns = fns\n\t\tthis.__props = propMap\n\t\tsource[VBPROXY_KEY] = this\n\t}\n\n\tprivate set(prop: string, value: any) {\n\t\tconst { __source: source, __fns: fns } = this\n\t\tif (isFn(value)) {\n\t\t\tfns[prop] = [, value]\n\t\t} else if (fns[prop]) {\n\t\t\tfns[prop] = null\n\t\t}\n\t\tconst watcher = this.__observer.watcher(prop)\n\t\twatcher && watcher.notify(source[prop])\n\t\tsource[prop] = value\n\t}\n\n\tprivate get(prop: string) {\n\t\tconst fn = this.__fns[prop]\n\t\treturn fn ? fn[0] || (fn[0] = fn[1].bind(this.__proxy)) : this.__source[prop]\n\t}\n}\n\nfunction applyProps(props: string[], propMap: { [key: string]: boolean }, applyProps: string[]) {\n\tlet i = applyProps.length,\n\t\tj = props.length,\n\t\tprop: string\n\twhile (i--) {\n\t\tprop = applyProps[i]\n\t\tif (!propMap[prop]) {\n\t\t\tpropMap[prop] = true\n\t\t\tprops[j++] = prop\n\t\t}\n\t}\n}\n\nexport const VBPROXY_KEY = '__vbclass_binding__',\n\tVBPROXY_CTOR_KEY = '__vbclass_constructor__',\n\tOBJECT_DEFAULT_PROPS = [\n\t\tVBPROXY_KEY,\n\t\tP_CTOR,\n\t\tP_OWNPROP,\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'toLocaleString',\n\t\t'toString',\n\t\t'valueOf'\n\t]\n\nconst CONSTRUCTOR_SCRIPT = `\n\tPublic [${VBPROXY_KEY}]\n\tPublic Default Function [${VBPROXY_CTOR_KEY}](source)\n\t\tSet [${VBPROXY_KEY}] = source\n\t\tSet [${VBPROXY_CTOR_KEY}] = Me\n\tEnd Function\n\t`,\n\tclassPool = create(null)\n\nfunction genAccessorScript(prop: string): string {\n\treturn `\n\tPublic Property Let [${prop}](value)\n\t\tCall [${VBPROXY_KEY}].set(\"${prop}\", val)\n\tEnd Property\n\tPublic Property Set [${prop}](value)\n\t\tCall [${VBPROXY_KEY}].set(\"${prop}\", val)\n\tEnd Property\n\n\tPublic Property Get [${prop}]\n\tOn Error Resume Next\n\t\tSet [${prop}] = [${VBPROXY_KEY}].get(\"${prop}\")\n\tIf Err.Number <> 0 Then\n\t\t[${prop}] = [${VBPROXY_KEY}].get(\"${prop}\")\n\tEnd If\n\tOn Error Goto 0\n\tEnd Property\n\n`\n}\n\nfunction genClassScript(className: string, props: string[]): string {\n\tconst buffer = ['Class ', className, CONSTRUCTOR_SCRIPT],\n\t\tl = props.length\n\tlet i = 0\n\tfor (; i < l; i++) buffer[i + 3] = genAccessorScript(props[i])\n\tbuffer[i + 3] = 'End Class'\n\treturn buffer.join('\\n')\n}\n\nlet classNameGenerator = 1\nfunction loadClassFactory(props: string[]): <T extends {}>(source: VBProxy<T>) => T {\n\tconst classKey = props.sort().join('|')\n\tlet factoryName = classPool[classKey]\n\tif (!factoryName) {\n\t\tconst className = `VBClass${classNameGenerator++}`\n\t\tfactoryName = `${className}Factory`\n\n\t\t// build VB Class\n\t\tparseVB(genClassScript(className, props))\n\n\t\tparseVB(`\nFunction ${factoryName}(desc)\n\tDim o\n\tSet o=(New ${className})(desc)\n\tSet ${factoryName} = o\nEnd Function`)\n\n\t\tclassPool[classKey] = factoryName\n\t}\n\treturn GLOBAL[factoryName]\n}\n","/**\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Dec 26 2018 13:59:10 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 18:33:01 GMT+0800 (China Standard Time)\n */\n\nimport { ObserverTarget, IWatcher, OBSERVER_KEY, IObserver, ARRAY_CHANGE, ObserverCallback } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport proxyPolicy from './ProxyPolicy'\nimport accessorPolicy from './AccessorPolicy'\nimport vbPolicy from './VBPolicy'\nimport { nextTick } from '../nextTick'\nimport { FnList, List } from '../list'\nimport { parsePath, formatPath, get, set } from '../path'\nimport { defValue, create, isArray, isPrimitive, isNil, toStrType, eq, isObject, SKIP } from '../util'\nimport { assert } from '../assert'\n\nfunction isObserverTarget(obj: any) {\n\treturn obj && (isArray(obj) || isObject(obj))\n}\n\n/**\n * is array change property\n * @param observer \tobserver\n * @param prop \t\tproperty of the observer's target\n */\nfunction isArrayChangeProp<T extends ObserverTarget>(observer: IObserver<T>, prop: string) {\n\treturn observer.isArray && prop === ARRAY_CHANGE\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        topic                                         *\n *                                                                                      */\n//========================================================================================\n\n/**\n * special object\n * - special object indicates that the topic has not changed\n */\nconst V = {}\n\n/**\n * get property value on object\n * @param obj \tobject\n * @param prop \tproperty\n */\nfunction getValue(obj: any, prop: string) {\n\treturn obj === undefined || obj === null ? undefined : obj[prop]\n}\n\n// id generator of topic\nlet topicIdGen = 0\n\n// the dirty topic queue waiting for collection\nconst collectQueue: Topic[] = []\n\n// the dirty topic queue waiting for notification\nconst dirtyQueue: Topic[] = []\n\n// flags of topic\nconst TOPIC_ENABLED_FLAG = 0x1, // topic is enabled\n\tTOPIC_LISTEN_FLAG = 0x2, // topic is listend\n\tTOPIC_SUB_FLAG = 0x4 // topic has subtopic\n\n/**\n * @ignore\n */\nclass Topic {\n\treadonly __id: number\n\n\t// parent topic\n\treadonly __parent: Topic\n\n\t// own observer\n\treadonly __owner: Observer<any>\n\n\t// watch property\n\treadonly __prop: string\n\n\t// binded observer\n\t__observer: Observer<any>\n\n\t// property path\n\t__path: string[]\n\n\t// listeners\n\t__listeners: FnList<ObserverCallback<any>>\n\n\t// the original value before change\n\t__original: any\n\n\t// collected dirty value: [new value, original value, force notify]\n\t__dirty: [any, any, boolean]\n\n\t// subtopics\n\t__subs: Topic[]\n\n\t// cache of subtopics\n\t__subCache: { [key: string]: Topic }\n\n\t// flags: TOPIC_ENABLED_FLAG | TOPIC_LISTEN_FLAG | TOPIC_SUB_FLAG\n\t__state: number\n\n\t/**\n\t * create a Topic\n\t * @param owner\t\town observer\n\t * @param prop\t\twatch property\n\t * @param parent\tparent topic\n\t */\n\tconstructor(owner: Observer<any>, prop: string, parent?: Topic) {\n\t\tthis.__state = 0\n\t\tthis.__original = V // special object indicates that the topic has not changed\n\t\tthis.__owner = owner\n\t\tthis.__prop = prop\n\t\tthis.__parent = parent\n\t\tthis.__id = topicIdGen++\n\t}\n\n\t/**\n\t * add listener\n\t * @param path\t\tpath of topic\n\t * @param cb\t\tobserve callback\n\t * @param scope\t\tscope of the callback\n\t * @return listen-id | undefined\n\t */\n\t__listen(path: string[], cb: ObserverCallback<any>, scope: any): string {\n\t\tlet { __listeners: listeners } = this\n\t\tif (!listeners) {\n\t\t\tthis.__listeners = listeners = new FnList<ObserverCallback<any>>()\n\t\t\tthis.__path = path\n\t\t}\n\t\tconst id = listeners.add(cb, scope)\n\t\tid && (this.__state |= TOPIC_LISTEN_FLAG | TOPIC_ENABLED_FLAG)\n\t\treturn id\n\t}\n\n\t/**\n\t * remove listener by callback\n\t * @param cb\t\tobserve callback\n\t * @param scope\t\tscope of the callback\n\t */\n\t__unlisten(cb: ObserverCallback<any>, scope: any) {\n\t\tconst { __listeners: listeners } = this\n\t\tif (listeners) {\n\t\t\tlisteners.remove(cb, scope)\n\t\t\tthis.____unlisten(listeners)\n\t\t}\n\t}\n\n\t/**\n\t * remove listener by listen-id\n\t * @param id\tlisten-id\n\t */\n\t__unlistenId(id: string) {\n\t\tconst { __listeners: listeners } = this\n\t\tif (listeners) {\n\t\t\tlisteners.removeId(id)\n\t\t\tthis.____unlisten(listeners)\n\t\t}\n\t}\n\n\t/**\n\t * Clear all unlistening leaf topics (!TOPIC_LISTEN_FLAG && !TOPIC_SUB_FLAG)\n\t * @param listeners\tlisteners\n\t */\n\tprivate ____unlisten(listeners: FnList<ObserverCallback<any>>) {\n\t\tif (!listeners.size()) {\n\t\t\t// this topic has no listeners, clear the listen flag\n\t\t\tvar topic: Topic = this,\n\t\t\t\tparent: Topic\n\t\t\ttopic.__state &= ~TOPIC_LISTEN_FLAG\n\t\t\twhile (topic.__state === TOPIC_ENABLED_FLAG) {\n\t\t\t\t// the topic has no listeners and subtopics\n\t\t\t\t//  - unbind the observer on the topic\n\t\t\t\t//  - clear topic state\n\t\t\t\t//  - remove from the parent topic\n\t\t\t\ttopic.__bind()\n\t\t\t\ttopic.__state = 0\n\t\t\t\tif (!(parent = topic.__parent)) break\n\t\t\t\tparent.__removeSub(topic)\n\t\t\t\ttopic = parent // re-check the parent topic\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * bind observer\n\t * @param observer new observer\n\t */\n\t__bind(observer?: Observer<any>) {\n\t\tconst { __observer: org } = this\n\t\tif (org !== observer) {\n\t\t\torg && org.__unwatchTopic(this) // unbind old observer\n\t\t\tif (observer) {\n\t\t\t\tconst err: Error = observer.__watchTopic(this)\n\t\t\t\tif (err) {\n\t\t\t\t\tconst path = this.__getPath()\n\t\t\t\t\terr.message = `observer[${formatPath(path)}]: can not watch ${formatPath(\n\t\t\t\t\t\tpath.slice(-1)\n\t\t\t\t\t)} on ${toStrType(observer.target)}${\n\t\t\t\t\t\tpath.length > 1 ? `[${formatPath(path.slice(0, -1))}]` : ''\n\t\t\t\t\t}, ${err.message}.`\n\t\t\t\t\tthrow err\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.__observer = observer\n\t\t}\n\t}\n\n\t/**\n\t * get a subtopic from the cache\n\t * @param prop property\n\t */\n\t__getSub(prop: string): Topic {\n\t\tconst { __subCache: subCache } = this\n\t\treturn subCache && subCache[prop]\n\t}\n\n\t/**\n\t * get or create a subtopic on the cache\n\t * @param subProp\tproperty of the subtopic\n\t * @return subtopic\n\t */\n\t__addSub(subProp: string): Topic {\n\t\tconst subCache: { [key: string]: Topic } =\n\t\t\t\tthis.__subCache || ((this.__subs = []), (this.__subCache = create(null))),\n\t\t\tsub: Topic = subCache[subProp] || (subCache[subProp] = new Topic(this.__owner, subProp, this))\n\n\t\tif (!(sub.__state & TOPIC_ENABLED_FLAG)) {\n\t\t\t// init the subtopic\n\n\t\t\tconst { __subs: subs, __observer: observer } = this\n\n\t\t\t// 1. bind observer\n\t\t\tif (observer) {\n\t\t\t\tconst { __prop: prop } = this\n\n\t\t\t\tvar subObserver: Observer<any>\n\n\t\t\t\tif (subs[0]) {\n\t\t\t\t\tsubObserver = subs[0].__observer\n\t\t\t\t} else if (!isArrayChangeProp(observer, prop)) {\n\t\t\t\t\tconst subTarget = observer.target[prop]\n\t\t\t\t\tif (isObserverTarget(subTarget)) {\n\t\t\t\t\t\tsubObserver = __loadSubObserver(observer, prop, subTarget)\n\t\t\t\t\t}\n\t\t\t\t\t//#if _DEBUG\n\t\t\t\t\telse if (!isNil(subTarget)) {\n\t\t\t\t\t\tsub.__ignorePath(2, toStrType(subTarget))\n\t\t\t\t\t}\n\t\t\t\t\t//#endif\n\t\t\t\t}\n\t\t\t\t//#if _DEBUG\n\t\t\t\telse {\n\t\t\t\t\tsub.__ignorePath(2, 'Array')\n\t\t\t\t}\n\t\t\t\t//#endif\n\t\t\t\tsub.__bind(subObserver)\n\t\t\t}\n\n\t\t\t// 2. attach subtopic\n\t\t\tsub.__state |= TOPIC_ENABLED_FLAG\n\t\t\tsubs.push(sub)\n\t\t}\n\n\t\tthis.__state |= TOPIC_SUB_FLAG | TOPIC_ENABLED_FLAG\n\n\t\treturn sub\n\t}\n\n\t/**\n\t * remove the subtopic from the subs\n\t * @param topic topic\n\t */\n\t__removeSub(topic: Topic) {\n\t\tconst { __subs: subs } = this\n\t\tconst l = subs.length\n\t\tlet i = l\n\t\twhile (i--) {\n\t\t\tif (topic === subs[i]) {\n\t\t\t\tsubs.splice(i, 1)\n\t\t\t\tl === 1 && (this.__state &= ~TOPIC_SUB_FLAG)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tassert('un-attached topic')\n\t}\n\n\t//#if _DEBUG\n\tprivate __ignorePath(i: number, type: string, msg?: string) {\n\t\tconst path = this.__getPath()\n\t\tconsole.warn(\n\t\t\t`observer[{}]: ignore {} on {}{}{}.`,\n\t\t\tformatPath(path),\n\t\t\tformatPath(path.slice(-i)),\n\t\t\ttype,\n\t\t\tpath.length > i ? `[${formatPath(path.slice(0, -i))}]` : '',\n\t\t\tmsg || '',\n\t\t\tthis.__owner.target\n\t\t)\n\t}\n\n\tprivate __ignoreSubPaths(subs: Topic[], len: number, type: string) {\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tsubs[i].__ignorePath(2, type)\n\t\t}\n\t}\n\n\t//#endif\n\n\tprivate __getPath() {\n\t\tlet path: string[] = this.__path\n\t\tif (!path) {\n\t\t\tconst { __parent: parent, __prop: prop } = this\n\t\t\tthis.__path = path = parent ? parent.__getPath().concat(prop) : [prop]\n\t\t}\n\t\treturn path\n\t}\n\n\t/**\n\t * mark the change in topic\n\t *\n\t * @param original original value\n\t */\n\t__update(original: any) {\n\t\tif (this.__original === V) {\n\t\t\tthis.__original = original\n\n\t\t\t// add to collect queue\n\t\t\tconst l = collectQueue.length\n\t\t\tcollectQueue[l] = this\n\t\t\t!l && nextTick(collect)\n\t\t}\n\t}\n\n\t/**\n\t * collect the dirty topics(this topic and subtopics) from collectQueue\n\t * may collected by parent-topic\n\t */\n\t__collect() {\n\t\tconst { __original: original } = this\n\t\tif (original !== V) {\n\t\t\tconst { __observer: observer } = this\n\n\t\t\tthis.__original = V\n\n\t\t\tobserver && this.____collect(observer, observer.target, original, false)\n\t\t}\n\t\t// this topic has been collected, retains its dirty value\n\t}\n\n\t/**\n\t * collect the dirty topics(this topic and subtopics)\n\t * - collect from collectQueue\n\t * \t1. this topic has been collected, stop collect\n\t * \t2. save the dirty value when the topic has a listener\n\t * \t3. clean the change state\n\t * \t4. collect the subtopics\n\t *\t\tuse this original value when subtopic has not changed\n\t *\t\tuse the subtopic's original value when subtopic is changed\n\t * \t\tclean the change state\n\t *\t\treplace the new value on subtopics\n\t * - re-collect by parent-topic (this does not happen after the topics are sorted by ID before collection)\n\t * \t1. replace the new value and discard the original value(keep the existing original value)\n\t * \t2. re-collect subtopics\n\t *\n\t * @param observer \tobserver of this topic\n\t * @param target \tnew target of this topic\n\t * @param original \toriginal value of this topic\n\t * @param force  \tforce notify\n\t */\n\tprivate ____collect(observer: Observer<any>, target: any, original: any, force: boolean) {\n\t\tconst { __state: flags, __prop: prop } = this\n\t\tlet dirty: [any, any, boolean?],\n\t\t\tsubTarget: any = V // lazy load the sub-target\n\n\t\tif (flags & TOPIC_LISTEN_FLAG) {\n\t\t\tif (!(dirty = this.__dirty)) {\n\t\t\t\tthis.__dirty = dirty = [, original, force]\n\t\t\t\tdirtyQueue.push(this)\n\t\t\t} else if (force) {\n\t\t\t\tdirty[2] = force\n\t\t\t\t// if this topic has been changed and collected, retains its original value\n\t\t\t}\n\t\t\t// set the new value\n\t\t\tdirty[0] = observer && isArrayChangeProp(observer, prop) ? target : (subTarget = getValue(target, prop))\n\t\t}\n\n\t\tif (flags & TOPIC_SUB_FLAG) {\n\t\t\tsubTarget === V && (subTarget = getValue(target, prop))\n\n\t\t\tconst { __subs: subs } = this\n\t\t\tconst l = subs.length\n\n\t\t\tvar subObserver: Observer<any>,\n\t\t\t\torgSubObserver: Observer<any>,\n\t\t\t\tsub: Topic,\n\t\t\t\tsubOriginal: any,\n\t\t\t\ti = 0\n\n\t\t\tif (observer) {\n\t\t\t\tif (!isArrayChangeProp(observer, prop)) {\n\t\t\t\t\tif (isObserverTarget(subTarget)) {\n\t\t\t\t\t\tsubObserver = __loadSubObserver(observer, prop, subTarget)\n\t\t\t\t\t\tif (proxyEnable) {\n\t\t\t\t\t\t\tsubTarget = subObserver.target\n\t\t\t\t\t\t\tdirty && (dirty[0] = subObserver.proxy) // update dirty proxy\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//#if _DEBUG\n\t\t\t\t\telse if (!isNil(subTarget)) {\n\t\t\t\t\t\tthis.__ignoreSubPaths(subs, l, toStrType(subTarget))\n\t\t\t\t\t}\n\t\t\t\t\t//#endif\n\t\t\t\t}\n\t\t\t\t//#if _DEBUG\n\t\t\t\telse {\n\t\t\t\t\tthis.__ignoreSubPaths(subs, l, 'Array')\n\t\t\t\t}\n\t\t\t\t//#endif\n\t\t\t} else if (proxyEnable && dirty) {\n\t\t\t\tdirty[0] = proxy(dirty[0])\n\t\t\t}\n\n\t\t\tfor (; i < l; i++) {\n\t\t\t\tsub = subs[i]\n\t\t\t\torgSubObserver = sub.__observer\n\t\t\t\tif (!subObserver || orgSubObserver != subObserver) {\n\t\t\t\t\tsub.__bind(subObserver)\n\n\t\t\t\t\tif ((subOriginal = sub.__original) === V) {\n\t\t\t\t\t\t// 1. this subtopic has not been changed, using the original value of the current topic\n\t\t\t\t\t\t// *2. this subtopic has been changed and collected, and the collector retains its original value\n\t\t\t\t\t\t// *   this does not happen after the topics are sorted by ID before collection\n\t\t\t\t\t\tsubOriginal = sub.__dirty || isNil(original) ? undefined : original[sub.__prop]\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// this subtopic was changed but not collected, collected in advance\n\t\t\t\t\t\tsub.__original = V\n\t\t\t\t\t}\n\n\t\t\t\t\tsub.____collect(subObserver, subTarget, subOriginal, orgSubObserver != subObserver)\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (dirty && proxyEnable) {\n\t\t\tdirty[0] = proxy(dirty[0])\n\t\t}\n\t}\n}\n\nfunction compareTopic(topic1: Topic, topic2: Topic) {\n\treturn topic1.__id - topic2.__id\n}\n\n/**\n * collect the dirty topics on the collectQueue\n */\nexport function collect() {\n\t//#if _DEBUG\n\tconst start = Date.now()\n\t//#endif\n\n\tlet l = collectQueue.length,\n\t\ti = 0\n\n\t// sort by topic id\n\tcollectQueue.sort(compareTopic)\n\n\tfor (; i < l; i++) {\n\t\tcollectQueue[i].__collect()\n\t}\n\n\tcollectQueue.length = 0\n\n\t//#if _DEBUG\n\tconsole.log(\n\t\t`Collect ${dirtyQueue.length} dirty topics from the collection queue (${l}), use ${Date.now() - start}ms`\n\t)\n\t//#endif\n\n\tnotify()\n}\n\n/**\n * notify all of the dirty topics\n */\nfunction notify() {\n\t//#if _DEBUG\n\tconst start = Date.now()\n\tlet topics = 0,\n\t\tlistens = 0\n\t//#endif\n\n\tconst l = dirtyQueue.length\n\tlet topic: Topic,\n\t\towner: Observer<any>,\n\t\tpath: string[],\n\t\tvalue: any,\n\t\toriginal: any,\n\t\tdirty: [any, any, boolean],\n\t\ti = 0\n\n\tfor (; i < l; i++) {\n\t\ttopic = dirtyQueue[i]\n\t\tdirty = topic.__dirty\n\t\tvalue = dirty[0]\n\t\toriginal = dirty[1]\n\n\t\ttopic.__dirty = null // clean the dirty\n\n\t\tif (dirty[2] || value !== original || !isPrimitive(value)) {\n\t\t\t// real dirty\n\t\t\towner = topic.__owner\n\t\t\tpath = topic.__path\n\t\t\ttopic.__listeners.each((fn, scope) => {\n\t\t\t\tscope ? fn.call(scope, path, value, original, owner) : fn(path, value, original, owner)\n\n\t\t\t\t//#if _DEBUG\n\t\t\t\tlistens++\n\t\t\t\t//#endif\n\t\t\t})\n\n\t\t\t//#if _DEBUG\n\t\t\ttopics++\n\t\t\t//#endif\n\t\t}\n\t}\n\n\tdirtyQueue.length = 0\n\n\t//#if _DEBUG\n\tconsole.log(\n\t\t`${listens} listen-callbacks of ${topics}/${l} dirty topics have been notified, use ${Date.now() - start}ms`\n\t)\n\t//#endif\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       Observer                                       *\n *                                                                                      */\n//========================================================================================\n\nlet __original__: any\nfunction __updateTopicCB(topic: Topic) {\n\ttopic.__update(__original__)\n}\n\nclass Watcher extends List<Topic> implements IWatcher {\n\tconstructor() {\n\t\tsuper()\n\t}\n\t/**\n\t * notify topics\n\t *\n\t * @param original the original value\n\t */\n\tnotify(original: any) {\n\t\t__original__ = original\n\t\tthis.eachUnsafe(__updateTopicCB)\n\t\t__original__ = 0\n\t}\n}\n\nclass Observer<T extends ObserverTarget> implements IObserver<T> {\n\t/**\n\t * observer target\n\t */\n\treadonly target: T\n\n\t/**\n\t * observer proxy\n\t */\n\treadonly proxy: T\n\n\t/**\n\t * is array target\n\t */\n\treadonly isArray: boolean\n\n\t/**\n\t * topics\n\t * \t- key: property of topic in the observer's target\n\t * \t- value: topic\n\t */\n\t__topics: { [key: string]: Topic }\n\n\t/**\n\t * watchers\n\t * \t- key: property of watcher in the observer's target\n\t * \t- value: watcher\n\t */\n\treadonly __watchers: { [key: string]: Watcher }\n\n\t/**\n\t * properties of watchers in the observer's target\n\t */\n\treadonly __watcherProps: string[]\n\n\t/**\n\t * create Observer\n\t *\n\t * @param target observer target\n\t */\n\tconstructor(target: T) {\n\t\tconst arrayTarget = isArray(target)\n\n\t\tassert.is(arrayTarget || isObject(target), `the observer's target can only be an object or an array`)\n\n\t\tconst watchers = create(null)\n\t\tthis.__watchers = watchers\n\t\tthis.__watcherProps = []\n\n\t\tthis.isArray = arrayTarget\n\t\tthis.target = target\n\n\t\t// bind observer key on the observer's target\n\t\tdefValue(target, OBSERVER_KEY, this, false, false, false)\n\n\t\tthis.proxy = policy.__createProxy(this, target, arrayTarget)\n\t}\n\n\t/**\n\t * observe changes in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t * @return listen-id\n\t */\n\tobserve(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): string {\n\t\tconst path: string[] = parsePath(propPath),\n\t\t\ttopics = this.__topics || (this.__topics = create(null)),\n\t\t\tprop0 = path[0]\n\n\t\tlet topic = topics[prop0] || (topics[prop0] = new Topic(this, prop0)),\n\t\t\ti = 1,\n\t\t\tl = path.length\n\n\t\ttopic.__bind(this)\n\t\ttopic.__flags |= TOPIC_ENABLED_FLAG\n\n\t\tfor (; i < l; i++) {\n\t\t\ttopic = topic.__addSub(path[i])\n\t\t}\n\n\t\treturn topic.__listen(path, cb, scope)\n\t}\n\n\t/**\n\t * get listen-id of callback in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t * @return listen-id\n\t */\n\tobserved(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): string {\n\t\tconst topic = this.__getTopic(parsePath(propPath))\n\t\tlet listeners: FnList<ObserverCallback<any>>\n\t\treturn topic && (listeners = topic.__listeners) && listeners.has(cb, scope)\n\t}\n\n\t/**\n\t * has listen-id in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param id\t\tlisten-id\n\t * @return listen-id\n\t */\n\tobservedId(propPath: string | string[], id: string): boolean {\n\t\tconst topic = this.__getTopic(parsePath(propPath))\n\t\tlet listeners: FnList<ObserverCallback<any>>\n\t\treturn topic && (listeners = topic.__listeners) && listeners.hasId(id)\n\t}\n\n\t/**\n\t * cancel observing the changes in the observer's target\n\t *\n\t * @param propPath\tproperty path for unobserve, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t */\n\tunobserve(propPath: string | string[], cb: ObserverCallback<T>, scope?: any) {\n\t\tconst topic = this.__getTopic(parsePath(propPath))\n\t\ttopic && topic.__unlisten(cb, scope)\n\t}\n\n\t/**\n\t * cancel observing the changes in the observer's target by listen-id\n\t *\n\t * @param propPath\tproperty path for unobserve, parse string path by {@link parsePath}\n\t * @param id \t\tlisten-id\n\t */\n\tunobserveId(propPath: string | string[], id: string) {\n\t\tconst topic = this.__getTopic(parsePath(propPath))\n\t\ttopic && topic.__unlistenId(id)\n\t}\n\n\t/**\n\t * notify change on the property\n\t *\n\t * @param prop\t\tthe property\n\t * @param original \tthe original value\n\t */\n\tnotify(prop: string, original: any) {\n\t\tconst watcher = this.__watchers[prop]\n\t\twatcher && watcher.notify(original)\n\t}\n\n\t/**\n\t * notify the observer that properties in the target have changed\n\t *\n\t * @param props \t\tnotify properties, notify all watchers when the props is null or undefined\n\t * @param getOriginal\tget the original value\n\t * @param execludes\t\tdo not notify watchers in execludes\n\t */\n\tnotifies(props: string[], getOriginal: (prop: string, ob: Observer<T>) => any, execludes?: { [key: string]: any }) {\n\t\tprops || (props = this.__watcherProps)\n\t\tconst { __watchers: watchers } = this\n\t\tlet prop: string,\n\t\t\twatcher: Watcher,\n\t\t\ti = props.length,\n\t\t\torigin: any\n\t\tif (execludes) {\n\t\t\twhile (i--) {\n\t\t\t\tprop = props[i]\n\t\t\t\tif (!execludes[prop] && (watcher = watchers[prop]) && watcher.size()) {\n\t\t\t\t\torigin = getOriginal(prop, this)\n\t\t\t\t\torigin !== SKIP && watcher.notify(origin)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\twhile (i--) {\n\t\t\t\tprop = props[i]\n\t\t\t\tif ((watcher = watchers[prop]) && watcher.size()) {\n\t\t\t\t\torigin = getOriginal(prop, this)\n\t\t\t\t\torigin !== SKIP && watcher.notify(origin)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * get wather by property\n\t *\n\t * @protected\n\t * @param prop the property\n\t */\n\twatcher(prop: string): Watcher {\n\t\tconst watcher = this.__watchers[prop]\n\t\tif (watcher && watcher.size()) return watcher\n\t}\n\n\t/**\n\t * get or create wather by property\n\t *\n\t * @protected\n\t * @param prop the property\n\t */\n\tinitWatcher(prop: string): Watcher {\n\t\tconst { __watchers: watchers } = this\n\t\tlet watcher: Watcher = watchers[prop]\n\t\tif (!watcher) {\n\t\t\twatchers[prop] = watcher = new Watcher()\n\t\t\tthis.__watcherProps.push(prop)\n\t\t\tconst err: Error | void = policy.__watch(this as IObserver<T>, prop, watcher)\n\t\t\tassert.not(err, `can not watch property[{}] on the Observer, {{message}}`, prop, err, err, this.target)\n\t\t}\n\t\treturn watcher\n\t}\n\n\t/**\n\t * watch the topic\n\t *\n\t * @private\n\t * @param topic topic\n\t * @return is successful\n\t */\n\t__watchTopic(topic: Topic): Error {\n\t\tconst { __watchers: watchers } = this\n\t\tconst { __prop: prop } = topic\n\t\tlet watcher: Watcher = watchers[prop],\n\t\t\terr: Error | void\n\t\tif (!watcher) {\n\t\t\twatchers[prop] = watcher = new Watcher()\n\t\t\tthis.__watcherProps.push(prop)\n\t\t\terr = policy.__watch(this as IObserver<T>, prop, watcher)\n\t\t}\n\t\twatcher.add(topic)\n\t\treturn err as Error\n\t}\n\n\t/**\n\t * unwatched the topic\n\t *\n\t * @private\n\t * @param topic topic\n\t */\n\t__unwatchTopic(topic: Topic) {\n\t\tthis.__watchers[topic.__prop].remove(topic)\n\t}\n\n\t/**\n\t * get topic by property path\n\t *\n\t * @param path property path of topic, parse string path by {@link parsePath}\n\t * @return topic | undefined\n\t */\n\tprivate __getTopic(path: string[]) {\n\t\tconst { __topics: topics } = this\n\t\tlet topic: Topic\n\t\tif (topics && (topic = topics[path[0]])) {\n\t\t\tfor (var i = 1, l = path.length; i < l; i++) {\n\t\t\t\tif (!(topic = topic.__getSub(path[i]))) break\n\t\t\t}\n\t\t}\n\t\treturn topic\n\t}\n\n\t/**\n\t * get the value at path of target object\n\t *\n\t * @param propPath \tproperty path of target object, parse string path by {@link parsePath}\n\t * @return the value\n\t */\n\tget(propPath: string | string[]): any {\n\t\treturn $get(this.target, propPath)\n\t}\n\n\t/**\n\t * set the value at path of target object\n\t *\n\t * @param propPath \tproperty path for target object, parse string path by {@link parsePath}\n\t * @param value\t\tthe value\n\t */\n\tset(propPath: string | string[], value: any) {\n\t\t$set(this.proxy, propPath, value)\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\ttoJSON() {}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        policy                                        *\n *                                                                                      */\n//========================================================================================\n\nconst policy: ObservePolicy = proxyPolicy() || accessorPolicy() || vbPolicy()\n\nassert.is(policy, 'The observer module is not supported.')\n\n//#if _DEBUG\nconsole.info(`the observer policy: ${policy.__name} -> `, policy)\n//#endif\n\nif (!policy.__createProxy) policy.__createProxy = (observer, target) => target\nif (!policy.__watch) policy.__watch = () => {}\n\nexport const proxyEnable = policy.__proxy\n\n/**\n * get existing observer on object\n *\n * @return existing observer\n */\nlet __getObserver: <T extends ObserverTarget>(target: T) => Observer<T> = target => {\n\tconst ob = target[OBSERVER_KEY]\n\tif (ob && (ob.target === target || ob.proxy === target)) return ob\n}\n\n/**\n * get or create sub-observer (well fix proxy value)\n *\n * @param observer \tobserver\n * @param prop\t\tproperty of the observer's target\n * @param target\ttarget = observer.target[prop]\n * @return sub-observer\n */\nlet __loadSubObserver: <T extends ObserverTarget>(observer: Observer<any>, prop: string, target: T) => Observer<T> = (\n\tobserver,\n\tprop,\n\ttarget\n) => {\n\tconst subObserver: Observer<any> = __getObserver(target) || new Observer(target)\n\tif (subObserver.proxy !== target) observer.target[prop] = subObserver.proxy\n\treturn subObserver\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                          API                                         *\n *                                                                                      */\n//========================================================================================\n\n/**\n * get the original object of the observer on the object\n *\n * @param object the object\n * @return the original object | the object\n */\nlet source: <T extends ObserverTarget>(obj: T) => T = <T>(obj: T): T => {\n\tconst observer = obj && __getObserver(obj)\n\treturn observer ? observer.target : obj\n}\n\n/**\n * get the proxy object for the observer on the object\n *\n * @param object the object\n * @return the proxy object | the object\n */\nlet proxy: <T extends ObserverTarget>(obj: T) => T = <T>(obj: T): T => {\n\tconst observer = obj && __getObserver(obj)\n\treturn observer ? observer.proxy : obj\n}\n\n/**\n * support equals function between observer objects\n */\nlet $eq: (o1: any, o2: any) => boolean = (o1, o2) => {\n\treturn eq(o1, o2) || (o1 && o2 && (o1 = __getObserver(o1)) ? o1 === __getObserver(o2) : false)\n}\n\n/**\n * get the value at path of object\n *\n * @param obj \t\tthe object\n * @param path\t\tproperty path of object, parse string path by {@link parsePath}\n * @return the value | the proxy of value\n */\nlet $get: (obj: any, path: string | string[]) => any = (obj, path) => proxy(get(obj, path))\n\n/**\n * set the value at path of object\n *\n * @param obj \t\tthe object\n * @param path\t\tproperty path of object, parse string path by {@link parsePath}\n * @param value \tvalue\n */\nlet $set: (obj: any, path: string | string[], value: any) => void = (obj, path, value) => {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0,\n\t\tv: any\n\tfor (; i < l; i++) {\n\t\tv = obj[path[i]]\n\t\tobj = v === null || v === undefined ? (proxy(obj)[path[i]] = {}) : v\n\t}\n\tproxy(obj)[path[i]] = proxy(value)\n}\n\n//──── optimize on Non-Proxy policy ──────────────────────────────────────────────────────\nif (!proxyEnable) {\n\t__getObserver = target => {\n\t\tconst oserver = target[OBSERVER_KEY]\n\t\tif (oserver && oserver.target === target) return oserver\n\t}\n\n\t__loadSubObserver = (observer, prop, target) => {\n\t\treturn __getObserver(target) || new Observer(target)\n\t}\n\n\tsource = obj => obj\n\n\tproxy = source\n\n\t$eq = eq\n\n\t$get = get\n\n\t$set = set\n}\n\n/**\n * get or create observer on object\n *\n * @param target \tthe target object\n */\nexport function observer<T extends ObserverTarget>(target: T): IObserver<T> {\n\treturn __getObserver(target) || new Observer(target)\n}\n\n/**\n * observe changes in the target object\n *\n * @param target \tthe target object\n * @param propPath \tproperty path of object, parse string path by {@link parsePath}\n * @param cb\t\tcallback\n * @param scope\t\tscope of callback\n * @return listen-id\n */\nexport function observe<T extends ObserverTarget>(\n\ttarget: T,\n\tpropPath: string | string[],\n\tcb: ObserverCallback<T>,\n\tscope?: any\n): string {\n\tconst __observer = observer(target)\n\treturn __observer.observe(propPath, cb, scope)\n}\n\n/**\n * get listen-id of callback in the target object\n *\n * @param target \tthe target object\n * @param propPath \tproperty path of object, parse string path by {@link parsePath}\n * @param cb\t\tcallback\n * @param scope\t\tscope of callback\n * @return listen-id\n */\nexport function observed<T extends ObserverTarget>(\n\ttarget: T,\n\tpropPath: string | string[],\n\tcb: ObserverCallback<T>,\n\tscope?: any\n): string {\n\tconst __observer = __getObserver(target)\n\treturn __observer && __observer.observed(propPath, cb, scope)\n}\n\n/**\n * has listen-id in the target object\n *\n * @param target \tthe target object\n * @param propPath \tproperty path of object, parse string path by {@link parsePath}\n * @param id\t\tlisten-id\n */\nexport function observedId<T extends ObserverTarget>(target: T, propPath: string | string[], id: string): boolean {\n\tconst __observer = __getObserver(target)\n\treturn __observer && __observer.observedId(propPath, id)\n}\n\n/**\n * cancel observing the changes in the target object\n *\n * @param target \tthe target object\n * @param propPath \tproperty path of object, parse string path by {@link parsePath}\n * @param cb\t\tcallback\n * @param scope\t\tscope of callback\n */\nexport function unobserve<T extends ObserverTarget>(\n\ttarget: T,\n\tpropPath: string | string[],\n\tcb: ObserverCallback<T>,\n\tscope?: any\n) {\n\tconst __observer = __getObserver(target)\n\t__observer && __observer.unobserve(propPath, cb, scope)\n}\n\n/**\n * cancel observing the changes in the target object by listen-id\n *\n * @param target \tthe target object\n * @param propPath \tproperty path of object, parse string path by {@link parsePath}\n * @param listenId\tlisten-id\n */\nexport function unobserveId<T extends ObserverTarget>(target: T, propPath: string | string[], listenId: string) {\n\tconst __observer = __getObserver(target)\n\t__observer && __observer.unobserveId(propPath, listenId)\n}\n\nexport const getObserver: <T extends ObserverTarget>(target: T) => IObserver<T> = __getObserver\n\nexport { source, proxy, $eq, $get, $set }\n","/**\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Mar 01 2019 18:17:27 GMT+0800 (China Standard Time)\n * @modified Thu Mar 28 2019 19:40:22 GMT+0800 (China Standard Time)\n */\n\nexport * from './IObserver'\nexport * from './Observer'\n\n//#if _TARGET === 'es3'\nexport { VBPROXY_KEY, VBPROXY_CTOR_KEY } from './VBPolicy'\n//#endif\n","/**\n *\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @module main\n * @preferred\n * @created Wed Nov 21 2018 10:21:20 GMT+0800 (China Standard Time)\n * @modified Mon Apr 08 2019 14:07:50 GMT+0800 (China Standard Time)\n */\nexport * from './util'\nexport * from './assert'\nexport * from './format'\nexport * from './path'\nexport * from './list'\nexport * from './nextTick'\nexport * from './ast'\nexport * from './observer'\n"],"names":["P_CTOR","P_PROTOTYPE","P_PROTO","P_OWNPROP","T_BOOL","T_FN","T_NUM","T_STRING","T_UNDEF","GLOBAL","window","global","self","EMPTY_FN","NULL_CTOR","DKeyMap","DKeys","isDKey","key","addDKey","push","addDKeys","args","arguments","l","length","i","getDKeys","getDKeyMap","getCtor","o","C","Object","toString","prototype","toStr","obj","call","toStrType","match","eq","o1","o2","isNull","isUndef","undefined","isNil","isBool","mkIsPrimitive","isNum","isStr","isFn","isInt","isPrimitive","type","is","instOf","Cls","Type","Array","isBoolean","mkIs","Boolean","isNumber","Number","isString","String","isDate","Date","isReg","RegExp","isArray","isTypedArray","ArrayBuffer","isView","isArrayLike","NodeList","HTMLCollection","Int8Array","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","len","isObj","isObject","blankStrReg","isBlank","test","createFn","body","name","Function","join","applyScope","concat","applyBuilder","maxArgs","scope","offset","cases","slice","applyNoScope","applyScopeN","applyNoScopeN","apply","fn","applyN","varGenReg","fnName","replace","_bind","funcProto","bind","argLen","bindPolyfill","bindArgs","argOffset","bindProxy","params","stickyReg","sticky","unicodeReg","unicode","REG_ESCAPE","reEscape","str","$getProto","getPrototypeOf","$setProto","setPrototypeOf","prototypeOf","protoProp","protoOf","__setProto","proto","setProto","p","__defineGetter__","__defineSetter__","$defProp","defineProperty","propDescriptor","val","get","set","value","s","e","propAccessor","prop","desc","TypeError","defProp","defValue","configurable","writable","enumerable","__hasOwn","hasOwnProp","getOwnProp","defaultVal","__","doCreate","props","k","create","REG_PROPS","deepEq","actual","expected","doDeepEq","doDeepEqObj","eqObj","getTime","eqProps","eqArray","eqTypeArray","cache","notEqObjKey","charCode","index","charCodeAt","char","code","fromCharCode","cutStr","start","end","substring","cutLStr","substr","TRIM_REG","trim","FIRST_LOWER_LETTER_REG","FIRST_UPPER_LETTER_REG","upper","toUpperCase","lower","toLowerCase","upperFirst","lowerFirst","STR_ESCAPE_MAP","STR_ESCAPE","escapeStr","doAssign","target","sources","filter","startOffset","endOffset","source","assign","defaultAssignFilter","assignIf","assignIfFilter","Control","constructor","__desc","STOP","eachProps","callback","own","eachObj","eachArray","array","doEach","_eachArray","_eachObj","each","SKIP","doMapObj","copy","v","mapObj","doMapArray","j","data","mapArray","doMap","eacharray","eachobj","map","parseCallback","defaultHandler","idx","doIdxOfObj","r","idxOfObj","doIdxOfArray","idxOfArray","doIdxOf","idxOf","doReduceObj","accumulator","rs","reduceObj","doReduceArray","reduceArray","doReduce","reduce","defaultObjKeyHandler","doObjKeys","handler","keys","defaultObjValueHandler","doObjValues","values","doArr2Obj","arr2obj","makeMap","split","makeArray","mixin","behaviour","Class","PATH_BINDING","pathCache","pathReg","parsePath","propPath","cacheable","path","cidx","exec","lastIndex","SyntaxError","charAt","Error","formatPath","formatPathHandler","pad","chr","leftAlign","__pad","shorten","suffix","thousandSeparate","mkSeparator","binarySeparate","octalSeparate","hexSeparate","group","valReg","reg","numStr","separatorHandler","m","d","PLURAL_REG","plural","pluralHandler","ies","es","ys","SINGULAR_REG","singular","singularHandler","FORMAT_XPREFIX","FORMAT_PLUS","FORMAT_ZERO","FORMAT_SPACE","FORMAT_SEPARATOR","FORMAT_LEFT","FLAG_MAPPING","parseFlags","f","flags","paramIdxR","paramPropR","widthR","fillR","shortenSuffixR","formatReg","formatters","extendFormatter","fmt","getFormatter","vformat","getParam","defaultGetParam","param","paramProp","width","widx","wprop","fill","precision","pidx","pprop","shortenSuffix","parseParam","parseWidth","w","isFinite","paramIdx","format","getFormatParam","GET_PARAM_VAR","GET_PROP_VAR","STATE_VAR","createFormatter","getParamCode","getWidthCode","def","strs","formatter","lastIdx","mStart","mEnd","arr","codes","pushStr","append","strFormatter","numFormatter","parseNum","getPrefix","separator","num","prefix","plen","decimalPrefix","BASE_RADIXS","b","u","x","BASE_PREFIXS","baseFormatter","base","n","__toStr","xprefix","floatFormatter","____toStr","toExponential","toFixed","toPrecision","parseFloat","JSON","stringify","c","E","g","G","B","O","X","mkError","Err","msg","msgIdx","fmtter","popErrStack","err","stack","assert","mkThrowAssertor","th","dmsg","ERROR","throwErr","expect","message","notThrow","mkAssertor","condition","paramStr","cond","expr","mkAssertors","apis","UNDEFINED","BOOLEAN","NUMBER","STRING","FUNCTION","NULL","INTEGER","ARRAY","TYPED_ARRAY","expectMsg","mkMsg","objFormatter","eql","nul","nil","typeExpect","undef","bool","int","primitive","boolean","packTypeExpect","number","string","date","typedArray","arrayLike","nan","isNaN","finite","blank","less","greater","range","to","not","all","DEFAULT_BINDING","List","binding","__length","__scaning","__ver","size","has","node","add","__insert","__tail","addFirst","insertAfter","__getNode","insertBefore","addAll","objs","__insertAll","addFirstAll","insertAfterAll","insertBeforeAll","prev","__siblingObj","next","first","__head","last","cb","__doLazyRemove","eachUnsafe","toArray","remove","__remove","clean","__lazyRemove","__clean","__initNode","toJSON","siblingIdx","sibling","__doInsert","nodeHead","nodeTail","head","__prev","tail","__doRemove","__lazyRemoves","lazyRemoves","DEFAULT_FN_BINDING","DEFAULT_SCOPE_BINDING","FnList","fnBinding","scopeBinding","__nodeMap","__list","parseScope","list","nodeMap","id","removeId","hasId","fnId","scopeId","DEFAULT_SCOPE_ID","fnIdGenerator","scopeIdGenerator","MutationObserver","textNode","document","createTextNode","flush","observe","characterData","setTimeout","ticks","pending","executeTick","t","nextTick","clearTick","clearTickId","LINE_REG","Source","buff","__lines","__linePos","position","lines","linePos","escape","line","toSourceStr","escapeSourceStr","sourceStr","genCharCodes","ignoreCase","getAnotherCode","eachCharCodes","eachCharCode","MatchError","$ruleErr","capturable","context","rule","pos","startPos","defaultErr","defaultMatch","idGen","Rule","$rule","options","onMatch","onErr","mkErr","error","src","userErr","matched","enter","getStart","startCodes","startCodeTest","startCodeIdx","nextCode","setStartCodes","setCodeIdx","mkExpr","setExpr","EXPECT","getExpr","MatchContext","orgOffset","parent","result","__buff","__offset","__orgOffset","__advanced","__code","__flushCode","__setAdvanced","advanced","notLess","commit","advance","margeState","rollback","checkpoint","resultLen","reset","orgBuff","currPos","nextChar","resultSize","MAX","ComplexRule","repeat","builder","rMin","rMax","notGreater","rmatch","parse","ctx","unshift","init","rules","names","rnames","EXPECTS","__init","getRules","consume","AndRule","testRule","cp","out","OrRule","starts","rStarts","upErr","MatchRule","comsume","CharMatchRule","allows","chars","RegMatchRule","regexp","pick","pattern","multiline","stickyMatch","execMatch","spicker","pickNone","pickTestStr","picker","mkPicker","pickAll","StringMatchRule","discardMatch","appendMatch","attachMatch","mkMatch","and","mkComplexRule","any","many","option","or","anyOne","manyOne","optionOne","defaultMatchCallback","isStrOrCodes","isMatchPattern","parseRuleOptions","strMatch","defaultRepeat","rulesBuilder","_rule","OBSERVER_KEY","ARRAY_CHANGE","ARRAY_LENGTH","Proxy","__name","__proxy","__createProxy","observer","setter","changeWatcher","initWatcher","watcher","notify","proxy","arrayHooks","ARRAY_LEN_CHANGE","arrayHookCfg","pop","splice","ob","notifies","shift","hooker","methods","method","hook","execludes","getArrayOriginValue","applyArrayHooks","__watch","newValue","VBArray","execScript","VBPROXY_KEY","VBPROXY_CTOR_KEY","VBProxy","__props","console","propMap","__fns","fns","applyProps","OBJECT_DEFAULT_PROPS","loadClassFactory","__source","__observer","CONSTRUCTOR_SCRIPT","classPool","genAccessorScript","genClassScript","className","buffer","classNameGenerator","classKey","sort","factoryName","parseVB","isObserverTarget","isArrayChangeProp","V","getValue","topicIdGen","collectQueue","dirtyQueue","TOPIC_ENABLED_FLAG","TOPIC_LISTEN_FLAG","TOPIC_SUB_FLAG","Topic","owner","__state","__original","__owner","__prop","__parent","__id","__listen","__listeners","listeners","__path","__unlisten","____unlisten","__unlistenId","topic","__bind","__removeSub","org","__unwatchTopic","__watchTopic","__getPath","__getSub","__subCache","subCache","__addSub","subProp","__subs","sub","subs","subObserver","subTarget","__loadSubObserver","__ignorePath","warn","__ignoreSubPaths","__update","original","collect","__collect","____collect","force","dirty","__dirty","orgSubObserver","subOriginal","proxyEnable","compareTopic","topic1","topic2","now","log","topics","listens","__original__","__updateTopicCB","Watcher","Observer","arrayTarget","watchers","__watchers","__watcherProps","policy","__topics","prop0","__flags","observed","__getTopic","observedId","unobserve","unobserveId","getOriginal","origin","$get","$set","proxyPolicy","accessorPolicy","vbPolicy","info","__getObserver","$eq","oserver","listenId","getObserver"],"mappings":"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"}