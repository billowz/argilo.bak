{"version":3,"file":"argilo.esm.js","sources":["/argilo/src/utility/consts.ts","/argilo/src/utility/dkeys.ts","/argilo/src/utility/constructor.ts","/argilo/src/utility/is.ts","/argilo/src/utility/fn.ts","/argilo/src/utility/reg.ts","/argilo/src/utility/proto/main.ts","/argilo/src/utility/proto/src/utility/proto/index.ts","/argilo/src/utility/defProp/main.ts","/argilo/src/utility/defProp/src/utility/defProp/index.ts","/argilo/src/utility/ownProp.ts","/argilo/src/utility/create/main.ts","/argilo/src/utility/create/src/utility/create/index.ts","/argilo/src/utility/collection/Control.ts","/argilo/src/utility/collection/each.ts","/argilo/src/utility/collection/map.ts","/argilo/src/utility/collection/idxOf.ts","/argilo/src/utility/collection/reduce.ts","/argilo/src/utility/collection/obj2arr.ts","/argilo/src/utility/collection/arr2obj.ts","/argilo/src/utility/collection/index.ts","/argilo/src/utility/propPath.ts","/argilo/src/utility/string.ts","/argilo/src/utility/format.ts","/argilo/src/utility/assign.ts","/argilo/src/utility/deepEq.ts","/argilo/src/utility/assert.ts","/argilo/src/utility/List/List.ts","/argilo/src/utility/List/FnList.ts","/argilo/src/utility/List/index.ts","/argilo/src/utility/nextTick.ts","/argilo/src/utility/Source.ts","/argilo/src/utility/AST/util.ts","/argilo/src/utility/mixin.ts","/argilo/src/utility/AST/Rule.ts","/argilo/src/utility/AST/MatchRule.ts","/argilo/src/utility/AST/CharMatchRule.ts","/argilo/src/utility/AST/RegMatchRule.ts","/argilo/src/utility/AST/StringMatchRule.ts","/argilo/src/utility/AST/MatchContext.ts","/argilo/src/utility/AST/ComplexRule.ts","/argilo/src/utility/AST/AndRule.ts","/argilo/src/utility/AST/OrRule.ts","/argilo/src/utility/AST/api.ts","/argilo/src/utility/index.ts","/argilo/src/observer/IObserver.ts","/argilo/src/observer/accessorPolicy.ts","/argilo/src/observer/proxyPolicy.ts","/argilo/src/observer/src/observer/Observer.ts","/argilo/src/observer/index.ts","/argilo/src/index.ts"],"sourcesContent":["/**\n *\n * @author Tao Zeng (tao.zeng.zt@qq.com)\n * @module utility\n * @created 2018-11-09 15:23:35\n * @modified 2018-11-09 15:23:35 by Tao Zeng (tao.zeng.zt@qq.com)\n */\n\nexport const CONSTRUCTOR = 'constructor'\n\nexport const PROTOTYPE = 'prototype'\n\nexport const PROTO = '__proto__'\n\nexport const HAS_OWN_PROP = 'hasOwnProperty'\n\nexport const TYPE_BOOL = 'boolean'\n\nexport const TYPE_FN = 'function'\n\nexport const TYPE_NUM = 'number'\n\nexport const TYPE_STRING = 'string'\n\nexport const TYPE_UNDEF = 'undefined'\n\nexport const GLOBAL: any =\n\ttypeof window !== TYPE_UNDEF\n\t\t? window\n\t\t: typeof global !== TYPE_UNDEF\n\t\t? global\n\t\t: typeof self !== TYPE_UNDEF\n\t\t? self\n\t\t: {}\n\nexport interface ObjArray {\n\tlength: number\n}\n\nexport type IArray = any[] | string | IArguments | ObjArray\n\nexport function EMPTY_FN() {}\n\nexport function NULL_CONSTRUCTOR() {}\nNULL_CONSTRUCTOR[PROTOTYPE] = null\n","/**\n * @module utility/dkeys\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Mar 11 2019 17:22:13 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 19:01:40 GMT+0800 (China Standard Time)\n */\nimport { NULL_CONSTRUCTOR } from './consts'\n\nexport const defaultKeyMap = new NULL_CONSTRUCTOR()\n\nexport const defaultKeys = []\n\nexport function isDefaultKey(key: string) {\n\treturn defaultKeyMap[key] || false\n}\n\nexport function addDefaultKey(key: string) {\n\tif (!defaultKeyMap[key]) {\n\t\tdefaultKeyMap[key] = true\n\t\tdefaultKeys.push(key)\n\t}\n\treturn key\n}\n\nexport function addDefaultKeys(...keys: string[]): void\n\nexport function addDefaultKeys() {\n\tconst args = arguments,\n\t\tl = args.length\n\tfor (var i = 0; i < l; i++) {\n\t\taddDefaultKey(args[i] + '')\n\t}\n}\n\nexport function getDefaultKeys() {\n\treturn defaultKeys\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Sat Feb 16 2019 10:53:30 GMT+0800 (China Standard Time)\n */\n\nimport { TYPE_FN, CONSTRUCTOR } from './consts'\n\nexport function getConstructor(o: any) {\n\tlet C = o[CONSTRUCTOR]\n\treturn typeof C === TYPE_FN ? C : Object\n}\n","/**\n * type checker\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Mon Feb 25 2019 16:59:04 GMT+0800 (China Standard Time)\n */\n\nimport { CONSTRUCTOR, GLOBAL, TYPE_BOOL, TYPE_FN, TYPE_NUM, TYPE_STRING, TYPE_UNDEF } from './consts'\nimport { getConstructor } from './constructor'\n\n/**\n * is equals\n * > o1 === o2 || NaN === NaN\n */\nexport function eq(o1: any, o2: any): boolean {\n\treturn o1 === o2 || (o1 !== o1 && o2 !== o2)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    primitive type                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * is null\n */\nexport function isNull(o: any): boolean {\n\treturn o === null\n}\n\n/**\n * is undefined\n */\nexport function isUndef(o: any): boolean {\n\treturn o === undefined\n}\n\n/**\n * is null or undefined\n */\nexport function isNil(o: any): boolean {\n\treturn o === null || o === undefined\n}\n\n/**\n * is boolean\n */\nexport const isBool: (o: any) => boolean = mkIsPrimitive(TYPE_BOOL)\n\n/**\n * is a number\n */\nexport const isNum: (o: any) => boolean = mkIsPrimitive(TYPE_NUM)\n\n/**\n * is a string\n */\nexport const isStr: (o: any) => boolean = mkIsPrimitive(TYPE_STRING)\n\n/**\n * is a function\n */\nexport const isFn: (o: any) => boolean = mkIsPrimitive(TYPE_FN)\n\n/**\n * is integer number\n */\nexport function isInt(o: any): boolean {\n\treturn o === 0 || (o ? typeof o === TYPE_NUM && o % 1 === 0 : false)\n}\n\n/**\n * is primitive type\n * - null\n * - undefined\n * - boolean\n * - number\n * - string\n * - function\n */\nexport function isPrimitive(o: any): boolean {\n\tif (o === undefined || o === null) {\n\t\treturn true\n\t}\n\tswitch (typeof o) {\n\t\tcase TYPE_BOOL:\n\t\tcase TYPE_NUM:\n\t\tcase TYPE_STRING:\n\t\tcase TYPE_FN:\n\t\t\treturn true\n\t}\n\treturn false\n}\n\nfunction mkIsPrimitive(type: string): (o: any) => boolean {\n\treturn function is(o: any): boolean {\n\t\treturn typeof o === type\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    reference type                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * is instanceof\n */\nexport function instOf(obj: any, Cls: Function): boolean {\n\treturn obj !== undefined && obj !== null && obj instanceof Cls\n}\n\n/**\n * is child instance of Type\n */\nexport function is(o: any, Type: Function | Function[]): boolean {\n\tif (o !== undefined && o !== null) {\n\t\tconst C = o[CONSTRUCTOR] || Object\n\t\tif (Type[CONSTRUCTOR] === Array) {\n\t\t\tvar i = Type.length\n\t\t\twhile (i--) {\n\t\t\t\tif (C === (Type as Function[])[i]) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn C === Type\n\t\t}\n\t}\n\treturn false\n}\n\n/**\n * is boolean or Boolean\n */\nexport const isBoolean: (o: any) => boolean = mkIs(Boolean)\n\n/**\n * is number or Number\n */\nexport const isNumber: (o: any) => boolean = mkIs(Number)\n\n/**\n * is string or String\n */\nexport const isString: (o: any) => boolean = mkIs(String)\n\n/**\n * is Date\n */\nexport const isDate: (o: any) => boolean = mkIs(Date)\n\n/**\n * is RegExp\n */\nexport const isReg: (o: any) => boolean = mkIs(RegExp)\n\n/**\n * is Array\n */\nexport const isArray: (o: any) => boolean = Array.isArray || mkIs(Array)\n\n/**\n * is Typed Array\n */\nexport const isTypedArray: (o: any) => boolean = isFn(ArrayBuffer) ? ArrayBuffer.isView : () => false\n\n/**\n * is Array or pseudo-array\n * - Array\n * - String\n * - IArguments\n * - NodeList\n * - HTMLCollection\n * - Typed Array\n * - {length: int, [length-1]: any}\n */\nexport function isArrayLike(o: any): boolean {\n\tif (o && o[CONSTRUCTOR]) {\n\t\tswitch (o[CONSTRUCTOR]) {\n\t\t\tcase Array:\n\t\t\tcase String:\n\t\t\tcase GLOBAL.NodeList:\n\t\t\tcase GLOBAL.HTMLCollection:\n\t\t\tcase GLOBAL.Int8Array:\n\t\t\tcase GLOBAL.Uint8Array:\n\t\t\tcase GLOBAL.Int16Array:\n\t\t\tcase GLOBAL.Uint16Array:\n\t\t\tcase GLOBAL.Int32Array:\n\t\t\tcase GLOBAL.Uint32Array:\n\t\t\tcase GLOBAL.Float32Array:\n\t\t\tcase GLOBAL.Float64Array:\n\t\t\t\treturn true\n\t\t}\n\t\tconst len = o.length\n\t\treturn typeof len === TYPE_NUM && (len === 0 || (len > 0 && len % 1 === 0 && len - 1 in o))\n\t}\n\treturn o === ''\n}\n\n/**\n * is simple Object\n * TODO object may has constructor property\n */\nexport function isObj(o: any): boolean {\n\treturn o !== undefined && o !== null && getConstructor(o) === Object\n}\n\nfunction mkIs(Type: Function): (o: any) => boolean {\n\treturn function is(o: any): boolean {\n\t\treturn o !== undefined && o !== null && o[CONSTRUCTOR] === Type\n\t}\n}\n\nconst blankStrReg = /^\\s*$/\n/**\n * is empty\n * - string: trim(string).length === 0\n * - array: array.length === 0\n * - pseudo-array: pseudo-array.length === 0\n */\nexport function isBlank(o: any): boolean {\n\tif (o) {\n\t\tif (o[CONSTRUCTOR] === String) {\n\t\t\treturn blankStrReg.test(o)\n\t\t}\n\t\treturn o.length === 0\n\t}\n\treturn true\n}\n","/**\n * Function utilities\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Fri Nov 23 2018 11:18:33 GMT+0800 (China Standard Time)\n */\n\nimport { GLOBAL, PROTOTYPE } from './consts'\nimport { isNil } from './is'\n\n// ========================================================================================\n/*                                                                                      *\n *                                    create function                                   *\n *                                                                                      */\n// ========================================================================================\n\n/**\n * create function by code string\n * @param body\tfunction body\n * @param args\tfunction argument names\n * @param name\tfunction name\n */\nexport function createFn<T extends Function>(body: string, args?: string[], name?: string): T {\n\treturn name\n\t\t? Function(`return function ${name}(${args ? args.join(', ') : ''}){${body}}`)()\n\t\t: applyScope(Function, Function, args && args.length ? args.concat(body) : [body])\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                    function apply                                    *\n *                                                                                      */\n// ========================================================================================\n\n/**\n * generate apply function\n */\nfunction applyBuilder<T extends Function>(maxArgs: number, scope: any, offset: any): T {\n\tscope = scope ? 'scope' : ''\n\toffset = offset ? 'offset' : ''\n\tconst args = new Array(maxArgs + 1)\n\tconst cases = new Array(maxArgs + 1)\n\tfor (let i = 0; i <= maxArgs; i++) {\n\t\targs[i] = `${i || scope ? ', ' : ''}args[${offset ? `offset${i ? ' + ' + i : ''}` : i}]`\n\t\tcases[i] = `case ${i}: return fn${scope && '.call'}(${scope}${args.slice(0, i).join('')});`\n\t}\n\treturn Function(`return function(fn, ${scope && scope + ', '}args${offset && ', offset, len'}){\nswitch(${offset ? 'len' : 'args.length'}){\n${cases.join('\\n')}\n}\n${offset &&\n\t\t`var arr = new Array(len);\nfor(var i=0; i<len; i++) arr[i] = arr[offset + i];`}\nreturn fn.apply(${scope || 'null'}, ${offset ? 'arr' : 'args'});\n}`)()\n}\n\n/**\n * apply function with scope\n * @param fn\ttarget function\n * @param scope\tscope of function\n * @param args\targuments of function\n */\nexport const applyScope: (fn: Function, scope: any, args: any[] | IArguments) => any = applyBuilder(8, 1, 0)\n\n/**\n * apply function without scope\n * @param fn\t\ttarget function\n * @param args\targuments of function\n */\nexport const applyNoScope: (fn: Function, args: any[] | IArguments) => any = applyBuilder(8, 0, 0)\n\n/**\n * apply function with scope\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport const applyScopeN: (\n\tfn: Function,\n\tscope: any,\n\targs: any[] | IArguments,\n\toffset: number,\n\tlen: number\n) => any = applyBuilder(8, 1, 1)\n\n/**\n * apply function without scope\n * @param fn\t\ttarget function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport const applyNoScopeN: (fn: Function, args: any[] | IArguments, offset: number, len: number) => any = applyBuilder(\n\t8,\n\t0,\n\t1\n)\n\n/**\n * apply function\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n */\nexport function apply(fn: Function, scope: any, args: any[] | IArguments): any {\n\tif (scope === undefined || scope === null || scope === GLOBAL) {\n\t\treturn applyNoScope(fn, args || [])\n\t}\n\treturn applyScope(fn, scope, args || [])\n}\n\n/**\n * apply function\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport function applyN(fn: Function, scope: any, args: any[] | IArguments, offset: number, len: number): any {\n\tif (scope === undefined || scope === null || scope === GLOBAL) {\n\t\treturn applyNoScopeN(fn, args, offset, len)\n\t}\n\treturn applyScopeN(fn, scope, args, offset, len)\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                     function name                                    *\n *                                                                                      */\n// ========================================================================================\n\nconst varGenReg = /\\$\\d+$/\n\n/**\n * get function name\n */\nexport function fnName(fn: Function): string {\n\tconst name: string = (fn as any).name\n\treturn name ? name.replace(varGenReg, '') : 'anonymous'\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                         bind                                         *\n *                                                                                      */\n// ========================================================================================\n\nlet _bind\nconst funcProto = Function[PROTOTYPE]\nif (funcProto.bind) {\n\t_bind = function bind<T extends Function>(fn: T, scope: any): T {\n\t\tconst args = arguments,\n\t\t\targLen = args.length\n\t\tif (isNil(scope)) {\n\t\t\treturn argLen > 2 ? bindPolyfill(fn, scope, args, 2) : fn\n\t\t}\n\t\treturn applyScopeN(fn.bind, fn, args, 1, argLen - 1)\n\t}\n} else {\n\tfuncProto.bind = function bind(scope) {\n\t\treturn bindPolyfill(this, scope, arguments, 1)\n\t}\n\t_bind = function bind<T extends Function>(fn: T, scope: any): T {\n\t\treturn bindPolyfill(fn, scope, arguments, 2)\n\t}\n}\n\n/**\n * bind scope or arguments on function\n * - return source function when without arguments and scope is undefined or null\n * - only bind arguments when scope is undefined or null, well can call the new function proxy with some scope\n *\n * @example\n * \t\tfunction example() {\n * \t\t\tconsole.log(this, arguments);\n * \t\t}\n * \t\tvar proxy = bind(example, null) \t// proxy === example\n * \t\tproxy() \t\t\t\t\t\t\t// log: window | undefined, []\n * \t\tproxy.call(1) \t\t\t\t\t\t// log: 1, []\n *\n * \t\tproxy = bind(example, null, 1) \t\t// proxy !== example\n * \t\tproxy() \t\t\t\t\t\t\t// log: window | undefined, [1]\n * \t\tproxy(2) \t\t\t\t\t\t\t// log: window | undefined, [1, 2]\n * \t\tproxy.call(1, 2) \t\t\t\t\t// log: 1, [1, 2]\n *\n * \t\tproxy = bind(example, {}, 1, 2)\t\t// proxy !== example\n * \t\tproxy() \t\t\t\t\t\t\t// log: {}, [1]\n * \t\tproxy(2) \t\t\t\t\t\t\t// log: {}, [1, 2, 2]\n * \t\tproxy.call(1, 2) \t\t\t\t\t// log: {}, [1, 2, 2]\n *\n * @param fn\tsource function\n * @param scope\tbind scope\n * @param args\tbind arguments\n * @return function proxy\n */\nexport const bind: <T extends Function>(fn: T, scope: any, ...args: any[]) => T = _bind\n\n/**\n * bind\n * > not bind scope when scope is null or undefined\n * @param fn\t\tsource function\n * @param scope\t\tbind scope\n * @param args\t\tbind arguments\n * @param argOffset\toffset of args\n * @return function proxy\n */\nfunction bindPolyfill<T extends Function>(fn: T, scope: any, bindArgs: any[] | IArguments, argOffset: number): T {\n\tconst argLen = bindArgs.length - argOffset\n\tif (scope === undefined) {\n\t\tscope = null\n\t}\n\tif (argLen > 0) {\n\t\t// bind with arguments\n\t\treturn function bindProxy() {\n\t\t\tconst args = arguments\n\t\t\tlet i = args.length\n\t\t\tif (i) {\n\t\t\t\tconst params = new Array(argLen + i)\n\t\t\t\twhile (i--) {\n\t\t\t\t\tparams[argLen + i] = args[i]\n\t\t\t\t}\n\t\t\t\ti = argLen\n\t\t\t\twhile (i--) {\n\t\t\t\t\tparams[i] = bindArgs[i + argOffset]\n\t\t\t\t}\n\t\t\t\treturn apply(fn, scope === null ? this : scope, params) // call with scope or this\n\t\t\t}\n\t\t\treturn applyN(fn, scope === null ? this : scope, bindArgs, argOffset, argLen) // call with scope or this\n\t\t} as any\n\t}\n\tif (scope === null) {\n\t\treturn fn\n\t}\n\tif (scope === GLOBAL) {\n\t\t// bind on GLOBAL\n\t\treturn function bindProxy() {\n\t\t\treturn applyNoScope(fn, arguments)\n\t\t} as any\n\t}\n\treturn function bindProxy() {\n\t\treturn applyScope(fn, scope, arguments)\n\t} as any\n}\n","/**\n * regexp utilities\n * @module utility/reg\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Sep 06 2018 18:27:51 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:29:00 GMT+0800 (China Standard Time)\n */\n\nimport { isBool } from './is'\n\n/**\n * whether to support sticky on RegExp\n */\nexport const stickyReg = isBool(/(?:)/.sticky)\n\n/**\n * whether to support unicode on RegExp\n */\nexport const unicodeReg = isBool(/(?:)/.unicode)\n\nconst REG_ESCAPE = /[-\\/\\\\^$*+?.()|[\\]{}]/g\n\n/**\n * escape string for RegExp\n */\nexport function reEscape(str: string): string {\n\treturn str.replace(REG_ESCAPE, '\\\\$&')\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:23:56 GMT+0800 (China Standard Time)\n * @modified Thu Jan 31 2019 10:10:48 GMT+0800 (China Standard Time)\n */\n\nexport const prototypeOf = true\nexport const protoProp = true\nexport const protoOf = Object.getPrototypeOf\nexport const __setProto = Object.setPrototypeOf\nexport const setProto = __setProto\n",null,"/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:57 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 18:57:32 GMT+0800 (China Standard Time)\n */\n\nexport const propDescriptor = true\nexport const propAccessor = true\nexport const defProp = Object.defineProperty\nexport function defPropValue<V>(\n\tobj: any,\n\tprop: string,\n\tvalue: V,\n\tenumerable?: boolean,\n\tconfigurable?: boolean,\n\twritable?: boolean\n): V {\n\tdefProp(obj, prop, {\n\t\tvalue,\n\t\tenumerable: enumerable !== false,\n\t\tconfigurable: configurable !== false,\n\t\twritable: writable !== false\n\t})\n\treturn value\n}\n",null,"/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:57 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 09:22:38 GMT+0800 (China Standard Time)\n */\n\nimport { PROTOTYPE, HAS_OWN_PROP } from './consts'\n\nconst __hasOwn = Object[PROTOTYPE][HAS_OWN_PROP]\n\n/**\n * has own property\n */\nexport const hasOwnProp: (obj: any, prop: string) => boolean = (obj: any, prop: string): boolean => {\n\treturn __hasOwn.call(obj, prop)\n}\n\n/**\n * get owner property value\n * @param prop \t\t\tproperty name\n * @param defaultVal \tdefault value\n */\nexport function getOwnProp(obj: any, prop: string, defaultVal?: any): any {\n\treturn hasOwnProp(obj, prop) ? obj[prop] : defaultVal\n}\n","/**\n * @module utility/create\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Tue Feb 19 2019 11:52:42 GMT+0800 (China Standard Time)\n */\nexport const create = Object.create\n",null,"/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:10:41 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:37:44 GMT+0800 (China Standard Time)\n */\nexport class Control {\n\tprivate __desc: string\n\n\tconstructor(desc: string) {\n\t\tthis.__desc = desc\n\t}\n\n\ttoString() {\n\t\treturn this.__desc\n\t}\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:10:41 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 14:04:35 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { hasOwnProp } from '../ownProp'\nimport { isArrayLike, isBool } from '../is'\nimport { defaultKeyMap } from '../dkeys'\n\n/**\n * STOP Control\n * > stop each/map/indexOf...\n */\nexport const STOP = new Control('STOP')\n//========================================================================================\n/*                                                                                      *\n *                                each object properties                                *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on object\n * - will stop each on return STOP\n */\nexport type EachPropCallback = (prop: string, obj: object) => Control | void\n\n/**\n * each properties\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties, default: true\n * @return stoped property name or false\n */\nexport function eachProps(obj: object, callback: EachPropCallback, own: boolean): false | string\nexport function eachProps(obj: object, callback: EachPropCallback, scope?: any, own?: boolean): false | string\nexport function eachProps(obj: object, callback: EachPropCallback, scope?: any, own?: boolean): false | string {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tlet k: string\n\tif (own === false) {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && callback(k, obj) === STOP) return k\n\t} else {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && hasOwnProp(obj, k) && callback(k, obj) === STOP) return k\n\t}\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      each object                                     *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on object\n * - will stop each on callback return STOP\n */\nexport type EachObjCallback = (value: any, prop: string, obj: object) => Control | void\n\n/**\n * each object\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties, default: true\n * @return stoped property name or false\n */\nexport function eachObj(obj: object, callback: EachObjCallback, own: boolean): false | string\nexport function eachObj(obj: object, callback: EachObjCallback, scope?: any, own?: boolean): false | string\nexport function eachObj(obj: object, callback: EachObjCallback, scope?: any, own?: boolean): false | string {\n\tconst args = arguments\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tlet k: string\n\tif (own === false) {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && callback(obj[k], k, obj) === STOP) return k\n\t} else {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && hasOwnProp(obj, k) && callback(obj[k], k, obj) === STOP) return k\n\t}\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      each array                                      *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on array\n * - will stop each on callback return STOP\n */\nexport type EachArrayCallback = (data: any, index: number, array: IArray) => Control | void\n\n/**\n * each array\n * - will stop each on callback return STOP\n * @param array\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @return stoped index or false\n */\nexport function eachArray(array: IArray, callback: EachArrayCallback, scope?: any): false | number {\n\tcallback = bind(callback, scope)\n\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\tif (callback(array[i], i, array) === STOP) return i\n\t}\n\treturn false\n}\n\n/**\n * reverse each array\n * - will stop each on callback return STOP\n * @param array\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @return stoped index or false\n */\nexport function reachArray(array: IArray, callback: EachArrayCallback, scope?: any): false | number {\n\tcallback = bind(callback, scope)\n\tlet i = array.length\n\twhile (i--) if (callback(array[i], i, array) === STOP) return i\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         each                                         *\n *                                                                                      */\n//========================================================================================\n\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: IArray,\n\tcallback: EachArrayCallback,\n\tscope?: any\n): false | number\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: object,\n\tcallback: EachObjCallback,\n\town?: boolean\n): false | string\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: object,\n\tcallback: EachObjCallback,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: object | IArray,\n\tcallback: EachObjCallback | EachArrayCallback,\n\town?: boolean\n): false | number | string\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: object | IArray,\n\tcallback: EachObjCallback | EachArrayCallback,\n\tscope?: any,\n\town?: boolean\n): false | number | string\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: any,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): false | number | string {\n\tif (isArrayLike(obj)) return _eachArray(obj, callback, scope)\n\treturn _eachObj(obj, callback, scope, own)\n}\n\n/**\n * each\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties on object, default: true\n * @return stoped index or false\n */\n\nexport function each(obj: IArray, callback: EachArrayCallback, scope?: any): false | number\nexport function each(obj: object, callback: EachObjCallback, own?: boolean): false | string\nexport function each(obj: object, callback: EachObjCallback, scope?: any, own?: boolean): false | string\nexport function each(\n\tobj: object | IArray,\n\tcallback: EachObjCallback | EachArrayCallback,\n\town?: boolean\n): false | number | string\nexport function each(\n\tobj: object | IArray,\n\tcallback: EachObjCallback | EachArrayCallback,\n\tscope?: any,\n\town?: boolean\n): false | number | string\nexport function each(obj: any, callback: any, scope?: any, own?: boolean): false | number | string {\n\treturn doEach(eachArray, eachObj, obj, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:37:30 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { create } from '../create'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool } from '../is'\n\n/**\n * SKIP Control\n * > skip map\n */\nexport const SKIP = new Control('SKIP')\n\n//========================================================================================\n/*                                                                                      *\n *                                    map object                                   *\n *                                                                                      */\n//========================================================================================\n\n/**\n * callback on object\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param value\tproperty value\n * @param prop\tproperty name\n * @param obj\tmap target\n */\nexport type MapObjCallback<T> = (callback: any, prop: string, obj: object) => T | Control\n\nexport function doMapObj<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\tcallback: MapObjCallback<T>,\n\town?: boolean\n): { [key: string]: T }\nexport function doMapObj<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\tcallback: MapObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function doMapObj<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\tcallback: MapObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tconst copy: { [key: string]: T } = create(null)\n\teach(\n\t\tobj,\n\t\t(value, prop, obj) => {\n\t\t\tconst v = callback(value, prop, obj)\n\t\t\tif (v === STOP) return STOP\n\t\t\tif (v !== SKIP) copy[prop] = v as T\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn copy\n}\n\n/**\n * object: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param obj\t\tmap target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\tmap own properties, default: true\n */\nexport function mapObj<T>(obj: object, callback: MapObjCallback<T>, own?: boolean): { [key: string]: T }\nexport function mapObj<T>(obj: object, callback: MapObjCallback<T>, scope?: any, own?: boolean): { [key: string]: T }\nexport function mapObj<T>(obj: object, callback: MapObjCallback<T>, scope?: any, own?: boolean): { [key: string]: T } {\n\treturn doMapObj(eachObj, obj, callback, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     indexof Array                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * callback on array\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param data\titem data\n * @param index\titem index\n * @param array\tmap target\n */\nexport type MapArrayCallback<T> = (data: any, index: number, array: IArray) => T | Control\n\nexport function doMapArray<T>(each: typeof eachArray, array: IArray, callback: MapArrayCallback<T>, scope?: any): T[] {\n\tcallback = bind(callback, scope)\n\tconst copy: T[] = []\n\tlet j = 0\n\teach(array, (data, index, array) => {\n\t\tconst v = callback(data, index, array)\n\t\tif (v === STOP) return STOP\n\t\tif (v !== SKIP) copy[j++] = v as T\n\t})\n\treturn copy\n}\n\n/**\n * array: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param array\t\tmap target\n * @param value\t\tcallback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function mapArray<T>(array: IArray, callback: MapArrayCallback<T>, scope?: any): T[] {\n\treturn doMapArray(eachArray, array, callback, scope)\n}\n\n/**\n * revice array: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param array\t\tmap target\n * @param value\t\tmap value of callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function rmapArray<T>(array: IArray, callback: MapArrayCallback<T>, scope?: any): T[] {\n\treturn doMapArray(reachArray, array, callback, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       map                                       *\n *                                                                                      */\n//========================================================================================\n\nexport function doMap<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray,\n\tcallback: MapArrayCallback<T>,\n\tscope?: any\n): any[]\nexport function doMap<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\tcallback: MapObjCallback<T>,\n\town?: boolean\n): { [key: string]: T }\nexport function doMap<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\tcallback: MapObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function doMap<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\tcallback: MapObjCallback<T> | MapArrayCallback<T>,\n\town?: boolean\n): { [key: string]: T } | any[]\nexport function doMap<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\tcallback: MapObjCallback<T> | MapArrayCallback<T>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } | any[]\nexport function doMap<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } | any[] {\n\tif (isArrayLike(obj)) return doMapArray(eacharray, obj, callback, scope)\n\treturn doMapObj(eachobj, obj, callback, scope, own)\n}\n\n/**\n * map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param obj\t\tmap target\n * @param value\t\tmap value of callback\n * @param scope\t\tscope of callback\n * @param own\t\tmap own properties on object, default: true\n * @return array index or property name or -1\n */\nexport function map<T>(obj: IArray, callback: MapArrayCallback<T>, scope?: any): any[]\nexport function map<T>(obj: object, callback: MapObjCallback<T>, own?: boolean): { [key: string]: T }\nexport function map<T>(obj: object, callback: MapObjCallback<T>, scope?: any, own?: boolean): { [key: string]: T }\nexport function map<T>(\n\tobj: object | IArray,\n\tcallback: MapObjCallback<T> | MapArrayCallback<T>,\n\town?: boolean\n): { [key: string]: T } | any[]\nexport function map<T>(\n\tobj: object | IArray,\n\tcallback: MapObjCallback<T> | MapArrayCallback<T>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } | any[]\nexport function map<T>(obj: object | IArray, callback: any, scope?: any, own?: boolean): { [key: string]: T } | T[] {\n\treturn doMap(eachArray, eachObj, obj, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Tue Nov 27 2018 13:38:16 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool, isFn, eq } from '../is'\n\nfunction parseCallback(value: any, scope: any) {\n\tif (isFn(value)) return bind(value, scope)\n\treturn function defaultHandler(data, idx, obj) {\n\t\treturn eq(data, value)\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    index of object                                   *\n *                                                                                      */\n//========================================================================================\n\n/**\n * indexOf callback on object\n * - will stop find on callback return STOP\n * @param value\tproperty value\n * @param prop\tproperty name\n * @param obj\t\tindexOf target\n * @return\n * - boolean: is finded\n * - void: find next\n * - STOP: stop find\n */\nexport type IdxOfObjCallback = (value: any, prop: string, obj: object) => boolean | Control | void\n\nexport function doIdxOfObj(each: typeof eachObj, obj: object, value: any, own?: boolean): -1 | string\nexport function doIdxOfObj(each: typeof eachObj, obj: object, value: IdxOfObjCallback, own?: boolean): -1 | string\nexport function doIdxOfObj(\n\teach: typeof eachObj,\n\tobj: object,\n\tvalue: IdxOfObjCallback,\n\tscope?: any,\n\town?: boolean\n): -1 | string\n\nexport function doIdxOfObj(\n\teach: typeof eachObj,\n\tobj: object,\n\tvalue: IdxOfObjCallback | any,\n\tscope?: any,\n\town?: boolean\n): -1 | string {\n\tif (isBool(scope)) {\n\t\town = scope\n\t\tscope = null\n\t}\n\tconst callback: IdxOfObjCallback = parseCallback(value, scope)\n\tlet idx: -1 | string = -1\n\teach(\n\t\tobj,\n\t\t(data, prop, obj) => {\n\t\t\tconst r = callback(data, prop, obj)\n\t\t\tif (r === true) {\n\t\t\t\tidx = prop\n\t\t\t\treturn STOP\n\t\t\t} else if (r === STOP) return r\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn idx\n}\n\n/**\n * object: indexOf\n * - will stop find on callback return STOP\n * @param obj\t\tfind target\n * @param callback\tfind value or callback\n * @param scope\t\tscope of callback\n * @param own\t\tfind own properties, default: true\n * @return property name or -1\n */\nexport function idxOfObj(obj: object, value: any, own?: boolean): -1 | string\nexport function idxOfObj(obj: object, value: IdxOfObjCallback, own?: boolean): -1 | string\nexport function idxOfObj(obj: object, value: IdxOfObjCallback, scope?: any, own?: boolean): -1 | string\nexport function idxOfObj(obj: object, value: IdxOfObjCallback | any, scope?: any, own?: boolean): -1 | string {\n\treturn doIdxOfObj(eachObj, obj, value, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     indexof Array                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * indexOf callback on array\n * - will stop find on callback return STOP\n * @param data\titem data\n * @param index\titem index\n * @param array\tindexOf target\n * @return\n * - boolean: is finded\n * - void: find next\n * - STOP: stop find\n */\nexport type IdxOfArrayCallback = (data: any, index: number, array: IArray) => boolean | Control | void\n\nexport function doIdxOfArray(each: typeof eachArray, array: IArray, value: any): number\nexport function doIdxOfArray(each: typeof eachArray, array: IArray, value: IdxOfArrayCallback, scope?: any): number\nexport function doIdxOfArray(\n\teach: typeof eachArray,\n\tarray: IArray,\n\tvalue: IdxOfArrayCallback | any,\n\tscope?: any\n): number {\n\tconst callback: IdxOfArrayCallback = parseCallback(value, scope)\n\tlet idx = -1\n\teach(array, (data, index, array) => {\n\t\tconst r = callback(data, index, array)\n\t\tif (r === true) {\n\t\t\tidx = index\n\t\t\treturn STOP\n\t\t} else if (r === STOP) return r\n\t})\n\treturn idx\n}\n\n/**\n * array: indexOf\n * - will stop find on callback return STOP\n * @param array\t\tfind target\n * @param value\t\tfind value or callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function idxOfArray(array: IArray, value: any): number\nexport function idxOfArray(array: IArray, value: IdxOfArrayCallback, scope?: any): number\nexport function idxOfArray(array: IArray, value: IdxOfArrayCallback | any, scope?: any): number {\n\treturn doIdxOfArray(eachArray, array, value, scope)\n}\n\n/**\n * revice array: indexOf\n * - will stop find on callback return STOP\n * @param array\t\tfind target\n * @param value\t\tfind value of callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function ridxOfArray(array: IArray, value: any): number\nexport function ridxOfArray(array: IArray, value: IdxOfArrayCallback, scope?: any): number\nexport function ridxOfArray(array: IArray, value: IdxOfArrayCallback | any, scope?: any): number {\n\treturn doIdxOfArray(reachArray, array, value, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       index of                                       *\n *                                                                                      */\n//========================================================================================\n// find by value\nexport function doIdxOf(eacharray: typeof eachArray, eachobj: typeof eachObj, obj: IArray, value: any): number\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\tvalue: any,\n\town?: boolean\n): string\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\tvalue: any,\n\town?: boolean\n): number | string\n// find by callback\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray,\n\tvalue: IdxOfArrayCallback,\n\tscope?: any\n): number\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\tvalue: IdxOfObjCallback,\n\town?: boolean\n): -1 | string\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\tvalue: IdxOfObjCallback,\n\tscope?: any,\n\town?: boolean\n): -1 | string\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\tvalue: IdxOfObjCallback | IdxOfArrayCallback,\n\town?: boolean\n): number | string\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\tvalue: IdxOfObjCallback | IdxOfArrayCallback,\n\tscope?: any,\n\town?: boolean\n): number | string\nexport function doIdxOf(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\tvalue: any,\n\tscope?: any,\n\town?: boolean\n): number | string {\n\tif (isArrayLike(obj)) return doIdxOfArray(eacharray, obj, value, scope)\n\treturn doIdxOfObj(eachobj, obj, value, scope, own)\n}\n\n/**\n * indexOf\n * - will stop find on callback return STOP\n * @param obj\t\tfind target\n * @param value\t\tfind value of callback\n * @param scope\t\tscope of callback\n * @param own\t\tfind own properties on object, default: true\n * @return array index or property name or -1\n */\nexport function idxOf(obj: IArray, value: any): number | string\nexport function idxOf(obj: object, value: any, own?: boolean): number | string\nexport function idxOf(obj: object | IArray, value: any, own?: boolean): number | string\nexport function idxOf(obj: IArray, value: IdxOfArrayCallback, scope?: any): number\nexport function idxOf(obj: object, value: IdxOfObjCallback, own?: boolean): -1 | string\nexport function idxOf(obj: object, value: IdxOfObjCallback, scope?: any, own?: boolean): -1 | string\nexport function idxOf(\n\tobj: object | IArray,\n\tvalue: IdxOfObjCallback | IdxOfArrayCallback,\n\town?: boolean\n): number | string\nexport function idxOf(\n\tobj: object | IArray,\n\tvalue: IdxOfObjCallback | IdxOfArrayCallback,\n\tscope?: any,\n\town?: boolean\n): number | string\nexport function idxOf(obj: object | IArray, value: any, scope?: any, own?: boolean): number | string {\n\treturn doIdxOf(eachArray, eachObj, obj, value, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Tue Nov 27 2018 14:02:39 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool } from '../is'\n\n//========================================================================================\n/*                                                                                      *\n *                                     reduce object                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * reduce callback on object\n * - will stop reduce on return STOP\n */\nexport type ReduceObjCallback<T> = (accumulator: T, value: any, prop: string, obj: object) => T | Control\n\nexport function doReduceObj<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T>,\n\town?: boolean\n): T\nexport function doReduceObj<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduceObj<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\teach(\n\t\tobj,\n\t\t(value, prop, obj) => {\n\t\t\tconst rs = callback(accumulator, value, prop, obj)\n\t\t\tif (rs === STOP) return STOP\n\t\t\taccumulator = rs as T\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn accumulator\n}\n\n/**\n * reduce object\n * - will stop reduce on callback return STOP\n * @param obj\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n * @param own\t\t\treduce own properties, default: true\n */\nexport function reduceObj<T>(obj: object, accumulator: T, callback: ReduceObjCallback<T>, own?: boolean)\nexport function reduceObj<T>(obj: object, accumulator: T, callback: ReduceObjCallback<T>, scope?: any, own?: boolean)\nexport function reduceObj<T>(\n\tobj: object,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T {\n\treturn doReduceObj(eachObj, obj, accumulator, callback, scope, own)\n}\n//========================================================================================\n/*                                                                                      *\n *                                     reduce array                                     *\n *                                                                                      */\n//========================================================================================\n\n/**\n * reduce callback on array\n * - will stop reduce on return STOP\n */\nexport type ReduceArrayCallback<T> = (accumulator: T, data: any, index: number, array: IArray) => T | Control\n\nexport function doReduceArray<T>(\n\teach: typeof eachArray,\n\tarray: IArray,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T>,\n\tscope?: any\n): T {\n\tcallback = bind(callback, scope)\n\teach(array, (data, index, array) => {\n\t\tconst rs = callback(accumulator, data, index, array)\n\t\tif (rs === STOP) return STOP\n\t\taccumulator = rs as T\n\t})\n\treturn accumulator\n}\n\n/**\n * reduce array\n * - will stop reduce on callback return STOP\n * @param array\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n */\nexport function reduceArray<T>(array: IArray, accumulator: T, callback: ReduceArrayCallback<T>, scope?: any): T {\n\treturn doReduceArray(eachArray, array, accumulator, callback, scope)\n}\n\n/**\n * revice reduce array\n * - will stop reduce on callback return STOP\n * @param array\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n */\nexport function rreduceArray<T>(array: IArray, accumulator: T, callback: ReduceArrayCallback<T>, scope?: any): T {\n\treturn doReduceArray(reachArray, array, accumulator, callback, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        reduce                                        *\n *                                                                                      */\n//========================================================================================\n\nexport function doReduce<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T>,\n\tscope?: any\n): T\nexport function doReduce<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T>,\n\town?: boolean\n): T\nexport function doReduce<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduce<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T> | ReduceArrayCallback<T>,\n\town?: boolean\n): T\nexport function doReduce<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T> | ReduceArrayCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduce<T>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: object | IArray,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T> | ReduceObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T {\n\tif (isArrayLike(obj))\n\t\treturn doReduceArray(eacharray, obj as IArray, accumulator, callback as ReduceArrayCallback<T>, scope)\n\treturn doReduceObj(eachobj, obj as object, accumulator, callback as ReduceObjCallback<T>, scope, own)\n}\n\n/**\n * reduce\n * - will stop reduce on callback return STOP\n * @param obj\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n * @param own\t\t\treduce own properties of reduce object, default: true\n */\nexport function reduce<T>(obj: IArray, accumulator: T, callback: ReduceArrayCallback<T>, scope?: any): T\nexport function reduce<T>(obj: object, accumulator: T, callback: ReduceObjCallback<T>, own?: boolean): T\nexport function reduce<T>(obj: object, accumulator: T, callback: ReduceObjCallback<T>, scope?: any, own?: boolean): T\nexport function reduce<T>(\n\tobj: object | IArray,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T> | ReduceArrayCallback<T>,\n\town?: boolean\n): T\nexport function reduce<T>(\n\tobj: object | IArray,\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T> | ReduceArrayCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function reduce<T>(\n\tobj: object | IArray,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T> | ReduceObjCallback<T>,\n\tscope?: any,\n\town?: boolean\n): T {\n\treturn doReduce(eachArray, eachObj, obj, accumulator, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Jul 26 2018 10:47:47 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:34:56 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { STOP, eachObj, eachProps } from './each'\nimport { SKIP } from './map'\nimport { isBool, isFn } from '../is'\nimport { bind } from '../fn'\n\n//========================================================================================\n/*                                                                                      *\n *                                         keys                                         *\n *                                                                                      */\n//========================================================================================\n\nexport type ObjKeyHandler<T> = (prop: string, obj: object) => T | Control\n\nfunction defaultObjKeyHandler(prop: string, obj: object): any {\n\treturn prop\n}\nexport function doObjKeys<T>(each: typeof eachProps, obj: object, own?: boolean): T[]\nexport function doObjKeys<T>(each: typeof eachProps, obj: object, callback: ObjKeyHandler<T>, own?: boolean): T[]\nexport function doObjKeys<T>(\n\teach: typeof eachProps,\n\tobj: object,\n\tcallback: ObjKeyHandler<T>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function doObjKeys<T>(\n\teach: typeof eachProps,\n\tobj: object,\n\tcallback_own?: ObjKeyHandler<T> | boolean,\n\tscope_own?: any,\n\town?: boolean\n): T[]\nexport function doObjKeys<T>(each: typeof eachProps, obj: object): T[] {\n\tconst rs: T[] = [],\n\t\targs = arguments\n\tlet handler: ObjKeyHandler<T> = defaultObjKeyHandler,\n\t\ti = 2,\n\t\tj = 0\n\tif (isFn(args[i])) {\n\t\thandler = args[i++]\n\t\tif (!isBool(args[i])) handler = bind(handler, args[i++])\n\t}\n\teach(\n\t\tobj,\n\t\t(prop, obj) => {\n\t\t\tconst val = handler(prop, obj)\n\t\t\tif (val === STOP) return STOP\n\t\t\tif (val !== SKIP) rs[j++] = val as T\n\t\t},\n\t\tnull,\n\t\targs[i]\n\t)\n\treturn rs\n}\n\n/**\n * @param obj\t\ttarget\n * @param handler\tkey handler\n * @param scope\t\tscope or handler\n * @param own\t\tis get own properties, default: true\n */\nexport function keys<T>(obj: object, own?: boolean): T[]\nexport function keys<T>(obj: object, callback: ObjKeyHandler<T>, own?: boolean): T[]\nexport function keys<T>(obj: object, callback: ObjKeyHandler<T>, scope?: any, own?: boolean): T[]\nexport function keys<T>(obj: object, callback?: ObjKeyHandler<T> | boolean, scope?: any, own?: boolean): T[] {\n\treturn doObjKeys(eachProps, obj, callback, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        values                                        *\n *                                                                                      */\n//========================================================================================\n\nexport type ObjValueHandler<T> = (value: any, prop: string, obj: object) => T | Control\n\nfunction defaultObjValueHandler(value: any, prop: string, obj: object): any {\n\treturn value\n}\nexport function doObjValues<T>(each: typeof eachObj, obj: object, own?: boolean): T[]\nexport function doObjValues<T>(each: typeof eachObj, obj: object, callback: ObjValueHandler<T>, own?: boolean): T[]\nexport function doObjValues<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\tcallback: ObjValueHandler<T>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function doObjValues<T>(\n\teach: typeof eachObj,\n\tobj: object,\n\tcallback_own?: ObjValueHandler<T> | boolean,\n\tscope_own?: any,\n\town?: boolean\n): T[]\nexport function doObjValues<T>(each: typeof eachObj, obj: object): T[] {\n\tconst rs: T[] = [],\n\t\targs = arguments\n\tlet handler: ObjValueHandler<T> = defaultObjValueHandler,\n\t\ti = 1,\n\t\tj = 0\n\tif (isFn(args[i])) {\n\t\thandler = args[i++]\n\t\tif (!isBool(args[i])) handler = bind(handler, args[i++])\n\t}\n\teach(\n\t\tobj,\n\t\tfunction(data, prop, obj) {\n\t\t\tconst val = handler(data, prop, obj)\n\t\t\tif (val === STOP) return STOP\n\t\t\tif (val !== SKIP) rs[j++] = val as T\n\t\t},\n\t\tnull,\n\t\targs[i]\n\t)\n\treturn rs\n}\n\n/**\n * @param obj\t\ttarget\n * @param handler\tvalue handler\n * @param scope\t\tscope or handler\n * @param own\t\tis get own properties, default: true\n */\nexport function values<T>(obj: object, own?: boolean): T[]\nexport function values<T>(obj: object, callback: ObjValueHandler<T>, own?: boolean): T[]\nexport function values<T>(obj: object, callback: ObjValueHandler<T>, scope?: any, own?: boolean): T[]\nexport function values<T>(obj: object, callback?: ObjValueHandler<T> | boolean, scope?: any, own?: boolean): T[] {\n\treturn doObjValues(eachObj, obj, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Nov 16 2018 16:29:04 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:33:49 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { eachArray } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isFn, isStr, isArray } from '../is'\nimport { create } from '../create'\n\n/**\n * @return STOP or SKIP or [key: string, value: any]\n */\nexport type Arr2ObjCallback = (data: any, index: number, array: IArray) => Control | [string, any]\n\nexport function doArr2Obj(each: typeof eachArray, array: IArray, callback: Arr2ObjCallback, scope?: any): object {\n\tconst obj = create(null)\n\tcallback = bind(callback, scope)\n\teach(array, (data, index, array) => {\n\t\tconst r: Control | [string, any] = callback(data, index, array)\n\t\tif (isArray(r)) {\n\t\t\tobj[r[0]] = r[1]\n\t\t} else {\n\t\t\treturn r as Control\n\t\t}\n\t})\n\treturn obj\n}\n\n/**\n * convert array to object\n */\nexport function arr2obj(array: IArray, callback: Arr2ObjCallback, scope?: any): object {\n\treturn doArr2Obj(eachArray, array, callback, scope)\n}\n\n/**\n * convert array or string to object\n * @param array\n * @param val\tvalue or callback\n * @param split\tsplit char on string\n */\nexport function makeMap(array: IArray, val: Arr2ObjCallback, split?: string): object\nexport function makeMap(array: IArray, val?: any, split?: string): object\nexport function makeMap(array: IArray, val?: any, split?: string): object {\n\tif (isStr(array)) array = (array as string).split(isStr(split) ? split : ',')\n\treturn arr2obj(array, isFn(val) ? val : data => [data, val])\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Nov 15 2018 12:13:54 GMT+0800 (China Standard Time)\n * @modified Tue Dec 04 2018 20:10:32 GMT+0800 (China Standard Time)\n */\n\nexport { STOP, eachProps, eachArray, eachObj, each } from './each'\nexport { SKIP, mapArray, mapObj, map } from './map'\nexport { idxOfArray, idxOfObj, idxOf } from './idxOf'\nexport { reduceArray, reduceObj, reduce } from './reduce'\nexport { keys, values } from './obj2arr'\nexport { arr2obj, makeMap } from './arr2obj'\nexport function makeArray<T>(len: number, callback: (index: number) => T): T[] {\n\tconst array = new Array(len)\n\tlet i = len\n\twhile (i--) array[i] = callback(i)\n\treturn array\n}\n","/**\n * @module utility/defProp\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Nov 30 2018 14:41:02 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 18:52:28 GMT+0800 (China Standard Time)\n */\n\nimport { create } from './create'\nimport { isArray } from './is'\nimport { mapArray } from './collection'\n\nconst pathCache: { [key: string]: string[] } = create(null)\n\n// (^ | .) prop | (index | \"string prop\" | 'string prop')\nconst pathReg = /(?:^|\\.)([a-zA-Z$_][\\w$]*)|\\[\\s*(?:(\\d+)|\"((?:[^\\\\\"]|\\\\.)*)\"|'((?:[^\\\\']|\\\\.)*)')\\s*\\]/g\n\nexport function parsePath(propPath: string | string[], cacheable?: boolean): string[] {\n\tlet path: string[]\n\tif (isArray(propPath)) {\n\t\tpath = propPath as string[]\n\t} else if ((path = pathCache[propPath as string])) {\n\t\treturn path\n\t} else {\n\t\tpath = []\n\t\tvar match: string[],\n\t\t\tidx = 0,\n\t\t\tcidx: number,\n\t\t\ti = 0\n\t\twhile ((match = pathReg.exec(propPath as string))) {\n\t\t\tcidx = pathReg.lastIndex\n\t\t\tif (cidx !== idx + match[0].length)\n\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t`Invalid Path: \"${propPath}\", unkown character[${(propPath as string).charAt(\n\t\t\t\t\t\tidx\n\t\t\t\t\t)}] at offset:${idx}`\n\t\t\t\t)\n\t\t\tpath[i++] = match[1] || match[2] || match[3] || match[4]\n\t\t\tidx = cidx\n\t\t}\n\t\tif (cacheable !== false && i) {\n\t\t\tpathCache[propPath as string] = path\n\t\t}\n\t}\n\tif (!path.length) throw new Error(`Empty Path: ${propPath}`)\n\treturn path\n}\n\nexport function formatPath(path: string | (string[] & { path?: string })): string {\n\treturn isArray(path)\n\t\t? (path as string[] & { path?: string }).path ||\n\t\t\t\t((path as string[] & { path?: string }).path = mapArray(path, formatPathHandler).join(''))\n\t\t: (path as string)\n}\n\nfunction formatPathHandler(prop: string): string {\n\treturn `[\"${String(prop).replace(\"'\", '\\\\\"')}\"]`\n}\n\nexport function get(obj: any, path: string | string[]): any {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0\n\tfor (; i < l; i++) {\n\t\tobj = obj[path[i]]\n\t\tif (obj === null || obj === undefined) return\n\t}\n\treturn obj[path[i]]\n}\n\nexport function set(obj: any, path: string | string[], value: any) {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0,\n\t\tv: any\n\tfor (; i < l; i++) {\n\t\tv = obj[path[i]]\n\t\tobj = v === null || v === undefined ? (obj[path[i]] = {}) : v\n\t}\n\tobj[path[i]] = value\n}\n","/**\n * String utilities\n * @module utility/string\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Tue Mar 05 2019 18:59:22 GMT+0800 (China Standard Time)\n */\nconst toString = Object.prototype.toString\nexport function toStr(obj: any): String {\n\treturn toString.call(obj)\n}\n\nexport function toStrType(obj: any) {\n\treturn toString.call(obj).match(/^\\[object ([^\\]]+)\\]$/)[1]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       char code                                      *\n *                                                                                      */\n//========================================================================================\n\n/**\n * get char code\n * > string.charCodeAt\n */\nexport function charCode(str: string, index?: number): number {\n\treturn str.charCodeAt(index || 0)\n}\n\n/**\n * get char by char code\n * > String.fromCharCode\n */\nexport function char(code: number): string {\n\treturn String.fromCharCode(code)\n}\n\nexport function cutStr(str: string, start: number, end?: number) {\n\treturn str.substring(start, end)\n}\n\nexport function cutLStr(str: string, start: number, len?: number) {\n\treturn str.substr(start, len)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         trim                                         *\n *                                                                                      */\n//========================================================================================\n\nconst TRIM_REG = /(^\\s+)|(\\s+$)/g\n\n/**\n * trim\n */\nexport function trim(str: string): string {\n\treturn str.replace(TRIM_REG, '')\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         case                                         *\n *                                                                                      */\n//========================================================================================\n\nconst FIRST_LOWER_LETTER_REG = /^[a-z]/,\n\tFIRST_UPPER_LETTER_REG = /^[A-Z]/\n\nexport function upper(str: string): string {\n\treturn str.toUpperCase()\n}\n\nexport function lower(str: string): string {\n\treturn str.toLowerCase()\n}\n\nexport function upperFirst(str: string): string {\n\treturn str.replace(FIRST_LOWER_LETTER_REG, upper)\n}\n\nexport function lowerFirst(str: string): string {\n\treturn str.replace(FIRST_UPPER_LETTER_REG, lower)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        escape                                        *\n *                                                                                      */\n//========================================================================================\n\nconst STR_ESCAPE_MAP = {\n\t\t'\\n': '\\\\n',\n\t\t'\\t': '\\\\t',\n\t\t'\\f': '\\\\f',\n\t\t'\"': '\\\\\"',\n\t\t\"'\": \"\\\\'\"\n\t},\n\tSTR_ESCAPE = /[\\n\\t\\f\"']/g\n\nexport function escapeStr(str: string): string {\n\treturn str.replace(STR_ESCAPE, str => STR_ESCAPE_MAP[str])\n}\n","/**\n * @module utility/format\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 03 2018 19:46:41 GMT+0800 (China Standard Time)\n * @modified Fri Feb 22 2019 11:37:25 GMT+0800 (China Standard Time)\n */\n\nimport { createFn } from './fn'\nimport { isFn } from './is'\nimport { get, parsePath } from './propPath'\nimport { create } from './create'\nimport { charCode, upper, escapeStr, cutStr } from './string'\n\n//========================================================================================\n/*                                                                                      *\n *                                     pad & shorten                                    *\n *                                                                                      */\n//========================================================================================\n\nexport function pad(str: string, len: number, chr?: string, leftAlign?: boolean | number): string {\n\treturn len > str.length ? __pad(str, len, chr, leftAlign) : str\n}\n\nexport function shorten(str: string, len: number, suffix?: string): string {\n\treturn len < str.length ? ((suffix = suffix || ''), str.substr(0, len - suffix.length) + suffix) : str\n}\n\nfunction __pad(str: string, len: number, chr: string, leftAlign: boolean | number): string {\n\tconst pad = new Array(len - str.length + 1).join(chr || ' ')\n\treturn leftAlign ? str + pad : pad + str\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       Separator                                      *\n *                                                                                      */\n//========================================================================================\n\nexport const thousandSeparate = mkSeparator(3),\n\tbinarySeparate = mkSeparator(8, '01'),\n\toctalSeparate = mkSeparator(4, '0-7'),\n\thexSeparate = mkSeparator(4, '\\\\da-fA-F')\n\nfunction mkSeparator(group: number, valReg?: string): (numStr: string) => string {\n\tvalReg = valReg || '\\\\d'\n\tconst reg = new RegExp(\n\t\t`^(?:[+-]|\\\\s+|0[xXbBoO])|([${valReg}])(?=([${valReg}]{${group}})+(?![${valReg}]))|[^${valReg}].*`,\n\t\t'g'\n\t)\n\treturn numStr => numStr.replace(reg, separatorHandler)\n}\nfunction separatorHandler(m, d) {\n\treturn d ? d + ',' : m\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                   plural & singular                                  *\n *                                                                                      */\n//========================================================================================\n\nconst PLURAL_REG = /([a-zA-Z]+)([^aeiou])y$|([sxzh])$|([aeiou]y)$|([^sxzhy])$/\nexport function plural(str: string): string {\n\treturn str.replace(PLURAL_REG, pluralHandler)\n}\nfunction pluralHandler(m, v, ies, es, ys, s) {\n\treturn v + (ies ? ies + 'ies' : es ? es + 'es' : (ys || s) + 's')\n}\n\nconst SINGULAR_REG = /([a-zA-Z]+)([^aeiou])ies$|([sxzh])es$|([aeiou]y)s$|([^sxzhy])s$/\nexport function singular(str: string): string {\n\treturn str.replace(SINGULAR_REG, singularHandler)\n}\nfunction singularHandler(m, v, ies, es, ys, s) {\n\treturn v + (ies ? ies + 'y' : es || ys || s)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     format flags                                     *\n *                                                                                      */\n//========================================================================================\n\ntype FormatFlags = number\n\nexport const FORMAT_XPREFIX: FormatFlags = 0x1\nexport const FORMAT_PLUS: FormatFlags = 0x2\nexport const FORMAT_ZERO: FormatFlags = 0x4\nexport const FORMAT_SPACE: FormatFlags = 0x8\nexport const FORMAT_SEPARATOR: FormatFlags = 0x10\nexport const FORMAT_LEFT: FormatFlags = 0x20\n\nconst FLAG_MAPPING = {\n\t'#': FORMAT_XPREFIX,\n\t'+': FORMAT_PLUS,\n\t'0': FORMAT_ZERO,\n\t' ': FORMAT_SPACE,\n\t',': FORMAT_SEPARATOR,\n\t'-': FORMAT_LEFT\n}\nfunction parseFlags(f: string): FormatFlags {\n\tlet flags: FormatFlags = 0\n\tif (f) {\n\t\tvar i = f.length\n\t\twhile (i--) flags |= FLAG_MAPPING[f.charAt(i)]\n\t}\n\treturn flags\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      format Rule                                     *\n *                                                                                      */\n//========================================================================================\n\n//   0      1      2     3     4       5       6           7         8      9           10             11             12        13\n// [match, expr, index, prop, flags, width, width-idx, width-prop, fill, precision, precision-idx, precision-prop, shorten-suffix, type]\nconst paramIdxR = `(\\\\d+|\\\\$|@)`,\n\tparamPropR = `(?:\\\\{((?:[a-zA-Z$_][\\\\w$_]*|\\\\[(?:\\\\d+|\"(?:[^\\\\\\\\\"]|\\\\\\\\.)*\"|'(?:[^\\\\\\\\']|\\\\\\\\.)*')\\\\])(?:\\\\.[a-zA-Z$_][\\\\w$_]*|\\\\[(?:\\\\d+|\"(?:[^\\\\\\\\\"]|\\\\\\\\.)*\"|'(?:[^\\\\\\\\']|\\\\\\\\.)*')\\\\])*)\\\\})`,\n\twidthR = `(?:([1-9]\\\\d*)|&${paramIdxR}${paramPropR})`,\n\tfillR = `(?:=(.))`,\n\tshortenSuffixR = `(?:=\"((?:[^\\\\\\\\\"]|\\\\\\\\.)*)\")`,\n\tformatReg = new RegExp(\n\t\t`\\\\\\\\.|(\\\\{${paramIdxR}?${paramPropR}?(?::([#,+\\\\- 0]*)(?:${widthR}${fillR}?)?(?:\\\\.${widthR}${shortenSuffixR}?)?)?([a-zA-Z_][a-zA-Z0-9_$]*)?\\\\})`,\n\t\t'g'\n\t)\n\n//========================================================================================\n/*                                                                                      *\n *                                      Formatters                                      *\n *                                                                                      */\n//========================================================================================\n\ntype FormatCallback = (\n\tval: any,\n\tflags: FormatFlags,\n\twidth: number,\n\tfill: string,\n\tprecision: number,\n\tshortenSuffix: string\n) => string\n\nconst formatters: {\n\t[k: string]: FormatCallback\n} = create(null)\n\nexport function extendFormatter(obj: { [key: string]: FormatCallback }) {\n\tvar fmt, name\n\tfor (name in obj) {\n\t\tfmt = obj[name]\n\t\tisFn(fmt) && (formatters[name] = fmt)\n\t}\n}\n\nexport function getFormatter(name: string): FormatCallback {\n\tconst f = formatters[name || 's']\n\tif (f) return f\n\tthrow new Error(`Invalid Formatter: ${name}`)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                           format by every parameter object                           *\n *                                                                                      */\n//========================================================================================\n\n/**\n * Syntax:\n * @example\n * \t'{'\n * \t\t(<parameter>)?\n * \t\t(\n * \t\t\t':'\n * \t\t\t(<flags>)?\n * \t\t\t(\n * \t\t\t\t<width> ('=' <fill-char>)?\n * \t\t\t)?\n * \t\t\t(\n * \t\t\t\t'.'\n * \t\t\t\t<precision> ('=' '\"' <shorten-suffix> '\"')?\n * \t\t\t)?\n * \t\t)?\n * \t\t(<type>)?\n * \t'}'\n *\n * - parameter\n * \t\t- {}\t\t\t\t\tformat by next unused argument\n * \t\t- {<number>}\t\t\tformat by arguments[number]\n * \t\t- {@}\t\t\t\t\tformat by current used argument\n * \t\t- {$}\t\t\t\t\tformat by next unused argument\n * \t\t- {{name}}\t\t\t\tformat by \"name\" property on next unused argument\n * \t\t- {<number>{name}}\t\tformat by \"name\" property on arguments[number]\n * \t\t- {@{name}}\t\t\t\tformat by \"name\" property on current used argument\n * \t\t- {${name}}\t\t\t\tformat by \"name\" property on next unused argument\n * @example\n * \t\tformat('<{} {}>', 'abc')\t\t\t\t// return \"<abc undefined>\"\n * \t\tformat('<{$} {$}>', 'abc')\t\t\t\t// return \"<abc undefined>\"\n * \t\tformat('<{@} {} {@}>', 'abc')\t\t\t// return \"<abc abc abc>\"\n * \t\tformat('<{0} {} {0}>', 'abc')\t\t\t// return \"<abc abc abc>\"\n * \t\tformat('<{0{value}} {${value}} {@{value}} {{value.a}}>', {value: 'abc'}, {value: {a: 'cbd'}})\n * \t\t// return \"<abc abc abc bcd>\"\n * \t\tformat('<{0{[0]}} {${[0]}} {@{[0]}} {{[0].a}}>', ['abc'], [{a: 'cbd'}])\n * \t\t// return \"<abc abc abc bcd>\"\n *\n * - flags\n * \t\t- {:#}    \tFORMAT_XPREFIX\n * \t\t\t\t\tensure the leading \"0\" for any octal\n * \t\t\t\t\tprefix non-zero hexadecimal with \"0x\" or \"0X\"\n * \t\t\t\t\tprefix non-zero binary with \"0b\" or \"0B\"\n * \t\t- {:+}    \tFORMAT_PLUS\n * \t\t\t\t\tForces to preceed the result with a plus or minus sign (+ or -) even for positive numbers.\n * \t\t\t\t\tBy default, only negative numbers are preceded with a - sign\n * \t\t- {:0}\t\tFORMAT_ZERO\n * \t\t\t\t\tLeft-pads the number with zeroes (0) instead of spaces when padding is specified\n * \t\t- {: }   \tFORMAT_SPACE\n * \t\t\t\t\tIf no sign is going to be written, a blank space is inserted before the value\n * \t\t- {:,}\t\tFORMAT_SEPARATOR\n * \t\t\t\t\tuse thousand separator on decimal number\n * \t\t\t\t\thexadecimal number: FFFFFFFF => FFFF,FFFF\n * \t\t\t\t\toctal number: 77777777 => 7777,7777\n * \t\t\t\t\tbinary number: 1111111111111111 => 11111111,11111111\n * \t\t{:-}    \tFORMAT_LEFT\n * \t\t\t\t\tLeft-justify within the given field width; Right justification is the default\n * @example\n * \t\tformat('<{: d}>',  12);\t\t// return \"< 12>\"\n *\t\tformat('<{: d}>',   0);\t\t// return \"< 0>\"\n *\t\tformat('<{: d}>', -12);\t\t// return \"<-12>\"\n *\t\tformat('<{:+d}>',  12);\t\t// return \"<+12>\"\n *\t\tformat('<{:+d}>',   0);\t\t// return \"<+0>\"\n *\t\tformat('<{:+d}>', -12);\t\t// return \"<-12>\"\n *\t\tformat('<{:6s}>',  12);\t\t// return \"<    12>\"\n *\t\tformat('<{:-6s}>', 12);\t\t// return \"<12    >\"\n *\t\tformat('<{:#o}>',  12);\t\t// return \"<014>\"\n *\t\tformat('<{:#x}>',  12);\t\t// return \"<0xc>\"\n *\t\tformat('<{:#X}>',  12);\t\t// return \"<0XC>\"\n *\t\tformat('<{:#b}>',  12);\t\t// return \"<0b1100>\"\n *\t\tformat('<{:#B}>',  12);\t\t// return \"<0B1100>\"\n\n * - width\n * \t\tMinimum number of characters to be printed.\n * \t\tIf the value to be printed is shorter than this number, the result is padded with pad char(default is space).\n * \t\tThe value is not truncated even if the result is larger.\n *\t\t- width value\n * \t\t\t{:<number>}\n * \t\t\t{:&@}\n * \t\t\t{:&$}\n * \t\t\t{:&<number>}\n * \t\t\t{:&@{<prop>}}\n * \t\t\t{:&${<prop>}}\n * \t\t\t{:&<number>{<prop>}}\n *\t\t- pad char\n * \t\t\t{:&@=<pad-char>}\n * \t\t\t{:&$=<pad-char>}\n * \t\t\t{:&<number>=<pad-char>}\n * \t\t\t{:&@{<prop>}=<pad-char>}\n * \t\t\t{:&${<prop>}=<pad-char>}\n * \t\t\t{:&<number>{<prop>}=<pad-char>}\n * @example\n * - precision\n * \t\tFor integer specifiers (d,  o, u, x, X): precision specifies the minimum number of digits to be written.\n * \t\tIf the value to be written is shorter than this number, the result is padded with leading zeros.\n * \t\tThe value is not truncated even if the result is longer. A precision of 0 means that no character is written for the value 0.\n * \t\tFor a, A, e, E, f and F specifiers: this is the number of digits to be printed after the decimal point (by default, this is 6).\n * \t\tFor g and G specifiers: This is the maximum number of significant digits to be printed.\n * \t\tFor s: this is the maximum number of characters to be printed. By default all characters are printed until the ending null character is encountered.\n * \t\tIf the period is specified without an explicit value for precision, 0 is assumed.\n * \t\t- precision value\n * \t\t\t{:.<number>}\n * \t\t\t{:.&@}\n * \t\t\t{:.&$}\n * \t\t\t{:.&<number>}\n * \t\t\t{:.&@{<prop>}}\n * \t\t\t{:.&${<prop>}}\n * \t\t\t{:.&<number>{<prop>}}\n * \t\t- shorten suffix\n * \t\t\t{:.&@=\"<suffix>\"}\n * \t\t\t{:.&$=\"<suffix>\"}\n * \t\t\t{:.&<number>=\"<suffix>\"}\n * \t\t\t{:.&@{<prop>}=\"<suffix>\"}\n * \t\t\t{:.&${<prop>}=\"<suffix>\"}\n * \t\t\t{:.&<number>{<prop>}=\"<suffix>\"}\n * - type\n * \t\t- default types\n *\t\t\t- {c}\t\tCharacter\n * \t\t\t- {s}\t\tString\n * \t\t\t- {j}\t\tJSON String\n * \t\t\t- {y}\t\tDate Year\n * \t\t\t- {m}\t\tDate Month\n * \t\t\t- {w}\t\tDate Weekly\n * \t\t\t- {W}\t\tDate Weekly\n * \t\t\t- {D}\t\tDate\n * \t\t\t- {H}\t\tDate\n * \t\t\t- {M}\t\tDate\n * \t\t\t- {S}\t\tDate\n * \t\t\t- {d} \t\tSigned decimal integer\n *\t\t\t- {u}\t\tUnsigned decimal integer\n *\t\t\t- {o}\t\tUnsigned octal\n *\t\t\t- {x}\t\tUnsigned hexadecimal integer\n *\t\t\t- {X}\t\tUnsigned hexadecimal integer (uppercase)\n *\t\t\t- {f}\t\tDecimal floating point, lowercase,\n *\t\t\t- {e}\t\tScientific notation (mantissa/exponent), lowercase\n *\t\t\t- {E}\t\tScientific notation (mantissa/exponent), uppercase\n *\t\t\t- {g}\t\tUse the shortest representation: %e or %f\n *\t\t\t- {G}\t\tUse the shortest representation: %E or %F\n * - Rules\n * \t\t- property-path\n * \t\t\t\t(\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t[a-zA-Z$_][\\w$_]*|\n * \t\t\t\t\t\t\\[\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\\d+|\n * \t\t\t\t\t\t\t\"(?:[^\\\\\"]|\\\\.)*\"|\n * \t\t\t\t\t\t\t'(?:[^\\\\']|\\\\.)*'\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t\\]\n * \t\t\t\t\t)\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t\\.[a-zA-Z$_][\\w$_]*|\n * \t\t\t\t\t\t\\[\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\\d+|\n * \t\t\t\t\t\t\t\"(?:[^\\\\\"]|\\\\.)*\"|\n * \t\t\t\t\t\t\t'(?:[^\\\\']|\\\\.)*'\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t\\]\n * \t\t\t\t\t)*\n * \t\t\t\t)\n * \t\t- expression\n * \t\t\t/\\\\.|\t\t\t\t\t\t\t\t\t\t\t\t// escape\n * \t\t\t(\t\t\t\t\t\t\t\t\t\t\t\t\t// 1: expression\n * \t\t\t\t\\{\n * \t\t\t\t(\\d+|\\$|@)?\t\t\t\t\t\t\t\t\t\t// 2: parameter index\n * \t\t\t\t(?:\\{<property-path>\\})?\t\t\t\t\t\t// 3: property path of parameter\n * \t\t\t\t(?:\n * \t\t\t\t\t:\n * \t\t\t\t\t([#,+\\- ]*)\t\t\t\t\t\t\t\t\t// 4: flags\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t(\\d+)|\t\t\t\t\t\t\t\t// 5: width\n * \t\t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\t&\n * \t\t\t\t\t\t\t\t(\\d+|\\$|@)\t\t\t\t\t\t// 6: parameter index of width\n * \t\t\t\t\t\t\t\t(?:\\{<property-path>\\})?\t\t// 7: property path of width parameter\n * \t\t\t\t\t\t\t)\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t(?:=(.))?\t\t\t\t\t\t\t\t// 8: pad fill\n * \t\t\t\t\t)?\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t\\.\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t(\\d+)|\t\t\t\t\t\t\t\t// 9: width\n * \t\t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\t&\n * \t\t\t\t\t\t\t\t(\\d+|\\$|@)\t\t\t\t\t\t// 10: parameter index of width\n * \t\t\t\t\t\t\t\t(?:\\{<property-path>\\})?\t\t// 11: property path of width parameter\n * \t\t\t\t\t\t\t)\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t=\n * \t\t\t\t\t\t\t\"\n * \t\t\t\t\t\t\t((?:[^\\\\\"]|\\\\.)*)\t\t\t\t\t// 12: shorten su\n * \t\t\t\t\t\t\t\"\n * \t\t\t\t\t\t)\n * \t\t\t\t\t)?\n * \t\t\t\t)?\n * \t\t\t\t([a-zA-Z_][a-zA-Z0-9_$]*)?\t\t\t\t\t\t// 13: data type\n * \t\t\t\t\\}\n * \t\t\t)/\n * @param fmt \t\tformat String\n * @param args\t\tformat arguments\n * @param offset\tstart offset of arguments\n * @param getParam\tget parameter on arguments callback\n */\nexport function vformat<T>(fmt: string, args: T, offset?: number, getParam?: (args: T, idx: number) => any): string {\n\toffset = offset || 0\n\tconst start = offset\n\tgetParam = getParam || defaultGetParam\n\treturn fmt.replace(formatReg, function(\n\t\ts,\n\t\tm,\n\t\tparam,\n\t\tparamProp,\n\t\tflags,\n\t\twidth,\n\t\twidx,\n\t\twprop,\n\t\tfill,\n\t\tprecision,\n\t\tpidx,\n\t\tpprop,\n\t\tshortenSuffix,\n\t\ttype\n\t) {\n\t\tif (!m) return s.charAt(1)\n\t\treturn getFormatter(type)(\n\t\t\tparseParam(param || '$', paramProp),\n\t\t\tparseFlags(flags),\n\t\t\tparseWidth(width, widx, wprop) || 0,\n\t\t\tfill,\n\t\t\tparseWidth(precision, pidx, pprop),\n\t\t\tshortenSuffix\n\t\t)\n\t})\n\n\tfunction parseWidth<T>(width: string, idx: string, prop: string): number {\n\t\tif (width) return (width as any) >> 0\n\t\tif (idx) {\n\t\t\tconst w = parseParam(idx, prop) >> 0\n\t\t\tif (isFinite(w)) return w\n\t\t}\n\t}\n\n\tfunction parseParam<T>(paramIdx: string, prop: string): any {\n\t\tlet param = getParam(\n\t\t\targs,\n\t\t\tparamIdx === '$'\n\t\t\t\t? offset++\n\t\t\t\t: paramIdx === '@'\n\t\t\t\t? offset === start\n\t\t\t\t\t? offset\n\t\t\t\t\t: offset - 1\n\t\t\t\t: (paramIdx as any) >> 0\n\t\t)\n\t\treturn prop ? get(param, prop) : param\n\t}\n}\n\nfunction defaultGetParam(args: any, idx: number) {\n\treturn args[idx]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        format                                        *\n *                                                                                      */\n//========================================================================================\n\n/**\n * @see vformat\n * @param fmt\tformat string\n * @param args\tformat arguments\n */\nexport function format(fmt: string, ...args: any): string\nexport function format(fmt: string): string {\n\treturn vformat(fmt, arguments, 0, getFormatParam)\n}\n\nfunction getFormatParam(args: IArguments, idx: number) {\n\treturn args[idx + 1]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       formatter                                      *\n *                                                                                      */\n//========================================================================================\n\nconst GET_PARAM_VAR = 'getp',\n\tGET_PROP_VAR = 'get',\n\tSTATE_VAR = 'state'\nfunction createFormatter(m: string[], getParam?: (args: IArguments, idx: number) => any) {\n\treturn createFn(\n\t\t`return function(args, ${STATE_VAR}){\nreturn fmt(${getParamCode(m[2] || '$', m[3])},\n\"${parseFlags(m[4])}\",\n${getWidthCode(m[5], m[6], m[7], '0')},\n\"${m[8] ? escapeStr(m[8]) : ' '}\",\n${getWidthCode(m[9], m[10], m[11], 'void 0')},\n\"${m[12] ? escapeStr(m[12]) : ''}\");\n}`,\n\t\t['fmt', GET_PROP_VAR, GET_PARAM_VAR]\n\t)(getFormatter(m[13]), get, getParam)\n}\n\nfunction getWidthCode(width: string, idx: string, prop: string, def: string): string {\n\treturn width ? width : idx ? getParamCode(idx, prop) : def\n}\n\nfunction getParamCode(idx: string, prop: string): string {\n\tlet code = `${GET_PARAM_VAR}(args, ${\n\t\tidx === '$'\n\t\t\t? `${STATE_VAR}[0]++`\n\t\t\t: idx === '@'\n\t\t\t? `${STATE_VAR}[0] === ${STATE_VAR}[1] ? ${STATE_VAR}[0] : ${STATE_VAR}[0] - 1`\n\t\t\t: idx\n\t})`\n\tif (prop) {\n\t\tconst path = parsePath(prop)\n\t\tvar i = path.length\n\t\tconst strs = new Array(i)\n\t\twhile (i--) strs[i] = `\"${escapeStr(path[i])}\"`\n\t\treturn `${GET_PROP_VAR}(${code}, [${strs.join(', ')}])`\n\t}\n\treturn code\n}\n/**\n * @see vformat\n * @param fmt\t\tformat string\n * @param offset\tstart offset of arguments\n * @param getParam\tget parameter on arguments callback\n */\nexport function formatter(\n\tfmt: string,\n\toffset?: number,\n\tgetParam?: (args: IArguments, idx: number) => any\n): (...args: any[]) => string {\n\tlet m,\n\t\tlastIdx = 0,\n\t\tmStart,\n\t\tmEnd,\n\t\tarr = [],\n\t\tcodes = [],\n\t\ti = 0\n\toffset = offset || 0\n\twhile ((m = formatReg.exec(fmt))) {\n\t\tmEnd = formatReg.lastIndex\n\t\tmStart = mEnd - m[0].length\n\t\tlastIdx < mStart && pushStr(cutStr(fmt, lastIdx, mStart), 0)\n\t\tif (m[1]) {\n\t\t\tcodes[i] = `arr[${i}](arguments, ${STATE_VAR})`\n\t\t\tarr[i++] = createFormatter(m, getParam || defaultGetParam)\n\t\t} else {\n\t\t\tpushStr(m[0].charAt(1), i)\n\t\t}\n\t\tlastIdx = mEnd\n\t}\n\tlastIdx < fmt.length && pushStr(cutStr(fmt, lastIdx), i)\n\treturn createFn(`return function(){var ${STATE_VAR} = [${offset}, ${offset}]; return ${codes.join(' + ')}}`, [\n\t\t'arr'\n\t])(arr)\n\n\tfunction pushStr(str, append) {\n\t\tif (append && arr[i - 1].match) {\n\t\t\tarr[i - 1] += str\n\t\t} else {\n\t\t\tcodes[i] = `arr[${i}]`\n\t\t\tarr[i++] = str\n\t\t}\n\t}\n}\n/*\nsetTimeout(() => {\n\tvar f,\n\t\tn = 100000\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tf = formatter(`{:.10=\"...\"}`)\n\t}\n\tconsole.timeEnd()\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tf('abbdddded')\n\t}\n\tconsole.timeEnd()\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tformat(`{:.10=\"...\"}`, 'abbdddded')\n\t}\n\tconsole.timeEnd()\n\tconsole.log(formatter(`{:.10=\"...\"}`).toString())\n}) */\n//========================================================================================\n/*                                                                                      *\n *                                  default formatters                                  *\n *                                                                                      */\n//========================================================================================\n\nfunction strFormatter(toStr: (val: any, flags: FormatFlags) => string): FormatCallback {\n\treturn function(val, flags, width, fill, precision, shortenSuffix) {\n\t\tconst str = toStr(val, flags)\n\t\treturn width > str.length\n\t\t\t? __pad(str, width, fill, flags & FORMAT_LEFT)\n\t\t\t: shorten(str, precision, shortenSuffix)\n\t}\n}\n\nfunction numFormatter(\n\tparseNum: (val: any) => number,\n\tgetPrefix: (num: number, flags: FormatFlags) => string,\n\ttoStr: (num: number, flags: FormatFlags, precision: number) => string,\n\tseparator: (numStr: string) => string\n): FormatCallback {\n\treturn function(val, flags, width, fill, precision) {\n\t\tconst num = parseNum(val)\n\t\tif (!isFinite(num)) return String(num)\n\n\t\tconst prefix = getPrefix(num, flags),\n\t\t\tplen = prefix.length\n\t\tlet str = toStr(num < 0 ? -num : num, flags, precision)\n\n\t\treturn flags & FORMAT_ZERO\n\t\t\t? ((str = prefix + pad(str, width - plen, '0')), flags & FORMAT_SEPARATOR ? separator(str) : str)\n\t\t\t: (flags & FORMAT_SEPARATOR && (str = separator(str)), pad(prefix + str, width, fill, flags & FORMAT_LEFT))\n\t}\n}\n\nfunction decimalPrefix(num: number, flags: FormatFlags): string {\n\treturn num < 0 ? '-' : flags & FORMAT_PLUS ? '+' : flags & FORMAT_SPACE ? ' ' : ''\n}\n\n// base formatter \nconst BASE_RADIXS = {\n\tb: [2, binarySeparate],\n\to: [8, octalSeparate],\n\tu: [10, thousandSeparate],\n\tx: [16, hexSeparate]\n}\nconst BASE_PREFIXS = ['0b', '0o', '0x']\nfunction baseFormatter(type: string): FormatCallback {\n\tconst base = BASE_RADIXS[type.toLowerCase()],\n\t\tn = base[0],\n\t\t__toStr = num => num.toString(n),\n\t\ttoStr = type === 'X' ? num => upper(__toStr(num)) : __toStr\n\tlet xprefix = n === 10 ? '' : BASE_PREFIXS[n >> 3]\n\tcharCode(type) < 96 && (xprefix = upper(xprefix))\n\treturn numFormatter(v => v >>> 0, (num, flags) => (flags & FORMAT_XPREFIX ? xprefix : ''), toStr, base[1])\n}\n\n// float formatter \nfunction floatFormatter(type: string): FormatCallback {\n\tconst ____toStr = upper(type) === 'E' ? toExponential : type === 'f' ? toFixed : toPrecision,\n\t\t__toStr = (num, flags, precision) => ____toStr(num, precision) || String(num),\n\t\ttoStr = charCode(type) > 96 ? __toStr : (num, flags, precision) => upper(__toStr(num, flags, precision))\n\treturn numFormatter(parseFloat, decimalPrefix, toStr, thousandSeparate)\n}\n\nfunction toExponential(num: number, precision: number): string {\n\treturn num.toExponential(precision)\n}\nfunction toPrecision(num: number, precision: number): string {\n\treturn precision && num.toPrecision(precision)\n}\nfunction toFixed(num: number, precision: number): string {\n\treturn precision >= 0 && num.toFixed(precision)\n}\n\n// register formatters \nextendFormatter({\n\ts: strFormatter(toStr),\n\tj: strFormatter(v =>\n\t\tv === undefined || isFn(v) || (v.toJSON && v.toJSON() === undefined) ? toStr(v) : JSON.stringify(v)\n\t),\n\tc(val: any) {\n\t\tconst num = val >> 0\n\t\treturn num > 0 ? String.fromCharCode(num) : ''\n\t},\n\td: numFormatter(val => val >> 0, decimalPrefix, toStr, thousandSeparate),\n\te: floatFormatter('e'),\n\tE: floatFormatter('E'),\n\tf: floatFormatter('f'),\n\tg: floatFormatter('g'),\n\tG: floatFormatter('G'),\n\tb: baseFormatter('b'),\n\tB: baseFormatter('B'),\n\to: baseFormatter('o'),\n\tO: baseFormatter('O'),\n\tu: baseFormatter('u'),\n\tx: baseFormatter('x'),\n\tX: baseFormatter('X')\n})\n\nfunction toStr(v: any): string {\n\treturn String(v)\n}\n","/**\n * Object.assign shim\n * @module utility/assign\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:13 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 09:28:49 GMT+0800 (China Standard Time)\n */\nimport { hasOwnProp } from './ownProp'\nimport { defaultKeyMap } from './dkeys'\n\n/**\n * @param prop\n * @param target\n * @param override\n * @return is assign\n */\nexport type AssignFilter = (prop: string, target: any, override: any) => boolean\n\n/**\n *\n * @param target\n * @param overrides\n * @param filter\n * @param startOffset \tstart offset in overrides, default: 0\n * @param endOffset \tend offset in overrides, default: overrides.length-1\n */\nexport function doAssign(\n\ttarget: any,\n\toverrides: any[] | IArguments,\n\tfilter: AssignFilter,\n\tstartOffset?: number,\n\tendOffset?: number\n): any {\n\tif (!target) {\n\t\ttarget = {}\n\t}\n\tconst l = endOffset || overrides.length\n\tlet i = startOffset || 0,\n\t\toverride: any,\n\t\tprop: string\n\tfor (; i < l; i++) {\n\t\tif ((override = overrides[i])) {\n\t\t\tfor (prop in override) {\n\t\t\t\tif (!defaultKeyMap[prop] && filter(prop, target, override)) {\n\t\t\t\t\ttarget[prop] = override[prop]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * assign properties\n * > Object.assign shim\n */\nexport function assign(target: any, ...args: any[]): any\nexport function assign(target: any): any {\n\treturn doAssign(target, arguments, defaultAssignFilter, 1)\n}\n\n/**\n * assign un-exist properties\n */\nexport function assignIf(target: any, ...args: any[]): any\nexport function assignIf(target: any): any {\n\treturn doAssign(target, arguments, assignIfFilter, 1)\n}\n\n/**\n * default assign filter\n * - property is owner in override\n * @see {AssignFilter}\n */\nexport function defaultAssignFilter(prop: string, target: any, override: any): boolean {\n\treturn hasOwnProp(override, prop)\n}\n\n/**\n * assign if filter\n * - property is owner in override\n * - property not in target object\n * @see {AssignFilter}\n */\nexport function assignIfFilter(prop: string, target: any, override: any): boolean {\n\treturn hasOwnProp(override, prop) && !(prop in target)\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 15:05:03 GMT+0800 (China Standard Time)\n */\nimport { eq, isReg, isTypedArray, isDate, isArray, isPrimitive } from './is'\nimport { hasOwnProp } from './ownProp'\nimport { create } from './create'\nimport { getConstructor } from './constructor'\nimport { defaultKeyMap } from './dkeys'\n\nconst REG_PROPS = ['source', 'global', 'ignoreCase', 'multiline']\n\nexport function deepEq(actual: any, expected: any): boolean {\n\treturn doDeepEq(actual, expected, eq, doDeepEqObj)\n}\n\nexport function doDeepEq(\n\tactual: any,\n\texpected: any,\n\teq: (actual: any, expected: any) => boolean,\n\teqObj: (actual: any, expected: any) => boolean\n) {\n\tif (eq(actual, expected)) return true\n\tif (actual && expected && getConstructor(actual) === getConstructor(expected)) {\n\t\tif (isPrimitive(actual)) return String(actual) === String(expected)\n\t\tif (isDate(actual)) return actual.getTime() === expected.getTime()\n\t\tif (isReg(actual)) return eqProps(actual, expected, REG_PROPS)\n\t\tif (isArray(actual)) return eqArray(actual, expected, eq, eqObj)\n\t\tif (isTypedArray(actual)) return eqTypeArray(actual, expected)\n\t\treturn eqObj(actual, expected)\n\t}\n\treturn false\n}\n\nexport function doDeepEqObj(actual: any, expected: any): boolean {\n\tconst cache = create(null)\n\tlet k: string\n\tfor (k in actual) {\n\t\tif (!defaultKeyMap[k] && notEqObjKey(actual, expected, k)) {\n\t\t\treturn false\n\t\t}\n\t\tcache[k] = true\n\t}\n\tfor (k in expected) {\n\t\tif (!cache[k] && !defaultKeyMap[k] && notEqObjKey(actual, expected, k)) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}\n\nfunction notEqObjKey(actual: any, expected: any, k: string): boolean {\n\treturn hasOwnProp(actual, k) ? !hasOwnProp(expected, k) || !deepEq(actual[k], expected[k]) : hasOwnProp(expected, k)\n}\n\nfunction eqProps(actual: any, expected: any, props: string[]): boolean {\n\tlet i = props.length\n\twhile (i--)\n\t\tif (actual[props[i]] !== expected[props[i]]) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n\nfunction eqTypeArray(actual: any, expected: any) {\n\tlet i = actual.length\n\tif (i !== expected.length) {\n\t\treturn false\n\t}\n\twhile (i--)\n\t\tif (actual[i] !== expected[i]) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n\nfunction eqArray(\n\tactual: any,\n\texpected: any,\n\teq: (actual: any, expected: any) => boolean,\n\teqObj: (actual: any, expected: any) => boolean\n) {\n\tlet i = actual.length\n\tif (i !== expected.length) {\n\t\treturn false\n\t}\n\twhile (i--)\n\t\tif (!doDeepEq(actual[i], expected[i], eq, eqObj)) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n","/**\n * @module utility/assert\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Nov 28 2018 11:01:45 GMT+0800 (China Standard Time)\n * @modified Tue Feb 19 2019 10:38:22 GMT+0800 (China Standard Time)\n */\n\nimport {\n\teq,\n\tisBool,\n\tisNum,\n\tisStr,\n\tisBoolean,\n\tisNumber,\n\tisString,\n\tisDate,\n\tisNull,\n\tisUndef,\n\tisNil,\n\tisFn,\n\tisInt,\n\tisPrimitive,\n\tisReg,\n\tisArray,\n\tisArrayLike,\n\tisTypedArray,\n\tisObj,\n\tisBlank\n} from '../utility/is'\nimport { create } from './create'\nimport { upperFirst, escapeStr } from '../utility/string'\nimport { createFn } from '../utility/fn'\nimport { eachObj, makeArray } from '../utility/collection'\nimport { formatter } from './format'\nimport { deepEq } from './deepEq'\nimport { TYPE_UNDEF, TYPE_FN, TYPE_STRING, TYPE_NUM, TYPE_BOOL } from './consts'\n\nconst formatters = [],\n\tformatArgHandlers: ((args: any[] | IArguments, offset: number) => any)[] = []\nfunction parseMessage(msg: string, args: any[] | IArguments, msgIdx: number): string {\n\tlet fs = formatters[msgIdx]\n\tif (!fs) {\n\t\tformatArgHandlers[msgIdx] = (args, offset) => args[0][offset >= msgIdx ? offset + 1 : offset]\n\t\tformatters[msgIdx] = fs = create(null)\n\t}\n\treturn (fs[msg] || (fs[msg] = formatter(msg, msgIdx, formatArgHandlers[msgIdx])))(args)\n}\n\nexport interface assert {\n\t(msg?: string, ...args: any[]): never\n\tis(actual: any, msg?: string, ...args: any[]): assert\n\tnot(actual: any, msg?: string, ...args: any[]): assert\n\teq(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\teql(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tblank(actual: any, msg?: string, ...args: any[]): assert\n\tnul(actual: any, msg?: string, ...args: any[]): assert\n\tnil(actual: any, msg?: string, ...args: any[]): assert\n\tundef(actual: any, msg?: string, ...args: any[]): assert\n\tbool(actual: any, msg?: string, ...args: any[]): assert\n\tnum(actual: any, msg?: string, ...args: any[]): assert\n\tint(actual: any, msg?: string, ...args: any[]): assert\n\tstr(actual: any, msg?: string, ...args: any[]): assert\n\tfn(actual: any, msg?: string, ...args: any[]): assert\n\tprimitive(actual: any, msg?: string, ...args: any[]): assert\n\tboolean(actual: any, msg?: string, ...args: any[]): assert\n\tnumber(actual: any, msg?: string, ...args: any[]): assert\n\tstring(actual: any, msg?: string, ...args: any[]): assert\n\tdate(actual: any, msg?: string, ...args: any[]): assert\n\treg(actual: any, msg?: string, ...args: any[]): assert\n\tarray(actual: any, msg?: string, ...args: any[]): assert\n\ttypedArray(actual: any, msg?: string, ...args: any[]): assert\n\tarrayLike(actual: any, msg?: string, ...args: any[]): assert\n\tobj(actual: any, msg?: string, ...args: any[]): assert\n\tnan(actual: any, msg?: string, ...args: any[]): assert\n\tfinite(actual: number | string, msg?: string, ...args: any[]): assert\n\tless(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tgreater(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tmatch(actual: string, expect: any, msg?: string, ...args: any[]): assert\n\trange(actual: number, start: number, end: number, msg?: string, ...args: any[]): assert\n\n\tnotEq(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tnotEql(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tnotBlank(actual: any, msg?: string, ...args: any[]): assert\n\tnotNul(actual: any, msg?: string, ...args: any[]): assert\n\tnotNil(actual: any, msg?: string, ...args: any[]): assert\n\tnotUndef(actual: any, msg?: string, ...args: any[]): assert\n\tnotBool(actual: any, msg?: string, ...args: any[]): assert\n\tnotNum(actual: any, msg?: string, ...args: any[]): assert\n\tnotInt(actual: any, msg?: string, ...args: any[]): assert\n\tnotStr(actual: any, msg?: string, ...args: any[]): assert\n\tnotFn(actual: any, msg?: string, ...args: any[]): assert\n\tnotPrimitive(actual: any, msg?: string, ...args: any[]): assert\n\tnotBoolean(actual: any, msg?: string, ...args: any[]): assert\n\tnotNumber(actual: any, msg?: string, ...args: any[]): assert\n\tnotString(actual: any, msg?: string, ...args: any[]): assert\n\tnotDate(actual: any, msg?: string, ...args: any[]): assert\n\tnotReg(actual: any, msg?: string, ...args: any[]): assert\n\tnotArray(actual: any, msg?: string, ...args: any[]): assert\n\tnotTypedArray(actual: any, msg?: string, ...args: any[]): assert\n\tnotArrayLike(actual: any, msg?: string, ...args: any[]): assert\n\tnotObj(actual: any, msg?: string, ...args: any[]): assert\n\tnotNan(actual: any, msg?: string, ...args: any[]): assert\n\tnotFinite(actual: any, msg?: string, ...args: any[]): assert\n\tthrow(fn: () => any, err: Error | string, msg?: string, ...args: any[]): assert\n\tnotThrow(fn: () => any, err: Error | string, msg?: string, ...args: any[]): assert\n\tnotLess(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tnotGreater(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tnotMatch(actual: string, expect: any, msg?: string, ...args: any[]): assert\n\tnotRange(actual: number, start: number, end: number, msg?: string, ...args: any[]): assert\n}\n\nexport const assert = function assert(msg?: string): never {\n\tthrow new Error(parseMessage(msg || 'Error', arguments, 0))\n} as assert\n\nfunction catchErr(fn: () => any): Error {\n\ttry {\n\t\tfn()\n\t} catch (e) {\n\t\treturn e\n\t}\n}\n\nfunction checkErr(expect: Error | string, err: Error): boolean {\n\tlet msg = isStr(expect) ? (expect as string) : (expect as Error).message\n\treturn msg === err.message\n}\nconst ERROR = new Error()\nconst throwMsg = mkMsg(objFormatter(1), 'throw')\nassert.throw = function(fn: () => any, expect: Error | string, msg?: string): assert {\n\tconst err = catchErr(fn)\n\tif (!err || (expect && !checkErr(expect, err))) {\n\t\targuments[0] = err\n\t\t!expect && (arguments[2] = ERROR)\n\t\tthrow new Error(parseMessage(msg || throwMsg[0], arguments, 2))\n\t}\n\treturn assert\n}\n\nassert.notThrow = function(fn: () => any, expect: Error | string, msg?: string): assert {\n\tconst err = catchErr(fn)\n\tif (err && (!expect || !checkErr(expect, err))) {\n\t\targuments[0] = err\n\t\t!expect && (arguments[2] = ERROR)\n\t\tthrow new Error(parseMessage(msg || throwMsg[0], arguments, 2))\n\t}\n\treturn assert\n}\n\nfunction extendAssert<T extends Function>(\n\tname: string,\n\tcondition: string | ((...args: any) => boolean) | [string | ((...args: any) => boolean), string?],\n\targs: string | number | string[],\n\tdmsg: string,\n\tErr?: { new (message?: string): Error }\n): T {\n\tconst params: string[] = isStr(args)\n\t\t\t? (args as string).split(/,/g)\n\t\t\t: isNum(args)\n\t\t\t? makeArray(args as number, i => `arg${i + 1}`)\n\t\t\t: (args as string[]),\n\t\tparamStr = params.join(', '),\n\t\tcond = isArray(condition) ? condition[0] : condition,\n\t\texpr = (isArray(condition) ? condition[1] : '') + (isStr(cond) ? `(${cond})` : `cond(${paramStr})`)\n\n\treturn (assert[name] = createFn(\n\t\t`return function assert${upperFirst(name)}(${paramStr}, msg){\n\tif (${expr})\n\t\tthrow new Err(parseMsg(msg || dmsg, arguments, ${params.length}));\n\treturn assert;\n}`,\n\t\t['Err', 'parseMsg', 'dmsg', 'cond', 'assert']\n\t)(Err || Error, parseMessage, dmsg, cond, assert))\n}\n\ntype APIDescriptor = [\n\tstring | ((...args: any) => boolean), // condition\n\tstring | number | string[], // arguments\n\t[string, string], // expect or [err msg, not err msg]\n\t({ new (message?: string): Error })?\n]\n\n// [condition, argcount?, [msg, not msg], Error]\nfunction extendAsserts(apis: { [method: string]: APIDescriptor }) {\n\teachObj(apis, (desc: APIDescriptor, name) => {\n\t\tconst condition = desc[0],\n\t\t\targs = desc[1],\n\t\t\tmsg = desc[2],\n\t\t\tErr = desc[3] || TypeError\n\n\t\tmsg[0] && extendAssert(name, [condition, '!'], args, msg[0], Err)\n\t\tmsg[1] && extendAssert('not' + upperFirst(name), condition, args, msg[1], Err)\n\t})\n}\n\nconst UNDEFINED = TYPE_UNDEF,\n\tBOOLEAN = TYPE_BOOL,\n\tNUMBER = TYPE_NUM,\n\tSTRING = TYPE_STRING,\n\tFUNCTION = TYPE_FN,\n\tNULL = 'null',\n\tINTEGER = 'integer',\n\tARRAY = 'Array',\n\tTYPED_ARRAY = 'TypedArray'\n\nextendAssert('is', '!o', 'o', expectMsg('Exist'))\nextendAssert('not', 'o', 'o', expectMsg('Not Exist'))\nextendAsserts({\n\teq: [eq, 2, mkMsg(objFormatter(1))],\n\teql: [deepEq, 2, mkMsg(objFormatter(1))],\n\tnul: [isNull, 1, mkMsg(NULL)],\n\tnil: [isNil, 1, mkMsg(typeExpect(NULL, UNDEFINED))],\n\tundef: [isUndef, 1, mkMsg(UNDEFINED)],\n\tbool: [isBool, 1, mkMsg(BOOLEAN)],\n\tnum: [isNum, 1, mkMsg(NUMBER)],\n\tint: [isInt, 1, mkMsg(INTEGER)],\n\tstr: [isStr, 1, mkMsg(STRING)],\n\tfn: [isFn, 1, mkMsg(FUNCTION)],\n\tprimitive: [\n\t\tisPrimitive,\n\t\t1,\n\t\tmkMsg(`Primitive type(${typeExpect(NULL, UNDEFINED, BOOLEAN, NUMBER, INTEGER, STRING, FUNCTION)})`)\n\t],\n\tboolean: [isBoolean, 1, mkMsg(packTypeExpect(BOOLEAN))],\n\tnumber: [isNumber, 1, mkMsg(packTypeExpect(NUMBER))],\n\tstring: [isString, 1, mkMsg(packTypeExpect(STRING))],\n\tdate: [isDate, 1, mkMsg('Date')],\n\treg: [isReg, 1, mkMsg('RegExp')],\n\tarray: [isArray, 1, mkMsg(ARRAY)],\n\ttypedArray: [isTypedArray, 1, mkMsg('TypedArray')],\n\tarrayLike: [\n\t\tisArrayLike,\n\t\t1,\n\t\tmkMsg(typeExpect(ARRAY, packTypeExpect(STRING), 'Arguments', TYPED_ARRAY, 'NodeList', 'HTMLCollection'))\n\t],\n\tobj: [isObj, 1, mkMsg('Object')],\n\tnan: [isNaN, 1, mkMsg('NaN')],\n\tfinite: [isFinite, 1, mkMsg('Finite')],\n\tblank: [isBlank, 1, mkMsg('Blank')],\n\tless: ['o<t', 'o,t', mkMsg(objFormatter(1), 'less than')],\n\tgreater: ['o>t', 'o,t', mkMsg(objFormatter(1), 'greater than')],\n\tmatch: ['reg.test(str)', 'str,reg', mkMsg(objFormatter(1), 'match')],\n\trange: ['o>=s&&o<e', 'o,s,e', mkMsg(`[{1} - {2})`)]\n})\n\nfunction mkMsg(expect: string, to?: string): [string, string] {\n\treturn [expectMsg(expect, false, to), expectMsg(expect, true, to)]\n}\nfunction expectMsg(expect: string, not?: boolean, to?: string): string {\n\treturn `Expected ${objFormatter(0)} ${not ? 'not ' : ''}${to || 'to'} ${expect}`\n}\n\nfunction objFormatter(idx: number): string {\n\treturn `{${idx}:.80=\"...\"j}`\n}\n\nfunction packTypeExpect(base: string, all?: boolean): string {\n\treturn all ? typeExpect(base, upperFirst(base)) : upperFirst(base)\n}\nfunction typeExpect(...types: string[]): string\nfunction typeExpect(): string {\n\treturn Array.prototype.join.call(arguments, ' | ')\n}\n","/**\n * Double Linked List\n * @module utility/List\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 19:29:16 GMT+0800 (China Standard Time)\n */\n\nimport { bind } from '../fn'\nimport { defPropValue } from '../defProp'\nimport { assert } from '../assert'\nimport { EMPTY_FN } from '../consts'\nimport { addDefaultKey } from '../dkeys'\n\nconst DEFAULT_BINDING = addDefaultKey('__list__')\n\ninterface ListNode<T> extends Array<any> {\n\t0: T\n\t1?: ListNode<T>\n\t2?: ListNode<T>\n\t3?: List<T>\n\ttoJSON?: () => any\n}\n//type ListNode = [ListElement, IListNode, IListNode, List]\n\nexport class List<T> {\n\tstatic readonly binding: string = DEFAULT_BINDING\n\n\treadonly binding: string\n\tprivate __head?: ListNode<T>\n\tprivate __tail?: ListNode<T>\n\tprivate __length: number = 0\n\tprivate __scaning: boolean = false\n\tprivate __lazyRemoves?: ListNode<T>[]\n\tconstructor(binding?: string) {\n\t\tthis.binding = binding || DEFAULT_BINDING\n\t}\n\tsize(): number {\n\t\treturn this.__length\n\t}\n\thas(obj: T): boolean {\n\t\tconst node: ListNode<T> = obj[this.binding]\n\t\treturn node ? node[0] === obj && node[3] === this : false\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tadd(obj: T): number {\n\t\treturn this.__insert(obj, this.__tail)\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\taddFirst(obj: T): number {\n\t\treturn this.__insert(obj)\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tinsertAfter(obj: T, target?: T): number {\n\t\treturn this.__insert(obj, target && this.__getNode(target))\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tinsertBefore(obj: T, target?: T): number {\n\t\treturn this.__insert(obj, target && this.__getNode(target)[1])\n\t}\n\t/**\n\t *\n\t * @param objs\n\t * @return new length\n\t */\n\taddAll(objs: T[]): number {\n\t\treturn this.__insertAll(objs, this.__tail)\n\t}\n\taddFirstAll(objs: T[]): number {\n\t\treturn this.__insertAll(objs)\n\t}\n\tinsertAfterAll(objs: T[], target?: T): number {\n\t\treturn this.__insertAll(objs, target && this.__getNode(target))\n\t}\n\tinsertBeforeAll(objs: T[], target?: T): number {\n\t\treturn this.__insertAll(objs, target && this.__getNode(target)[1])\n\t}\n\tprev(obj: T): T {\n\t\treturn this.__siblingObj(obj, 1)\n\t}\n\tnext(obj: T): T {\n\t\treturn this.__siblingObj(obj, 2)\n\t}\n\tfirst(): T {\n\t\tconst node: ListNode<T> = this.__head\n\t\treturn node && node[0]\n\t}\n\tlast(): T {\n\t\tconst node: ListNode<T> = this.__tail\n\t\treturn node && node[0]\n\t}\n\teach(cb: (obj: T) => boolean | void, scope?: any) {\n\t\tif (this.__length) {\n\t\t\tassert.not(this.__scaning, 'Nested calls are not allowed.')\n\t\t\tthis.__scaning = true\n\t\t\tcb = bind(cb, scope)\n\t\t\tvar node = this.__head\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this && cb(node[0]) === false) break\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t\tthis.__doLazyRemove()\n\t\t\tthis.__scaning = false\n\t\t}\n\t}\n\teachUnsafe(cb: (obj: T) => boolean | void, scope?: any) {\n\t\tif (this.__length) {\n\t\t\tvar node = this.__head\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this && cb(node[0]) === false) break\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t}\n\t}\n\ttoArray(): T[] {\n\t\tconst array: T[] = new Array(this.__length)\n\t\tlet node = this.__head,\n\t\t\ti = 0\n\t\twhile (node) {\n\t\t\tif (node[3] === this) array[i++] = node[0]\n\t\t\tnode = node[2]\n\t\t}\n\t\treturn array\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tremove(obj: T): number {\n\t\treturn this.__remove(this.__getNode(obj))\n\t}\n\tpop() {}\n\tclean() {\n\t\tif (this.__length) {\n\t\t\tif (this.__scaning) {\n\t\t\t\tvar node = this.__head\n\t\t\t\twhile (node) {\n\t\t\t\t\tnode[3] === this && this.__lazyRemove(node)\n\t\t\t\t\tnode = node[2]\n\t\t\t\t}\n\t\t\t\tthis.__length = 0\n\t\t\t} else {\n\t\t\t\tthis.__clean()\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate __initNode(obj: T): ListNode<T> {\n\t\tconst { binding } = this\n\t\tlet node: ListNode<T> = obj[binding]\n\t\tif (node && node[0] === obj) {\n\t\t\tif (node[3] === this) {\n\t\t\t\tthis.__remove(node)\n\t\t\t\treturn this.__initNode(obj)\n\t\t\t} else if (node[3]) {\n\t\t\t\tassert('Object is still in some List')\n\t\t\t}\n\t\t} else {\n\t\t\tnode = [obj]\n\t\t\tnode.toJSON = EMPTY_FN\n\t\t\tdefPropValue(obj, binding, node, false)\n\t\t}\n\t\tnode[3] = this\n\t\treturn node\n\t}\n\n\tprivate __getNode(obj: T): ListNode<T> {\n\t\tconst node: ListNode<T> = obj[this.binding]\n\t\tassert.is(node && node[0] === obj && node[3] === this, 'Object is not in this List')\n\t\treturn node\n\t}\n\n\tprivate __siblingObj(obj: T, siblingIdx: number): T {\n\t\tconst node: ListNode<T> = this.__getNode(obj)\n\t\tlet sibling: ListNode<T> = node[siblingIdx]\n\t\tif (sibling) {\n\t\t\twhile (!sibling[3]) {\n\t\t\t\tsibling = sibling[siblingIdx]\n\t\t\t\tif (!sibling) return\n\t\t\t}\n\t\t\treturn sibling[0]\n\t\t}\n\t}\n\n\tprivate __doInsert(nodeHead: ListNode<T>, nodeTail: ListNode<T>, len: number, prev?: ListNode<T>): number {\n\t\tlet next: ListNode<T>\n\t\tnodeHead[1] = prev\n\t\tif (prev) {\n\t\t\tnodeTail[2] = next = prev[2]\n\t\t\tprev[2] = nodeHead\n\t\t} else {\n\t\t\tnodeTail[2] = next = this.__head\n\t\t\tthis.__head = nodeHead\n\t\t}\n\t\tif (next) next[1] = nodeTail\n\t\telse this.__tail = nodeTail\n\t\treturn (this.__length += len)\n\t}\n\n\tprivate __insert(obj: T, prev?: ListNode<T>): number {\n\t\tconst node = this.__initNode(obj)\n\t\treturn this.__doInsert(node, node, 1, prev)\n\t}\n\n\tprivate __insertAll(objs: T[], prev?: ListNode<T>): number {\n\t\tlet l = objs.length\n\t\tif (l) {\n\t\t\tconst head = this.__initNode(objs[0])\n\t\t\tvar __prev = head,\n\t\t\t\ttail = head,\n\t\t\t\ti = 1\n\t\t\tfor (; i < l; i++) {\n\t\t\t\ttail = this.__initNode(objs[i])\n\t\t\t\ttail[1] = __prev\n\t\t\t\t__prev[2] = tail\n\t\t\t\t__prev = tail\n\t\t\t}\n\t\t\treturn this.__doInsert(head, tail, l, prev)\n\t\t}\n\t\treturn -1\n\t}\n\n\tprivate __remove(node: ListNode<T>): number {\n\t\tthis.__scaning ? this.__lazyRemove(node) : this.__doRemove(node)\n\t\treturn --this.__length\n\t}\n\n\tprivate __lazyRemove(node: ListNode<T>): void {\n\t\tconst { __lazyRemoves: lazyRemoves } = this\n\t\tnode[0][this.binding] = undefined // unbind this node\n\t\tnode[3] = null\n\t\tif (lazyRemoves) {\n\t\t\tlazyRemoves.push(node)\n\t\t} else {\n\t\t\tthis.__lazyRemoves = [node]\n\t\t}\n\t}\n\n\tprivate __doLazyRemove() {\n\t\tconst { __lazyRemoves: lazyRemoves } = this\n\t\tif (lazyRemoves) {\n\t\t\tvar len = lazyRemoves.length\n\t\t\tif (len) {\n\t\t\t\tif (this.__length) {\n\t\t\t\t\twhile (len--) this.__doRemove(lazyRemoves[len])\n\t\t\t\t} else {\n\t\t\t\t\tthis.__clean()\n\t\t\t\t}\n\t\t\t\tlazyRemoves.length = 0\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate __doRemove(node: ListNode<T>) {\n\t\tconst prev = node[1],\n\t\t\tnext = node[2]\n\t\tif (prev) {\n\t\t\tprev[2] = next\n\t\t} else {\n\t\t\tthis.__head = next\n\t\t}\n\t\tif (next) {\n\t\t\tnext[1] = prev\n\t\t} else {\n\t\t\tthis.__tail = prev\n\t\t}\n\t\tnode[1] = node[2] = node[3] = null\n\t}\n\n\tprivate __clean() {\n\t\tlet node: ListNode<T>,\n\t\t\tnext = this.__head\n\t\twhile ((node = next)) {\n\t\t\tnext = node[2]\n\t\t\tnode.length = 1\n\t\t}\n\t\tthis.__head = undefined\n\t\tthis.__tail = undefined\n\t\tthis.__length = 0\n\t}\n}\n","/**\n * Function List\n * @module utility/List\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Mon Mar 11 2019 19:53:56 GMT+0800 (China Standard Time)\n */\n\nimport { List } from './List'\nimport { create } from '../create'\nimport { defPropValue } from '../defProp'\nimport { addDefaultKey } from '../dkeys'\n\nconst DEFAULT_FN_BINDING = addDefaultKey('__flist_id__')\nconst DEFAULT_SCOPE_BINDING = addDefaultKey(DEFAULT_FN_BINDING)\n\ntype FnNode<T extends Function> = [string, T, any, any]\nexport class FnList<T extends Function> {\n\tstatic readonly fnBinding: string = DEFAULT_FN_BINDING\n\tstatic readonly scopeBinding: string = DEFAULT_SCOPE_BINDING\n\n\treadonly fnBinding: string\n\treadonly scopeBinding: string\n\tprivate readonly __list: List<FnNode<T>>\n\tprivate __nodeMap: { [key: string]: FnNode<T> }\n\n\tconstructor(fnBinding?: string, scopeBinding?: string) {\n\t\tthis.__nodeMap = create(null)\n\t\tthis.__list = new List()\n\t\tthis.fnBinding = fnBinding || DEFAULT_FN_BINDING\n\t\tthis.scopeBinding = scopeBinding || DEFAULT_SCOPE_BINDING\n\t}\n\t/**\n\t * add executable function\n\t * @param fn\t\tfunction\n\t * @param scope\t\tscope of function\n\t * @param data\t\tuser data of [function + scope]\n\t * @return executable function id, can remove executable function by id: {@link FnList#removeId}\n\t */\n\tadd(fn: T, scope?: any, data?: any): string {\n\t\tscope = parseScope(scope)\n\t\tconst { __list: list, __nodeMap: nodeMap } = this\n\t\tconst id = this.id(fn, scope)\n\t\tlet node = nodeMap[id]\n\t\tif (!node) {\n\t\t\tnode = [id, fn, scope, data]\n\t\t\tif (list.add(node)) nodeMap[id] = node\n\t\t\treturn id\n\t\t}\n\t}\n\n\t/**\n\t * remove executable function by id\n\t *\n\t * @param id\n\t */\n\tremoveId(id: string): number {\n\t\tconst { __list: list, __nodeMap: nodeMap } = this\n\t\tconst node = nodeMap[id]\n\t\tif (node) {\n\t\t\tnodeMap[id] = undefined\n\t\t\treturn list.remove(node)\n\t\t}\n\t\treturn -1\n\t}\n\tremove(fn: T, scope?: any): number {\n\t\treturn this.removeId(this.id(fn, parseScope(scope)))\n\t}\n\thas(fn: T, scope?: any): boolean {\n\t\treturn !!this.__nodeMap[this.id(fn, parseScope(scope))]\n\t}\n\tsize(): number {\n\t\treturn this.__list.size()\n\t}\n\tclean() {\n\t\tthis.__nodeMap = create(null)\n\t\tthis.__list.clean()\n\t}\n\teach(cb: (fn: T, scope: any, data: any, __node: FnNode<T>) => boolean | void, scope?: any) {\n\t\tcb = cb.bind(scope)\n\t\tthis.__list.each(node => cb(node[1], node[2], node[3], node))\n\t}\n\teachUnsafe(cb: (fn: T, scope: any, data: any, __node: FnNode<T>) => boolean | void, scope?: any) {\n\t\tthis.__list.eachUnsafe(node => cb(node[1], node[2], node[3], node))\n\t}\n\tid(fn: T, scope?: any): string {\n\t\tconst { fnBinding, scopeBinding } = this\n\n\t\tlet fnId = fn[fnBinding],\n\t\t\tscopeId = scope ? scope[scopeBinding] : DEFAULT_SCOPE_ID\n\t\tif (!fnId) fnId = defPropValue(fn, fnBinding, ++fnIdGenerator, false, false, false)\n\t\tif (!scopeId) scopeId = defPropValue(scope, scopeBinding, ++scopeIdGenerator, false, false, false)\n\t\treturn `${fnId}#${scopeId}`\n\t}\n}\n\nconst DEFAULT_SCOPE_ID = 1\nlet scopeIdGenerator = 1,\n\tfnIdGenerator = 0\n\nfunction parseScope(scope: any): any {\n\treturn !scope ? undefined : scope\n}\n","/**\n * @module utility/List\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:06:18 GMT+0800 (China Standard Time)\n * @modified Tue Nov 27 2018 19:07:34 GMT+0800 (China Standard Time)\n */\n\nexport * from './List'\nexport * from './FnList'\n","/**\n * String format\n * @module utility/nextTick\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Thu Jan 31 2019 16:34:55 GMT+0800 (China Standard Time)\n */\nimport { FnList } from './List'\nimport { TYPE_FN } from './consts'\n\nconst ticks = new FnList()\nlet pending = false\nlet next: () => void\n\nfunction executeTick(fn: Function, scope?: any) {\n\tscope ? fn.call(scope) : fn()\n}\n\nfunction flush() {\n\tticks.each(executeTick)\n\tticks.clean()\n\tpending = false\n}\n\nif (typeof MutationObserver === TYPE_FN) {\n\t// chrome18+, safari6+, firefox14+,ie11+,opera15\n\tvar counter = 0,\n\t\tobserver = new MutationObserver(flush),\n\t\ttextNode = document.createTextNode(counter + '')\n\tobserver.observe(textNode, {\n\t\tcharacterData: true\n\t})\n\tnext = function() {\n\t\ttextNode.data = counter + ''\n\t\tcounter = counter ? 0 : 1\n\t}\n} else {\n\tnext = function() {\n\t\tsetTimeout(flush, 0)\n\t}\n}\n\nexport function nextTick(fn: Function, scope?: any) {\n\tticks.add(fn, scope)\n\tif (!pending) {\n\t\tpending = true\n\t\tnext()\n\t}\n}\n\nexport function clearTick(fn: Function, scope?: any) {\n\tticks.remove(fn, scope)\n}\n","/**\n * @module utility/Source\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 17 2018 10:41:21 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 14:37:32 GMT+0800 (China Standard Time)\n */\n\nimport { pad } from './format'\nimport { escapeStr } from './string'\n\nconst LINE_REG = /([^\\n]+)?(\\n|$)/g\nexport class Source {\n\treadonly buff: string\n\treadonly len: number\n\tprivate __lines: ([number, string])[]\n\tprivate __linePos: number\n\tconstructor(buff: string) {\n\t\tthis.buff = buff\n\t\tthis.len = buff.length\n\t\tthis.__lines = []\n\t\tthis.__linePos = 0\n\t}\n\tposition(offset: number): [number, number, string] {\n\t\tconst { buff, len, __lines: lines, __linePos: linePos } = this\n\t\tlet i = lines.length,\n\t\t\tp: number\n\t\tif (offset < linePos) {\n\t\t\twhile (i--) {\n\t\t\t\tp = offset - lines[i][0]\n\t\t\t\tif (p >= 0) return [i + 1, p, lines[i][1]]\n\t\t\t}\n\t\t} else {\n\t\t\tif (linePos < len) {\n\t\t\t\tvar m: string[]\n\t\t\t\tLINE_REG.lastIndex = p = linePos\n\t\t\t\twhile ((m = LINE_REG.exec(buff))) {\n\t\t\t\t\tlines[i++] = [p, m[1] || '']\n\t\t\t\t\tp = LINE_REG.lastIndex\n\t\t\t\t\tif (!p || offset < p) break\n\t\t\t\t}\n\t\t\t\tthis.__linePos = p || len\n\t\t\t}\n\t\t\treturn i ? [i, (offset > len ? len : offset) - lines[i - 1][0], lines[i - 1][1]] : [1, 0, '']\n\t\t}\n\t}\n\tsource(escape?: boolean): string {\n\t\tconst { buff } = this\n\t\tlet line = 1,\n\t\t\ttoSourceStr = escape ? escapeSourceStr : sourceStr\n\n\t\treturn buff.replace(LINE_REG, (m, s, t) => pad(String(line++), 3) + ': ' + toSourceStr(m, s, t))\n\t}\n}\n\nfunction sourceStr(m: string, s: string, t: string) {\n\treturn m || ''\n}\n\nfunction escapeSourceStr(m: string, s: string, t: string) {\n\treturn s ? escapeStr(s) + t : t\n}\n","/**\n * utilities for ast builder\n *\n * @module utility/AST\n * @author Tao Zeng (tao.zeng.zt@qq.com)\n * @created 2018-11-09 13:22:51\n * @modified 2018-11-09 13:22:51 by Tao Zeng (tao.zeng.zt@qq.com)\n */\nimport { isStr, isArray, isInt, isNum } from '../is'\nimport { charCode } from '../string'\n\nexport function genCharCodes(start: number | string, end: number | string, ignoreCase?: boolean) {\n\tlet s: number = isNum(start) ? (start as number) : charCode(start as string),\n\t\te: number = isNum(end) ? (end as number) : charCode(end as string),\n\t\tcodes: number[] = new Array(e - s),\n\t\ti = 0\n\tif (ignoreCase) {\n\t\tvar c: number\n\t\tfor (; s <= e; s++) {\n\t\t\tcodes[i++] = s\n\t\t\tc = getAnotherCode(s)\n\t\t\tcodes[i++] = c\n\t\t}\n\t} else {\n\t\tfor (; s <= e; s++) codes[i++] = s\n\t}\n\treturn codes\n}\n\n/**\n * each char codes\n */\nexport function eachCharCodes(codes: number | string | any[], ignoreCase: boolean, cb: (code: number) => void) {\n\tlet i: number\n\tif (isStr(codes)) {\n\t\ti = (codes as any).length\n\t\twhile (i--) eachCharCode(charCode(codes as any, i), ignoreCase, cb)\n\t} else if (isArray(codes)) {\n\t\ti = (codes as any).length\n\t\twhile (i--) eachCharCodes((codes as any)[i], ignoreCase, cb)\n\t} else if (isInt(codes)) {\n\t\teachCharCode(codes as any, ignoreCase, cb)\n\t}\n}\nfunction eachCharCode(code: number, ignoreCase: boolean, cb: (code: number) => void): void {\n\tcb(code)\n\tif (ignoreCase) {\n\t\tvar c = getAnotherCode(code)\n\t\tc && cb(c)\n\t}\n}\n\nfunction getAnotherCode(code: number) {\n\treturn code <= 90 ? (code >= 65 ? code + 32 : 0) : code <= 122 ? code - 32 : 0\n}\n","/**\n * @module utility/mixin\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 18 2018 16:41:03 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 20:03:31 GMT+0800 (China Standard Time)\n */\n\nimport { hasOwnProp } from './ownProp'\n\nexport function mixin<B>(behaviour: B) {\n\treturn function mixin<M extends B, T extends { new (...args: Array<any>): M }>(Class: T) {\n\t\tconst proto = Class.prototype\n\t\tfor (var k in behaviour) if (hasOwnProp(behaviour, k)) proto[k] = behaviour[k]\n\t\treturn Class\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 17:53:14 GMT+0800 (China Standard Time)\n */\nimport { MatchContext } from './MatchContext'\nimport { eachCharCodes } from './util'\nimport { assert } from '../assert'\nimport { isBool } from '../is'\nimport { mixin } from '../mixin'\n\n@mixin({ $ruleErr: true })\nexport class MatchError {\n\treadonly $ruleErr: boolean\n\treadonly rule: Rule\n\treadonly context: MatchContext\n\treadonly source: MatchError\n\treadonly target: MatchError\n\tcapturable: boolean\n\treadonly pos: number\n\tmsg: string\n\tconstructor(msg: string, capturable: boolean, source: MatchError, context: MatchContext, rule: Rule) {\n\t\t!isBool(capturable) && (capturable = rule.capturable)\n\t\tthis.capturable = capturable && source ? source.capturable : capturable\n\t\tthis.msg = msg\n\t\tthis.source = source\n\t\tthis.target = source ? source.target : this\n\t\tthis.context = context\n\t\tthis.rule = rule\n\t\tthis.pos = context.startPos()\n\t}\n\tposition(): [number, number, string] {\n\t\treturn this.context.source.position(this.pos)\n\t}\n}\n\nexport type onMatchCallback = (data: any, len: number, context: MatchContext, rule: Rule) => MatchError | string | void\nexport type onErrorCallback = (err: MatchError, context: MatchContext, rule: Rule) => MatchError | string | void\n\nfunction defaultErr(err: MatchError) {\n\treturn err\n}\n\nfunction defaultMatch(data: any, len: number, context: MatchContext) {\n\tcontext.add(data)\n}\n\nexport type RuleOptions = {\n\t/**\n\t * error is capturable\n\t */\n\tcapturable?: boolean\n\t/**\n\t * matched callback\n\t */\n\tmatch?: (data: any, len: number, context: MatchContext, rule: Rule) => MatchError | string | void\n\t/**\n\t * error callback\n\t */\n\terr?: (err: MatchError, context: MatchContext, rule: Rule) => MatchError | string | void\n}\n\nlet idGen = 0\n/**\n * Abstract Rule\n */\n@mixin({ $rule: true })\nexport class Rule {\n\treadonly $rule: boolean\n\t// rule type (for debug)\n\ttype: string\n\t// rule id\n\treadonly id: number\n\t// rule name\n\treadonly name: string\n\t// error is capturable\n\treadonly capturable: boolean\n\t// rule expression (for debug)\n\tprotected expr: string\n\t// rule EXPECT content (for debug)\n\tprotected EXPECT: string\n\t// matched callback\n\treadonly onMatch: onMatchCallback\n\t// error callback\n\treadonly onErr: onErrorCallback\n\t// index of start codes\n\tprotected startCodeIdx: any[]\n\t// start codes\n\tprotected startCodes: number[]\n\n\t/**\n\t * @param name\t\t\trule name\n\t * @param capturable\terror is capturable\n\t * @param onMatch\t\tcallback on matched, allow modify the match result or return an error\n\t * @param onErr\t\t\tcallback on Error, allow to ignore error or modify error message or return new error\n\t */\n\tconstructor(name: string, options: RuleOptions) {\n\t\tthis.id = idGen++\n\t\tthis.name = name\n\t\tthis.capturable = options.capturable !== false\n\t\tthis.onMatch = options.match || defaultMatch\n\t\tthis.onErr = options.err || defaultErr\n\t}\n\n\t/**\n\t * create Error\n\t * @param msg \t\t\terror message\n\t * @param context \t\tmatch context\n\t * @param capturable \tis capturable error\n\t * @param src \t\t\tsource error\n\t */\n\tmkErr(msg: string, context: MatchContext, capturable?: boolean, source?: MatchError): MatchError {\n\t\treturn new MatchError(msg, capturable, source, context, this)\n\t}\n\n\t/**\n\t * match fail\n\t * @param msg \t\t\terror message\n\t * @param context \t\tmatch context\n\t * @param capturable \tis capturable error\n\t * @param src \t\t\tsource error\n\t * @return Error|void: may ignore Error in the error callback\n\t */\n\tprotected error(msg: string, context: MatchContext, src?: MatchError, capturable?: boolean): MatchError {\n\t\tconst err = this.mkErr(msg, context, capturable, src)\n\t\tconst userErr = this.onErr(err, context, this)\n\t\tif (userErr) return (userErr as any).$ruleErr ? (userErr as MatchError) : ((err[0] = String(userErr)), err)\n\t}\n\n\t/**\n\t * match success\n\t * > attach the matched result by match callback\n\t * @param data \t\tmatched data\n\t * @param len  \t\tmatched data length\n\t * @param context \tmatch context\n\t * @return Error|void: may return Error in the match callback\n\t */\n\tprotected matched(data: any, len: number, context: MatchContext): MatchError {\n\t\tconst err = this.onMatch(data, len, context, this)\n\t\tif (err) return (err as any).$ruleErr ? (err as MatchError) : this.mkErr(String(err), context, false)\n\t}\n\n\tprotected enter(context: MatchContext) {\n\t\treturn context.create()\n\t}\n\n\t/**\n\t * match\n\t * @param context match context\n\t */\n\tmatch(context: MatchContext): MatchError {\n\t\treturn assert()\n\t}\n\n\t/**\n\t * get start char codes\n\t */\n\tgetStart(stack?: number[]): number[] {\n\t\treturn this.startCodes\n\t}\n\n\t/**\n\t * prepare test before match\n\t */\n\ttest(context: MatchContext): boolean {\n\t\treturn true\n\t}\n\n\tprotected startCodeTest(context: MatchContext): boolean {\n\t\treturn this.startCodeIdx[context.nextCode()]\n\t}\n\n\tprotected setStartCodes(start: number | string | any[], ignoreCase?: boolean) {\n\t\tconst codes: number[] = [],\n\t\t\tindex: number[] = []\n\t\teachCharCodes(start, ignoreCase, code => {\n\t\t\tif (!index[code]) {\n\t\t\t\tcodes.push(code)\n\t\t\t\tindex[code] = code\n\t\t\t}\n\t\t})\n\t\tthis.startCodes = codes\n\t\tthis.setCodeIdx(index)\n\t}\n\n\tprotected setCodeIdx(index: any[]) {\n\t\tif (index.length > 1) {\n\t\t\tthis.startCodeIdx = index\n\t\t\tthis.test = this.startCodeTest\n\t\t}\n\t}\n\n\t// for debug \n\t/**\n\t * make rule expression\n\t * @param expr expression text\n\t */\n\tprotected mkExpr(expr: string): string {\n\t\treturn `<${this.type}: ${expr}>`\n\t}\n\n\t/**\n\t * set rule expression\n\t * \t\t1. make rule expression\n\t * \t\t2. make Expect text\n\t */\n\tprotected setExpr(expr: string) {\n\t\tthis.expr = this.mkExpr(expr)\n\t\tthis.EXPECT = `Expect: ${expr}`\n\t}\n\n\tgetExpr(stack?: number[]): string {\n\t\treturn this.name || this.expr\n\t}\n\n\t/**\n\t * toString by name or expression\n\t */\n\ttoString(): string {\n\t\treturn this.getExpr()\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:11:19 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\n\n/**\n * Match Rule Interface\n */\nexport class MatchRule extends Rule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param start \t\tstart char codes, prepare test by start char codes before match\n\t * @param ignoreCase\tignore case for the start char codes\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, start: number | string | any[], ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, options)\n\t\tthis.setStartCodes(start, ignoreCase)\n\t}\n\n\t/**\n\t * consume matched result\n\t * @param data \t\tmatched result\n\t * @param len \t\tmatched chars\n\t * @param context \tmatch context\n\t */\n\tcomsume(data: string | string[], len: number, context: MatchContext): MatchError {\n\t\tcontext.advance(len)\n\t\treturn this.matched(data, len, context)\n\t}\n}\n","/**\n *\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 14:53:49 GMT+0800 (China Standard Time)\n */\n\nimport { RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { MatchRule } from './MatchRule'\nimport { char } from '../string'\nimport { mixin } from '../mixin'\n\n/**\n * match a character in the allowed list\n * > well match any character if the allowed list is empty\n *\n * > must call test() before match\n */\n@mixin({ type: 'Character' })\nexport class CharMatchRule extends MatchRule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param allows \t\tallowed character codes for match\n\t * \t\t\t\t\t\twell match any character if the allowed list is empty\n\t * @param ignoreCase\tignore case for the allowed character codes\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, allows: number | string | any[], ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, allows, ignoreCase, options)\n\n\t\t// generate expression for debug\n\t\tconst codes = this.startCodes\n\t\tlet i = codes.length,\n\t\t\texpr = '*'\n\t\tif (i) {\n\t\t\tconst chars = []\n\t\t\twhile (i--) chars[i] = char(codes[i])\n\t\t\texpr = `\"${chars.join('\" | \"')}\"`\n\t\t}\n\t\tthis.setExpr(expr)\n\t}\n\tmatch(context: MatchContext) {\n\t\treturn this.comsume(context.nextChar(), 1, context)\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Fri Dec 28 2018 20:09:06 GMT+0800 (China Standard Time)\n */\n\nimport { MatchError, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { MatchRule } from './MatchRule'\nimport { stickyReg } from '../reg'\nimport { isInt } from '../is'\nimport { createFn } from '../fn'\nimport { mapArray } from '../collection'\nimport { mixin } from '../mixin'\nimport { create } from '../create'\nimport { cutLStr } from '../string'\n\n/**\n * match string by RegExp\n *\n * optimization:\n * - Priority use sticky mode {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky}\n *\n */\n@mixin({ type: 'RegExp' })\nexport class RegMatchRule extends MatchRule {\n\treadonly regexp: RegExp\n\treadonly pick: boolean | number\n\tprivate picker: (m: string[]) => string | string[]\n\tprivate spicker: (buff: string, start: number, end: number) => string\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param regexp\t\tregular\n\t * @param pick\t\t\tpick regular matching results\n\t * \t\t\t\t\t\t    0: pick results[0] (optimize: test and substring in sticky mode)\n\t * \t\t\t\t\t\t  > 0: pick results[{pick}]\n\t * \t\t\t\t\t\t  < 0: pick first non-blank string from 1 to -{pick} index on results\n\t * \t\t\t\t\t\t true: pick results\n\t * \t\t\t\t\t\tfalse: not pick result, result is null (optimize: just test string in sticky mode)\n\t * @param start\t\t\tstart character codes in the regular, optimize performance by start character codes\n\t * @param capturable\terror is capturable\n\t * @param onMatch\t\tmatch callback\n\t * @param onErr\t\t\terror callback\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tregexp: RegExp,\n\t\tpick: boolean | number,\n\t\tstart: number | string | any[],\n\t\toptions: RuleOptions\n\t) {\n\t\tpick = pick === false || isInt(pick) ? pick : !!pick || 0\n\n\t\tconst sticky = stickyReg && !pick, // use exec mode when need pick match group data\n\t\t\tpattern = regexp.source,\n\t\t\tignoreCase = regexp.ignoreCase\n\n\t\t// always wrapping in a none capturing group preceded by '^' to make sure\n\t\t// matching can only work on start of input. duplicate/redundant start of\n\t\t// input markers have no meaning (/^^^^A/ === /^A/)\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\n\t\t// When the y flag is used with a pattern, ^ always matches only at the\n\t\t// beginning of the input, or (if multiline is true) at the beginning of a\n\t\t// line.\n\t\tregexp = new RegExp(\n\t\t\tsticky ? pattern : `^(?:${pattern})`,\n\t\t\t(ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '') + (sticky ? 'y' : '')\n\t\t)\n\n\t\tsuper(name, start, ignoreCase, options)\n\n\t\tthis.regexp = regexp\n\t\tthis.pick = pick\n\t\tthis.match = sticky ? this.stickyMatch : this.execMatch\n\n\t\tsticky ? (this.spicker = pick === false ? pickNone : pickTestStr) : (this.picker = mkPicker(pick))\n\n\t\tthis.setExpr(pattern)\n\t}\n\t/**\n\t * match on sticky mode\n\t */\n\tstickyMatch(context: MatchContext): MatchError {\n\t\tconst reg = this.regexp,\n\t\t\tbuff = context.buff(),\n\t\t\tstart = context.offset()\n\t\treg.lastIndex = start\n\t\tlet len: number\n\t\treturn reg.test(buff)\n\t\t\t? ((len = reg.lastIndex - start), this.comsume(this.spicker(buff, start, len), len, context))\n\t\t\t: this.error(this.EXPECT, context)\n\t}\n\t/**\n\t * match on exec mode\n\t */\n\texecMatch(context: MatchContext): MatchError {\n\t\tconst m = this.regexp.exec(context.buff(true))\n\t\treturn m ? this.comsume(this.picker(m), m[0].length, context) : this.error(this.EXPECT, context)\n\t}\n}\n\nconst cache = create(null)\nfunction mkPicker(pick: number | boolean): (m: string[]) => string | string[] {\n\treturn (\n\t\tcache[pick as any] ||\n\t\t(cache[pick as any] =\n\t\t\tpick === false\n\t\t\t\t? pickNone\n\t\t\t\t: pick === true\n\t\t\t\t? pickAll\n\t\t\t\t: pick >= 0\n\t\t\t\t? createFn(`return m[${pick}]`, ['m'], `pick_${pick}`)\n\t\t\t\t: createFn(\n\t\t\t\t\t\t`return ${mapArray(new Array(-pick), (v, i) => `m[${i + 1}]`).join(' || ')}`,\n\t\t\t\t\t\t['m'],\n\t\t\t\t\t\t`pick_1_${-pick}`\n\t\t\t\t  ))\n\t)\n}\n\nfunction pickNone(): string {\n\treturn null\n}\n\nfunction pickAll(m: string[]): string[] {\n\treturn m\n}\n\nfunction pickTestStr(buff: string, start: number, end: number): string {\n\treturn cutLStr(buff, start, end)\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:10:52 GMT+0800 (China Standard Time)\n */\n\nimport { RuleOptions } from './Rule'\nimport { RegMatchRule } from './RegMatchRule'\nimport { reEscape } from '../reg'\nimport { mixin } from '../mixin'\nimport { charCode } from '../string'\n\n@mixin({ type: 'String' })\nexport class StringMatchRule extends RegMatchRule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param str \t\t\tmatch string\n\t * @param ignoreCase\tignore case\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, str: string, ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, new RegExp(reEscape(str), ignoreCase ? 'i' : ''), 0, charCode(str), options)\n\t\tthis.setExpr(str)\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 16:32:31 GMT+0800 (China Standard Time)\n */\nimport { Source } from '../Source'\nimport { char, charCode, cutStr } from '../string'\nimport { assert } from '../assert'\n\nexport type CheckPoint = [number, number]\n/**\n * Match Context of Rule\n */\nexport class MatchContext {\n\t// start offset of original buff\n\treadonly source: Source\n\n\t// parent context\n\treadonly parent: MatchContext\n\n\t// matched result list\n\tresult: any[]\n\n\tdata: any\n\n\t// template buff\n\tprivate __buff: string\n\n\t// current offset of template buff\n\tprivate __offset: number\n\n\t// current offset of original buff\n\tprivate __orgOffset: number\n\n\t// advanced characters\n\tprivate __advanced: number\n\n\t// cached character\n\tprivate __code: number\n\n\tconstructor(source: Source, buff: string, offset: number, orgOffset: number, parent?: MatchContext) {\n\t\tthis.source = source\n\t\tthis.parent = parent\n\t\tthis.result = []\n\t\tthis.__buff = buff\n\t\tthis.__offset = offset\n\t\tthis.__orgOffset = orgOffset\n\t\tthis.__advanced = 0\n\t\tparent ? ((this.__code = parent.__code), (this.data = parent.data)) : this.__flushCode()\n\t}\n\n\tprivate __flushCode() {\n\t\tconst { __buff: buff, __offset: offset } = this\n\t\tthis.__code = offset < buff.length ? charCode(buff, offset) : 0\n\t}\n\n\t/**\n\t * create sub Context\n\t */\n\tcreate() {\n\t\treturn new MatchContext(this.source, this.__buff, this.__offset, this.__orgOffset + this.__advanced, this)\n\t}\n\n\tprivate __setAdvanced(advanced: number) {\n\t\tassert.notLess(advanced, 0)\n\n\t\tconst offset = this.__offset - this.__advanced + advanced\n\t\tif (offset < 0) {\n\t\t\tthis.__buff = this.source.buff\n\t\t\tthis.__offset = this.__orgOffset + advanced\n\t\t}\n\t\tthis.__advanced = advanced\n\t\tthis.__offset = offset\n\t\tthis.__flushCode()\n\t}\n\n\t/**\n\t * commit context state to parent context\n\t */\n\tcommit() {\n\t\tconst { __advanced: advanced } = this\n\t\tthis.parent.advance(advanced)\n\t\tthis.__orgOffset += advanced\n\t\tthis.__advanced = 0\n\t\tthis.data = null\n\t}\n\n\t/**\n\t * marge context state\n\t */\n\tmargeState(context: MatchContext) {\n\t\tthis.__setAdvanced(context.__orgOffset + context.__advanced - this.__orgOffset)\n\t}\n\n\t/**\n\t * rollback state and result\n\t * @param checkpoint \trollback to checkpoint\n\t */\n\trollback(checkpoint?: CheckPoint) {\n\t\tlet advanced = 0,\n\t\t\tresultLen = 0\n\n\t\tcheckpoint && ((advanced = checkpoint[0]), (resultLen = checkpoint[1]))\n\n\t\tthis.__setAdvanced(advanced)\n\n\t\tconst { result } = this\n\t\tif (result.length > resultLen) result.length = resultLen\n\t}\n\n\t/**\n\t * get a check point\n\t */\n\tcheckpoint(): CheckPoint {\n\t\treturn [this.__advanced, this.result.length]\n\t}\n\n\t/**\n\t * advance buffer position\n\t */\n\tadvance(i: number) {\n\t\tthis.__offset += i\n\t\tthis.__advanced += i\n\t\tthis.__flushCode()\n\t}\n\n\t/**\n\t * advanced buff length\n\t */\n\tadvanced(): number {\n\t\treturn this.__advanced\n\t}\n\n\t/**\n\t * get buffer\n\t * @param reset reset buffer string from 0\n\t */\n\tbuff(reset?: boolean): string {\n\t\tlet { __buff: buff } = this\n\t\tif (reset) {\n\t\t\tthis.__buff = buff = cutStr(buff, this.__offset)\n\t\t\tthis.__offset = 0\n\t\t}\n\t\treturn buff\n\t}\n\n\torgBuff() {\n\t\treturn this.source.buff\n\t}\n\n\toffset(): number {\n\t\treturn this.__offset\n\t}\n\n\tstartPos(): number {\n\t\treturn this.__orgOffset\n\t}\n\n\tcurrPos(): number {\n\t\treturn this.__orgOffset + this.__advanced\n\t}\n\n\tpos(): [number, number] {\n\t\tconst { __orgOffset: offset } = this\n\t\treturn [offset, offset + this.__advanced]\n\t}\n\n\t/**\n\t * get next char code\n\t * @return number char code number\n\t */\n\tnextCode() {\n\t\treturn this.__code\n\t}\n\n\tnextChar() {\n\t\treturn char(this.__code)\n\t}\n\n\t// result opeartions \n\t/**\n\t * append result\n\t */\n\tadd(data: any) {\n\t\tconst { result } = this\n\t\tresult[result.length] = data\n\t}\n\n\t/**\n\t * append resultset\n\t */\n\taddAll(data: any[]) {\n\t\tconst { result } = this\n\t\tconst len = result.length\n\t\tlet i = data.length\n\t\twhile (i--) result[len + i] = data[i]\n\t}\n\n\t/**\n\t * get result size\n\t */\n\tresultSize() {\n\t\treturn this.result.length\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:24:21 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError, onMatchCallback, onErrorCallback, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { assert } from '../assert'\nimport { idxOfArray } from '../collection'\nimport { pad } from '../format'\nimport { escapeStr } from '../string'\nimport { Source } from '../Source'\n\nexport type ComplexRuleBuilder = (rule: Rule) => Rule[]\n\nconst MAX = -1 >>> 0\n/**\n * Abstract Complex Rule\n */\nexport class ComplexRule extends Rule {\n\treadonly split: string\n\tprivate builder: ComplexRuleBuilder\n\tprotected EXPECTS: string[]\n\tprotected rules: Rule[]\n\tprotected readonly rMin: number\n\tprotected readonly rMax: number\n\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param builder \t\tcallback of build rules\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, repeat: [number, number], builder: ComplexRuleBuilder, options: RuleOptions) {\n\t\tsuper(name, options)\n\n\t\tlet [rMin, rMax] = repeat\n\n\t\trMin < 0 && (rMin = 0)\n\t\trMax <= 0 && (rMax = MAX)\n\n\t\tassert.notGreater(rMin, rMax)\n\n\t\tthis.rMin = rMin\n\t\tthis.rMax = rMax\n\n\t\tthis.builder = builder\n\n\t\tif (rMin !== rMax || rMin !== 1) {\n\t\t\tthis.match = this.rmatch\n\n\t\t\t// for debug\n\t\t\tthis.type = `${this.type}[${rMin}${rMin === rMax ? '' : ` - ${rMax === MAX ? 'MAX' : rMax}`}]`\n\t\t}\n\t}\n\tparse(buff: string, data?: any): any[] {\n\t\tconst ctx = new MatchContext(new Source(buff), buff, 0, 0)\n\t\tctx.data = data\n\t\tlet err = this.match(ctx)\n\t\tif (err) {\n\t\t\tconst msg = []\n\t\t\tvar pos: [number, number, string]\n\t\t\tdo {\n\t\t\t\tpos = err.position()\n\t\t\t\tmsg.unshift(\n\t\t\t\t\t`[${pad(String(pos[0]), 3)}:${pad(String(pos[1]), 2)}] - ${err.rule.toString()}: ${\n\t\t\t\t\t\terr.msg\n\t\t\t\t\t} on \"${escapeStr(pos[2])}\"`\n\t\t\t\t)\n\t\t\t} while ((err = err.source))\n\t\t\tmsg.push('[Source]', ctx.source.source())\n\t\t\tthrow new SyntaxError(msg.join('\\n'))\n\t\t}\n\t\treturn ctx.result\n\t}\n\tinit(): ComplexRule {\n\t\tconst rules = this.builder(this)\n\t\tlet i = rules && rules.length\n\n\t\tassert.is(i, `Require Complex Rules`)\n\n\t\tthis.rules = rules\n\n\t\t// generate expression and expect string for debug\n\t\tconst names = this.rnames(rules)\n\t\tthis.setExpr(names.join(this.split))\n\t\twhile (i--) names[i] = `Expect[${i}]: ${names[i]}`\n\t\tthis.EXPECTS = names\n\n\t\tthis.__init(rules)\n\n\t\tthis.builder = null\n\n\t\treturn this\n\t}\n\t__init(rules: Rule[]) {}\n\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\treturn assert()\n\t}\n\n\tprotected setCodeIdx(index: any[]) {\n\t\tthis.rMin && super.setCodeIdx(index)\n\t}\n\n\tgetRules(): Rule[] {\n\t\treturn this.rules || (this.init(), this.rules)\n\t}\n\n\tgetStart(stack?: number[]): number[] {\n\t\tconst { id, startCodes } = this\n\t\treturn startCodes\n\t\t\t? startCodes\n\t\t\t: (stack && ~idxOfArray(stack, id)) || this.rules\n\t\t\t? []\n\t\t\t: (this.init(), this.startCodes)\n\t}\n\n\tconsume(context: MatchContext): MatchError {\n\t\tconst err = this.matched(context.result, context.advanced(), context.parent)\n\t\t!err && context.commit()\n\t\treturn err\n\t}\n\n\t// for debug\n\tprivate rnames(rules: Rule[], stack?: number[]): string[] {\n\t\tlet i = rules.length\n\t\tconst names: string[] = new Array(i),\n\t\t\tid = this.id\n\t\twhile (i--) names[i] = rules[i].getExpr(stack ? stack.concat(id) : [id])\n\t\treturn names\n\t}\n\n\tgetExpr(stack?: number[]): string {\n\t\tconst { id, name } = this\n\t\tlet i: number\n\n\t\treturn name\n\t\t\t? name\n\t\t\t: stack\n\t\t\t? ~(i = idxOfArray(stack, id))\n\t\t\t\t? `<${this.type} -> $${stack[i]}>`\n\t\t\t\t: this.mkExpr(this.rnames(this.getRules(), stack).join(this.split))\n\t\t\t: this.expr\n\t}\n}\n","/**\n *\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:56:09 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError } from './Rule'\nimport { MatchContext, CheckPoint } from './MatchContext'\nimport { ComplexRule } from './ComplexRule'\nimport { mixin } from '../mixin'\n\n/**\n * AND Complex Rule\n */\n@mixin({ type: 'And', split: ' ' })\nexport class AndRule extends ComplexRule {\n\t__init(rules: Rule[]) {\n\t\tthis.setStartCodes(rules[0].getStart([this.id]))\n\t}\n\tmatch(context: MatchContext): MatchError {\n\t\tconst rules = this.getRules(),\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\t\tlet err: MatchError,\n\t\t\ti: number = 0\n\t\tfor (; i < len; i++) if ((err = this.testRule(rules[i], i, ctx))) return err\n\t\treturn this.consume(ctx)\n\t}\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\tconst { rMin, rMax } = this\n\t\tconst rules = this.getRules(),\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\n\t\tlet err: MatchError,\n\t\t\trepeat: number = 0,\n\t\t\ti: number,\n\t\t\tcp: CheckPoint\n\n\t\tout: for (; repeat < rMax; repeat++) {\n\t\t\tcp = ctx.checkpoint()\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif ((err = this.testRule(rules[i], i, ctx))) {\n\t\t\t\t\tif (repeat < rMin) return err\n\t\t\t\t\tctx.rollback(cp)\n\t\t\t\t\tbreak out\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.consume(ctx)\n\t}\n\ttestRule(rule: Rule, i: number, ctx: MatchContext): MatchError {\n\t\tlet err: MatchError\n\t\tif (!rule.test(ctx)) {\n\t\t\treturn this.error(this.EXPECTS[i], ctx)\n\t\t} else if ((err = rule.match(ctx))) {\n\t\t\treturn this.error(this.EXPECTS[i], ctx, err)\n\t\t}\n\n\t\t// return (!rule.test(ctx) || (err = rule.match(ctx))) && (err = this.error(this.EXPECTS[i], ctx, err))\n\t}\n}\n","/**\n *\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 17:47:30 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError } from './Rule'\nimport { MatchContext, CheckPoint } from './MatchContext'\nimport { ComplexRule } from './ComplexRule'\nimport { eachCharCodes } from './util'\nimport { mixin } from '../mixin'\n\n/**\n * OR Complex Rule\n */\n@mixin({ type: 'Or', split: ' | ' })\nexport class OrRule extends ComplexRule {\n\tindex: Rule[][]\n\t__init(rules: Rule[]) {\n\t\tconst { id } = this\n\t\tconst len = rules.length,\n\t\t\tstarts: number[] = [], // all distinct start codes\n\t\t\trStarts: number[][] = [], // start codes per rule\n\t\t\tindex: Rule[][] = [\n\t\t\t\t[] // rules which without start code\n\t\t\t]\n\n\t\tlet i: number, j: number, k: Rule[] & { idx: number }, codes: number[]\n\n\t\t// get start codes of all rules\n\t\tfor (i = 0; i < len; i++) {\n\t\t\trStarts[i] = [] // init rule start codes\n\t\t\teachCharCodes(rules[i].getStart([id]), false, code => {\n\t\t\t\trStarts[i].push(code) // append to rule start codes\n\t\t\t\tif (!index[code]) {\n\t\t\t\t\tindex[code] = [] // init start code index\n\t\t\t\t\tstarts.push(code) // append to all start codes\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// fill index\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tcodes = rStarts[i] // append rule to start code index by rule start codes\n\t\t\tif (!codes.length) {\n\t\t\t\t// rule without start code\n\t\t\t\tindex[0].push(rules[i]) // append rule to index[0]\n\t\t\t\tcodes = starts // append rule to start code index by all start codes\n\t\t\t}\n\n\t\t\t// append rule to start code index (by rule start codes or all start codes)\n\t\t\tj = codes.length\n\t\t\twhile (j--) {\n\t\t\t\tk = index[codes[j]] as Rule[] & { idx: number }\n\t\t\t\tif (k.idx !== i) {\n\t\t\t\t\t// deduplication\n\t\t\t\t\tk.push(rules[i]) // append rules[i] to start code index[codes[j]]\n\t\t\t\t\tk.idx = i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// rule have unkown start code when got unkown start code from any rules\n\t\tconst startCodes = !index[0].length && starts\n\t\tthis.startCodes = startCodes || []\n\t\tstartCodes && this.setCodeIdx(index)\n\t\tthis.index = index\n\t}\n\n\tmatch(context: MatchContext): MatchError {\n\t\tconst index = this.index || (this.init(), this.index),\n\t\t\trules: Rule[] = index[context.nextCode()] || index[0],\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\n\t\tlet err: MatchError,\n\t\t\tupErr: MatchError,\n\t\t\ti = 0\n\n\t\tfor (; i < len; i++) {\n\t\t\terr = rules[i].match(ctx) || this.consume(ctx)\n\t\t\tif (!err) return\n\t\t\tif (!err.capturable) {\n\t\t\t\tupErr = err\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (!upErr || err.pos >= upErr.pos) upErr = err\n\t\t\tctx.rollback()\n\t\t}\n\t\treturn this.error(this.EXPECT, ctx, upErr)\n\t}\n\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\tconst { rMin, rMax } = this\n\t\tconst index = this.index || (this.init(), this.index),\n\t\t\tctx = context.create()\n\n\t\tlet rules: Rule[],\n\t\t\tlen: number,\n\t\t\terr: MatchError,\n\t\t\tupErr: MatchError,\n\t\t\trepeat: number = 0,\n\t\t\ti: number,\n\t\t\tcp: CheckPoint\n\n\t\tout: for (; repeat < rMax; repeat++) {\n\t\t\trules = index[ctx.nextCode()] || index[0]\n\t\t\tupErr = null\n\t\t\tif ((len = rules.length)) {\n\t\t\t\tcp = ctx.checkpoint()\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\terr = rules[i].match(ctx)\n\t\t\t\t\tif (!err) continue out\n\t\t\t\t\tif (!err.capturable) {\n\t\t\t\t\t\tupErr = err\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tif (!upErr || err.pos >= upErr.pos) upErr = err\n\t\t\t\t\tctx.rollback(cp)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (repeat < rMin || (upErr && !upErr.capturable)) return this.error(this.EXPECT, ctx, upErr)\n\t\t\tbreak\n\t\t}\n\t\treturn this.consume(ctx)\n\t}\n}\n","/**\n * AST Parser API\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:58:52 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:45:10 GMT+0800 (China Standard Time)\n */\n\nimport { ComplexRuleBuilder } from './ComplexRule'\nimport { isObj, isReg, isStr, isBool, isNum, isInt, isArray, isArrayLike, isFn } from '../is'\nimport { makeMap, mapArray, SKIP } from '../collection'\nimport { CharMatchRule } from './CharMatchRule'\nimport { StringMatchRule } from './StringMatchRule'\nimport { RegMatchRule } from './RegMatchRule'\nimport { onMatchCallback, onErrorCallback, Rule, MatchError, RuleOptions } from './Rule'\nimport { MatchRule } from './MatchRule'\nimport { AndRule } from './AndRule'\nimport { OrRule } from './OrRule'\nimport { assert } from '../assert'\nimport { MatchContext } from './MatchContext'\nimport { EMPTY_FN } from '../consts'\n\n//========================================================================================\n/*                                                                                      *\n *                                      match tools                                     *\n *                                                                                      */\n//========================================================================================\n\nexport const discardMatch: onMatchCallback = EMPTY_FN\n\nexport function appendMatch(data: any, len: number, context: MatchContext) {\n\tcontext.addAll(data)\n}\nexport function attachMatch(\n\tcallback: (data: any, len: number, context: MatchContext, rule: Rule) => any\n): onMatchCallback\nexport function attachMatch(val: any): onMatchCallback\nexport function attachMatch(val: any) {\n\tconst callback: (data: any, len: number, context: MatchContext, rule: Rule) => any = isFn(val) ? val : () => val\n\treturn (data: any, len: number, context: MatchContext, rule: Rule) => {\n\t\tcontext.add(callback(data, len, context, rule))\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       match api                                      *\n *                                                                                      */\n//========================================================================================\n\nexport function match(desc: MatchRuleDescriptor): MatchRule\n\n// named regexp match api \n// pick, start, cap\n// pick, cap\n// pick, start\n// pick\n// start, cap\n// start\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick?: boolean | number,\n\tstartCodes?: number | string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tstartCodes: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(name: string, pattern: RegExp, onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\n// regexp match api \nexport function match(\n\tpattern: RegExp,\n\tpick?: boolean | number,\n\tstartCodes?: number | string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tstartCodes: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(pattern: RegExp, onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\n// named string match api \nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tignoreCase?: boolean,\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tignoreCase: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\n// string match api \nexport function match(\n\tpattern: number | string | any[],\n\tignoreCase?: boolean,\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tpattern: number | string | any[],\n\tignoreCase: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(pattern: number | string | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\nexport function match(): MatchRule {\n\treturn mkMatch(arguments)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     and rule api                                     *\n *                                                                                      */\n//========================================================================================\n\n// and \nexport function and(desc: ComplexRuleDescriptor): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function and(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [1, 1])\n}\n\n// and any \nexport function any(desc: ComplexRuleDescriptor): AndRule\nexport function any(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function any(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [0, -1])\n}\n\n// and many \nexport function many(desc: ComplexRuleDescriptor): AndRule\nexport function many(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function many(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [1, -1])\n}\n\n// and option \nexport function option(desc: ComplexRuleDescriptor): AndRule\nexport function option(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [0, 1])\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      or rule api                                     *\n *                                                                                      */\n//========================================================================================\n\n// or \nexport function or(desc: ComplexRuleDescriptor): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): OrRule\nexport function or(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [1, 1])\n}\n\n// or any \nexport function anyOne(desc: ComplexRuleDescriptor): OrRule\nexport function anyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [0, -1])\n}\n\n// or many \nexport function manyOne(desc: ComplexRuleDescriptor): OrRule\nexport function manyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [1, -1])\n}\n\n// or option \nexport function optionOne(desc: ComplexRuleDescriptor): OrRule\nexport function optionOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [0, 1])\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                  Match Rule Builder                                  *\n *                                                                                      */\n//========================================================================================\n\nexport type MatchRuleDescriptor = {\n\tname?: string\n\tpattern: RegExp | number | string | any[]\n\tpick?: boolean | number\n\tstartCodes?: number | string | any[]\n\tignoreCase?: boolean\n} & RuleOptions\n\nfunction mkMatch(args: IArguments | any[], defaultMatchCallback?: onMatchCallback): MatchRule {\n\tlet name: string,\n\t\tpattern: number | string | any[],\n\t\tregexp: RegExp,\n\t\tpick: boolean | number = 0,\n\t\tstartCodes: number | string | any[],\n\t\tignoreCase: boolean = false,\n\t\toptions: RuleOptions\n\tif (isObj(args[0])) {\n\t\tconst desc = args[0] as MatchRuleDescriptor,\n\t\t\tp = desc.pattern\n\t\tif (isReg(p)) {\n\t\t\tregexp = p as RegExp\n\t\t\tpick = desc.pick\n\t\t\tstartCodes = desc.startCodes\n\t\t} else if (isStrOrCodes(p)) {\n\t\t\tpattern = p as number | string | any[]\n\t\t\tignoreCase = desc.ignoreCase\n\t\t}\n\t\tname = desc.name\n\t\toptions = desc\n\t} else {\n\t\tvar i = 1\n\t\tif (isStr(args[0]) && isMatchPattern(args[1])) {\n\t\t\tname = args[0]\n\t\t\tisReg(args[1]) ? (regexp = args[1]) : (pattern = args[1])\n\t\t\ti = 2\n\t\t} else if (isMatchPattern(args[0])) {\n\t\t\tisReg(args[0]) ? (regexp = args[0]) : (pattern = args[0])\n\t\t}\n\n\t\tif (regexp) {\n\t\t\tif (isBool(args[i]) || isInt(args[i])) pick = args[i++]\n\t\t\tif (isStrOrCodes(args[i])) startCodes = args[i++]\n\t\t} else {\n\t\t\tif (isBool(args[i])) ignoreCase = args[i++]\n\t\t}\n\t\toptions = parseRuleOptions(args, i)\n\t}\n\n\t!options.match && (options.match = defaultMatchCallback)\n\n\treturn regexp\n\t\t? new RegMatchRule(name, regexp, options.match === discardMatch ? false : pick, startCodes, options)\n\t\t: pattern\n\t\t? strMatch(name, pattern, ignoreCase, options)\n\t\t: assert('invalid match rule {j}', args)\n}\n\nfunction isStrOrCodes(pattern): boolean {\n\treturn isStr(pattern) || isNum(pattern) || isArray(pattern)\n}\n\nfunction isMatchPattern(pattern): boolean {\n\treturn isReg(pattern) || isStrOrCodes(pattern)\n}\n\nfunction strMatch(name: string, pattern: string | number | any[], ignoreCase: boolean, options: RuleOptions) {\n\tconst C = isStr(pattern) && (pattern as string).length > 1 ? StringMatchRule : CharMatchRule\n\treturn new C(name, pattern, ignoreCase, options)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                 complex rule builder                                 *\n *                                                                                      */\n//========================================================================================\n\nexport type ComplexRuleDescriptor = {\n\tname?: string\n\trules: ((rule: Rule) => any[]) | any[]\n\trepeat?: [number, number]\n\tcapturable?: boolean\n\tonMatch?: onMatchCallback\n\tonErr?: onErrorCallback\n} & RuleOptions\n\nfunction mkComplexRule<T extends AndRule | OrRule>(\n\targs: IArguments,\n\tRule: typeof AndRule | typeof OrRule,\n\tdefaultRepeat: [number, number]\n): T {\n\tlet name: string,\n\t\tbuilder: ComplexRuleBuilder,\n\t\trules: ((rule: Rule) => any[]) | any[],\n\t\trepeat: [number, number],\n\t\toptions: RuleOptions\n\tif (isObj(args[0])) {\n\t\tconst desc = args[0] as ComplexRuleDescriptor,\n\t\t\tr = desc.rules\n\t\tif (isArray(r) || isFn(r)) rules = r\n\t\trepeat = desc.repeat\n\t\tname = desc.name\n\t\toptions = desc\n\t} else {\n\t\tvar i = 0\n\t\tif (isStr(args[i])) name = args[i++]\n\t\tif (isArray(args[i]) || isFn(args[i])) rules = args[i++]\n\t\tif (isArray(args[i])) repeat = args[i++]\n\t\toptions = parseRuleOptions(args, i)\n\t}\n\tif (!repeat) repeat = defaultRepeat\n\tif (rules) {\n\t\tbuilder = rulesBuilder(rules)\n\t\treturn new Rule(name, repeat, builder, options) as T\n\t}\n}\n\nfunction rulesBuilder(rules: ((rule: Rule) => any[]) | any[]): (rule: Rule) => Rule[] {\n\treturn function(_rule) {\n\t\treturn mapArray(isFn(rules) ? (rules as ((rule: Rule) => any[]))(_rule) : rules, (r, i) => {\n\t\t\tif (!r) return SKIP\n\t\t\tlet rule: Rule = r.$rule ? r : mkMatch(isArray(r) ? r : [r], discardMatch)\n\t\t\tassert.is(rule, '{}: Invalid Rule Configuration on index {d}: {j}', _rule, i, r)\n\t\t\treturn rule\n\t\t})\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         tools                                        *\n *                                                                                      */\n//========================================================================================\n\nfunction parseRuleOptions(args: IArguments | any[], i: number) {\n\tconst options: RuleOptions = {}\n\tif (isBool(args[i])) options.capturable = args[i++]\n\toptions.match = args[i++]\n\toptions.err = args[i]\n\treturn options\n}\n","/**\n * utility utilities\n * @module utility\n * @preferred\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Nov 21 2018 10:21:41 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 19:52:16 GMT+0800 (China Standard Time)\n */\n\nexport { isDefaultKey, addDefaultKey, addDefaultKeys, getDefaultKeys } from './dkeys'\nexport * from './fn'\nexport * from './is'\nexport * from './reg'\nexport * from './proto'\nexport * from './defProp'\nexport * from './ownProp'\nexport * from './propPath'\nexport * from './string'\nexport * from './format'\nexport * from './create'\nexport * from './assign'\nexport * from './collection'\nexport * from './List'\nexport * from './nextTick'\nexport * from './Source'\nexport * from './AST/api'\n","import { addDefaultKey } from '../utility'\n\nexport type ObserverTarget = any[] | {}\n\n/**\n * Observer Key\n */\nexport const OBSERVER_KEY = addDefaultKey('__observer__')\n\n/**\n * the property of observe an array change\n */\nexport const ARRAY_CHANGE = '$change'\n\nexport type IWatcher = {\n\tnotify(original: any): void\n}\n\nexport interface IObserver {\n\treadonly target: ObserverTarget\n\treadonly isArray: boolean\n\tnotify(prop: string, original: any): void\n\tnotifyAll(): void\n\twatcher(prop: string): IWatcher\n}\n\nexport type ObserverPolicy = {\n\t__name: string\n\t__proxy?: boolean\n\t/**\n\t * create Proxy\n\t */\n\t__createProxy?: (target: ObserverTarget, isArray: boolean, watchers: { [prop: string]: IWatcher }) => ObserverTarget\n\t/**\n\t * watch property\n\t * @protected\n\t * @param prop\tproperty\n\t * @return false: watch failed\n\t */\n\t__watch?: (observer: IObserver, prop: string, watcher: IWatcher) => boolean | void\n}\n","import { ObserverPolicy, IObserver, IWatcher } from './IObserver'\nimport { propAccessor, defProp } from '../utility'\n\nexport default function(): ObserverPolicy {\n\tif (propAccessor)\n\t\treturn {\n\t\t\t__name: 'Accessor',\n\t\t\t__watch(observer: IObserver, prop: string, watcher: IWatcher): boolean | void {\n\t\t\t\tlet value: any = observer.target[prop]\n\t\t\t\ttry {\n\t\t\t\t\tdefProp(observer.target, prop, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset(newValue: any) {\n\t\t\t\t\t\t\twatcher.notify(value)\n\t\t\t\t\t\t\tvalue = newValue\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(e.message, e)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\n","import { ObserverPolicy, ObserverTarget, IWatcher } from './IObserver'\nimport { GLOBAL } from '../utility/consts'\n\nexport default function(): ObserverPolicy {\n\tif (GLOBAL.Proxy)\n\t\treturn {\n\t\t\t__name: 'Proxy',\n\t\t\t__proxy: true,\n\t\t\t__createProxy(\n\t\t\t\ttarget: ObserverTarget,\n\t\t\t\tisArray: boolean,\n\t\t\t\twatchers: { [prop: string]: IWatcher }\n\t\t\t): ObserverTarget {\n\t\t\t\treturn new Proxy(target, {\n\t\t\t\t\tset: (source, prop: string, value) => {\n\t\t\t\t\t\tlet watcher = watchers[prop]\n\t\t\t\t\t\twatcher && watcher.notify(source[prop])\n\t\t\t\t\t\tsource[prop] = value\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n}\n",null,"/**\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Mar 01 2019 18:17:27 GMT+0800 (China Standard Time)\n * @modified Fri Mar 01 2019 18:17:50 GMT+0800 (China Standard Time)\n */\n\nexport * from './Observer'\n","/**\n *\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @module main\n * @preferred\n * @created Wed Nov 21 2018 10:21:20 GMT+0800 (China Standard Time)\n * @modified Fri Mar 08 2019 15:35:52 GMT+0800 (China Standard Time)\n */\nexport * from './utility'\nexport * from './observer'\n"],"names":["CONSTRUCTOR","PROTOTYPE","HAS_OWN_PROP","TYPE_BOOL","TYPE_FN","TYPE_NUM","TYPE_STRING","TYPE_UNDEF","GLOBAL","window","global","self","EMPTY_FN","NULL_CONSTRUCTOR","defaultKeyMap","defaultKeys","isDefaultKey","key","addDefaultKey","push","addDefaultKeys","args","arguments","l","length","i","getDefaultKeys","getConstructor","o","C","Object","eq","o1","o2","isNull","isUndef","undefined","isNil","isBool","mkIsPrimitive","isNum","isStr","isFn","isInt","isPrimitive","type","is","instOf","obj","Cls","Type","Array","isBoolean","mkIs","Boolean","isNumber","Number","isString","String","isDate","Date","isReg","RegExp","isArray","isTypedArray","ArrayBuffer","isView","isArrayLike","NodeList","HTMLCollection","Int8Array","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","len","isObj","blankStrReg","isBlank","test","createFn","body","name","Function","join","applyScope","concat","applyBuilder","maxArgs","scope","offset","cases","slice","applyNoScope","applyScopeN","applyNoScopeN","apply","fn","applyN","varGenReg","fnName","replace","_bind","funcProto","bind","argLen","bindPolyfill","bindArgs","argOffset","bindProxy","params","stickyReg","sticky","unicodeReg","unicode","REG_ESCAPE","reEscape","str","prototypeOf","protoProp","protoOf","getPrototypeOf","__setProto","setPrototypeOf","setProto","propDescriptor","propAccessor","defProp","defineProperty","defPropValue","prop","value","enumerable","configurable","writable","__hasOwn","hasOwnProp","call","getOwnProp","defaultVal","create","Control","constructor","desc","__desc","toString","STOP","eachProps","callback","own","k","eachObj","eachArray","array","doEach","_eachArray","_eachObj","each","SKIP","doMapObj","copy","v","mapObj","doMapArray","j","data","index","mapArray","doMap","eacharray","eachobj","map","parseCallback","defaultHandler","idx","doIdxOfObj","r","idxOfObj","doIdxOfArray","idxOfArray","doIdxOf","idxOf","doReduceObj","accumulator","rs","reduceObj","doReduceArray","reduceArray","doReduce","reduce","defaultObjKeyHandler","doObjKeys","handler","val","keys","defaultObjValueHandler","doObjValues","values","doArr2Obj","arr2obj","makeMap","split","makeArray","pathCache","pathReg","parsePath","propPath","cacheable","path","match","cidx","exec","lastIndex","SyntaxError","charAt","Error","formatPath","formatPathHandler","get","set","prototype","toStr","toStrType","charCode","charCodeAt","char","code","fromCharCode","cutStr","start","end","substring","cutLStr","substr","TRIM_REG","trim","FIRST_LOWER_LETTER_REG","FIRST_UPPER_LETTER_REG","upper","toUpperCase","lower","toLowerCase","upperFirst","lowerFirst","STR_ESCAPE_MAP","STR_ESCAPE","escapeStr","pad","chr","leftAlign","__pad","shorten","suffix","thousandSeparate","mkSeparator","binarySeparate","octalSeparate","hexSeparate","group","valReg","reg","numStr","separatorHandler","m","d","PLURAL_REG","plural","pluralHandler","ies","es","ys","s","SINGULAR_REG","singular","singularHandler","FORMAT_XPREFIX","FORMAT_PLUS","FORMAT_ZERO","FORMAT_SPACE","FORMAT_SEPARATOR","FORMAT_LEFT","FLAG_MAPPING","parseFlags","f","flags","paramIdxR","paramPropR","widthR","fillR","shortenSuffixR","formatReg","formatters","extendFormatter","fmt","getFormatter","vformat","getParam","defaultGetParam","param","paramProp","width","widx","wprop","fill","precision","pidx","pprop","shortenSuffix","parseParam","parseWidth","w","isFinite","paramIdx","format","getFormatParam","GET_PARAM_VAR","GET_PROP_VAR","STATE_VAR","createFormatter","getParamCode","getWidthCode","def","strs","formatter","lastIdx","mStart","mEnd","arr","codes","pushStr","append","strFormatter","numFormatter","parseNum","getPrefix","separator","num","prefix","plen","decimalPrefix","BASE_RADIXS","b","u","x","BASE_PREFIXS","baseFormatter","base","n","__toStr","xprefix","floatFormatter","____toStr","toExponential","toFixed","toPrecision","parseFloat","toJSON","JSON","stringify","c","e","E","g","G","B","O","X","doAssign","target","overrides","filter","startOffset","endOffset","override","assign","defaultAssignFilter","assignIf","assignIfFilter","REG_PROPS","deepEq","actual","expected","doDeepEq","doDeepEqObj","eqObj","getTime","eqProps","eqArray","eqTypeArray","cache","notEqObjKey","props","formatArgHandlers","parseMessage","msg","msgIdx","fs","assert","catchErr","checkErr","expect","err","message","ERROR","throwMsg","mkMsg","objFormatter","notThrow","extendAssert","condition","dmsg","Err","paramStr","cond","expr","extendAsserts","apis","TypeError","UNDEFINED","BOOLEAN","NUMBER","STRING","FUNCTION","NULL","INTEGER","ARRAY","TYPED_ARRAY","expectMsg","eql","nul","nil","typeExpect","undef","bool","int","primitive","boolean","packTypeExpect","number","string","date","typedArray","arrayLike","nan","isNaN","finite","blank","less","greater","range","to","not","all","DEFAULT_BINDING","List","binding","__length","__scaning","size","has","node","add","__insert","__tail","addFirst","insertAfter","__getNode","insertBefore","addAll","objs","__insertAll","addFirstAll","insertAfterAll","insertBeforeAll","prev","__siblingObj","next","first","__head","last","cb","__doLazyRemove","eachUnsafe","toArray","remove","__remove","pop","clean","__lazyRemove","__clean","__initNode","siblingIdx","sibling","__doInsert","nodeHead","nodeTail","head","__prev","tail","__doRemove","__lazyRemoves","lazyRemoves","DEFAULT_FN_BINDING","DEFAULT_SCOPE_BINDING","FnList","fnBinding","scopeBinding","__nodeMap","__list","parseScope","list","nodeMap","id","removeId","fnId","scopeId","DEFAULT_SCOPE_ID","fnIdGenerator","scopeIdGenerator","ticks","pending","executeTick","flush","MutationObserver","counter","observer","textNode","document","createTextNode","observe","characterData","setTimeout","nextTick","clearTick","LINE_REG","Source","buff","__lines","__linePos","position","lines","linePos","p","source","escape","line","toSourceStr","escapeSourceStr","sourceStr","t","eachCharCodes","ignoreCase","eachCharCode","getAnotherCode","mixin","behaviour","Class","proto","MatchError","$ruleErr","capturable","context","rule","pos","startPos","defaultErr","defaultMatch","idGen","Rule","$rule","options","onMatch","onErr","mkErr","error","src","userErr","matched","enter","getStart","stack","startCodes","startCodeTest","startCodeIdx","nextCode","setStartCodes","setCodeIdx","mkExpr","setExpr","EXPECT","getExpr","MatchRule","comsume","advance","CharMatchRule","allows","chars","nextChar","RegMatchRule","regexp","pick","pattern","multiline","stickyMatch","execMatch","spicker","pickNone","pickTestStr","picker","mkPicker","pickAll","StringMatchRule","MatchContext","orgOffset","parent","result","__buff","__offset","__orgOffset","__advanced","__code","__flushCode","__setAdvanced","advanced","notLess","commit","margeState","rollback","checkpoint","resultLen","reset","orgBuff","currPos","resultSize","MAX","ComplexRule","repeat","builder","rMin","rMax","notGreater","rmatch","parse","ctx","unshift","init","rules","names","rnames","EXPECTS","__init","getRules","consume","AndRule","testRule","cp","out","OrRule","starts","rStarts","upErr","discardMatch","appendMatch","attachMatch","mkMatch","and","mkComplexRule","any","many","option","or","anyOne","manyOne","optionOne","defaultMatchCallback","isStrOrCodes","isMatchPattern","parseRuleOptions","strMatch","defaultRepeat","rulesBuilder","_rule","OBSERVER_KEY","__name","__watch","watcher","newValue","notify","console","warn","Proxy","__proxy","__createProxy","watchers","MISS","arrayHooks","method","notifyAll","policy","proxyPolicy","accessorPolicy","getObserver","oserver","proxy","$eq","$get","$set"],"mappings":"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"}