{"version":3,"file":"argilo.js","sources":["/argilo/src/utility/consts.ts","/argilo/src/utility/dkeys.ts","/argilo/src/utility/constructor.ts","/argilo/src/utility/toStr.ts","/argilo/src/utility/is.ts","/argilo/src/utility/fn.ts","/argilo/src/utility/reg.ts","/argilo/src/utility/proto/polyfill.ts","/argilo/src/utility/proto/src/utility/proto/index.ts","/argilo/src/utility/defProp/polyfill.ts","/argilo/src/utility/defProp/src/utility/defProp/index.ts","/argilo/src/utility/ownProp.ts","/argilo/src/utility/create/polyfill.ts","/argilo/src/utility/create/src/utility/create/index.ts","/argilo/src/utility/collection/Control.ts","/argilo/src/utility/collection/each.ts","/argilo/src/utility/collection/map.ts","/argilo/src/utility/collection/idxOf.ts","/argilo/src/utility/collection/reduce.ts","/argilo/src/utility/collection/obj2arr.ts","/argilo/src/utility/collection/arr2obj.ts","/argilo/src/utility/collection/index.ts","/argilo/src/utility/propPath.ts","/argilo/src/utility/string.ts","/argilo/src/utility/format.ts","/argilo/src/utility/assign.ts","/argilo/src/utility/deepEq.ts","/argilo/src/utility/assert.ts","/argilo/src/utility/List/List.ts","/argilo/src/utility/List/FnList.ts","/argilo/src/utility/List/index.ts","/argilo/src/utility/nextTick.ts","/argilo/src/utility/Source.ts","/argilo/src/utility/AST/util.ts","/argilo/src/utility/mixin.ts","/argilo/src/utility/AST/Rule.ts","/argilo/src/utility/AST/MatchRule.ts","/argilo/src/utility/AST/CharMatchRule.ts","/argilo/src/utility/AST/RegMatchRule.ts","/argilo/src/utility/AST/StringMatchRule.ts","/argilo/src/utility/AST/MatchContext.ts","/argilo/src/utility/AST/ComplexRule.ts","/argilo/src/utility/AST/AndRule.ts","/argilo/src/utility/AST/OrRule.ts","/argilo/src/utility/AST/api.ts","/argilo/src/utility/index.ts","/argilo/src/observer/IObserver.ts","/argilo/src/observer/ProxyPolicy.ts","/argilo/src/observer/AccessorPolicy.ts","/argilo/src/observer/VBPolicy.ts","/argilo/src/observer/src/observer/Observer.ts","/argilo/src/observer/src/observer/index.ts","/argilo/src/index.ts"],"sourcesContent":["/**\n *\n * @author Tao Zeng (tao.zeng.zt@qq.com)\n * @module utility\n * @created 2018-11-09 15:23:35\n * @modified 2018-11-09 15:23:35 by Tao Zeng (tao.zeng.zt@qq.com)\n */\n\nexport const CONSTRUCTOR = 'constructor'\n\nexport const PROTOTYPE = 'prototype'\n\nexport const PROTO = '__proto__'\n\nexport const HAS_OWN_PROP = 'hasOwnProperty'\n\nexport const TYPE_BOOL = 'boolean'\n\nexport const TYPE_FN = 'function'\n\nexport const TYPE_NUM = 'number'\n\nexport const TYPE_STRING = 'string'\n\nexport const TYPE_UNDEF = 'undefined'\n\nexport const GLOBAL: any =\n\ttypeof window !== TYPE_UNDEF\n\t\t? window\n\t\t: typeof global !== TYPE_UNDEF\n\t\t? global\n\t\t: typeof self !== TYPE_UNDEF\n\t\t? self\n\t\t: {}\n\nexport type IArray<T> =\n\t| T[]\n\t| string\n\t| {\n\t\t\tlength: number\n\t\t\t[Symbol.iterator](): IterableIterator<T>\n\t  }\n\nexport function EMPTY_FN() {}\n\nexport function NULL_CONSTRUCTOR() {}\nNULL_CONSTRUCTOR[PROTOTYPE] = null\n","/**\n * @module utility/dkeys\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Mar 11 2019 17:22:13 GMT+0800 (China Standard Time)\n * @modified Sat Mar 23 2019 17:42:04 GMT+0800 (China Standard Time)\n */\nimport { NULL_CONSTRUCTOR } from './consts'\n\nexport const defaultKeyMap = new NULL_CONSTRUCTOR()\n\nexport const defaultKeys = []\n\nexport function isDefaultKey(key: string) {\n\treturn defaultKeyMap[key] || false\n}\n\nexport function addDefaultKey(key: string) {\n\tif (!defaultKeyMap[key]) {\n\t\tdefaultKeyMap[key] = true\n\t\tdefaultKeys.push(key)\n\t}\n\treturn key\n}\n\nexport function addDefaultKeys(...keys: string[]): void\n\nexport function addDefaultKeys() {\n\tconst args = arguments,\n\t\tl = args.length\n\tfor (var i = 0; i < l; i++) {\n\t\taddDefaultKey(args[i] + '')\n\t}\n}\n\nexport function getDefaultKeys() {\n\treturn defaultKeys\n}\n\nexport function getDefaultKeyMap() {\n\treturn defaultKeys\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Sat Feb 16 2019 10:53:30 GMT+0800 (China Standard Time)\n */\n\nimport { TYPE_FN, CONSTRUCTOR } from './consts'\n\nexport function getConstructor(o: any) {\n\tlet C = o[CONSTRUCTOR]\n\treturn typeof C === TYPE_FN ? C : Object\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Sat Mar 23 2019 18:50:53 GMT+0800 (China Standard Time)\n */\nconst toString = Object.prototype.toString\nexport function toStr(obj: any): String {\n\treturn toString.call(obj)\n}\n\nexport function toStrType(obj: any) {\n\treturn toString.call(obj).match(/^\\[object ([^\\]]+)\\]$/)[1]\n}\n","/**\n * type checker\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Sat Mar 23 2019 18:55:31 GMT+0800 (China Standard Time)\n */\n\nimport { CONSTRUCTOR, GLOBAL, TYPE_BOOL, TYPE_FN, TYPE_NUM, TYPE_STRING, TYPE_UNDEF } from './consts'\nimport { getConstructor } from './constructor'\nimport { toStr } from './toStr'\n\n/**\n * is equals\n * > o1 === o2 || NaN === NaN\n */\nexport function eq(o1: any, o2: any): boolean {\n\treturn o1 === o2 || (o1 !== o1 && o2 !== o2)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    primitive type                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * is null\n */\nexport function isNull(o: any): boolean {\n\treturn o === null\n}\n\n/**\n * is undefined\n */\nexport function isUndef(o: any): boolean {\n\treturn o === undefined\n}\n\n/**\n * is null or undefined\n */\nexport function isNil(o: any): boolean {\n\treturn o === null || o === undefined\n}\n\n/**\n * is boolean\n */\nexport const isBool: (o: any) => boolean = mkIsPrimitive(TYPE_BOOL)\n\n/**\n * is a number\n */\nexport const isNum: (o: any) => boolean = mkIsPrimitive(TYPE_NUM)\n\n/**\n * is a string\n */\nexport const isStr: (o: any) => boolean = mkIsPrimitive(TYPE_STRING)\n\n/**\n * is a function\n */\nexport const isFn: (o: any) => boolean = mkIsPrimitive(TYPE_FN)\n\n/**\n * is integer number\n */\nexport function isInt(o: any): boolean {\n\treturn o === 0 || (o ? typeof o === TYPE_NUM && o % 1 === 0 : false)\n}\n\n/**\n * is primitive type\n * - null\n * - undefined\n * - boolean\n * - number\n * - string\n * - function\n */\nexport function isPrimitive(o: any): boolean {\n\tif (o === undefined || o === null) {\n\t\treturn true\n\t}\n\tswitch (typeof o) {\n\t\tcase TYPE_BOOL:\n\t\tcase TYPE_NUM:\n\t\tcase TYPE_STRING:\n\t\tcase TYPE_FN:\n\t\t\treturn true\n\t}\n\treturn false\n}\n\nfunction mkIsPrimitive(type: string): (o: any) => boolean {\n\treturn function is(o: any): boolean {\n\t\treturn typeof o === type\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    reference type                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * is instanceof\n */\nexport function instOf(obj: any, Cls: Function): boolean {\n\treturn obj !== undefined && obj !== null && obj instanceof Cls\n}\n\n/**\n * is child instance of Type\n */\nexport function is(o: any, Type: Function | Function[]): boolean {\n\tif (o !== undefined && o !== null) {\n\t\tconst C = o[CONSTRUCTOR] || Object\n\t\tif (Type[CONSTRUCTOR] === Array) {\n\t\t\tvar i = Type.length\n\t\t\twhile (i--) {\n\t\t\t\tif (C === (Type as Function[])[i]) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn C === Type\n\t\t}\n\t}\n\treturn false\n}\n\n/**\n * is boolean or Boolean\n */\nexport const isBoolean: (o: any) => boolean = mkIs(Boolean)\n\n/**\n * is number or Number\n */\nexport const isNumber: (o: any) => boolean = mkIs(Number)\n\n/**\n * is string or String\n */\nexport const isString: (o: any) => boolean = mkIs(String)\n\n/**\n * is Date\n */\nexport const isDate: (o: any) => boolean = mkIs(Date)\n\n/**\n * is RegExp\n */\nexport const isReg: (o: any) => boolean = mkIs(RegExp)\n\n/**\n * is Array\n */\nexport const isArray: (o: any) => boolean = Array.isArray || mkIs(Array)\n\n/**\n * is Typed Array\n */\nexport const isTypedArray: (o: any) => boolean = isFn(ArrayBuffer) ? ArrayBuffer.isView : () => false\n\n/**\n * is Array or pseudo-array\n * - Array\n * - String\n * - IArguments\n * - NodeList\n * - HTMLCollection\n * - Typed Array\n * - {length: int, [length-1]: any}\n */\nexport function isArrayLike(o: any): boolean {\n\tif (o && o[CONSTRUCTOR]) {\n\t\tswitch (o[CONSTRUCTOR]) {\n\t\t\tcase Array:\n\t\t\tcase String:\n\t\t\tcase GLOBAL.NodeList:\n\t\t\tcase GLOBAL.HTMLCollection:\n\t\t\tcase GLOBAL.Int8Array:\n\t\t\tcase GLOBAL.Uint8Array:\n\t\t\tcase GLOBAL.Int16Array:\n\t\t\tcase GLOBAL.Uint16Array:\n\t\t\tcase GLOBAL.Int32Array:\n\t\t\tcase GLOBAL.Uint32Array:\n\t\t\tcase GLOBAL.Float32Array:\n\t\t\tcase GLOBAL.Float64Array:\n\t\t\t\treturn true\n\t\t}\n\t\tconst len = o.length\n\t\treturn typeof len === TYPE_NUM && (len === 0 || (len > 0 && len % 1 === 0 && len - 1 in o))\n\t}\n\treturn o === ''\n}\n\n/**\n * is simple Object\n * TODO object may has constructor property\n */\nexport function isObj(o: any): boolean {\n\treturn o !== undefined && o !== null && getConstructor(o) === Object\n}\n\n/**\n * is simple Object\n * TODO object may has constructor property\n */\nexport function isObject(o: any): boolean {\n\treturn toStr(o) === '[object Object]'\n}\n\nfunction mkIs(Type: Function): (o: any) => boolean {\n\treturn function is(o: any): boolean {\n\t\treturn o !== undefined && o !== null && o[CONSTRUCTOR] === Type\n\t}\n}\n\nconst blankStrReg = /^\\s*$/\n/**\n * is empty\n * - string: trim(string).length === 0\n * - array: array.length === 0\n * - pseudo-array: pseudo-array.length === 0\n */\nexport function isBlank(o: any): boolean {\n\tif (o) {\n\t\tif (o[CONSTRUCTOR] === String) {\n\t\t\treturn blankStrReg.test(o)\n\t\t}\n\t\treturn o.length === 0\n\t}\n\treturn true\n}\n","/**\n * Function utilities\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Sat Mar 30 2019 15:42:28 GMT+0800 (China Standard Time)\n */\n\nimport { GLOBAL, PROTOTYPE } from './consts'\nimport { isNil } from './is'\n\n// ========================================================================================\n/*                                                                                      *\n *                                    create function                                   *\n *                                                                                      */\n// ========================================================================================\n\n/**\n * create function by code string\n * @param body\tfunction body\n * @param args\tfunction argument names\n * @param name\tfunction name\n */\nexport function createFn<T extends Function>(body: string, args?: string[], name?: string): T {\n\treturn name\n\t\t? Function(`return function ${name}(${args ? args.join(', ') : ''}){${body}}`)()\n\t\t: applyScope(Function, Function, args && args.length ? args.concat(body) : [body])\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                    function apply                                    *\n *                                                                                      */\n// ========================================================================================\n\n/**\n * generate apply function\n */\nfunction applyBuilder<T extends Function>(maxArgs: number, scope: any, offset: any): T {\n\tscope = scope ? 'scope' : ''\n\toffset = offset ? 'offset' : ''\n\tconst args = new Array(maxArgs + 1)\n\tconst cases = new Array(maxArgs + 1)\n\tfor (let i = 0; i <= maxArgs; i++) {\n\t\targs[i] = `${i || scope ? ', ' : ''}args[${offset ? `offset${i ? ' + ' + i : ''}` : i}]`\n\t\tcases[i] = `case ${i}: return fn${scope && '.call'}(${scope}${args.slice(0, i).join('')});`\n\t}\n\treturn Function(`return function(fn, ${scope && scope + ', '}args${offset && ', offset, len'}){\nswitch(${offset ? 'len' : 'args.length'}){\n${cases.join('\\n')}\n}\n${offset &&\n\t`var arr = new Array(len);\nfor(var i=0; i<len; i++) arr[i] = arr[offset + i];`}\nreturn fn.apply(${scope || 'null'}, ${offset ? 'arr' : 'args'});\n}`)()\n}\n\n/**\n * apply function with scope\n * @param fn\ttarget function\n * @param scope\tscope of function\n * @param args\targuments of function\n */\nexport const applyScope: (fn: Function, scope: any, args: any[] | IArguments) => any = applyBuilder(8, 1, 0)\n\n/**\n * apply function without scope\n * @param fn\t\ttarget function\n * @param args\targuments of function\n */\nexport const applyNoScope: (fn: Function, args: any[] | IArguments) => any = applyBuilder(8, 0, 0)\n\n/**\n * apply function with scope\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport const applyScopeN: (\n\tfn: Function,\n\tscope: any,\n\targs: any[] | IArguments,\n\toffset: number,\n\tlen: number\n) => any = applyBuilder(8, 1, 1)\n\n/**\n * apply function without scope\n * @param fn\t\ttarget function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport const applyNoScopeN: (fn: Function, args: any[] | IArguments, offset: number, len: number) => any = applyBuilder(\n\t8,\n\t0,\n\t1\n)\n\n/**\n * apply function\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n */\nexport function apply(fn: Function, scope: any, args: any[] | IArguments): any {\n\tif (scope === undefined || scope === null || scope === GLOBAL) {\n\t\treturn applyNoScope(fn, args || [])\n\t}\n\treturn applyScope(fn, scope, args || [])\n}\n\n/**\n * apply function\n * @param fn\t\ttarget function\n * @param scope\t\tscope of function\n * @param args\t\targuments of function\n * @param offset\tstart offset of args\n * @param len\t\targ size from offset\n */\nexport function applyN(fn: Function, scope: any, args: any[] | IArguments, offset: number, len: number): any {\n\tif (scope === undefined || scope === null || scope === GLOBAL) {\n\t\treturn applyNoScopeN(fn, args, offset, len)\n\t}\n\treturn applyScopeN(fn, scope, args, offset, len)\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                     function name                                    *\n *                                                                                      */\n// ========================================================================================\n\nconst varGenReg = /\\$\\d+$/\n\n/**\n * get function name\n */\nexport function fnName(fn: Function): string {\n\tconst name: string = (fn as any).name\n\treturn name ? name.replace(varGenReg, '') : 'anonymous'\n}\n\n// ========================================================================================\n/*                                                                                      *\n *                                         bind                                         *\n *                                                                                      */\n// ========================================================================================\n\nlet _bind\nconst funcProto = Function[PROTOTYPE]\nif (funcProto.bind) {\n\t_bind = function bind<T extends Function>(fn: T, scope: any): T {\n\t\tconst args = arguments,\n\t\t\targLen = args.length\n\t\tif (isNil(scope)) {\n\t\t\treturn argLen > 2 ? bindPolyfill(fn, scope, args, 2) : fn\n\t\t}\n\t\treturn applyScopeN(fn.bind, fn, args, 1, argLen - 1)\n\t}\n} else {\n\tfuncProto.bind = function bind(scope) {\n\t\treturn bindPolyfill(this, scope, arguments, 1)\n\t}\n\t_bind = function bind<T extends Function>(fn: T, scope: any): T {\n\t\treturn bindPolyfill(fn, scope, arguments, 2)\n\t}\n}\n\n/**\n * bind scope or arguments on function\n * - return source function when without arguments and scope is undefined or null\n * - only bind arguments when scope is undefined or null, well can call the new function proxy with some scope\n *\n * @example\n * \t\tfunction example() {\n * \t\t\tconsole.log(this, arguments);\n * \t\t}\n * \t\tvar proxy = bind(example, null) \t// proxy === example\n * \t\tproxy() \t\t\t\t\t\t\t// log: window | undefined, []\n * \t\tproxy.call(1) \t\t\t\t\t\t// log: 1, []\n *\n * \t\tproxy = bind(example, null, 1) \t\t// proxy !== example\n * \t\tproxy() \t\t\t\t\t\t\t// log: window | undefined, [1]\n * \t\tproxy(2) \t\t\t\t\t\t\t// log: window | undefined, [1, 2]\n * \t\tproxy.call(1, 2) \t\t\t\t\t// log: 1, [1, 2]\n *\n * \t\tproxy = bind(example, {}, 1, 2)\t\t// proxy !== example\n * \t\tproxy() \t\t\t\t\t\t\t// log: {}, [1]\n * \t\tproxy(2) \t\t\t\t\t\t\t// log: {}, [1, 2, 2]\n * \t\tproxy.call(1, 2) \t\t\t\t\t// log: {}, [1, 2, 2]\n *\n * @param fn\tsource function\n * @param scope\tbind scope\n * @param args\tbind arguments\n * @return function proxy\n */\nexport const bind: <T extends Function>(fn: T, scope: any, ...args: any[]) => T = _bind\n\n/**\n * bind\n * > not bind scope when scope is null or undefined\n * @param fn\t\tsource function\n * @param scope\t\tbind scope\n * @param args\t\tbind arguments\n * @param argOffset\toffset of args\n * @return function proxy\n */\nfunction bindPolyfill<T extends Function>(fn: T, scope: any, bindArgs: any[] | IArguments, argOffset: number): T {\n\tconst argLen = bindArgs.length - argOffset\n\tif (scope === undefined) {\n\t\tscope = null\n\t}\n\tif (argLen > 0) {\n\t\t// bind with arguments\n\t\treturn function bindProxy() {\n\t\t\tconst args = arguments\n\t\t\tlet i = args.length\n\t\t\tif (i) {\n\t\t\t\tconst params = new Array(argLen + i)\n\t\t\t\twhile (i--) {\n\t\t\t\t\tparams[argLen + i] = args[i]\n\t\t\t\t}\n\t\t\t\ti = argLen\n\t\t\t\twhile (i--) {\n\t\t\t\t\tparams[i] = bindArgs[i + argOffset]\n\t\t\t\t}\n\t\t\t\treturn apply(fn, scope === null ? this : scope, params) // call with scope or this\n\t\t\t}\n\t\t\treturn applyN(fn, scope === null ? this : scope, bindArgs, argOffset, argLen) // call with scope or this\n\t\t} as any\n\t}\n\tif (scope === null) {\n\t\treturn fn\n\t}\n\tif (scope === GLOBAL) {\n\t\t// bind on GLOBAL\n\t\treturn function bindProxy() {\n\t\t\treturn applyNoScope(fn, arguments)\n\t\t} as any\n\t}\n\treturn function bindProxy() {\n\t\treturn applyScope(fn, scope, arguments)\n\t} as any\n}\n","/**\n * regexp utilities\n * @module utility/reg\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Sep 06 2018 18:27:51 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:29:00 GMT+0800 (China Standard Time)\n */\n\nimport { isBool } from './is'\n\n/**\n * whether to support sticky on RegExp\n */\nexport const stickyReg = isBool(/(?:)/.sticky)\n\n/**\n * whether to support unicode on RegExp\n */\nexport const unicodeReg = isBool(/(?:)/.unicode)\n\nconst REG_ESCAPE = /[-\\/\\\\^$*+?.()|[\\]{}]/g\n\n/**\n * escape string for RegExp\n */\nexport function reEscape(str: string): string {\n\treturn str.replace(REG_ESCAPE, '\\\\$&')\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:23:56 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 20:10:16 GMT+0800 (China Standard Time)\n */\nimport { CONSTRUCTOR, PROTO, PROTOTYPE } from '../consts'\nimport { addDefaultKey } from '../dkeys'\n\nconst PROTO_PROP = '__proto__'\n\nconst __getProto = Object.getPrototypeOf,\n\t____setProto = Object.setPrototypeOf\n\n/**\n * whether to support Object.getPrototypeOf and Object.setPrototypeOf\n */\nexport const prototypeOf = !!____setProto\n\n/**\n * whether to support `__proto__`\n */\nexport const protoProp = { [PROTO_PROP]: [] } instanceof Array\n\n!protoProp && addDefaultKey(PROTO_PROP)\n\n/**\n * get prototype\n */\nexport const protoOf: (o: any) => any = ____setProto\n\t? __getProto\n\t: __getProto\n\t? function getPrototypeOf(obj) {\n\t\t\treturn obj[PROTO] || __getProto(obj)\n\t  }\n\t: function getPrototypeOf(obj) {\n\t\t\treturn obj[PROTO] || obj[CONSTRUCTOR][PROTOTYPE]\n\t  }\n\n/**\n * set prototype\n * > properties on the prototype are not inherited on older browsers\n */\nexport const __setProto: <T>(obj: any, proto: any) => any =\n\t____setProto ||\n\tfunction setPrototypeOf(obj, proto) {\n\t\tobj[PROTO] = proto\n\t\treturn obj\n\t}\n\n/**\n * set prototype\n * > the properties on the prototype will be copied on the older browser\n */\nexport const setProto: <T>(obj: any, proto: any) => any =\n\t____setProto ||\n\t(protoProp\n\t\t? __setProto\n\t\t: function setPrototypeOf(obj, proto) {\n\t\t\t\tfor (let p in proto) {\n\t\t\t\t\tif (!(p in obj)) obj[p] = proto[p]\n\t\t\t\t}\n\t\t\t\treturn __setProto(obj, proto)\n\t\t  })\n",null,"/**\n * prop utilities\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:57 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 09:18:39 GMT+0800 (China Standard Time)\n */\nimport { PROTOTYPE } from '../consts'\n\nlet __defProp: (o: any, p: PropertyKey, attributes: PropertyDescriptor & ThisType<any>) => any = Object.defineProperty\n\nconst { __defineGetter__, __defineSetter__ } = Object[PROTOTYPE] as any\n\n/**\n * whether to support Object.defineProperty\n */\nexport const propDescriptor: boolean =\n\t__defProp &&\n\t!!(function() {\n\t\ttry {\n\t\t\tvar val: number,\n\t\t\t\tobj: { s?: number } = {}\n\t\t\t__defProp(obj, 's', {\n\t\t\t\tget() {\n\t\t\t\t\treturn val\n\t\t\t\t},\n\t\t\t\tset(value) {\n\t\t\t\t\tval = value\n\t\t\t\t}\n\t\t\t})\n\t\t\tobj.s = 1\n\t\t\treturn obj.s === val\n\t\t} catch (e) {}\n\t})()\n\n/**\n * whether to support `__defineGetter__` and `__defineSetter__`\n */\nexport const propAccessor: boolean = propDescriptor || !!__defineSetter__\n\nif (!propDescriptor)\n\t__defProp = __defineSetter__\n\t\t? function defineProperty(obj, prop, desc) {\n\t\t\t\tconst { get, set } = desc\n\t\t\t\tif ('value' in desc || !(prop in obj)) obj[prop] = desc.value\n\t\t\t\tget && __defineGetter__.call(obj, prop, get)\n\t\t\t\tset && __defineSetter__.call(obj, prop, set)\n\t\t\t\treturn obj\n\t\t  }\n\t\t: function defineProperty(obj, prop, desc) {\n\t\t\t\tif (desc.get || desc.set) throw new TypeError('property accessors are not supported.')\n\t\t\t\tif ('value' in desc || !(prop in obj)) obj[prop] = desc.value\n\t\t\t\treturn obj\n\t\t  }\n\n/**\n * define property\n */\nexport const defProp = __defProp\n\n/**\n * define property by value\n */\nexport const defPropValue: <V>(\n\tobj: any,\n\tprop: string,\n\tvalue: V,\n\tenumerable?: boolean,\n\tconfigurable?: boolean,\n\twritable?: boolean\n) => V = propDescriptor\n\t? function defPropValue(obj, prop, value, configurable, writable, enumerable) {\n\t\t\t__defProp(obj, prop, {\n\t\t\t\tvalue,\n\t\t\t\tenumerable: enumerable !== false,\n\t\t\t\tconfigurable: configurable !== false,\n\t\t\t\twritable: writable !== false\n\t\t\t})\n\t\t\treturn value\n\t  }\n\t: function defPropValue(obj, prop, value) {\n\t\t\tobj[prop] = value\n\t\t\treturn value\n\t  }\n",null,"/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:57 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 09:22:38 GMT+0800 (China Standard Time)\n */\n\nimport { PROTOTYPE, HAS_OWN_PROP } from './consts'\n\nconst __hasOwn = Object[PROTOTYPE][HAS_OWN_PROP]\n\n/**\n * has own property\n */\nexport const hasOwnProp: (obj: any, prop: string) => boolean = (obj: any, prop: string): boolean => {\n\treturn __hasOwn.call(obj, prop)\n}\n\n/**\n * get owner property value\n * @param prop \t\t\tproperty name\n * @param defaultVal \tdefault value\n */\nexport function getOwnProp(obj: any, prop: string, defaultVal?: any): any {\n\treturn hasOwnProp(obj, prop) ? obj[prop] : defaultVal\n}\n","/**\n * Object.create polyfill\n * @module utility/create\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 20:08:04 GMT+0800 (China Standard Time)\n */\n\nimport { PROTOTYPE } from '../consts'\nimport { defProp } from '../defProp'\nimport { hasOwnProp } from '../ownProp'\nimport { __setProto } from '../proto'\n\nfunction __() {}\n\n/**\n * create shim\n */\nfunction doCreate(o: object | null, props?: PropertyDescriptorMap & ThisType<any>): any {\n\t__[PROTOTYPE] = o\n\tconst obj = new __()\n\t__[PROTOTYPE] = null\n\tif (props) {\n\t\tfor (var k in props) {\n\t\t\tif (hasOwnProp(props, k)) {\n\t\t\t\tdefProp(obj, k, props[k])\n\t\t\t}\n\t\t}\n\t}\n\treturn obj\n}\n\n/**\n * create object\n */\nexport const create =\n\tObject.create ||\n\t(Object.create = Object.getPrototypeOf\n\t\t? doCreate\n\t\t: function create(o: object | null, props?: PropertyDescriptorMap & ThisType<any>): any {\n\t\t\t\tconst obj = doCreate(o, props)\n\t\t\t\t__setProto(obj, o)\n\t\t\t\treturn obj\n\t\t  })\n",null,"/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:10:41 GMT+0800 (China Standard Time)\n * @modified Sat Dec 29 2018 19:37:44 GMT+0800 (China Standard Time)\n */\nexport class Control {\n\tprivate __desc: string\n\n\tconstructor(desc: string) {\n\t\tthis.__desc = desc\n\t}\n\n\ttoString() {\n\t\treturn this.__desc\n\t}\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:10:41 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:32:58 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { hasOwnProp } from '../ownProp'\nimport { isArrayLike, isBool } from '../is'\nimport { defaultKeyMap } from '../dkeys'\n\n/**\n * STOP Control\n * > stop each/map/indexOf...\n */\nexport const STOP = new Control('STOP')\n//========================================================================================\n/*                                                                                      *\n *                                each object properties                                *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on object\n * - will stop each on return STOP\n */\nexport type EachPropCallback<T extends {}> = (prop: string, obj: T) => Control | void\n\n/**\n * each properties\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties, default: true\n * @return stoped property name or false\n */\nexport function eachProps<T extends {}>(obj: T, callback: EachPropCallback<T>, own: boolean): false | string\nexport function eachProps<T extends {}>(\n\tobj: T,\n\tcallback: EachPropCallback<T>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function eachProps<T extends {}>(\n\tobj: T,\n\tcallback: EachPropCallback<T>,\n\tscope?: any,\n\town?: boolean\n): false | string {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tlet k: string\n\tif (own === false) {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && callback(k, obj) === STOP) return k\n\t} else {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && hasOwnProp(obj, k) && callback(k, obj) === STOP) return k\n\t}\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      each object                                     *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on object\n * - will stop each on callback return STOP\n */\nexport type EachObjCallback<E> = (value: E, prop: string, obj: { [key: string]: E }) => Control | void\n\n/**\n * each object\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties, default: true\n * @return stoped property name or false\n */\nexport function eachObj<E>(obj: { [key: string]: E }, callback: EachObjCallback<E>, own: boolean): false | string\nexport function eachObj<E>(\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function eachObj<E>(\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string {\n\tconst args = arguments\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tlet k: string\n\tif (own === false) {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && callback(obj[k], k, obj) === STOP) return k\n\t} else {\n\t\tfor (k in obj) if (!defaultKeyMap[k] && hasOwnProp(obj, k) && callback(obj[k], k, obj) === STOP) return k\n\t}\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      each array                                      *\n *                                                                                      */\n//========================================================================================\n\n/**\n * each callback on array\n * - will stop each on callback return STOP\n */\nexport type EachArrayCallback<E> = (data: E, index: number, array: IArray<E>) => Control | void\n\n/**\n * each array\n * - will stop each on callback return STOP\n * @param array\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @return stoped index or false\n */\nexport function eachArray<E>(array: IArray<E>, callback: EachArrayCallback<E>, scope?: any): false | number {\n\tcallback = bind(callback, scope)\n\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\tif (callback(array[i], i, array) === STOP) return i\n\t}\n\treturn false\n}\n\n/**\n * reverse each array\n * - will stop each on callback return STOP\n * @param array\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @return stoped index or false\n */\nexport function reachArray<E>(array: IArray<E>, callback: EachArrayCallback<E>, scope?: any): false | number {\n\tcallback = bind(callback, scope)\n\tlet i = array.length\n\twhile (i--) if (callback(array[i], i, array) === STOP) return i\n\treturn false\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         each                                         *\n *                                                                                      */\n//========================================================================================\n\nexport function doEach<E>(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: IArray<E>,\n\tcallback: EachArrayCallback<E>,\n\tscope?: any\n): false | number\nexport function doEach<E>(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\town?: boolean\n): false | string\nexport function doEach<E>(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function doEach(\n\t_eachArray: typeof eachArray,\n\t_eachObj: typeof eachObj,\n\tobj: any,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): false | number | string {\n\tif (isArrayLike(obj)) return _eachArray(obj, callback, scope)\n\treturn _eachObj(obj, callback, scope, own)\n}\n\n/**\n * each\n * - will stop each on callback return STOP\n * @param obj\t\teach target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\teach own properties on object, default: true\n * @return stoped index or false\n */\n\nexport function each<E>(obj: IArray<E>, callback: EachArrayCallback<E>, scope?: any): false | number\nexport function each<E>(obj: { [key: string]: E }, callback: EachObjCallback<E>, own?: boolean): false | string\nexport function each<E>(\n\tobj: { [key: string]: E },\n\tcallback: EachObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): false | string\nexport function each<E>(obj: any, callback: any, scope?: any, own?: boolean): false | number | string {\n\treturn doEach(eachArray, eachObj, obj, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:31:21 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { create } from '../create'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool } from '../is'\n\n/**\n * SKIP Control\n * > skip map\n */\nexport const SKIP = new Control('SKIP')\n\n//========================================================================================\n/*                                                                                      *\n *                                    map object                                   *\n *                                                                                      */\n//========================================================================================\n\n/**\n * callback on object\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param value\tproperty value\n * @param prop\tproperty name\n * @param obj\tmap target\n */\nexport type MapObjCallback<T, E> = (data: E, prop: string, obj: { [key: string]: E }) => T | Control\n\nexport function doMapObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function doMapObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function doMapObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\tconst copy: { [key: string]: T } = create(null)\n\teach(\n\t\tobj,\n\t\t(value, prop, obj) => {\n\t\t\tconst v = callback(value, prop, obj)\n\t\t\tif (v === STOP) return STOP\n\t\t\tif (v !== SKIP) copy[prop] = v as T\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn copy\n}\n\n/**\n * object: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param obj\t\tmap target\n * @param callback\tcallback\n * @param scope\t\tscope of callback\n * @param own\t\tmap own properties, default: true\n */\nexport function mapObj<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function mapObj<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function mapObj<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } {\n\treturn doMapObj(eachObj, obj, callback, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     indexof Array                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * callback on array\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param data\titem data\n * @param index\titem index\n * @param array\tmap target\n */\nexport type MapArrayCallback<T, E> = (data: E, index: number, array: IArray<E>) => T | Control\n\nexport function doMapArray<T, E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tcallback: MapArrayCallback<T, E>,\n\tscope?: any\n): T[] {\n\tcallback = bind(callback, scope)\n\tconst copy: T[] = []\n\tlet j = 0\n\teach(array, (data, index, array) => {\n\t\tconst v = callback(data, index, array)\n\t\tif (v === STOP) return STOP\n\t\tif (v !== SKIP) copy[j++] = v as T\n\t})\n\treturn copy\n}\n\n/**\n * array: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param array\t\tmap target\n * @param value\t\tcallback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function mapArray<T, E>(array: IArray<E>, callback: MapArrayCallback<T, E>, scope?: any): T[] {\n\treturn doMapArray(eachArray, array, callback, scope)\n}\n\n/**\n * revice array: map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param array\t\tmap target\n * @param value\t\tmap value of callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function rmapArray<T, E>(array: IArray<E>, callback: MapArrayCallback<T, E>, scope?: any): T[] {\n\treturn doMapArray(reachArray, array, callback, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       map                                       *\n *                                                                                      */\n//========================================================================================\n\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray<E>,\n\tcallback: MapArrayCallback<T, E>,\n\tscope?: any\n): T[]\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function doMap<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T } | T[] {\n\tif (isArrayLike(obj)) return doMapArray(eacharray, obj, callback, scope)\n\treturn doMapObj(eachobj, obj, callback, scope, own)\n}\n\n/**\n * map\n * - will stop map on callback return STOP\n * - will ignore item on callback return SKIP\n * @param obj\t\tmap target\n * @param value\t\tmap value of callback\n * @param scope\t\tscope of callback\n * @param own\t\tmap own properties on object, default: true\n * @return array index or property name or -1\n */\nexport function map<T, E>(obj: IArray<E>, callback: MapArrayCallback<T, E>, scope?: any): T[]\nexport function map<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\town?: boolean\n): { [key: string]: T }\nexport function map<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: MapObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): { [key: string]: T }\nexport function map<T, E>(obj: any, callback: any, scope?: any, own?: boolean): { [key: string]: T } | T[] {\n\treturn doMap(eachArray, eachObj, obj, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:32:32 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool, isFn, eq } from '../is'\n\nfunction parseCallback(value: any, scope: any): any {\n\tif (isFn(value)) return bind(value, scope)\n\treturn function defaultHandler(data: any, idx: any, obj: any) {\n\t\treturn eq(data, value)\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                    index of object                                   *\n *                                                                                      */\n//========================================================================================\n\n/**\n * indexOf callback on object\n * - will stop find on callback return STOP\n * @param value\tproperty value\n * @param prop\tproperty name\n * @param obj\t\tindexOf target\n * @return\n * - boolean: is finded\n * - void: find next\n * - STOP: stop find\n */\nexport type IdxOfObjCallback<E> = (value: E, prop: string, obj: { [key: string]: E }) => boolean | Control | void\n\nexport function doIdxOfObj<E>(each: typeof eachObj, obj: { [key: string]: E }, value: E, own?: boolean): -1 | string\nexport function doIdxOfObj<E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\town?: boolean\n): -1 | string\nexport function doIdxOfObj<E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): -1 | string\n\nexport function doIdxOfObj<E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E> | E,\n\tscope?: any,\n\town?: boolean\n): -1 | string {\n\tif (isBool(scope)) {\n\t\town = scope\n\t\tscope = null\n\t}\n\tconst callback: IdxOfObjCallback<E> = parseCallback(value, scope)\n\tlet idx: -1 | string = -1\n\teach(\n\t\tobj,\n\t\t(data, prop, obj) => {\n\t\t\tconst r = callback(data, prop, obj)\n\t\t\tif (r === true) {\n\t\t\t\tidx = prop\n\t\t\t\treturn STOP\n\t\t\t} else if (r === STOP) return r\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn idx\n}\n\n/**\n * object: indexOf\n * - will stop find on callback return STOP\n * @param obj\t\tfind target\n * @param callback\tfind value or callback\n * @param scope\t\tscope of callback\n * @param own\t\tfind own properties, default: true\n * @return property name or -1\n */\nexport function idxOfObj<E>(obj: { [key: string]: E }, value: E, own?: boolean): -1 | string\nexport function idxOfObj<E>(obj: { [key: string]: E }, value: IdxOfObjCallback<E>, own?: boolean): -1 | string\nexport function idxOfObj<E>(\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): -1 | string\nexport function idxOfObj<E>(\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E> | E,\n\tscope?: any,\n\town?: boolean\n): -1 | string {\n\treturn doIdxOfObj(eachObj, obj, value as any, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     indexof Array                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * indexOf callback on array\n * - will stop find on callback return STOP\n * @param data\titem data\n * @param index\titem index\n * @param array\tindexOf target\n * @return\n * - boolean: is finded\n * - void: find next\n * - STOP: stop find\n */\nexport type IdxOfArrayCallback<E> = (data: E, index: number, array: IArray<E>) => boolean | Control | void\n\nexport function doIdxOfArray<E>(each: typeof eachArray, array: IArray<E>, value: E): number\nexport function doIdxOfArray<E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tvalue: IdxOfArrayCallback<E>,\n\tscope?: any\n): number\nexport function doIdxOfArray<E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tvalue: IdxOfArrayCallback<E> | E,\n\tscope?: any\n): number {\n\tconst callback: IdxOfArrayCallback<E> = parseCallback(value, scope)\n\tlet idx = -1\n\teach(array, (data, index, array) => {\n\t\tconst r = callback(data, index, array)\n\t\tif (r === true) {\n\t\t\tidx = index\n\t\t\treturn STOP\n\t\t} else if (r === STOP) return r\n\t})\n\treturn idx\n}\n\n/**\n * array: indexOf\n * - will stop find on callback return STOP\n * @param array\t\tfind target\n * @param value\t\tfind value or callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function idxOfArray<E>(array: IArray<E>, value: E): number\nexport function idxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E>, scope?: any): number\nexport function idxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E> | any, scope?: any): number {\n\treturn doIdxOfArray(eachArray, array, value, scope)\n}\n\n/**\n * revice array: indexOf\n * - will stop find on callback return STOP\n * @param array\t\tfind target\n * @param value\t\tfind value of callback\n * @param scope\t\tscope of callback\n * @return array index or -1\n */\nexport function ridxOfArray<E>(array: IArray<E>, value: E): number\nexport function ridxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E>, scope?: any): number\nexport function ridxOfArray<E>(array: IArray<E>, value: IdxOfArrayCallback<E> | any, scope?: any): number {\n\treturn doIdxOfArray(reachArray, array, value, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       index of                                       *\n *                                                                                      */\n//========================================================================================\n// find by value\nexport function doIdxOf<E>(eacharray: typeof eachArray, eachobj: typeof eachObj, obj: IArray<E>, value: E): number\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: E,\n\town?: boolean\n): string\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E } | IArray<E>,\n\tvalue: E,\n\town?: boolean\n): number | string\n// find by callback\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray<E>,\n\tvalue: IdxOfArrayCallback<E>,\n\tscope?: any\n): number\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\town?: boolean\n): -1 | string\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\tvalue: IdxOfObjCallback<E>,\n\tscope?: any,\n\town?: boolean\n): -1 | string\nexport function doIdxOf<E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\tvalue: any,\n\tscope?: any,\n\town?: boolean\n): number | string {\n\tif (isArrayLike(obj)) return doIdxOfArray(eacharray, obj, value, scope)\n\treturn doIdxOfObj(eachobj, obj, value, scope, own)\n}\n\n/**\n * indexOf\n * - will stop find on callback return STOP\n * @param obj\t\tfind target\n * @param value\t\tfind value of callback\n * @param scope\t\tscope of callback\n * @param own\t\tfind own properties on object, default: true\n * @return array index or property name or -1\n */\nexport function idxOf<E>(obj: IArray<E>, value: E): number | string\nexport function idxOf<E>(obj: { [key: string]: E }, value: E, own?: boolean): number | string\nexport function idxOf<E>(obj: { [key: string]: E } | IArray<E>, value: E, own?: boolean): number | string\nexport function idxOf<E>(obj: IArray<E>, value: IdxOfArrayCallback<E>, scope?: any): number\nexport function idxOf<E>(obj: { [key: string]: E }, value: IdxOfObjCallback<E>, own?: boolean): -1 | string\nexport function idxOf<E>(obj: { [key: string]: E }, value: IdxOfObjCallback<E>, scope?: any, own?: boolean): -1 | string\nexport function idxOf<E>(obj: any, value: any, scope?: any, own?: boolean): number | string {\n\treturn doIdxOf(eachArray, eachObj, obj, value, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 17:12:06 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:30:27 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { STOP, eachArray, reachArray, eachObj } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isArrayLike, isBool } from '../is'\n\n//========================================================================================\n/*                                                                                      *\n *                                     reduce object                                    *\n *                                                                                      */\n//========================================================================================\n\n/**\n * reduce callback on object\n * - will stop reduce on return STOP\n */\nexport type ReduceObjCallback<T, E> = (accumulator: T, value: E, prop: string, obj: { [key: string]: E }) => T | Control\n\nexport function doReduceObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n): T\nexport function doReduceObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduceObj<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T {\n\tif (isBool(scope)) {\n\t\town = scope\n\t} else {\n\t\tcallback = bind(callback, scope)\n\t}\n\teach(\n\t\tobj,\n\t\t(value, prop, obj) => {\n\t\t\tconst rs = callback(accumulator, value, prop, obj)\n\t\t\tif (rs === STOP) return STOP\n\t\t\taccumulator = rs as T\n\t\t},\n\t\tnull,\n\t\town\n\t)\n\treturn accumulator\n}\n\n/**\n * reduce object\n * - will stop reduce on callback return STOP\n * @param obj\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n * @param own\t\t\treduce own properties, default: true\n */\nexport function reduceObj<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n)\nexport function reduceObj<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n)\nexport function reduceObj<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T {\n\treturn doReduceObj(eachObj, obj, accumulator, callback, scope, own)\n}\n//========================================================================================\n/*                                                                                      *\n *                                     reduce array                                     *\n *                                                                                      */\n//========================================================================================\n\n/**\n * reduce callback on array\n * - will stop reduce on return STOP\n */\nexport type ReduceArrayCallback<T, E> = (accumulator: T, data: E, index: number, array: IArray<E>) => T | Control\n\nexport function doReduceArray<T, E>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T {\n\tcallback = bind(callback, scope)\n\teach(array, (data, index, array) => {\n\t\tconst rs = callback(accumulator, data, index, array)\n\t\tif (rs === STOP) return STOP\n\t\taccumulator = rs as T\n\t})\n\treturn accumulator\n}\n\n/**\n * reduce array\n * - will stop reduce on callback return STOP\n * @param array\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n */\nexport function reduceArray<T, E>(\n\tarray: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T {\n\treturn doReduceArray(eachArray, array, accumulator, callback, scope)\n}\n\n/**\n * revice reduce array\n * - will stop reduce on callback return STOP\n * @param array\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n */\nexport function rreduceArray<T, E>(\n\tarray: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T {\n\treturn doReduceArray(reachArray, array, accumulator, callback, scope)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        reduce                                        *\n *                                                                                      */\n//========================================================================================\n\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: IArray<E>,\n\taccumulator: T,\n\tcallback: ReduceArrayCallback<T, E>,\n\tscope?: any\n): T\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n): T\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function doReduce<T, E>(\n\teacharray: typeof eachArray,\n\teachobj: typeof eachObj,\n\tobj: any,\n\taccumulator: T,\n\tcallback: any,\n\tscope?: any,\n\town?: boolean\n): T {\n\tif (isArrayLike(obj)) return doReduceArray(eacharray, obj as IArray<E>, accumulator, callback, scope)\n\treturn doReduceObj(eachobj, obj, accumulator, callback, scope, own)\n}\n\n/**\n * reduce\n * - will stop reduce on callback return STOP\n * @param obj\t\t\treduce target\n * @param accumulator\taccumulator\n * @param callback\t\tvalue callback\n * @param scope\t\t\tscope of callback\n * @param own\t\t\treduce own properties of reduce object, default: true\n */\nexport function reduce<T, E>(obj: IArray<E>, accumulator: T, callback: ReduceArrayCallback<T, E>, scope?: any): T\nexport function reduce<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\town?: boolean\n): T\nexport function reduce<T, E>(\n\tobj: { [key: string]: E },\n\taccumulator: T,\n\tcallback: ReduceObjCallback<T, E>,\n\tscope?: any,\n\town?: boolean\n): T\nexport function reduce<T, E>(obj: any, accumulator: T, callback: any, scope?: any, own?: boolean): T {\n\treturn doReduce(eachArray, eachObj, obj, accumulator, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Jul 26 2018 10:47:47 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:49:02 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nimport { STOP, eachObj, eachProps } from './each'\nimport { SKIP } from './map'\nimport { isBool, isFn } from '../is'\nimport { bind } from '../fn'\n\n//========================================================================================\n/*                                                                                      *\n *                                         keys                                         *\n *                                                                                      */\n//========================================================================================\n\nexport type ObjKeyHandler<T> = (prop: string, obj: object) => T | Control\n\nfunction defaultObjKeyHandler(prop: string, obj: object): any {\n\treturn prop\n}\nexport function doObjKeys<T>(each: typeof eachProps, obj: object, own?: boolean): T[]\nexport function doObjKeys<T>(each: typeof eachProps, obj: object, callback: ObjKeyHandler<T>, own?: boolean): T[]\nexport function doObjKeys<T>(\n\teach: typeof eachProps,\n\tobj: object,\n\tcallback: ObjKeyHandler<T>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function doObjKeys<T>(\n\teach: typeof eachProps,\n\tobj: object,\n\tcallback_own?: ObjKeyHandler<T> | boolean,\n\tscope_own?: any,\n\town?: boolean\n): T[]\nexport function doObjKeys<T>(each: typeof eachProps, obj: object): T[] {\n\tconst rs: T[] = [],\n\t\targs = arguments\n\tlet handler: ObjKeyHandler<T> = defaultObjKeyHandler,\n\t\ti = 2,\n\t\tj = 0\n\tif (isFn(args[i])) {\n\t\thandler = args[i++]\n\t\tif (!isBool(args[i])) handler = bind(handler, args[i++])\n\t}\n\teach(\n\t\tobj,\n\t\t(prop, obj) => {\n\t\t\tconst val = handler(prop, obj)\n\t\t\tif (val === STOP) return STOP\n\t\t\tif (val !== SKIP) rs[j++] = val as T\n\t\t},\n\t\tnull,\n\t\targs[i]\n\t)\n\treturn rs\n}\n\n/**\n * @param obj\t\ttarget\n * @param handler\tkey handler\n * @param scope\t\tscope or handler\n * @param own\t\tis get own properties, default: true\n */\nexport function keys<T>(obj: object, own?: boolean): T[]\nexport function keys<T>(obj: object, callback: ObjKeyHandler<T>, own?: boolean): T[]\nexport function keys<T>(obj: object, callback: ObjKeyHandler<T>, scope?: any, own?: boolean): T[]\nexport function keys<T>(obj: object, callback?: ObjKeyHandler<T> | boolean, scope?: any, own?: boolean): T[] {\n\treturn doObjKeys(eachProps, obj, callback, scope, own)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        values                                        *\n *                                                                                      */\n//========================================================================================\n\nexport type ObjValueHandler<T, E> = (value: E, prop: string, obj: { [key: string]: E }) => T | Control\n\nfunction defaultObjValueHandler<E>(value: any, prop: string, obj: { [key: string]: E }): any {\n\treturn value\n}\nexport function doObjValues<T, E>(each: typeof eachObj, obj: { [key: string]: E }, own?: boolean): T[]\nexport function doObjValues<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: ObjValueHandler<T, E>,\n\town?: boolean\n): T[]\nexport function doObjValues<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback: ObjValueHandler<T, E>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function doObjValues<T, E>(\n\teach: typeof eachObj,\n\tobj: { [key: string]: E },\n\tcallback_own?: ObjValueHandler<T, E> | boolean,\n\tscope_own?: any,\n\town?: boolean\n): T[]\nexport function doObjValues<T, E>(each: typeof eachObj, obj: { [key: string]: E }): T[] {\n\tconst rs: T[] = [],\n\t\targs = arguments\n\tlet handler: ObjValueHandler<T, E> = defaultObjValueHandler,\n\t\ti = 1,\n\t\tj = 0\n\tif (isFn(args[i])) {\n\t\thandler = args[i++]\n\t\tif (!isBool(args[i])) handler = bind(handler, args[i++])\n\t}\n\teach(\n\t\tobj,\n\t\tfunction(data, prop, obj) {\n\t\t\tconst val = handler(data, prop, obj)\n\t\t\tif (val === STOP) return STOP\n\t\t\tif (val !== SKIP) rs[j++] = val as T\n\t\t},\n\t\tnull,\n\t\targs[i]\n\t)\n\treturn rs\n}\n\n/**\n * @param obj\t\ttarget\n * @param handler\tvalue handler\n * @param scope\t\tscope or handler\n * @param own\t\tis get own properties, default: true\n */\nexport function values<T, E>(obj: { [key: string]: E }, own?: boolean): T[]\nexport function values<T, E>(obj: { [key: string]: E }, callback: ObjValueHandler<T, E>, own?: boolean): T[]\nexport function values<T, E>(\n\tobj: { [key: string]: E },\n\tcallback: ObjValueHandler<T, E>,\n\tscope?: any,\n\town?: boolean\n): T[]\nexport function values<T, E>(\n\tobj: { [key: string]: E },\n\tcallback?: ObjValueHandler<T, E> | boolean,\n\tscope?: any,\n\town?: boolean\n): T[] {\n\treturn doObjValues(eachObj, obj, callback, scope, own)\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Nov 16 2018 16:29:04 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:38:40 GMT+0800 (China Standard Time)\n */\n\nimport { Control } from './Control'\nimport { eachArray } from './each'\nimport { IArray } from '../consts'\nimport { bind } from '../fn'\nimport { isFn, isStr, isArray } from '../is'\nimport { create } from '../create'\n\n/**\n * @return STOP or SKIP or [key: string, value: any]\n */\nexport type Arr2ObjCallback<E, T> = (data: E, index: number, array: IArray<E>) => Control | [string, T]\n\nexport function doArr2Obj<E, T>(\n\teach: typeof eachArray,\n\tarray: IArray<E>,\n\tcallback: Arr2ObjCallback<E, T>,\n\tscope?: any\n): { [key: string]: T } {\n\tconst obj: { [key: string]: T } = create(null)\n\tcallback = bind(callback, scope)\n\teach(array, (data, index, array) => {\n\t\tconst r: Control | [string, any] = callback(data, index, array)\n\t\tif (isArray(r)) {\n\t\t\tobj[r[0]] = r[1]\n\t\t} else {\n\t\t\treturn r as Control\n\t\t}\n\t})\n\treturn obj\n}\n\n/**\n * convert array to object\n */\nexport function arr2obj<E, T>(array: IArray<E>, callback: Arr2ObjCallback<E, T>, scope?: any): { [key: string]: T } {\n\treturn doArr2Obj(eachArray, array, callback, scope)\n}\n\n/**\n * convert array or string to object\n * @param array\n * @param val\tvalue or callback\n * @param split\tsplit char on string\n */\nexport function makeMap<E, T>(array: IArray<E>, val: Arr2ObjCallback<E, T>, split?: string): { [key: string]: T }\nexport function makeMap<E, T>(array: IArray<E>, val?: T, split?: string): { [key: string]: T }\nexport function makeMap(array: any, val?: any, split?: string) {\n\tif (isStr(array)) array = (array as string).split(isStr(split) ? split : ',')\n\treturn arr2obj(array, isFn(val) ? val : data => [data, val])\n}\n","/**\n * @module utility/collection\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Thu Nov 15 2018 12:13:54 GMT+0800 (China Standard Time)\n * @modified Thu Mar 28 2019 19:39:52 GMT+0800 (China Standard Time)\n */\nimport { Control } from './Control'\nexport { STOP, eachProps, eachArray, eachObj, each } from './each'\nexport { SKIP, mapArray, mapObj, map } from './map'\nexport { idxOfArray, idxOfObj, idxOf } from './idxOf'\nexport { reduceArray, reduceObj, reduce } from './reduce'\nexport { keys, values } from './obj2arr'\nexport { arr2obj, makeMap } from './arr2obj'\n\nexport function makeArray<T>(len: number, callback: (index: number) => T): T[] {\n\tconst array = new Array(len)\n\tlet i = len\n\twhile (i--) array[i] = callback(i)\n\treturn array\n}\nexport type EachControl = Control\n","/**\n * @module utility/defProp\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Fri Nov 30 2018 14:41:02 GMT+0800 (China Standard Time)\n * @modified Tue Mar 26 2019 19:39:49 GMT+0800 (China Standard Time)\n */\n\nimport { create } from './create'\nimport { isArray } from './is'\nimport { mapArray } from './collection'\n\nconst pathCache: { [key: string]: string[] } = create(null)\n\n// (^ | .) prop | (index | \"string prop\" | 'string prop')\nconst pathReg = /(?:^|\\.)([a-zA-Z$_][\\w$]*)|\\[\\s*(?:(\\d+)|\"((?:[^\\\\\"]|\\\\.)*)\"|'((?:[^\\\\']|\\\\.)*)')\\s*\\]/g\n\nexport function parsePath(propPath: string | string[], cacheable?: boolean): string[] {\n\tlet path: string[]\n\tif (isArray(propPath)) {\n\t\tpath = propPath as string[]\n\t} else if ((path = pathCache[propPath as string])) {\n\t\treturn path\n\t} else {\n\t\tpath = []\n\t\tvar match: string[],\n\t\t\tidx = 0,\n\t\t\tcidx: number,\n\t\t\ti = 0\n\t\twhile ((match = pathReg.exec(propPath as string))) {\n\t\t\tcidx = pathReg.lastIndex\n\t\t\tif (cidx !== idx + match[0].length)\n\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t`Invalid Path: \"${propPath}\", unkown character[${(propPath as string).charAt(\n\t\t\t\t\t\tidx\n\t\t\t\t\t)}] at offset:${idx}`\n\t\t\t\t)\n\t\t\tpath[i++] = match[1] || match[2] || match[3] || match[4]\n\t\t\tidx = cidx\n\t\t}\n\t\tif (propPath.length > idx + 1) {\n\t\t\tthrow new SyntaxError(\n\t\t\t\t`Invalid Path: \"${propPath}\", unkown character[${(propPath as string).charAt(idx)}] at offset:${idx}`\n\t\t\t)\n\t\t}\n\t\tif (cacheable !== false && i) {\n\t\t\tpathCache[propPath as string] = path\n\t\t}\n\t}\n\tif (!path.length) throw new Error(`Empty Path: ${propPath}`)\n\treturn path\n}\n\nexport function formatPath(path: string | (string[] & { path?: string })): string {\n\treturn isArray(path)\n\t\t? (path as string[] & { path?: string }).path ||\n\t\t\t\t((path as string[] & { path?: string }).path = mapArray(path, formatPathHandler).join(''))\n\t\t: (path as string)\n}\n\nfunction formatPathHandler(prop: string): string {\n\treturn `[\"${String(prop).replace(\"'\", '\\\\\"')}\"]`\n}\n\nexport function get(obj: any, path: string | string[]): any {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0\n\tfor (; i < l; i++) {\n\t\tobj = obj[path[i]]\n\t\tif (obj === null || obj === undefined) return\n\t}\n\treturn obj[path[i]]\n}\n\nexport function set(obj: any, path: string | string[], value: any) {\n\tpath = parsePath(path)\n\tconst l = path.length - 1\n\tlet i = 0,\n\t\tv: any\n\tfor (; i < l; i++) {\n\t\tv = obj[path[i]]\n\t\tobj = v === null || v === undefined ? (obj[path[i]] = {}) : v\n\t}\n\tobj[path[i]] = value\n}\n","/**\n * String utilities\n * @module utility/string\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 13:57:32 GMT+0800 (China Standard Time)\n * @modified Sat Mar 23 2019 18:50:35 GMT+0800 (China Standard Time)\n */\n\n//========================================================================================\n/*                                                                                      *\n *                                       char code                                      *\n *                                                                                      */\n//========================================================================================\n\n/**\n * get char code\n * > string.charCodeAt\n */\nexport function charCode(str: string, index?: number): number {\n\treturn str.charCodeAt(index || 0)\n}\n\n/**\n * get char by char code\n * > String.fromCharCode\n */\nexport function char(code: number): string {\n\treturn String.fromCharCode(code)\n}\n\nexport function cutStr(str: string, start: number, end?: number) {\n\treturn str.substring(start, end)\n}\n\nexport function cutLStr(str: string, start: number, len?: number) {\n\treturn str.substr(start, len)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         trim                                         *\n *                                                                                      */\n//========================================================================================\n\nconst TRIM_REG = /(^\\s+)|(\\s+$)/g\n\n/**\n * trim\n */\nexport function trim(str: string): string {\n\treturn str.replace(TRIM_REG, '')\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         case                                         *\n *                                                                                      */\n//========================================================================================\n\nconst FIRST_LOWER_LETTER_REG = /^[a-z]/,\n\tFIRST_UPPER_LETTER_REG = /^[A-Z]/\n\nexport function upper(str: string): string {\n\treturn str.toUpperCase()\n}\n\nexport function lower(str: string): string {\n\treturn str.toLowerCase()\n}\n\nexport function upperFirst(str: string): string {\n\treturn str.replace(FIRST_LOWER_LETTER_REG, upper)\n}\n\nexport function lowerFirst(str: string): string {\n\treturn str.replace(FIRST_UPPER_LETTER_REG, lower)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        escape                                        *\n *                                                                                      */\n//========================================================================================\n\nconst STR_ESCAPE_MAP = {\n\t\t'\\n': '\\\\n',\n\t\t'\\t': '\\\\t',\n\t\t'\\f': '\\\\f',\n\t\t'\"': '\\\\\"',\n\t\t\"'\": \"\\\\'\"\n\t},\n\tSTR_ESCAPE = /[\\n\\t\\f\"']/g\n\nexport function escapeStr(str: string): string {\n\treturn str.replace(STR_ESCAPE, str => STR_ESCAPE_MAP[str])\n}\n","/**\n * @module utility/format\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 03 2018 19:46:41 GMT+0800 (China Standard Time)\n * @modified Wed Apr 03 2019 11:34:07 GMT+0800 (China Standard Time)\n */\n\nimport { createFn } from './fn'\nimport { isFn } from './is'\nimport { get, parsePath } from './propPath'\nimport { create } from './create'\nimport { charCode, upper, escapeStr, cutStr } from './string'\n\n//========================================================================================\n/*                                                                                      *\n *                                     pad & shorten                                    *\n *                                                                                      */\n//========================================================================================\n\nexport function pad(str: string, len: number, chr?: string, leftAlign?: boolean | number): string {\n\treturn len > str.length ? __pad(str, len, chr, leftAlign) : str\n}\n\nexport function shorten(str: string, len: number, suffix?: string): string {\n\treturn len < str.length ? ((suffix = suffix || ''), str.substr(0, len - suffix.length) + suffix) : str\n}\n\nfunction __pad(str: string, len: number, chr: string, leftAlign: boolean | number): string {\n\tconst pad = new Array(len - str.length + 1).join(chr || ' ')\n\treturn leftAlign ? str + pad : pad + str\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       Separator                                      *\n *                                                                                      */\n//========================================================================================\n\nexport const thousandSeparate = mkSeparator(3),\n\tbinarySeparate = mkSeparator(8, '01'),\n\toctalSeparate = mkSeparator(4, '0-7'),\n\thexSeparate = mkSeparator(4, '\\\\da-fA-F')\n\nfunction mkSeparator(group: number, valReg?: string): (numStr: string) => string {\n\tvalReg = valReg || '\\\\d'\n\tconst reg = new RegExp(\n\t\t`^(?:[+-]|\\\\s+|0[xXbBoO])|([${valReg}])(?=([${valReg}]{${group}})+(?![${valReg}]))|[^${valReg}].*`,\n\t\t'g'\n\t)\n\treturn numStr => numStr.replace(reg, separatorHandler)\n}\nfunction separatorHandler(m, d) {\n\treturn d ? d + ',' : m\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                   plural & singular                                  *\n *                                                                                      */\n//========================================================================================\n\nconst PLURAL_REG = /([a-zA-Z]+)([^aeiou])y$|([sxzh])$|([aeiou]y)$|([^sxzhy])$/\nexport function plural(str: string): string {\n\treturn str.replace(PLURAL_REG, pluralHandler)\n}\nfunction pluralHandler(m, v, ies, es, ys, s) {\n\treturn v + (ies ? ies + 'ies' : es ? es + 'es' : (ys || s) + 's')\n}\n\nconst SINGULAR_REG = /([a-zA-Z]+)([^aeiou])ies$|([sxzh])es$|([aeiou]y)s$|([^sxzhy])s$/\nexport function singular(str: string): string {\n\treturn str.replace(SINGULAR_REG, singularHandler)\n}\nfunction singularHandler(m, v, ies, es, ys, s) {\n\treturn v + (ies ? ies + 'y' : es || ys || s)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     format flags                                     *\n *                                                                                      */\n//========================================================================================\n\ntype FormatFlags = number\n\nexport const FORMAT_XPREFIX: FormatFlags = 0x1\nexport const FORMAT_PLUS: FormatFlags = 0x2\nexport const FORMAT_ZERO: FormatFlags = 0x4\nexport const FORMAT_SPACE: FormatFlags = 0x8\nexport const FORMAT_SEPARATOR: FormatFlags = 0x10\nexport const FORMAT_LEFT: FormatFlags = 0x20\n\nconst FLAG_MAPPING = {\n\t'#': FORMAT_XPREFIX,\n\t'+': FORMAT_PLUS,\n\t'0': FORMAT_ZERO,\n\t' ': FORMAT_SPACE,\n\t',': FORMAT_SEPARATOR,\n\t'-': FORMAT_LEFT\n}\nfunction parseFlags(f: string): FormatFlags {\n\tlet flags: FormatFlags = 0\n\tif (f) {\n\t\tvar i = f.length\n\t\twhile (i--) flags |= FLAG_MAPPING[f.charAt(i)]\n\t}\n\treturn flags\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      format Rule                                     *\n *                                                                                      */\n//========================================================================================\n\n//   0      1      2     3     4       5       6           7         8      9           10             11             12        13\n// [match, expr, index, prop, flags, width, width-idx, width-prop, fill, precision, precision-idx, precision-prop, shorten-suffix, type]\nconst paramIdxR = `(\\\\d+|\\\\$|@)`,\n\tparamPropR = `(?:\\\\{((?:[a-zA-Z$_][\\\\w$_]*|\\\\[(?:\\\\d+|\"(?:[^\\\\\\\\\"]|\\\\\\\\.)*\"|'(?:[^\\\\\\\\']|\\\\\\\\.)*')\\\\])(?:\\\\.[a-zA-Z$_][\\\\w$_]*|\\\\[(?:\\\\d+|\"(?:[^\\\\\\\\\"]|\\\\\\\\.)*\"|'(?:[^\\\\\\\\']|\\\\\\\\.)*')\\\\])*)\\\\})`,\n\twidthR = `(?:([1-9]\\\\d*)|&${paramIdxR}${paramPropR})`,\n\tfillR = `(?:=(.))`,\n\tshortenSuffixR = `(?:=\"((?:[^\\\\\\\\\"]|\\\\\\\\.)*)\")`,\n\tformatReg = new RegExp(\n\t\t`\\\\\\\\.|(\\\\{${paramIdxR}?${paramPropR}?(?::([#,+\\\\- 0]*)(?:${widthR}${fillR}?)?(?:\\\\.${widthR}${shortenSuffixR}?)?)?([a-zA-Z_][a-zA-Z0-9_$]*)?\\\\})`,\n\t\t'g'\n\t)\n\n//========================================================================================\n/*                                                                                      *\n *                                      Formatters                                      *\n *                                                                                      */\n//========================================================================================\n\ntype FormatCallback = (\n\tval: any,\n\tflags: FormatFlags,\n\twidth: number,\n\tfill: string,\n\tprecision: number,\n\tshortenSuffix: string\n) => string\n\nconst formatters: {\n\t[k: string]: FormatCallback\n} = create(null)\n\nexport function extendFormatter(obj: { [key: string]: FormatCallback }) {\n\tvar fmt, name\n\tfor (name in obj) {\n\t\tfmt = obj[name]\n\t\tisFn(fmt) && (formatters[name] = fmt)\n\t}\n}\n\nexport function getFormatter(name: string): FormatCallback {\n\tconst f = formatters[name || 's']\n\tif (f) return f\n\tthrow new Error(`Invalid Formatter: ${name}`)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                           format by every parameter object                           *\n *                                                                                      */\n//========================================================================================\n\n/**\n * Syntax:\n * @example\n * \t'{'\n * \t\t(<parameter>)?\n * \t\t(\n * \t\t\t':'\n * \t\t\t(<flags>)?\n * \t\t\t(\n * \t\t\t\t<width> ('=' <fill-char>)?\n * \t\t\t)?\n * \t\t\t(\n * \t\t\t\t'.'\n * \t\t\t\t<precision> ('=' '\"' <shorten-suffix> '\"')?\n * \t\t\t)?\n * \t\t)?\n * \t\t(<type>)?\n * \t'}'\n *\n * - parameter\n * \t\t- {}\t\t\t\t\tformat by next unused argument\n * \t\t- {<number>}\t\t\tformat by arguments[number]\n * \t\t- {@}\t\t\t\t\tformat by current used argument\n * \t\t- {$}\t\t\t\t\tformat by next unused argument\n * \t\t- {{name}}\t\t\t\tformat by \"name\" property on next unused argument\n * \t\t- {<number>{name}}\t\tformat by \"name\" property on arguments[number]\n * \t\t- {@{name}}\t\t\t\tformat by \"name\" property on current used argument\n * \t\t- {${name}}\t\t\t\tformat by \"name\" property on next unused argument\n * @example\n * \t\tformat('<{} {}>', 'abc')\t\t\t\t// return \"<abc undefined>\"\n * \t\tformat('<{$} {$}>', 'abc')\t\t\t\t// return \"<abc undefined>\"\n * \t\tformat('<{@} {} {@}>', 'abc')\t\t\t// return \"<abc abc abc>\"\n * \t\tformat('<{0} {} {0}>', 'abc')\t\t\t// return \"<abc abc abc>\"\n * \t\tformat('<{0{value}} {${value}} {@{value}} {{value.a}}>', {value: 'abc'}, {value: {a: 'cbd'}})\n * \t\t// return \"<abc abc abc bcd>\"\n * \t\tformat('<{0{[0]}} {${[0]}} {@{[0]}} {{[0].a}}>', ['abc'], [{a: 'cbd'}])\n * \t\t// return \"<abc abc abc bcd>\"\n *\n * - flags\n * \t\t- {:#}    \tFORMAT_XPREFIX\n * \t\t\t\t\tensure the leading \"0\" for any octal\n * \t\t\t\t\tprefix non-zero hexadecimal with \"0x\" or \"0X\"\n * \t\t\t\t\tprefix non-zero binary with \"0b\" or \"0B\"\n * \t\t- {:+}    \tFORMAT_PLUS\n * \t\t\t\t\tForces to preceed the result with a plus or minus sign (+ or -) even for positive numbers.\n * \t\t\t\t\tBy default, only negative numbers are preceded with a - sign\n * \t\t- {:0}\t\tFORMAT_ZERO\n * \t\t\t\t\tLeft-pads the number with zeroes (0) instead of spaces when padding is specified\n * \t\t- {: }   \tFORMAT_SPACE\n * \t\t\t\t\tIf no sign is going to be written, a blank space is inserted before the value\n * \t\t- {:,}\t\tFORMAT_SEPARATOR\n * \t\t\t\t\tuse thousand separator on decimal number\n * \t\t\t\t\thexadecimal number: FFFFFFFF => FFFF,FFFF\n * \t\t\t\t\toctal number: 77777777 => 7777,7777\n * \t\t\t\t\tbinary number: 1111111111111111 => 11111111,11111111\n * \t\t{:-}    \tFORMAT_LEFT\n * \t\t\t\t\tLeft-justify within the given field width; Right justification is the default\n * @example\n * \t\tformat('<{: d}>',  12);\t\t// return \"< 12>\"\n *\t\tformat('<{: d}>',   0);\t\t// return \"< 0>\"\n *\t\tformat('<{: d}>', -12);\t\t// return \"<-12>\"\n *\t\tformat('<{:+d}>',  12);\t\t// return \"<+12>\"\n *\t\tformat('<{:+d}>',   0);\t\t// return \"<+0>\"\n *\t\tformat('<{:+d}>', -12);\t\t// return \"<-12>\"\n *\t\tformat('<{:6s}>',  12);\t\t// return \"<    12>\"\n *\t\tformat('<{:-6s}>', 12);\t\t// return \"<12    >\"\n *\t\tformat('<{:#o}>',  12);\t\t// return \"<014>\"\n *\t\tformat('<{:#x}>',  12);\t\t// return \"<0xc>\"\n *\t\tformat('<{:#X}>',  12);\t\t// return \"<0XC>\"\n *\t\tformat('<{:#b}>',  12);\t\t// return \"<0b1100>\"\n *\t\tformat('<{:#B}>',  12);\t\t// return \"<0B1100>\"\n\n * - width\n * \t\tMinimum number of characters to be printed.\n * \t\tIf the value to be printed is shorter than this number, the result is padded with pad char(default is space).\n * \t\tThe value is not truncated even if the result is larger.\n *\t\t- width value\n * \t\t\t{:<number>}\n * \t\t\t{:&@}\n * \t\t\t{:&$}\n * \t\t\t{:&<number>}\n * \t\t\t{:&@{<prop>}}\n * \t\t\t{:&${<prop>}}\n * \t\t\t{:&<number>{<prop>}}\n *\t\t- pad char\n * \t\t\t{:&@=<pad-char>}\n * \t\t\t{:&$=<pad-char>}\n * \t\t\t{:&<number>=<pad-char>}\n * \t\t\t{:&@{<prop>}=<pad-char>}\n * \t\t\t{:&${<prop>}=<pad-char>}\n * \t\t\t{:&<number>{<prop>}=<pad-char>}\n * @example\n * - precision\n * \t\tFor integer specifiers (d,  o, u, x, X): precision specifies the minimum number of digits to be written.\n * \t\tIf the value to be written is shorter than this number, the result is padded with leading zeros.\n * \t\tThe value is not truncated even if the result is longer. A precision of 0 means that no character is written for the value 0.\n * \t\tFor a, A, e, E, f and F specifiers: this is the number of digits to be printed after the decimal point (by default, this is 6).\n * \t\tFor g and G specifiers: This is the maximum number of significant digits to be printed.\n * \t\tFor s: this is the maximum number of characters to be printed. By default all characters are printed until the ending null character is encountered.\n * \t\tIf the period is specified without an explicit value for precision, 0 is assumed.\n * \t\t- precision value\n * \t\t\t{:.<number>}\n * \t\t\t{:.&@}\n * \t\t\t{:.&$}\n * \t\t\t{:.&<number>}\n * \t\t\t{:.&@{<prop>}}\n * \t\t\t{:.&${<prop>}}\n * \t\t\t{:.&<number>{<prop>}}\n * \t\t- shorten suffix\n * \t\t\t{:.&@=\"<suffix>\"}\n * \t\t\t{:.&$=\"<suffix>\"}\n * \t\t\t{:.&<number>=\"<suffix>\"}\n * \t\t\t{:.&@{<prop>}=\"<suffix>\"}\n * \t\t\t{:.&${<prop>}=\"<suffix>\"}\n * \t\t\t{:.&<number>{<prop>}=\"<suffix>\"}\n * - type\n * \t\t- default types\n *\t\t\t- {c}\t\tCharacter\n * \t\t\t- {s}\t\tString\n * \t\t\t- {j}\t\tJSON String\n * \t\t\t- {y}\t\tDate Year\n * \t\t\t- {m}\t\tDate Month\n * \t\t\t- {w}\t\tDate Weekly\n * \t\t\t- {W}\t\tDate Weekly\n * \t\t\t- {D}\t\tDate\n * \t\t\t- {H}\t\tDate\n * \t\t\t- {M}\t\tDate\n * \t\t\t- {S}\t\tDate\n * \t\t\t- {d} \t\tSigned decimal integer\n *\t\t\t- {u}\t\tUnsigned decimal integer\n *\t\t\t- {o}\t\tUnsigned octal\n *\t\t\t- {x}\t\tUnsigned hexadecimal integer\n *\t\t\t- {X}\t\tUnsigned hexadecimal integer (uppercase)\n *\t\t\t- {f}\t\tDecimal floating point, lowercase,\n *\t\t\t- {e}\t\tScientific notation (mantissa/exponent), lowercase\n *\t\t\t- {E}\t\tScientific notation (mantissa/exponent), uppercase\n *\t\t\t- {g}\t\tUse the shortest representation: %e or %f\n *\t\t\t- {G}\t\tUse the shortest representation: %E or %F\n * - Rules\n * \t\t- property-path\n * \t\t\t\t(\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t[a-zA-Z$_][\\w$_]*|\n * \t\t\t\t\t\t\\[\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\\d+|\n * \t\t\t\t\t\t\t\"(?:[^\\\\\"]|\\\\.)*\"|\n * \t\t\t\t\t\t\t'(?:[^\\\\']|\\\\.)*'\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t\\]\n * \t\t\t\t\t)\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t\\.[a-zA-Z$_][\\w$_]*|\n * \t\t\t\t\t\t\\[\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\\d+|\n * \t\t\t\t\t\t\t\"(?:[^\\\\\"]|\\\\.)*\"|\n * \t\t\t\t\t\t\t'(?:[^\\\\']|\\\\.)*'\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t\\]\n * \t\t\t\t\t)*\n * \t\t\t\t)\n * \t\t- expression\n * \t\t\t/\\\\.|\t\t\t\t\t\t\t\t\t\t\t\t// escape\n * \t\t\t(\t\t\t\t\t\t\t\t\t\t\t\t\t// 1: expression\n * \t\t\t\t\\{\n * \t\t\t\t(\\d+|\\$|@)?\t\t\t\t\t\t\t\t\t\t// 2: parameter index\n * \t\t\t\t(?:\\{<property-path>\\})?\t\t\t\t\t\t// 3: property path of parameter\n * \t\t\t\t(?:\n * \t\t\t\t\t:\n * \t\t\t\t\t([#,+\\- ]*)\t\t\t\t\t\t\t\t\t// 4: flags\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t(\\d+)|\t\t\t\t\t\t\t\t// 5: width\n * \t\t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\t&\n * \t\t\t\t\t\t\t\t(\\d+|\\$|@)\t\t\t\t\t\t// 6: parameter index of width\n * \t\t\t\t\t\t\t\t(?:\\{<property-path>\\})?\t\t// 7: property path of width parameter\n * \t\t\t\t\t\t\t)\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t(?:=(.))?\t\t\t\t\t\t\t\t// 8: pad fill\n * \t\t\t\t\t)?\n * \t\t\t\t\t(?:\n * \t\t\t\t\t\t\\.\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t(\\d+)|\t\t\t\t\t\t\t\t// 9: width\n * \t\t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t\t&\n * \t\t\t\t\t\t\t\t(\\d+|\\$|@)\t\t\t\t\t\t// 10: parameter index of width\n * \t\t\t\t\t\t\t\t(?:\\{<property-path>\\})?\t\t// 11: property path of width parameter\n * \t\t\t\t\t\t\t)\n * \t\t\t\t\t\t)\n * \t\t\t\t\t\t(?:\n * \t\t\t\t\t\t\t=\n * \t\t\t\t\t\t\t\"\n * \t\t\t\t\t\t\t((?:[^\\\\\"]|\\\\.)*)\t\t\t\t\t// 12: shorten su\n * \t\t\t\t\t\t\t\"\n * \t\t\t\t\t\t)\n * \t\t\t\t\t)?\n * \t\t\t\t)?\n * \t\t\t\t([a-zA-Z_][a-zA-Z0-9_$]*)?\t\t\t\t\t\t// 13: data type\n * \t\t\t\t\\}\n * \t\t\t)/\n * @param fmt \t\tformat String\n * @param args\t\tformat arguments\n * @param offset\tstart offset of arguments\n * @param getParam\tget parameter on arguments callback\n */\nexport function vformat<T>(fmt: string, args: T, offset?: number, getParam?: (args: T, idx: number) => any): string {\n\toffset = offset || 0\n\tconst start = offset\n\tgetParam = getParam || defaultGetParam\n\treturn fmt.replace(formatReg, function(\n\t\ts,\n\t\tm,\n\t\tparam,\n\t\tparamProp,\n\t\tflags,\n\t\twidth,\n\t\twidx,\n\t\twprop,\n\t\tfill,\n\t\tprecision,\n\t\tpidx,\n\t\tpprop,\n\t\tshortenSuffix,\n\t\ttype\n\t) {\n\t\tif (!m) return s.charAt(1)\n\t\treturn getFormatter(type)(\n\t\t\tparseParam(param || '$', paramProp),\n\t\t\tparseFlags(flags),\n\t\t\tparseWidth(width, widx, wprop) || 0,\n\t\t\tfill,\n\t\t\tparseWidth(precision, pidx, pprop),\n\t\t\tshortenSuffix\n\t\t)\n\t})\n\n\tfunction parseWidth<T>(width: string, idx: string, prop: string): number {\n\t\tif (width) return (width as any) >> 0\n\t\tif (idx) {\n\t\t\tconst w = parseParam(idx, prop) >> 0\n\t\t\tif (isFinite(w)) return w\n\t\t}\n\t}\n\n\tfunction parseParam<T>(paramIdx: string, prop: string): any {\n\t\tlet param = getParam(\n\t\t\targs,\n\t\t\tparamIdx === '$'\n\t\t\t\t? offset++\n\t\t\t\t: paramIdx === '@'\n\t\t\t\t? offset === start\n\t\t\t\t\t? offset\n\t\t\t\t\t: offset - 1\n\t\t\t\t: (paramIdx as any) >> 0\n\t\t)\n\t\treturn prop ? get(param, prop) : param\n\t}\n}\n\nfunction defaultGetParam(args: any, idx: number) {\n\treturn args[idx]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                        format                                        *\n *                                                                                      */\n//========================================================================================\n\n/**\n * @see vformat\n * @param fmt\tformat string\n * @param args\tformat arguments\n */\nexport function format(fmt: string, ...args: any): string\nexport function format(fmt: string): string {\n\treturn vformat(fmt, arguments, 0, getFormatParam)\n}\n\nfunction getFormatParam(args: IArguments, idx: number) {\n\treturn args[idx + 1]\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       formatter                                      *\n *                                                                                      */\n//========================================================================================\n\nconst GET_PARAM_VAR = 'getp',\n\tGET_PROP_VAR = 'get',\n\tSTATE_VAR = 'state'\nfunction createFormatter(m: string[], getParam?: (args: IArguments, idx: number) => any) {\n\treturn createFn(\n\t\t`return function(args, ${STATE_VAR}){\nreturn fmt(${getParamCode(m[2] || '$', m[3])},\n\"${parseFlags(m[4])}\",\n${getWidthCode(m[5], m[6], m[7], '0')},\n\"${m[8] ? escapeStr(m[8]) : ' '}\",\n${getWidthCode(m[9], m[10], m[11], 'void 0')},\n\"${m[12] ? escapeStr(m[12]) : ''}\");\n}`,\n\t\t['fmt', GET_PROP_VAR, GET_PARAM_VAR]\n\t)(getFormatter(m[13]), get, getParam)\n}\n\nfunction getWidthCode(width: string, idx: string, prop: string, def: string): string {\n\treturn width ? width : idx ? getParamCode(idx, prop) : def\n}\n\nfunction getParamCode(idx: string, prop: string): string {\n\tlet code = `${GET_PARAM_VAR}(args, ${\n\t\tidx === '$'\n\t\t\t? `${STATE_VAR}[0]++`\n\t\t\t: idx === '@'\n\t\t\t? `${STATE_VAR}[0] === ${STATE_VAR}[1] ? ${STATE_VAR}[0] : ${STATE_VAR}[0] - 1`\n\t\t\t: idx\n\t})`\n\tif (prop) {\n\t\tconst path = parsePath(prop)\n\t\tvar i = path.length\n\t\tconst strs = new Array(i)\n\t\twhile (i--) strs[i] = `\"${escapeStr(path[i])}\"`\n\t\treturn `${GET_PROP_VAR}(${code}, [${strs.join(', ')}])`\n\t}\n\treturn code\n}\n\nexport type Formatter = (...args: any[]) => string\nexport type FormatParamLoader = (args: IArguments, idx: number) => any\n/**\n * @see vformat\n * @param fmt\t\tformat string\n * @param offset\tstart offset of arguments\n * @param getParam\tget parameter on arguments callback\n */\nexport function formatter(fmt: string, offset?: number, getParam?: FormatParamLoader): Formatter {\n\tlet m,\n\t\tlastIdx = 0,\n\t\tmStart,\n\t\tmEnd,\n\t\tarr = [],\n\t\tcodes = [],\n\t\ti = 0\n\toffset = offset || 0\n\twhile ((m = formatReg.exec(fmt))) {\n\t\tmEnd = formatReg.lastIndex\n\t\tmStart = mEnd - m[0].length\n\t\tlastIdx < mStart && pushStr(cutStr(fmt, lastIdx, mStart), 0)\n\t\tif (m[1]) {\n\t\t\tcodes[i] = `arr[${i}](arguments, ${STATE_VAR})`\n\t\t\tarr[i++] = createFormatter(m, getParam || defaultGetParam)\n\t\t} else {\n\t\t\tpushStr(m[0].charAt(1), i)\n\t\t}\n\t\tlastIdx = mEnd\n\t}\n\tlastIdx < fmt.length && pushStr(cutStr(fmt, lastIdx), i)\n\treturn createFn(`return function(){var ${STATE_VAR} = [${offset}, ${offset}]; return ${codes.join(' + ')}}`, [\n\t\t'arr'\n\t])(arr)\n\n\tfunction pushStr(str, append) {\n\t\tif (append && arr[i - 1].match) {\n\t\t\tarr[i - 1] += str\n\t\t} else {\n\t\t\tcodes[i] = `arr[${i}]`\n\t\t\tarr[i++] = str\n\t\t}\n\t}\n}\n/*\nsetTimeout(() => {\n\tvar f,\n\t\tn = 100000\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tf = formatter(`{:.10=\"...\"}`)\n\t}\n\tconsole.timeEnd()\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tf('abbdddded')\n\t}\n\tconsole.timeEnd()\n\tconsole.time()\n\tfor (var i = 0; i < n; i++) {\n\t\tformat(`{:.10=\"...\"}`, 'abbdddded')\n\t}\n\tconsole.timeEnd()\n\tconsole.log(formatter(`{:.10=\"...\"}`).toString())\n}) */\n//========================================================================================\n/*                                                                                      *\n *                                  default formatters                                  *\n *                                                                                      */\n//========================================================================================\n\nfunction strFormatter(toStr: (val: any, flags: FormatFlags) => string): FormatCallback {\n\treturn function(val, flags, width, fill, precision, shortenSuffix) {\n\t\tconst str = toStr(val, flags)\n\t\treturn width > str.length\n\t\t\t? __pad(str, width, fill, flags & FORMAT_LEFT)\n\t\t\t: shorten(str, precision, shortenSuffix)\n\t}\n}\n\nfunction numFormatter(\n\tparseNum: (val: any) => number,\n\tgetPrefix: (num: number, flags: FormatFlags) => string,\n\ttoStr: (num: number, flags: FormatFlags, precision: number) => string,\n\tseparator: (numStr: string) => string\n): FormatCallback {\n\treturn function(val, flags, width, fill, precision) {\n\t\tconst num = parseNum(val)\n\t\tif (!isFinite(num)) return String(num)\n\n\t\tconst prefix = getPrefix(num, flags),\n\t\t\tplen = prefix.length\n\t\tlet str = toStr(num < 0 ? -num : num, flags, precision)\n\n\t\treturn flags & FORMAT_ZERO\n\t\t\t? ((str = prefix + pad(str, width - plen, '0')), flags & FORMAT_SEPARATOR ? separator(str) : str)\n\t\t\t: (flags & FORMAT_SEPARATOR && (str = separator(str)), pad(prefix + str, width, fill, flags & FORMAT_LEFT))\n\t}\n}\n\nfunction decimalPrefix(num: number, flags: FormatFlags): string {\n\treturn num < 0 ? '-' : flags & FORMAT_PLUS ? '+' : flags & FORMAT_SPACE ? ' ' : ''\n}\n\n//──── base formatter ───────────────────────────────────────────────────────────────────────\nconst BASE_RADIXS = {\n\tb: [2, binarySeparate],\n\to: [8, octalSeparate],\n\tu: [10, thousandSeparate],\n\tx: [16, hexSeparate]\n}\nconst BASE_PREFIXS = ['0b', '0o', '0x']\nfunction baseFormatter(type: string): FormatCallback {\n\tconst base = BASE_RADIXS[type.toLowerCase()],\n\t\tn = base[0],\n\t\t__toStr = num => num.toString(n),\n\t\ttoStr = type === 'X' ? num => upper(__toStr(num)) : __toStr\n\tlet xprefix = n === 10 ? '' : BASE_PREFIXS[n >> 3]\n\tcharCode(type) < 96 && (xprefix = upper(xprefix))\n\treturn numFormatter(v => v >>> 0, (num, flags) => (flags & FORMAT_XPREFIX ? xprefix : ''), toStr, base[1])\n}\n\n//──── float formatter ───────────────────────────────────────────────────────────────────\nfunction floatFormatter(type: string): FormatCallback {\n\tconst ____toStr = upper(type) === 'E' ? toExponential : type === 'f' ? toFixed : toPrecision,\n\t\t__toStr = (num, flags, precision) => ____toStr(num, precision) || String(num),\n\t\ttoStr = charCode(type) > 96 ? __toStr : (num, flags, precision) => upper(__toStr(num, flags, precision))\n\treturn numFormatter(parseFloat, decimalPrefix, toStr, thousandSeparate)\n}\n\nfunction toExponential(num: number, precision: number): string {\n\treturn num.toExponential(precision)\n}\nfunction toPrecision(num: number, precision: number): string {\n\treturn precision && num.toPrecision(precision)\n}\nfunction toFixed(num: number, precision: number): string {\n\treturn precision >= 0 && num.toFixed(precision)\n}\n\n//──── register formatters ───────────────────────────────────────────────────────────────\nextendFormatter({\n\ts: strFormatter(toStr),\n\tj: strFormatter(v =>\n\t\tv === undefined || isFn(v) || (v.toJSON && v.toJSON() === undefined) ? toStr(v) : JSON.stringify(v)\n\t),\n\tc(val: any) {\n\t\tconst num = val >> 0\n\t\treturn num > 0 ? String.fromCharCode(num) : ''\n\t},\n\td: numFormatter(val => val >> 0, decimalPrefix, toStr, thousandSeparate),\n\te: floatFormatter('e'),\n\tE: floatFormatter('E'),\n\tf: floatFormatter('f'),\n\tg: floatFormatter('g'),\n\tG: floatFormatter('G'),\n\tb: baseFormatter('b'),\n\tB: baseFormatter('B'),\n\to: baseFormatter('o'),\n\tO: baseFormatter('O'),\n\tu: baseFormatter('u'),\n\tx: baseFormatter('x'),\n\tX: baseFormatter('X')\n})\n\nfunction toStr(v: any): string {\n\treturn String(v)\n}\n","/**\n * Object.assign shim\n * @module utility/assign\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:22:13 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 09:28:49 GMT+0800 (China Standard Time)\n */\nimport { hasOwnProp } from './ownProp'\nimport { defaultKeyMap } from './dkeys'\n\n/**\n * @param prop\n * @param target\n * @param override\n * @return is assign\n */\nexport type AssignFilter = (prop: string, target: any, override: any) => boolean\n\n/**\n *\n * @param target\n * @param overrides\n * @param filter\n * @param startOffset \tstart offset in overrides, default: 0\n * @param endOffset \tend offset in overrides, default: overrides.length-1\n */\nexport function doAssign(\n\ttarget: any,\n\toverrides: any[] | IArguments,\n\tfilter: AssignFilter,\n\tstartOffset?: number,\n\tendOffset?: number\n): any {\n\tif (!target) {\n\t\ttarget = {}\n\t}\n\tconst l = endOffset || overrides.length\n\tlet i = startOffset || 0,\n\t\toverride: any,\n\t\tprop: string\n\tfor (; i < l; i++) {\n\t\tif ((override = overrides[i])) {\n\t\t\tfor (prop in override) {\n\t\t\t\tif (!defaultKeyMap[prop] && filter(prop, target, override)) {\n\t\t\t\t\ttarget[prop] = override[prop]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * assign properties\n * > Object.assign shim\n */\nexport function assign(target: any, ...args: any[]): any\nexport function assign(target: any): any {\n\treturn doAssign(target, arguments, defaultAssignFilter, 1)\n}\n\n/**\n * assign un-exist properties\n */\nexport function assignIf(target: any, ...args: any[]): any\nexport function assignIf(target: any): any {\n\treturn doAssign(target, arguments, assignIfFilter, 1)\n}\n\n/**\n * default assign filter\n * - property is owner in override\n * @see {AssignFilter}\n */\nexport function defaultAssignFilter(prop: string, target: any, override: any): boolean {\n\treturn hasOwnProp(override, prop)\n}\n\n/**\n * assign if filter\n * - property is owner in override\n * - property not in target object\n * @see {AssignFilter}\n */\nexport function assignIfFilter(prop: string, target: any, override: any): boolean {\n\treturn hasOwnProp(override, prop) && !(prop in target)\n}\n","/**\n * @module utility\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Jul 25 2018 15:24:47 GMT+0800 (China Standard Time)\n * @modified Thu Mar 14 2019 15:05:03 GMT+0800 (China Standard Time)\n */\nimport { eq, isReg, isTypedArray, isDate, isArray, isPrimitive } from './is'\nimport { hasOwnProp } from './ownProp'\nimport { create } from './create'\nimport { getConstructor } from './constructor'\nimport { defaultKeyMap } from './dkeys'\n\nconst REG_PROPS = ['source', 'global', 'ignoreCase', 'multiline']\n\nexport function deepEq(actual: any, expected: any): boolean {\n\treturn doDeepEq(actual, expected, eq, doDeepEqObj)\n}\n\nexport function doDeepEq(\n\tactual: any,\n\texpected: any,\n\teq: (actual: any, expected: any) => boolean,\n\teqObj: (actual: any, expected: any) => boolean\n) {\n\tif (eq(actual, expected)) return true\n\tif (actual && expected && getConstructor(actual) === getConstructor(expected)) {\n\t\tif (isPrimitive(actual)) return String(actual) === String(expected)\n\t\tif (isDate(actual)) return actual.getTime() === expected.getTime()\n\t\tif (isReg(actual)) return eqProps(actual, expected, REG_PROPS)\n\t\tif (isArray(actual)) return eqArray(actual, expected, eq, eqObj)\n\t\tif (isTypedArray(actual)) return eqTypeArray(actual, expected)\n\t\treturn eqObj(actual, expected)\n\t}\n\treturn false\n}\n\nexport function doDeepEqObj(actual: any, expected: any): boolean {\n\tconst cache = create(null)\n\tlet k: string\n\tfor (k in actual) {\n\t\tif (!defaultKeyMap[k] && notEqObjKey(actual, expected, k)) {\n\t\t\treturn false\n\t\t}\n\t\tcache[k] = true\n\t}\n\tfor (k in expected) {\n\t\tif (!cache[k] && !defaultKeyMap[k] && notEqObjKey(actual, expected, k)) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}\n\nfunction notEqObjKey(actual: any, expected: any, k: string): boolean {\n\treturn hasOwnProp(actual, k) ? !hasOwnProp(expected, k) || !deepEq(actual[k], expected[k]) : hasOwnProp(expected, k)\n}\n\nfunction eqProps(actual: any, expected: any, props: string[]): boolean {\n\tlet i = props.length\n\twhile (i--)\n\t\tif (actual[props[i]] !== expected[props[i]]) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n\nfunction eqTypeArray(actual: any, expected: any) {\n\tlet i = actual.length\n\tif (i !== expected.length) {\n\t\treturn false\n\t}\n\twhile (i--)\n\t\tif (actual[i] !== expected[i]) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n\nfunction eqArray(\n\tactual: any,\n\texpected: any,\n\teq: (actual: any, expected: any) => boolean,\n\teqObj: (actual: any, expected: any) => boolean\n) {\n\tlet i = actual.length\n\tif (i !== expected.length) {\n\t\treturn false\n\t}\n\twhile (i--)\n\t\tif (!doDeepEq(actual[i], expected[i], eq, eqObj)) {\n\t\t\treturn false\n\t\t}\n\treturn true\n}\n","/**\n * @module utility/assert\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Nov 28 2018 11:01:45 GMT+0800 (China Standard Time)\n * @modified Wed Apr 03 2019 12:46:25 GMT+0800 (China Standard Time)\n */\n\nimport {\n\teq,\n\tisBool,\n\tisNum,\n\tisStr,\n\tisBoolean,\n\tisNumber,\n\tisString,\n\tisDate,\n\tisNull,\n\tisUndef,\n\tisNil,\n\tisFn,\n\tisInt,\n\tisPrimitive,\n\tisReg,\n\tisArray,\n\tisArrayLike,\n\tisTypedArray,\n\tisObj,\n\tisBlank\n} from '../utility/is'\nimport { create } from './create'\nimport { upperFirst, escapeStr } from '../utility/string'\nimport { createFn, applyScope } from '../utility/fn'\nimport { eachObj, makeArray } from '../utility/collection'\nimport { formatter, FormatParamLoader, Formatter } from './format'\nimport { deepEq } from './deepEq'\nimport { TYPE_UNDEF, TYPE_FN, TYPE_STRING, TYPE_NUM, TYPE_BOOL, CONSTRUCTOR } from './consts'\n\nexport interface assert {\n\t(msg?: string, ...args: any[]): never\n\tis(actual: any, msg?: string, ...args: any[]): assert\n\tnot(actual: any, msg?: string, ...args: any[]): assert\n\n\teq(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tnotEq(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\n\teql(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\tnotEql(actual: any, expect: any, msg?: string, ...args: any[]): assert\n\n\tblank(actual: any, msg?: string, ...args: any[]): assert\n\tnotBlank(actual: any, msg?: string, ...args: any[]): assert\n\n\tnul(actual: any, msg?: string, ...args: any[]): assert\n\tnotNul(actual: any, msg?: string, ...args: any[]): assert\n\n\tnil(actual: any, msg?: string, ...args: any[]): assert\n\tnotNil(actual: any, msg?: string, ...args: any[]): assert\n\n\tundef(actual: any, msg?: string, ...args: any[]): assert\n\tnotUndef(actual: any, msg?: string, ...args: any[]): assert\n\n\tbool(actual: any, msg?: string, ...args: any[]): assert\n\tnotBool(actual: any, msg?: string, ...args: any[]): assert\n\n\tnum(actual: any, msg?: string, ...args: any[]): assert\n\tnotNum(actual: any, msg?: string, ...args: any[]): assert\n\n\tint(actual: any, msg?: string, ...args: any[]): assert\n\tnotInt(actual: any, msg?: string, ...args: any[]): assert\n\n\tstr(actual: any, msg?: string, ...args: any[]): assert\n\tnotStr(actual: any, msg?: string, ...args: any[]): assert\n\n\tfn(actual: any, msg?: string, ...args: any[]): assert\n\tnotFn(actual: any, msg?: string, ...args: any[]): assert\n\n\tprimitive(actual: any, msg?: string, ...args: any[]): assert\n\tnotPrimitive(actual: any, msg?: string, ...args: any[]): assert\n\n\tboolean(actual: any, msg?: string, ...args: any[]): assert\n\tnotBoolean(actual: any, msg?: string, ...args: any[]): assert\n\n\tnumber(actual: any, msg?: string, ...args: any[]): assert\n\tnotNumber(actual: any, msg?: string, ...args: any[]): assert\n\n\tstring(actual: any, msg?: string, ...args: any[]): assert\n\tnotString(actual: any, msg?: string, ...args: any[]): assert\n\n\tdate(actual: any, msg?: string, ...args: any[]): assert\n\tnotDate(actual: any, msg?: string, ...args: any[]): assert\n\n\treg(actual: any, msg?: string, ...args: any[]): assert\n\tnotReg(actual: any, msg?: string, ...args: any[]): assert\n\n\tarray(actual: any, msg?: string, ...args: any[]): assert\n\tnotArray(actual: any, msg?: string, ...args: any[]): assert\n\n\ttypedArray(actual: any, msg?: string, ...args: any[]): assert\n\tnotTypedArray(actual: any, msg?: string, ...args: any[]): assert\n\n\tarrayLike(actual: any, msg?: string, ...args: any[]): assert\n\tnotArrayLike(actual: any, msg?: string, ...args: any[]): assert\n\n\tobj(actual: any, msg?: string, ...args: any[]): assert\n\tnotObj(actual: any, msg?: string, ...args: any[]): assert\n\n\tnan(actual: any, msg?: string, ...args: any[]): assert\n\tnotNan(actual: any, msg?: string, ...args: any[]): assert\n\n\tfinite(actual: number | string, msg?: string, ...args: any[]): assert\n\tnotFinite(actual: any, msg?: string, ...args: any[]): assert\n\n\tless(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tnotLess(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\n\tgreater(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\tnotGreater(actual: number, expect: number, msg?: string, ...args: any[]): assert\n\n\tmatch(actual: string, expect: any, msg?: string, ...args: any[]): assert\n\tnotMatch(actual: string, expect: any, msg?: string, ...args: any[]): assert\n\n\trange(actual: number, start: number, end: number, msg?: string, ...args: any[]): assert\n\tnotRange(actual: number, start: number, end: number, msg?: string, ...args: any[]): assert\n\n\tthrow(fn: () => any, err?: Error | string, msg?: string, ...args: any[]): assert\n\tnotThrow(fn: () => any, err?: Error | string, msg?: string, ...args: any[]): assert\n\n\texecutor<T extends (...args: any[]) => any>(fn: T, maxCall: number, msg?: string): T & { called: number }\n}\n\nconst formatters: { [msg: string]: Formatter } = create(null)\nfunction mkError(Err: { new (message?: string): Error }, msg: string, args: any[] | IArguments, msgIdx: number): Error {\n\tconst fmtter =\n\t\tformatters[msg] ||\n\t\t(formatters[msg] = formatter(msg, msgIdx, (args, offset) => args[0][offset >= msgIdx ? offset + 1 : offset]))\n\treturn popErrStack(new Err(fmtter(args)), 2)\n}\n\nexport function popErrStack(err: Error, i: number): Error {\n\twhile (i-- > 0) {\n\t\terr.stack = err.stack.replace(/(\\n\\s{4}at[^\\n]*)/, '')\n\t}\n\treturn err\n}\n\nexport const assert = function assert(msg?: string): never {\n\tthrow mkError(Error, msg || 'Error', arguments, 0)\n} as assert\n\nconst ERROR = new Error()\nfunction mkThrowAssertor(th: boolean, dmsg: string) {\n\treturn function throwErr(fn: () => any, expect: Error | string, msg?: string) {\n\t\tlet err: Error\n\t\ttry {\n\t\t\tfn()\n\t\t} catch (e) {\n\t\t\terr = e\n\t\t}\n\t\tif (\n\t\t\tth !=\n\t\t\t(err &&\n\t\t\t\t(!expect ||\n\t\t\t\t\t(isStr(expect)\n\t\t\t\t\t\t? expect === err.message\n\t\t\t\t\t\t: err[CONSTRUCTOR] === (expect as Error)[CONSTRUCTOR] &&\n\t\t\t\t\t\t  (!(expect as Error).message || (expect as Error).message === err.message))))\n\t\t) {\n\t\t\targuments[0] = err\n\t\t\t!expect && (arguments[2] = ERROR)\n\t\t\tthrow mkError(Error, msg || dmsg, arguments, 2)\n\t\t}\n\t\treturn assert\n\t}\n}\n\nassert.throw = mkThrowAssertor(true, `expected catched error {0s} is {1s}`)\nassert.notThrow = mkThrowAssertor(false, `expected catched error {0s} is not {1s}`)\n\n/**\n * @param name \t\tname of the assertor\n * @param condition condition, function or expression\n * @param args \t\tname or length of the parameters\n * @param dmsg  \tthe default message\n * @param Err  \t\tthe Error Constructor, default Error\n */\nfunction mkAssertor<T extends (...args: any[]) => assert>(\n\tname: string,\n\tcondition: string | ((...args: any) => boolean) | [string | ((...args: any) => boolean), string?],\n\targs: string | string[] | number,\n\tdmsg: string,\n\tErr?: { new (message?: string): Error }\n): T {\n\tconst params: string[] = isStr(args)\n\t\t\t? (args as string).split(/,/g)\n\t\t\t: isNum(args)\n\t\t\t? makeArray(args as number, i => `arg${i + 1}`)\n\t\t\t: (args as string[]),\n\t\tparamStr = params.join(', '),\n\t\tcond = isArray(condition) ? condition[0] : condition,\n\t\texpr = (isArray(condition) ? condition[1] : '') + (isStr(cond) ? `(${cond})` : `cond(${paramStr})`)\n\n\treturn (assert[name] = createFn(\n\t\t`return function assert${upperFirst(name)}(${paramStr}, msg){\n\tif (${expr})\n\t\tthrow mkErr(Err, msg || dmsg, arguments, ${params.length});\n\treturn assert;\n}`,\n\t\t['Err', 'mkErr', 'dmsg', 'cond', 'assert']\n\t)(Err || Error, mkError, dmsg, cond, assert))\n}\n\n// [condition, argcount?, [msg, not msg], Error]\nfunction mkAssertors(apis: {\n\t[method: string]: [\n\t\tstring | ((...args: any) => boolean), // condition, function or expression\n\t\tstring | number | string[], // arguments\n\t\t[string, string], // expect or [err msg, not err msg]\n\t\t({ new (message?: string): Error })? // the Error Constructor, default Error\n\t]\n}) {\n\teachObj(apis, (desc, name) => {\n\t\tconst condition = desc[0],\n\t\t\targs = desc[1],\n\t\t\tmsg = desc[2],\n\t\t\tErr = desc[3] || TypeError\n\n\t\tmsg[0] && mkAssertor(name, [condition, '!'], args, msg[0], Err)\n\t\tmsg[1] && mkAssertor('not' + upperFirst(name), condition, args, msg[1], Err)\n\t})\n}\n\nconst UNDEFINED = TYPE_UNDEF,\n\tBOOLEAN = TYPE_BOOL,\n\tNUMBER = TYPE_NUM,\n\tSTRING = TYPE_STRING,\n\tFUNCTION = TYPE_FN,\n\tNULL = 'null',\n\tINTEGER = 'integer',\n\tARRAY = 'Array',\n\tTYPED_ARRAY = 'TypedArray'\n\nmkAssertor('is', '!o', 'o', expectMsg('Exist'))\nmkAssertor('not', 'o', 'o', expectMsg('Not Exist'))\nmkAssertors({\n\teq: [eq, 2, mkMsg(objFormatter(1))],\n\teql: [deepEq, 2, mkMsg(objFormatter(1))],\n\tnul: [isNull, 1, mkMsg(NULL)],\n\tnil: [isNil, 1, mkMsg(typeExpect(NULL, UNDEFINED))],\n\tundef: [isUndef, 1, mkMsg(UNDEFINED)],\n\tbool: [isBool, 1, mkMsg(BOOLEAN)],\n\tnum: [isNum, 1, mkMsg(NUMBER)],\n\tint: [isInt, 1, mkMsg(INTEGER)],\n\tstr: [isStr, 1, mkMsg(STRING)],\n\tfn: [isFn, 1, mkMsg(FUNCTION)],\n\tprimitive: [\n\t\tisPrimitive,\n\t\t1,\n\t\tmkMsg(`Primitive type(${typeExpect(NULL, UNDEFINED, BOOLEAN, NUMBER, INTEGER, STRING, FUNCTION)})`)\n\t],\n\tboolean: [isBoolean, 1, mkMsg(packTypeExpect(BOOLEAN))],\n\tnumber: [isNumber, 1, mkMsg(packTypeExpect(NUMBER))],\n\tstring: [isString, 1, mkMsg(packTypeExpect(STRING))],\n\tdate: [isDate, 1, mkMsg('Date')],\n\treg: [isReg, 1, mkMsg('RegExp')],\n\tarray: [isArray, 1, mkMsg(ARRAY)],\n\ttypedArray: [isTypedArray, 1, mkMsg('TypedArray')],\n\tarrayLike: [\n\t\tisArrayLike,\n\t\t1,\n\t\tmkMsg(typeExpect(ARRAY, packTypeExpect(STRING), 'Arguments', TYPED_ARRAY, 'NodeList', 'HTMLCollection'))\n\t],\n\tobj: [isObj, 1, mkMsg('Object')],\n\tnan: [isNaN, 1, mkMsg('NaN')],\n\tfinite: [isFinite, 1, mkMsg('Finite')],\n\tblank: [isBlank, 1, mkMsg('Blank')],\n\tless: ['o<t', 'o,t', mkMsg(objFormatter(1), 'less than')],\n\tgreater: ['o>t', 'o,t', mkMsg(objFormatter(1), 'greater than')],\n\tmatch: ['reg.test(str)', 'str,reg', mkMsg(objFormatter(1), 'match')],\n\trange: ['o>=s&&o<e', 'o,s,e', mkMsg(`[{1} - {2})`)]\n})\n\nfunction mkMsg(expect: string, to?: string): [string, string] {\n\treturn [expectMsg(expect, false, to), expectMsg(expect, true, to)]\n}\nfunction expectMsg(expect: string, not?: boolean, to?: string): string {\n\treturn `Expected ${objFormatter(0)} ${not ? 'not ' : ''}${to || 'to'} ${expect}`\n}\n\nfunction objFormatter(idx: number): string {\n\treturn `{${idx}:.80=\"...\"j}`\n}\n\nfunction packTypeExpect(base: string, all?: boolean): string {\n\treturn all ? typeExpect(base, upperFirst(base)) : upperFirst(base)\n}\nfunction typeExpect(...types: string[]): string\nfunction typeExpect(): string {\n\treturn Array.prototype.join.call(arguments, ' | ')\n}\n","/**\n * Double Linked List\n * @module utility/List\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Wed Apr 03 2019 19:03:02 GMT+0800 (China Standard Time)\n */\n\nimport { bind } from '../fn'\nimport { defPropValue } from '../defProp'\nimport { assert } from '../assert'\nimport { EMPTY_FN } from '../consts'\nimport { addDefaultKey } from '../dkeys'\n\nconst DEFAULT_BINDING = addDefaultKey('__list__')\n\ninterface ListNode<T> extends Array<any> {\n\t0: T // target\n\t1: ListNode<T> // prev node\n\t2: ListNode<T> // next node\n\t3: List<T> // list\n\t4: number // version\n\ttoJSON?: () => any\n}\n\nexport class List<T> {\n\tstatic readonly binding: string = DEFAULT_BINDING\n\n\treadonly binding: string\n\tprivate __head?: ListNode<T>\n\tprivate __tail?: ListNode<T>\n\tprivate __length: number = 0\n\tprivate __scaning: boolean = false\n\tprivate __lazyRemoves?: ListNode<T>[]\n\tprivate __ver: number = 0\n\tconstructor(binding?: string) {\n\t\tthis.binding = binding || DEFAULT_BINDING\n\t}\n\tsize(): number {\n\t\treturn this.__length\n\t}\n\thas(obj: T): boolean {\n\t\tconst node: ListNode<T> = obj[this.binding]\n\t\treturn node ? node[0] === obj && node[3] === this : false\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tadd(obj: T): number {\n\t\treturn this.__insert(obj, this.__tail)\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\taddFirst(obj: T): number {\n\t\treturn this.__insert(obj)\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tinsertAfter(obj: T, target?: T): number {\n\t\treturn this.__insert(obj, target && this.__getNode(target))\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tinsertBefore(obj: T, target?: T): number {\n\t\treturn this.__insert(obj, target && this.__getNode(target)[1])\n\t}\n\t/**\n\t *\n\t * @param objs\n\t * @return new length\n\t */\n\taddAll(objs: T[]): number {\n\t\treturn this.__insertAll(objs, this.__tail)\n\t}\n\taddFirstAll(objs: T[]): number {\n\t\treturn this.__insertAll(objs)\n\t}\n\tinsertAfterAll(objs: T[], target?: T): number {\n\t\treturn this.__insertAll(objs, target && this.__getNode(target))\n\t}\n\tinsertBeforeAll(objs: T[], target?: T): number {\n\t\treturn this.__insertAll(objs, target && this.__getNode(target)[1])\n\t}\n\tprev(obj: T): T {\n\t\treturn this.__siblingObj(obj, 1)\n\t}\n\tnext(obj: T): T {\n\t\treturn this.__siblingObj(obj, 2)\n\t}\n\tfirst(): T {\n\t\tconst node: ListNode<T> = this.__head\n\t\treturn node && node[0]\n\t}\n\tlast(): T {\n\t\tconst node: ListNode<T> = this.__tail\n\t\treturn node && node[0]\n\t}\n\teach(cb: (obj: T) => boolean | void, scope?: any) {\n\t\tif (this.__length) {\n\t\t\tassert.not(this.__scaning, 'Nested calls are not allowed.')\n\t\t\tthis.__scaning = true\n\n\t\t\tconst __ver = ++this.__ver\n\n\t\t\tcb = bind(cb, scope)\n\t\t\tvar node = this.__head\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this && (__ver === node[4] || cb(node[0]) === false)) break\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t\tthis.__doLazyRemove()\n\t\t\tthis.__scaning = false\n\t\t}\n\t}\n\teachUnsafe(cb: (obj: T) => boolean | void, scope?: any) {\n\t\tif (this.__length) {\n\t\t\tvar node = this.__head\n\t\t\twhile (node) {\n\t\t\t\tif (node[3] === this && cb(node[0]) === false) break\n\t\t\t\tnode = node[2]\n\t\t\t}\n\t\t}\n\t}\n\ttoArray(): T[] {\n\t\tconst array: T[] = new Array(this.__length)\n\t\tlet node = this.__head,\n\t\t\ti = 0\n\t\twhile (node) {\n\t\t\tif (node[3] === this) array[i++] = node[0]\n\t\t\tnode = node[2]\n\t\t}\n\t\treturn array\n\t}\n\t/**\n\t *\n\t * @param obj\n\t * @return new length\n\t */\n\tremove(obj: T): number {\n\t\treturn this.__remove(this.__getNode(obj))\n\t}\n\tclean() {\n\t\tif (this.__length) {\n\t\t\tif (this.__scaning) {\n\t\t\t\tvar node = this.__head\n\t\t\t\twhile (node) {\n\t\t\t\t\tnode[3] === this && this.__lazyRemove(node)\n\t\t\t\t\tnode = node[2]\n\t\t\t\t}\n\t\t\t\tthis.__length = 0\n\t\t\t} else {\n\t\t\t\tthis.__clean()\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate __initNode(obj: T): ListNode<T> {\n\t\tconst { binding } = this\n\t\tlet node: ListNode<T> = obj[binding]\n\t\tif (node && node[0] === obj) {\n\t\t\tif (node[3] === this) {\n\t\t\t\tthis.__remove(node)\n\t\t\t\treturn this.__initNode(obj)\n\t\t\t} else if (node[3]) {\n\t\t\t\tassert('Object is still in some List')\n\t\t\t}\n\t\t\tnode[3] = this\n\t\t\tnode[4] = this.__ver\n\t\t} else {\n\t\t\tnode = [obj, , , this, this.__ver]\n\t\t\tnode.toJSON = EMPTY_FN\n\t\t\tdefPropValue(obj, binding, node, false)\n\t\t}\n\t\treturn node\n\t}\n\n\tprivate __getNode(obj: T): ListNode<T> {\n\t\tconst node: ListNode<T> = obj[this.binding]\n\t\tassert.is(node && node[0] === obj && node[3] === this, 'Object is not in this List')\n\t\treturn node\n\t}\n\n\tprivate __siblingObj(obj: T, siblingIdx: number): T {\n\t\tconst node: ListNode<T> = this.__getNode(obj)\n\t\tlet sibling: ListNode<T> = node[siblingIdx]\n\t\tif (sibling) {\n\t\t\twhile (!sibling[3]) {\n\t\t\t\tsibling = sibling[siblingIdx]\n\t\t\t\tif (!sibling) return\n\t\t\t}\n\t\t\treturn sibling[0]\n\t\t}\n\t}\n\n\tprivate __doInsert(nodeHead: ListNode<T>, nodeTail: ListNode<T>, len: number, prev?: ListNode<T>): number {\n\t\tlet next: ListNode<T>\n\t\tnodeHead[1] = prev\n\t\tif (prev) {\n\t\t\tnodeTail[2] = next = prev[2]\n\t\t\tprev[2] = nodeHead\n\t\t} else {\n\t\t\tnodeTail[2] = next = this.__head\n\t\t\tthis.__head = nodeHead\n\t\t}\n\t\tif (next) next[1] = nodeTail\n\t\telse this.__tail = nodeTail\n\t\treturn (this.__length += len)\n\t}\n\n\tprivate __insert(obj: T, prev?: ListNode<T>): number {\n\t\tconst node = this.__initNode(obj)\n\t\treturn this.__doInsert(node, node, 1, prev)\n\t}\n\n\tprivate __insertAll(objs: T[], prev?: ListNode<T>): number {\n\t\tlet l = objs.length\n\t\tif (l) {\n\t\t\tconst head = this.__initNode(objs[0])\n\t\t\tvar __prev = head,\n\t\t\t\ttail = head,\n\t\t\t\ti = 1\n\t\t\tfor (; i < l; i++) {\n\t\t\t\ttail = this.__initNode(objs[i])\n\t\t\t\ttail[1] = __prev\n\t\t\t\t__prev[2] = tail\n\t\t\t\t__prev = tail\n\t\t\t}\n\t\t\treturn this.__doInsert(head, tail, l, prev)\n\t\t}\n\t\treturn -1\n\t}\n\n\tprivate __remove(node: ListNode<T>): number {\n\t\tthis.__scaning ? this.__lazyRemove(node) : this.__doRemove(node)\n\t\treturn --this.__length\n\t}\n\n\tprivate __lazyRemove(node: ListNode<T>): void {\n\t\tconst { __lazyRemoves: lazyRemoves } = this\n\t\tnode[0][this.binding] = null // unbind this node\n\t\tnode[3] = null\n\t\tif (lazyRemoves) {\n\t\t\tlazyRemoves.push(node)\n\t\t} else {\n\t\t\tthis.__lazyRemoves = [node]\n\t\t}\n\t}\n\n\tprivate __doLazyRemove() {\n\t\tconst { __lazyRemoves: lazyRemoves } = this\n\t\tif (lazyRemoves) {\n\t\t\tvar len = lazyRemoves.length\n\t\t\tif (len) {\n\t\t\t\tif (this.__length) {\n\t\t\t\t\twhile (len--) this.__doRemove(lazyRemoves[len])\n\t\t\t\t} else {\n\t\t\t\t\tthis.__clean()\n\t\t\t\t}\n\t\t\t\tlazyRemoves.length = 0\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate __doRemove(node: ListNode<T>) {\n\t\tconst prev = node[1],\n\t\t\tnext = node[2]\n\t\tif (prev) {\n\t\t\tprev[2] = next\n\t\t} else {\n\t\t\tthis.__head = next\n\t\t}\n\t\tif (next) {\n\t\t\tnext[1] = prev\n\t\t} else {\n\t\t\tthis.__tail = prev\n\t\t}\n\t\tnode.length = 1\n\t}\n\n\tprivate __clean() {\n\t\tlet node: ListNode<T>,\n\t\t\tnext = this.__head\n\t\twhile ((node = next)) {\n\t\t\tnext = node[2]\n\t\t\tnode.length = 1\n\t\t}\n\t\tthis.__head = null\n\t\tthis.__tail = null\n\t\tthis.__length = 0\n\t}\n}\n","/**\n * Function List\n * @module utility/List\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Sat Mar 30 2019 16:11:18 GMT+0800 (China Standard Time)\n */\n\nimport { List } from './List'\nimport { create } from '../create'\nimport { defPropValue } from '../defProp'\nimport { addDefaultKey } from '../dkeys'\n\nconst DEFAULT_FN_BINDING = addDefaultKey('__flist_id__')\nconst DEFAULT_SCOPE_BINDING = addDefaultKey(DEFAULT_FN_BINDING)\n\ntype FnNode<T extends Function> = [string, T, any, any]\nexport class FnList<T extends Function> {\n\tstatic readonly fnBinding: string = DEFAULT_FN_BINDING\n\tstatic readonly scopeBinding: string = DEFAULT_SCOPE_BINDING\n\n\treadonly fnBinding: string\n\treadonly scopeBinding: string\n\tprivate readonly __list: List<FnNode<T>>\n\tprivate __nodeMap: { [key: string]: FnNode<T> }\n\n\tconstructor(fnBinding?: string, scopeBinding?: string) {\n\t\tthis.__nodeMap = create(null)\n\t\tthis.__list = new List()\n\t\tthis.fnBinding = fnBinding || DEFAULT_FN_BINDING\n\t\tthis.scopeBinding = scopeBinding || DEFAULT_SCOPE_BINDING\n\t}\n\t/**\n\t * add executable function\n\t * @param fn\t\tfunction\n\t * @param scope\t\tscope of function\n\t * @param data\t\tuser data of [function + scope]\n\t * @return executable function id, can remove executable function by id: {@link FnList#removeId}\n\t */\n\tadd(fn: T, scope?: any, data?: any): string {\n\t\tscope = parseScope(scope)\n\t\tconst { __list: list, __nodeMap: nodeMap } = this\n\t\tconst id = this.id(fn, scope)\n\t\tlet node = nodeMap[id]\n\t\tif (!node) {\n\t\t\tnode = [id, fn, scope, data]\n\t\t\tif (list.add(node)) nodeMap[id] = node\n\t\t\treturn id\n\t\t}\n\t}\n\n\t/**\n\t * remove executable function by id\n\t *\n\t * @param id\n\t */\n\tremoveId(id: string): number {\n\t\tconst { __list: list, __nodeMap: nodeMap } = this\n\t\tconst node = nodeMap[id]\n\t\tif (node) {\n\t\t\tnodeMap[id] = undefined\n\t\t\treturn list.remove(node)\n\t\t}\n\t\treturn -1\n\t}\n\tremove(fn: T, scope?: any): number {\n\t\treturn this.removeId(this.id(fn, parseScope(scope)))\n\t}\n\thas(fn: T, scope?: any): string {\n\t\tconst id = this.id(fn, parseScope(scope))\n\t\treturn this.__nodeMap[id] && id\n\t}\n\thasId(id: string): boolean {\n\t\treturn !!this.__nodeMap[id]\n\t}\n\tsize(): number {\n\t\treturn this.__list.size()\n\t}\n\tclean() {\n\t\tthis.__nodeMap = create(null)\n\t\tthis.__list.clean()\n\t}\n\teach(cb: (fn: T, scope: any, data: any, __node: FnNode<T>) => boolean | void, scope?: any) {\n\t\tcb = cb.bind(scope)\n\t\tthis.__list.each(node => cb(node[1], node[2], node[3], node))\n\t}\n\teachUnsafe(cb: (fn: T, scope: any, data: any, __node: FnNode<T>) => boolean | void, scope?: any) {\n\t\tthis.__list.eachUnsafe(node => cb(node[1], node[2], node[3], node))\n\t}\n\tid(fn: T, scope?: any): string {\n\t\tconst { fnBinding, scopeBinding } = this\n\n\t\tlet fnId = fn[fnBinding],\n\t\t\tscopeId = scope ? scope[scopeBinding] : DEFAULT_SCOPE_ID\n\t\tif (!fnId) fnId = defPropValue(fn, fnBinding, ++fnIdGenerator, false, false, false)\n\t\tif (!scopeId) scopeId = defPropValue(scope, scopeBinding, ++scopeIdGenerator, false, false, false)\n\t\treturn `${fnId}#${scopeId}`\n\t}\n}\n\nconst DEFAULT_SCOPE_ID = 1\nlet scopeIdGenerator = 1,\n\tfnIdGenerator = 0\n\nfunction parseScope(scope: any): any {\n\treturn !scope ? undefined : scope\n}\n","/**\n * @module utility/List\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:06:18 GMT+0800 (China Standard Time)\n * @modified Tue Nov 27 2018 19:07:34 GMT+0800 (China Standard Time)\n */\n\nexport * from './List'\nexport * from './FnList'\n","/**\n * String format\n * @module utility/nextTick\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 11 2017 14:35:32 GMT+0800 (China Standard Time)\n * @modified Wed Apr 03 2019 19:45:47 GMT+0800 (China Standard Time)\n */\nimport { FnList } from './List'\nimport { TYPE_FN } from './consts'\n\nlet next: () => void\nif (typeof MutationObserver === TYPE_FN) {\n\t// chrome18+, safari6+, firefox14+,ie11+,opera15\n\tconst textNode = document.createTextNode(v)\n\n\tnew MutationObserver(flush).observe(textNode, {\n\t\tcharacterData: true\n\t})\n\tvar v = ''\n\tnext = function() {\n\t\ttextNode.data = v = v ? '0' : ''\n\t}\n} else {\n\tnext = function() {\n\t\tsetTimeout(flush, 0)\n\t}\n}\n\nconst ticks = [new FnList<() => void>(), new FnList<() => void>()]\nlet pending: FnList<() => void>,\n\ti = 0\n\nfunction executeTick(fn: () => void, scope?: any) {\n\tscope ? fn.call(scope) : fn()\n}\n\nfunction flush() {\n\tconst t = pending\n\tpending = null\n\tt.each(executeTick)\n\tt.clean()\n}\n\nexport function nextTick(fn: () => void, scope?: any): string {\n\tif (!pending) {\n\t\tpending = ticks[++i & 1]\n\t\tnext()\n\t}\n\treturn pending.add(fn, scope)\n}\n\nexport function clearTick(fn: () => void, scope?: any) {\n\treturn pending.remove(fn, scope)\n}\n\nexport function clearTickId(id: string) {\n\treturn pending.removeId(id)\n}\n","/**\n * @module utility/Source\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Mon Dec 17 2018 10:41:21 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 14:37:32 GMT+0800 (China Standard Time)\n */\n\nimport { pad } from './format'\nimport { escapeStr } from './string'\n\nconst LINE_REG = /([^\\n]+)?(\\n|$)/g\nexport class Source {\n\treadonly buff: string\n\treadonly len: number\n\tprivate __lines: ([number, string])[]\n\tprivate __linePos: number\n\tconstructor(buff: string) {\n\t\tthis.buff = buff\n\t\tthis.len = buff.length\n\t\tthis.__lines = []\n\t\tthis.__linePos = 0\n\t}\n\tposition(offset: number): [number, number, string] {\n\t\tconst { buff, len, __lines: lines, __linePos: linePos } = this\n\t\tlet i = lines.length,\n\t\t\tp: number\n\t\tif (offset < linePos) {\n\t\t\twhile (i--) {\n\t\t\t\tp = offset - lines[i][0]\n\t\t\t\tif (p >= 0) return [i + 1, p, lines[i][1]]\n\t\t\t}\n\t\t} else {\n\t\t\tif (linePos < len) {\n\t\t\t\tvar m: string[]\n\t\t\t\tLINE_REG.lastIndex = p = linePos\n\t\t\t\twhile ((m = LINE_REG.exec(buff))) {\n\t\t\t\t\tlines[i++] = [p, m[1] || '']\n\t\t\t\t\tp = LINE_REG.lastIndex\n\t\t\t\t\tif (!p || offset < p) break\n\t\t\t\t}\n\t\t\t\tthis.__linePos = p || len\n\t\t\t}\n\t\t\treturn i ? [i, (offset > len ? len : offset) - lines[i - 1][0], lines[i - 1][1]] : [1, 0, '']\n\t\t}\n\t}\n\tsource(escape?: boolean): string {\n\t\tconst { buff } = this\n\t\tlet line = 1,\n\t\t\ttoSourceStr = escape ? escapeSourceStr : sourceStr\n\n\t\treturn buff.replace(LINE_REG, (m, s, t) => pad(String(line++), 3) + ': ' + toSourceStr(m, s, t))\n\t}\n}\n\nfunction sourceStr(m: string, s: string, t: string) {\n\treturn m || ''\n}\n\nfunction escapeSourceStr(m: string, s: string, t: string) {\n\treturn s ? escapeStr(s) + t : t\n}\n","/**\n * utilities for ast builder\n *\n * @module utility/AST\n * @author Tao Zeng (tao.zeng.zt@qq.com)\n * @created 2018-11-09 13:22:51\n * @modified 2018-11-09 13:22:51 by Tao Zeng (tao.zeng.zt@qq.com)\n */\nimport { isStr, isArray, isInt, isNum } from '../is'\nimport { charCode } from '../string'\n\nexport function genCharCodes(start: number | string, end: number | string, ignoreCase?: boolean) {\n\tlet s: number = isNum(start) ? (start as number) : charCode(start as string),\n\t\te: number = isNum(end) ? (end as number) : charCode(end as string),\n\t\tcodes: number[] = new Array(e - s),\n\t\ti = 0\n\tif (ignoreCase) {\n\t\tvar c: number\n\t\tfor (; s <= e; s++) {\n\t\t\tcodes[i++] = s\n\t\t\tc = getAnotherCode(s)\n\t\t\tcodes[i++] = c\n\t\t}\n\t} else {\n\t\tfor (; s <= e; s++) codes[i++] = s\n\t}\n\treturn codes\n}\n\n/**\n * each char codes\n */\nexport function eachCharCodes(codes: number | string | any[], ignoreCase: boolean, cb: (code: number) => void) {\n\tlet i: number\n\tif (isStr(codes)) {\n\t\ti = (codes as any).length\n\t\twhile (i--) eachCharCode(charCode(codes as any, i), ignoreCase, cb)\n\t} else if (isArray(codes)) {\n\t\ti = (codes as any).length\n\t\twhile (i--) eachCharCodes((codes as any)[i], ignoreCase, cb)\n\t} else if (isInt(codes)) {\n\t\teachCharCode(codes as any, ignoreCase, cb)\n\t}\n}\nfunction eachCharCode(code: number, ignoreCase: boolean, cb: (code: number) => void): void {\n\tcb(code)\n\tif (ignoreCase) {\n\t\tvar c = getAnotherCode(code)\n\t\tc && cb(c)\n\t}\n}\n\nfunction getAnotherCode(code: number) {\n\treturn code <= 90 ? (code >= 65 ? code + 32 : 0) : code <= 122 ? code - 32 : 0\n}\n","/**\n * @module utility/mixin\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 18 2018 16:41:03 GMT+0800 (China Standard Time)\n * @modified Wed Mar 13 2019 20:03:31 GMT+0800 (China Standard Time)\n */\n\nimport { hasOwnProp } from './ownProp'\n\nexport function mixin<B>(behaviour: B) {\n\treturn function mixin<M extends B, T extends { new (...args: Array<any>): M }>(Class: T) {\n\t\tconst proto = Class.prototype\n\t\tfor (var k in behaviour) if (hasOwnProp(behaviour, k)) proto[k] = behaviour[k]\n\t\treturn Class\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 17:53:14 GMT+0800 (China Standard Time)\n */\nimport { MatchContext } from './MatchContext'\nimport { eachCharCodes } from './util'\nimport { assert } from '../assert'\nimport { isBool } from '../is'\nimport { mixin } from '../mixin'\n\n@mixin({ $ruleErr: true })\nexport class MatchError {\n\treadonly $ruleErr: boolean\n\treadonly rule: Rule\n\treadonly context: MatchContext\n\treadonly source: MatchError\n\treadonly target: MatchError\n\tcapturable: boolean\n\treadonly pos: number\n\tmsg: string\n\tconstructor(msg: string, capturable: boolean, source: MatchError, context: MatchContext, rule: Rule) {\n\t\t!isBool(capturable) && (capturable = rule.capturable)\n\t\tthis.capturable = capturable && source ? source.capturable : capturable\n\t\tthis.msg = msg\n\t\tthis.source = source\n\t\tthis.target = source ? source.target : this\n\t\tthis.context = context\n\t\tthis.rule = rule\n\t\tthis.pos = context.startPos()\n\t}\n\tposition(): [number, number, string] {\n\t\treturn this.context.source.position(this.pos)\n\t}\n}\n\nexport type onMatchCallback = (data: any, len: number, context: MatchContext, rule: Rule) => MatchError | string | void\nexport type onErrorCallback = (err: MatchError, context: MatchContext, rule: Rule) => MatchError | string | void\n\nfunction defaultErr(err: MatchError) {\n\treturn err\n}\n\nfunction defaultMatch(data: any, len: number, context: MatchContext) {\n\tcontext.add(data)\n}\n\nexport type RuleOptions = {\n\t/**\n\t * error is capturable\n\t */\n\tcapturable?: boolean\n\t/**\n\t * matched callback\n\t */\n\tmatch?: (data: any, len: number, context: MatchContext, rule: Rule) => MatchError | string | void\n\t/**\n\t * error callback\n\t */\n\terr?: (err: MatchError, context: MatchContext, rule: Rule) => MatchError | string | void\n}\n\nlet idGen = 0\n/**\n * Abstract Rule\n */\n@mixin({ $rule: true })\nexport class Rule {\n\treadonly $rule: boolean\n\t// rule type (for debug)\n\ttype: string\n\t// rule id\n\treadonly id: number\n\t// rule name\n\treadonly name: string\n\t// error is capturable\n\treadonly capturable: boolean\n\t// rule expression (for debug)\n\tprotected expr: string\n\t// rule EXPECT content (for debug)\n\tprotected EXPECT: string\n\t// matched callback\n\treadonly onMatch: onMatchCallback\n\t// error callback\n\treadonly onErr: onErrorCallback\n\t// index of start codes\n\tprotected startCodeIdx: any[]\n\t// start codes\n\tprotected startCodes: number[]\n\n\t/**\n\t * @param name\t\t\trule name\n\t * @param capturable\terror is capturable\n\t * @param onMatch\t\tcallback on matched, allow modify the match result or return an error\n\t * @param onErr\t\t\tcallback on Error, allow to ignore error or modify error message or return new error\n\t */\n\tconstructor(name: string, options: RuleOptions) {\n\t\tthis.id = idGen++\n\t\tthis.name = name\n\t\tthis.capturable = options.capturable !== false\n\t\tthis.onMatch = options.match || defaultMatch\n\t\tthis.onErr = options.err || defaultErr\n\t}\n\n\t/**\n\t * create Error\n\t * @param msg \t\t\terror message\n\t * @param context \t\tmatch context\n\t * @param capturable \tis capturable error\n\t * @param src \t\t\tsource error\n\t */\n\tmkErr(msg: string, context: MatchContext, capturable?: boolean, source?: MatchError): MatchError {\n\t\treturn new MatchError(msg, capturable, source, context, this)\n\t}\n\n\t/**\n\t * match fail\n\t * @param msg \t\t\terror message\n\t * @param context \t\tmatch context\n\t * @param capturable \tis capturable error\n\t * @param src \t\t\tsource error\n\t * @return Error|void: may ignore Error in the error callback\n\t */\n\tprotected error(msg: string, context: MatchContext, src?: MatchError, capturable?: boolean): MatchError {\n\t\tconst err = this.mkErr(msg, context, capturable, src)\n\t\tconst userErr = this.onErr(err, context, this)\n\t\tif (userErr) return (userErr as any).$ruleErr ? (userErr as MatchError) : ((err[0] = String(userErr)), err)\n\t}\n\n\t/**\n\t * match success\n\t * > attach the matched result by match callback\n\t * @param data \t\tmatched data\n\t * @param len  \t\tmatched data length\n\t * @param context \tmatch context\n\t * @return Error|void: may return Error in the match callback\n\t */\n\tprotected matched(data: any, len: number, context: MatchContext): MatchError {\n\t\tconst err = this.onMatch(data, len, context, this)\n\t\tif (err) return (err as any).$ruleErr ? (err as MatchError) : this.mkErr(String(err), context, false)\n\t}\n\n\tprotected enter(context: MatchContext) {\n\t\treturn context.create()\n\t}\n\n\t/**\n\t * match\n\t * @param context match context\n\t */\n\tmatch(context: MatchContext): MatchError {\n\t\treturn assert()\n\t}\n\n\t/**\n\t * get start char codes\n\t */\n\tgetStart(stack?: number[]): number[] {\n\t\treturn this.startCodes\n\t}\n\n\t/**\n\t * prepare test before match\n\t */\n\ttest(context: MatchContext): boolean {\n\t\treturn true\n\t}\n\n\tprotected startCodeTest(context: MatchContext): boolean {\n\t\treturn this.startCodeIdx[context.nextCode()]\n\t}\n\n\tprotected setStartCodes(start: number | string | any[], ignoreCase?: boolean) {\n\t\tconst codes: number[] = [],\n\t\t\tindex: number[] = []\n\t\teachCharCodes(start, ignoreCase, code => {\n\t\t\tif (!index[code]) {\n\t\t\t\tcodes.push(code)\n\t\t\t\tindex[code] = code\n\t\t\t}\n\t\t})\n\t\tthis.startCodes = codes\n\t\tthis.setCodeIdx(index)\n\t}\n\n\tprotected setCodeIdx(index: any[]) {\n\t\tif (index.length > 1) {\n\t\t\tthis.startCodeIdx = index\n\t\t\tthis.test = this.startCodeTest\n\t\t}\n\t}\n\n\t//──── for debug ─────────────────────────────────────────────────────────────────────────\n\t/**\n\t * make rule expression\n\t * @param expr expression text\n\t */\n\tprotected mkExpr(expr: string): string {\n\t\treturn `<${this.type}: ${expr}>`\n\t}\n\n\t/**\n\t * set rule expression\n\t * \t\t1. make rule expression\n\t * \t\t2. make Expect text\n\t */\n\tprotected setExpr(expr: string) {\n\t\tthis.expr = this.mkExpr(expr)\n\t\tthis.EXPECT = `Expect: ${expr}`\n\t}\n\n\tgetExpr(stack?: number[]): string {\n\t\treturn this.name || this.expr\n\t}\n\n\t/**\n\t * toString by name or expression\n\t */\n\ttoString(): string {\n\t\treturn this.getExpr()\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:11:19 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\n\n/**\n * Match Rule Interface\n */\nexport class MatchRule extends Rule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param start \t\tstart char codes, prepare test by start char codes before match\n\t * @param ignoreCase\tignore case for the start char codes\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, start: number | string | any[], ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, options)\n\t\tthis.setStartCodes(start, ignoreCase)\n\t}\n\n\t/**\n\t * consume matched result\n\t * @param data \t\tmatched result\n\t * @param len \t\tmatched chars\n\t * @param context \tmatch context\n\t */\n\tcomsume(data: string | string[], len: number, context: MatchContext): MatchError {\n\t\tcontext.advance(len)\n\t\treturn this.matched(data, len, context)\n\t}\n}\n","/**\n *\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 14:53:49 GMT+0800 (China Standard Time)\n */\n\nimport { RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { MatchRule } from './MatchRule'\nimport { char } from '../string'\nimport { mixin } from '../mixin'\n\n/**\n * match a character in the allowed list\n * > well match any character if the allowed list is empty\n *\n * > must call test() before match\n */\n@mixin({ type: 'Character' })\nexport class CharMatchRule extends MatchRule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param allows \t\tallowed character codes for match\n\t * \t\t\t\t\t\twell match any character if the allowed list is empty\n\t * @param ignoreCase\tignore case for the allowed character codes\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, allows: number | string | any[], ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, allows, ignoreCase, options)\n\n\t\t// generate expression for debug\n\t\tconst codes = this.startCodes\n\t\tlet i = codes.length,\n\t\t\texpr = '*'\n\t\tif (i) {\n\t\t\tconst chars = []\n\t\t\twhile (i--) chars[i] = char(codes[i])\n\t\t\texpr = `\"${chars.join('\" | \"')}\"`\n\t\t}\n\t\tthis.setExpr(expr)\n\t}\n\tmatch(context: MatchContext) {\n\t\treturn this.comsume(context.nextChar(), 1, context)\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Fri Dec 28 2018 20:09:06 GMT+0800 (China Standard Time)\n */\n\nimport { MatchError, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { MatchRule } from './MatchRule'\nimport { stickyReg } from '../reg'\nimport { isInt } from '../is'\nimport { createFn } from '../fn'\nimport { mapArray } from '../collection'\nimport { mixin } from '../mixin'\nimport { create } from '../create'\nimport { cutLStr } from '../string'\n\n/**\n * match string by RegExp\n *\n * optimization:\n * - Priority use sticky mode {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky}\n *\n */\n@mixin({ type: 'RegExp' })\nexport class RegMatchRule extends MatchRule {\n\treadonly regexp: RegExp\n\treadonly pick: boolean | number\n\tprivate picker: (m: string[]) => string | string[]\n\tprivate spicker: (buff: string, start: number, end: number) => string\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param regexp\t\tregular\n\t * @param pick\t\t\tpick regular matching results\n\t * \t\t\t\t\t\t    0: pick results[0] (optimize: test and substring in sticky mode)\n\t * \t\t\t\t\t\t  > 0: pick results[{pick}]\n\t * \t\t\t\t\t\t  < 0: pick first non-blank string from 1 to -{pick} index on results\n\t * \t\t\t\t\t\t true: pick results\n\t * \t\t\t\t\t\tfalse: not pick result, result is null (optimize: just test string in sticky mode)\n\t * @param start\t\t\tstart character codes in the regular, optimize performance by start character codes\n\t * @param capturable\terror is capturable\n\t * @param onMatch\t\tmatch callback\n\t * @param onErr\t\t\terror callback\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tregexp: RegExp,\n\t\tpick: boolean | number,\n\t\tstart: number | string | any[],\n\t\toptions: RuleOptions\n\t) {\n\t\tpick = pick === false || isInt(pick) ? pick : !!pick || 0\n\n\t\tconst sticky = stickyReg && !pick, // use exec mode when need pick match group data\n\t\t\tpattern = regexp.source,\n\t\t\tignoreCase = regexp.ignoreCase\n\n\t\t// always wrapping in a none capturing group preceded by '^' to make sure\n\t\t// matching can only work on start of input. duplicate/redundant start of\n\t\t// input markers have no meaning (/^^^^A/ === /^A/)\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\n\t\t// When the y flag is used with a pattern, ^ always matches only at the\n\t\t// beginning of the input, or (if multiline is true) at the beginning of a\n\t\t// line.\n\t\tregexp = new RegExp(\n\t\t\tsticky ? pattern : `^(?:${pattern})`,\n\t\t\t(ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '') + (sticky ? 'y' : '')\n\t\t)\n\n\t\tsuper(name, start, ignoreCase, options)\n\n\t\tthis.regexp = regexp\n\t\tthis.pick = pick\n\t\tthis.match = sticky ? this.stickyMatch : this.execMatch\n\n\t\tsticky ? (this.spicker = pick === false ? pickNone : pickTestStr) : (this.picker = mkPicker(pick))\n\n\t\tthis.setExpr(pattern)\n\t}\n\t/**\n\t * match on sticky mode\n\t */\n\tstickyMatch(context: MatchContext): MatchError {\n\t\tconst reg = this.regexp,\n\t\t\tbuff = context.buff(),\n\t\t\tstart = context.offset()\n\t\treg.lastIndex = start\n\t\tlet len: number\n\t\treturn reg.test(buff)\n\t\t\t? ((len = reg.lastIndex - start), this.comsume(this.spicker(buff, start, len), len, context))\n\t\t\t: this.error(this.EXPECT, context)\n\t}\n\t/**\n\t * match on exec mode\n\t */\n\texecMatch(context: MatchContext): MatchError {\n\t\tconst m = this.regexp.exec(context.buff(true))\n\t\treturn m ? this.comsume(this.picker(m), m[0].length, context) : this.error(this.EXPECT, context)\n\t}\n}\n\nconst cache = create(null)\nfunction mkPicker(pick: number | boolean): (m: string[]) => string | string[] {\n\treturn (\n\t\tcache[pick as any] ||\n\t\t(cache[pick as any] =\n\t\t\tpick === false\n\t\t\t\t? pickNone\n\t\t\t\t: pick === true\n\t\t\t\t? pickAll\n\t\t\t\t: pick >= 0\n\t\t\t\t? createFn(`return m[${pick}]`, ['m'], `pick_${pick}`)\n\t\t\t\t: createFn(\n\t\t\t\t\t\t`return ${mapArray(new Array(-pick), (v, i) => `m[${i + 1}]`).join(' || ')}`,\n\t\t\t\t\t\t['m'],\n\t\t\t\t\t\t`pick_1_${-pick}`\n\t\t\t\t  ))\n\t)\n}\n\nfunction pickNone(): string {\n\treturn null\n}\n\nfunction pickAll(m: string[]): string[] {\n\treturn m\n}\n\nfunction pickTestStr(buff: string, start: number, end: number): string {\n\treturn cutLStr(buff, start, end)\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:10:52 GMT+0800 (China Standard Time)\n */\n\nimport { RuleOptions } from './Rule'\nimport { RegMatchRule } from './RegMatchRule'\nimport { reEscape } from '../reg'\nimport { mixin } from '../mixin'\nimport { charCode } from '../string'\n\n@mixin({ type: 'String' })\nexport class StringMatchRule extends RegMatchRule {\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param str \t\t\tmatch string\n\t * @param ignoreCase\tignore case\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, str: string, ignoreCase: boolean, options: RuleOptions) {\n\t\tsuper(name, new RegExp(reEscape(str), ignoreCase ? 'i' : ''), 0, charCode(str), options)\n\t\tthis.setExpr(str)\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Dec 11 2018 15:36:42 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 16:32:31 GMT+0800 (China Standard Time)\n */\nimport { Source } from '../Source'\nimport { char, charCode, cutStr } from '../string'\nimport { assert } from '../assert'\n\nexport type CheckPoint = [number, number]\n/**\n * Match Context of Rule\n */\nexport class MatchContext {\n\t// start offset of original buff\n\treadonly source: Source\n\n\t// parent context\n\treadonly parent: MatchContext\n\n\t// matched result list\n\tresult: any[]\n\n\tdata: any\n\n\t// template buff\n\tprivate __buff: string\n\n\t// current offset of template buff\n\tprivate __offset: number\n\n\t// current offset of original buff\n\tprivate __orgOffset: number\n\n\t// advanced characters\n\tprivate __advanced: number\n\n\t// cached character\n\tprivate __code: number\n\n\tconstructor(source: Source, buff: string, offset: number, orgOffset: number, parent?: MatchContext) {\n\t\tthis.source = source\n\t\tthis.parent = parent\n\t\tthis.result = []\n\t\tthis.__buff = buff\n\t\tthis.__offset = offset\n\t\tthis.__orgOffset = orgOffset\n\t\tthis.__advanced = 0\n\t\tparent ? ((this.__code = parent.__code), (this.data = parent.data)) : this.__flushCode()\n\t}\n\n\tprivate __flushCode() {\n\t\tconst { __buff: buff, __offset: offset } = this\n\t\tthis.__code = offset < buff.length ? charCode(buff, offset) : 0\n\t}\n\n\t/**\n\t * create sub Context\n\t */\n\tcreate() {\n\t\treturn new MatchContext(this.source, this.__buff, this.__offset, this.__orgOffset + this.__advanced, this)\n\t}\n\n\tprivate __setAdvanced(advanced: number) {\n\t\tassert.notLess(advanced, 0)\n\n\t\tconst offset = this.__offset - this.__advanced + advanced\n\t\tif (offset < 0) {\n\t\t\tthis.__buff = this.source.buff\n\t\t\tthis.__offset = this.__orgOffset + advanced\n\t\t}\n\t\tthis.__advanced = advanced\n\t\tthis.__offset = offset\n\t\tthis.__flushCode()\n\t}\n\n\t/**\n\t * commit context state to parent context\n\t */\n\tcommit() {\n\t\tconst { __advanced: advanced } = this\n\t\tthis.parent.advance(advanced)\n\t\tthis.__orgOffset += advanced\n\t\tthis.__advanced = 0\n\t\tthis.data = null\n\t}\n\n\t/**\n\t * marge context state\n\t */\n\tmargeState(context: MatchContext) {\n\t\tthis.__setAdvanced(context.__orgOffset + context.__advanced - this.__orgOffset)\n\t}\n\n\t/**\n\t * rollback state and result\n\t * @param checkpoint \trollback to checkpoint\n\t */\n\trollback(checkpoint?: CheckPoint) {\n\t\tlet advanced = 0,\n\t\t\tresultLen = 0\n\n\t\tcheckpoint && ((advanced = checkpoint[0]), (resultLen = checkpoint[1]))\n\n\t\tthis.__setAdvanced(advanced)\n\n\t\tconst { result } = this\n\t\tif (result.length > resultLen) result.length = resultLen\n\t}\n\n\t/**\n\t * get a check point\n\t */\n\tcheckpoint(): CheckPoint {\n\t\treturn [this.__advanced, this.result.length]\n\t}\n\n\t/**\n\t * advance buffer position\n\t */\n\tadvance(i: number) {\n\t\tthis.__offset += i\n\t\tthis.__advanced += i\n\t\tthis.__flushCode()\n\t}\n\n\t/**\n\t * advanced buff length\n\t */\n\tadvanced(): number {\n\t\treturn this.__advanced\n\t}\n\n\t/**\n\t * get buffer\n\t * @param reset reset buffer string from 0\n\t */\n\tbuff(reset?: boolean): string {\n\t\tlet { __buff: buff } = this\n\t\tif (reset) {\n\t\t\tthis.__buff = buff = cutStr(buff, this.__offset)\n\t\t\tthis.__offset = 0\n\t\t}\n\t\treturn buff\n\t}\n\n\torgBuff() {\n\t\treturn this.source.buff\n\t}\n\n\toffset(): number {\n\t\treturn this.__offset\n\t}\n\n\tstartPos(): number {\n\t\treturn this.__orgOffset\n\t}\n\n\tcurrPos(): number {\n\t\treturn this.__orgOffset + this.__advanced\n\t}\n\n\tpos(): [number, number] {\n\t\tconst { __orgOffset: offset } = this\n\t\treturn [offset, offset + this.__advanced]\n\t}\n\n\t/**\n\t * get next char code\n\t * @return number char code number\n\t */\n\tnextCode() {\n\t\treturn this.__code\n\t}\n\n\tnextChar() {\n\t\treturn char(this.__code)\n\t}\n\n\t//──── result opeartions ───────────────────────────────────────────────────────────────────\n\t/**\n\t * append result\n\t */\n\tadd(data: any) {\n\t\tconst { result } = this\n\t\tresult[result.length] = data\n\t}\n\n\t/**\n\t * append resultset\n\t */\n\taddAll(data: any[]) {\n\t\tconst { result } = this\n\t\tconst len = result.length\n\t\tlet i = data.length\n\t\twhile (i--) result[len + i] = data[i]\n\t}\n\n\t/**\n\t * get result size\n\t */\n\tresultSize() {\n\t\treturn this.result.length\n\t}\n}\n","/**\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:06:22 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:24:21 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError, onMatchCallback, onErrorCallback, RuleOptions } from './Rule'\nimport { MatchContext } from './MatchContext'\nimport { assert } from '../assert'\nimport { idxOfArray } from '../collection'\nimport { pad } from '../format'\nimport { escapeStr } from '../string'\nimport { Source } from '../Source'\n\nexport type ComplexRuleBuilder = (rule: Rule) => Rule[]\n\nconst MAX = -1 >>> 0\n/**\n * Abstract Complex Rule\n */\nexport class ComplexRule extends Rule {\n\treadonly split: string\n\tprivate builder: ComplexRuleBuilder\n\tprotected EXPECTS: string[]\n\tprotected rules: Rule[]\n\tprotected readonly rMin: number\n\tprotected readonly rMax: number\n\n\t/**\n\t * @param name \t\t\tmatch name\n\t * @param builder \t\tcallback of build rules\n\t * @param options\t\tRule Options\n\t */\n\tconstructor(name: string, repeat: [number, number], builder: ComplexRuleBuilder, options: RuleOptions) {\n\t\tsuper(name, options)\n\n\t\tlet [rMin, rMax] = repeat\n\n\t\trMin < 0 && (rMin = 0)\n\t\trMax <= 0 && (rMax = MAX)\n\n\t\tassert.notGreater(rMin, rMax)\n\n\t\tthis.rMin = rMin\n\t\tthis.rMax = rMax\n\n\t\tthis.builder = builder\n\n\t\tif (rMin !== rMax || rMin !== 1) {\n\t\t\tthis.match = this.rmatch\n\n\t\t\t// for debug\n\t\t\tthis.type = `${this.type}[${rMin}${rMin === rMax ? '' : ` - ${rMax === MAX ? 'MAX' : rMax}`}]`\n\t\t}\n\t}\n\tparse(buff: string, data?: any): any[] {\n\t\tconst ctx = new MatchContext(new Source(buff), buff, 0, 0)\n\t\tctx.data = data\n\t\tlet err = this.match(ctx)\n\t\tif (err) {\n\t\t\tconst msg = []\n\t\t\tvar pos: [number, number, string]\n\t\t\tdo {\n\t\t\t\tpos = err.position()\n\t\t\t\tmsg.unshift(\n\t\t\t\t\t`[${pad(String(pos[0]), 3)}:${pad(String(pos[1]), 2)}] - ${err.rule.toString()}: ${\n\t\t\t\t\t\terr.msg\n\t\t\t\t\t} on \"${escapeStr(pos[2])}\"`\n\t\t\t\t)\n\t\t\t} while ((err = err.source))\n\t\t\tmsg.push('[Source]', ctx.source.source())\n\t\t\tthrow new SyntaxError(msg.join('\\n'))\n\t\t}\n\t\treturn ctx.result\n\t}\n\tinit(): ComplexRule {\n\t\tconst rules = this.builder(this)\n\t\tlet i = rules && rules.length\n\n\t\tassert.is(i, `Require Complex Rules`)\n\n\t\tthis.rules = rules\n\n\t\t// generate expression and expect string for debug\n\t\tconst names = this.rnames(rules)\n\t\tthis.setExpr(names.join(this.split))\n\t\twhile (i--) names[i] = `Expect[${i}]: ${names[i]}`\n\t\tthis.EXPECTS = names\n\n\t\tthis.__init(rules)\n\n\t\tthis.builder = null\n\n\t\treturn this\n\t}\n\t__init(rules: Rule[]) {}\n\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\treturn assert()\n\t}\n\n\tprotected setCodeIdx(index: any[]) {\n\t\tthis.rMin && super.setCodeIdx(index)\n\t}\n\n\tgetRules(): Rule[] {\n\t\treturn this.rules || (this.init(), this.rules)\n\t}\n\n\tgetStart(stack?: number[]): number[] {\n\t\tconst { id, startCodes } = this\n\t\treturn startCodes\n\t\t\t? startCodes\n\t\t\t: (stack && ~idxOfArray(stack, id)) || this.rules\n\t\t\t? []\n\t\t\t: (this.init(), this.startCodes)\n\t}\n\n\tconsume(context: MatchContext): MatchError {\n\t\tconst err = this.matched(context.result, context.advanced(), context.parent)\n\t\t!err && context.commit()\n\t\treturn err\n\t}\n\n\t// for debug\n\tprivate rnames(rules: Rule[], stack?: number[]): string[] {\n\t\tlet i = rules.length\n\t\tconst names: string[] = new Array(i),\n\t\t\tid = this.id\n\t\twhile (i--) names[i] = rules[i].getExpr(stack ? stack.concat(id) : [id])\n\t\treturn names\n\t}\n\n\tgetExpr(stack?: number[]): string {\n\t\tconst { id, name } = this\n\t\tlet i: number\n\n\t\treturn name\n\t\t\t? name\n\t\t\t: stack\n\t\t\t? ~(i = idxOfArray(stack, id))\n\t\t\t\t? `<${this.type} -> $${stack[i]}>`\n\t\t\t\t: this.mkExpr(this.rnames(this.getRules(), stack).join(this.split))\n\t\t\t: this.expr\n\t}\n}\n","/**\n *\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 15:56:09 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError } from './Rule'\nimport { MatchContext, CheckPoint } from './MatchContext'\nimport { ComplexRule } from './ComplexRule'\nimport { mixin } from '../mixin'\n\n/**\n * AND Complex Rule\n */\n@mixin({ type: 'And', split: ' ' })\nexport class AndRule extends ComplexRule {\n\t__init(rules: Rule[]) {\n\t\tthis.setStartCodes(rules[0].getStart([this.id]))\n\t}\n\tmatch(context: MatchContext): MatchError {\n\t\tconst rules = this.getRules(),\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\t\tlet err: MatchError,\n\t\t\ti: number = 0\n\t\tfor (; i < len; i++) if ((err = this.testRule(rules[i], i, ctx))) return err\n\t\treturn this.consume(ctx)\n\t}\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\tconst { rMin, rMax } = this\n\t\tconst rules = this.getRules(),\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\n\t\tlet err: MatchError,\n\t\t\trepeat: number = 0,\n\t\t\ti: number,\n\t\t\tcp: CheckPoint\n\n\t\tout: for (; repeat < rMax; repeat++) {\n\t\t\tcp = ctx.checkpoint()\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif ((err = this.testRule(rules[i], i, ctx))) {\n\t\t\t\t\tif (repeat < rMin) return err\n\t\t\t\t\tctx.rollback(cp)\n\t\t\t\t\tbreak out\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.consume(ctx)\n\t}\n\ttestRule(rule: Rule, i: number, ctx: MatchContext): MatchError {\n\t\tlet err: MatchError\n\t\tif (!rule.test(ctx)) {\n\t\t\treturn this.error(this.EXPECTS[i], ctx)\n\t\t} else if ((err = rule.match(ctx))) {\n\t\t\treturn this.error(this.EXPECTS[i], ctx, err)\n\t\t}\n\n\t\t// return (!rule.test(ctx) || (err = rule.match(ctx))) && (err = this.error(this.EXPECTS[i], ctx, err))\n\t}\n}\n","/**\n *\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 27 2018 19:05:48 GMT+0800 (China Standard Time)\n * @modified Sat Dec 22 2018 17:47:30 GMT+0800 (China Standard Time)\n */\n\nimport { Rule, MatchError } from './Rule'\nimport { MatchContext, CheckPoint } from './MatchContext'\nimport { ComplexRule } from './ComplexRule'\nimport { eachCharCodes } from './util'\nimport { mixin } from '../mixin'\n\n/**\n * OR Complex Rule\n */\n@mixin({ type: 'Or', split: ' | ' })\nexport class OrRule extends ComplexRule {\n\tindex: Rule[][]\n\t__init(rules: Rule[]) {\n\t\tconst { id } = this\n\t\tconst len = rules.length,\n\t\t\tstarts: number[] = [], // all distinct start codes\n\t\t\trStarts: number[][] = [], // start codes per rule\n\t\t\tindex: Rule[][] = [\n\t\t\t\t[] // rules which without start code\n\t\t\t]\n\n\t\tlet i: number, j: number, k: Rule[] & { idx: number }, codes: number[]\n\n\t\t// get start codes of all rules\n\t\tfor (i = 0; i < len; i++) {\n\t\t\trStarts[i] = [] // init rule start codes\n\t\t\teachCharCodes(rules[i].getStart([id]), false, code => {\n\t\t\t\trStarts[i].push(code) // append to rule start codes\n\t\t\t\tif (!index[code]) {\n\t\t\t\t\tindex[code] = [] // init start code index\n\t\t\t\t\tstarts.push(code) // append to all start codes\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// fill index\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tcodes = rStarts[i] // append rule to start code index by rule start codes\n\t\t\tif (!codes.length) {\n\t\t\t\t// rule without start code\n\t\t\t\tindex[0].push(rules[i]) // append rule to index[0]\n\t\t\t\tcodes = starts // append rule to start code index by all start codes\n\t\t\t}\n\n\t\t\t// append rule to start code index (by rule start codes or all start codes)\n\t\t\tj = codes.length\n\t\t\twhile (j--) {\n\t\t\t\tk = index[codes[j]] as Rule[] & { idx: number }\n\t\t\t\tif (k.idx !== i) {\n\t\t\t\t\t// deduplication\n\t\t\t\t\tk.push(rules[i]) // append rules[i] to start code index[codes[j]]\n\t\t\t\t\tk.idx = i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// rule have unkown start code when got unkown start code from any rules\n\t\tconst startCodes = !index[0].length && starts\n\t\tthis.startCodes = startCodes || []\n\t\tstartCodes && this.setCodeIdx(index)\n\t\tthis.index = index\n\t}\n\n\tmatch(context: MatchContext): MatchError {\n\t\tconst index = this.index || (this.init(), this.index),\n\t\t\trules: Rule[] = index[context.nextCode()] || index[0],\n\t\t\tlen = rules.length,\n\t\t\tctx = context.create()\n\n\t\tlet err: MatchError,\n\t\t\tupErr: MatchError,\n\t\t\ti = 0\n\n\t\tfor (; i < len; i++) {\n\t\t\terr = rules[i].match(ctx) || this.consume(ctx)\n\t\t\tif (!err) return\n\t\t\tif (!err.capturable) {\n\t\t\t\tupErr = err\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (!upErr || err.pos >= upErr.pos) upErr = err\n\t\t\tctx.rollback()\n\t\t}\n\t\treturn this.error(this.EXPECT, ctx, upErr)\n\t}\n\n\tprotected rmatch(context: MatchContext): MatchError {\n\t\tconst { rMin, rMax } = this\n\t\tconst index = this.index || (this.init(), this.index),\n\t\t\tctx = context.create()\n\n\t\tlet rules: Rule[],\n\t\t\tlen: number,\n\t\t\terr: MatchError,\n\t\t\tupErr: MatchError,\n\t\t\trepeat: number = 0,\n\t\t\ti: number,\n\t\t\tcp: CheckPoint\n\n\t\tout: for (; repeat < rMax; repeat++) {\n\t\t\trules = index[ctx.nextCode()] || index[0]\n\t\t\tupErr = null\n\t\t\tif ((len = rules.length)) {\n\t\t\t\tcp = ctx.checkpoint()\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\terr = rules[i].match(ctx)\n\t\t\t\t\tif (!err) continue out\n\t\t\t\t\tif (!err.capturable) {\n\t\t\t\t\t\tupErr = err\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tif (!upErr || err.pos >= upErr.pos) upErr = err\n\t\t\t\t\tctx.rollback(cp)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (repeat < rMin || (upErr && !upErr.capturable)) return this.error(this.EXPECT, ctx, upErr)\n\t\t\tbreak\n\t\t}\n\t\treturn this.consume(ctx)\n\t}\n}\n","/**\n * AST Parser API\n * @module utility/AST\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Nov 06 2018 10:58:52 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 19:59:23 GMT+0800 (China Standard Time)\n */\n\nimport { ComplexRuleBuilder } from './ComplexRule'\nimport { isObj, isReg, isStr, isBool, isNum, isInt, isArray, isArrayLike, isFn } from '../is'\nimport { makeMap, mapArray, SKIP } from '../collection'\nimport { CharMatchRule } from './CharMatchRule'\nimport { StringMatchRule } from './StringMatchRule'\nimport { RegMatchRule } from './RegMatchRule'\nimport { onMatchCallback, onErrorCallback, Rule, MatchError, RuleOptions } from './Rule'\nimport { MatchRule } from './MatchRule'\nimport { AndRule } from './AndRule'\nimport { OrRule } from './OrRule'\nimport { assert } from '../assert'\nimport { MatchContext } from './MatchContext'\nimport { EMPTY_FN } from '../consts'\n\n//========================================================================================\n/*                                                                                      *\n *                                      match tools                                     *\n *                                                                                      */\n//========================================================================================\n\nexport const discardMatch: onMatchCallback = EMPTY_FN\n\nexport function appendMatch(data: any, len: number, context: MatchContext) {\n\tcontext.addAll(data)\n}\nexport function attachMatch(\n\tcallback: (data: any, len: number, context: MatchContext, rule: Rule) => any\n): onMatchCallback\nexport function attachMatch(val: any): onMatchCallback\nexport function attachMatch(val: any) {\n\tconst callback: (data: any, len: number, context: MatchContext, rule: Rule) => any = isFn(val) ? val : () => val\n\treturn (data: any, len: number, context: MatchContext, rule: Rule) => {\n\t\tcontext.add(callback(data, len, context, rule))\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       match api                                      *\n *                                                                                      */\n//========================================================================================\n\nexport function match(desc: MatchRuleDescriptor): MatchRule\n\n//──── named regexp match api ────────────────────────────────────────────────────────────\n// pick, start, cap\n// pick, cap\n// pick, start\n// pick\n// start, cap\n// start\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick?: boolean | number,\n\tstartCodes?: number | string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tstartCodes: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tname: string,\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(name: string, pattern: RegExp, onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\n//──── regexp match api ──────────────────────────────────────────────────────────────────\nexport function match(\n\tpattern: RegExp,\n\tpick?: boolean | number,\n\tstartCodes?: number | string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tstartCodes: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tpick: boolean | number,\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(\n\tpattern: RegExp,\n\tstartCodes: string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\nexport function match(pattern: RegExp, onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\n//──── named string match api ────────────────────────────────────────────────────────────\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tignoreCase?: boolean,\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tignoreCase: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tname: string,\n\tpattern: number | string | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\n//──── string match api ──────────────────────────────────────────────────────────────────\nexport function match(\n\tpattern: number | string | any[],\n\tignoreCase?: boolean,\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(\n\tpattern: number | string | any[],\n\tignoreCase: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): MatchRule\n\nexport function match(pattern: number | string | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): MatchRule\n\nexport function match(): MatchRule {\n\treturn mkMatch(arguments)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     and rule api                                     *\n *                                                                                      */\n//========================================================================================\n\n//──── and ───────────────────────────────────────────────────────────────────────────────\nexport function and(desc: ComplexRuleDescriptor): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function and(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function and(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [1, 1])\n}\n\n//──── and any ───────────────────────────────────────────────────────────────────────────\nexport function any(desc: ComplexRuleDescriptor): AndRule\nexport function any(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function any(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function any(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [0, -1])\n}\n\n//──── and many ──────────────────────────────────────────────────────────────────────────\nexport function many(desc: ComplexRuleDescriptor): AndRule\nexport function many(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function many(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): AndRule\nexport function many(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [1, -1])\n}\n\n//──── and option ────────────────────────────────────────────────────────────────────────\nexport function option(desc: ComplexRuleDescriptor): AndRule\nexport function option(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): AndRule\nexport function option(): AndRule {\n\treturn mkComplexRule(arguments, AndRule, [0, 1])\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                      or rule api                                     *\n *                                                                                      */\n//========================================================================================\n\n//──── or ────────────────────────────────────────────────────────────────────────────────\nexport function or(desc: ComplexRuleDescriptor): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\trules: ((rule: Rule) => any[]) | any[],\n\trepeat?: [number, number],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function or(rules: ((rule: Rule) => any[]) | any[], onMatch: onMatchCallback, onErr?: onErrorCallback): OrRule\nexport function or(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [1, 1])\n}\n\n//──── or any ────────────────────────────────────────────────────────────────────────────\nexport function anyOne(desc: ComplexRuleDescriptor): OrRule\nexport function anyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function anyOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [0, -1])\n}\n\n//──── or many ───────────────────────────────────────────────────────────────────────────\nexport function manyOne(desc: ComplexRuleDescriptor): OrRule\nexport function manyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function manyOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [1, -1])\n}\n\n//──── or option ─────────────────────────────────────────────────────────────────────────\nexport function optionOne(desc: ComplexRuleDescriptor): OrRule\nexport function optionOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\tname: string,\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tcapturable?: boolean,\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(\n\trules: ((rule: Rule) => any[]) | any[],\n\tonMatch?: onMatchCallback,\n\tonErr?: onErrorCallback\n): OrRule\nexport function optionOne(): OrRule {\n\treturn mkComplexRule(arguments, OrRule, [0, 1])\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                  Match Rule Builder                                  *\n *                                                                                      */\n//========================================================================================\n\nexport type MatchRuleDescriptor = {\n\tname?: string\n\tpattern: RegExp | number | string | any[]\n\tpick?: boolean | number\n\tstartCodes?: number | string | any[]\n\tignoreCase?: boolean\n} & RuleOptions\n\nfunction mkMatch(args: IArguments | any[], defaultMatchCallback?: onMatchCallback): MatchRule {\n\tlet name: string,\n\t\tpattern: number | string | any[],\n\t\tregexp: RegExp,\n\t\tpick: boolean | number = 0,\n\t\tstartCodes: number | string | any[],\n\t\tignoreCase: boolean = false,\n\t\toptions: RuleOptions\n\tif (isObj(args[0])) {\n\t\tconst desc = args[0] as MatchRuleDescriptor,\n\t\t\tp = desc.pattern\n\t\tif (isReg(p)) {\n\t\t\tregexp = p as RegExp\n\t\t\tpick = desc.pick\n\t\t\tstartCodes = desc.startCodes\n\t\t} else if (isStrOrCodes(p)) {\n\t\t\tpattern = p as number | string | any[]\n\t\t\tignoreCase = desc.ignoreCase\n\t\t}\n\t\tname = desc.name\n\t\toptions = desc\n\t} else {\n\t\tvar i = 1\n\t\tif (isStr(args[0]) && isMatchPattern(args[1])) {\n\t\t\tname = args[0]\n\t\t\tisReg(args[1]) ? (regexp = args[1]) : (pattern = args[1])\n\t\t\ti = 2\n\t\t} else if (isMatchPattern(args[0])) {\n\t\t\tisReg(args[0]) ? (regexp = args[0]) : (pattern = args[0])\n\t\t}\n\n\t\tif (regexp) {\n\t\t\tif (isBool(args[i]) || isInt(args[i])) pick = args[i++]\n\t\t\tif (isStrOrCodes(args[i])) startCodes = args[i++]\n\t\t} else {\n\t\t\tif (isBool(args[i])) ignoreCase = args[i++]\n\t\t}\n\t\toptions = parseRuleOptions(args, i)\n\t}\n\n\t!options.match && (options.match = defaultMatchCallback)\n\n\treturn regexp\n\t\t? new RegMatchRule(name, regexp, options.match === discardMatch ? false : pick, startCodes, options)\n\t\t: pattern\n\t\t? strMatch(name, pattern, ignoreCase, options)\n\t\t: assert('invalid match rule {j}', args)\n}\n\nfunction isStrOrCodes(pattern): boolean {\n\treturn isStr(pattern) || isNum(pattern) || isArray(pattern)\n}\n\nfunction isMatchPattern(pattern): boolean {\n\treturn isReg(pattern) || isStrOrCodes(pattern)\n}\n\nfunction strMatch(name: string, pattern: string | number | any[], ignoreCase: boolean, options: RuleOptions) {\n\tconst C = isStr(pattern) && (pattern as string).length > 1 ? StringMatchRule : CharMatchRule\n\treturn new C(name, pattern, ignoreCase, options)\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                 complex rule builder                                 *\n *                                                                                      */\n//========================================================================================\n\nexport type ComplexRuleDescriptor = {\n\tname?: string\n\trules: ((rule: Rule) => any[]) | any[]\n\trepeat?: [number, number]\n\tcapturable?: boolean\n\tonMatch?: onMatchCallback\n\tonErr?: onErrorCallback\n} & RuleOptions\n\nfunction mkComplexRule<T extends AndRule | OrRule>(\n\targs: IArguments,\n\tRule: typeof AndRule | typeof OrRule,\n\tdefaultRepeat: [number, number]\n): T {\n\tlet name: string,\n\t\tbuilder: ComplexRuleBuilder,\n\t\trules: ((rule: Rule) => any[]) | any[],\n\t\trepeat: [number, number],\n\t\toptions: RuleOptions\n\tif (isObj(args[0])) {\n\t\tconst desc = args[0] as ComplexRuleDescriptor,\n\t\t\tr = desc.rules\n\t\tif (isArray(r) || isFn(r)) rules = r\n\t\trepeat = desc.repeat\n\t\tname = desc.name\n\t\toptions = desc\n\t} else {\n\t\tvar i = 0\n\t\tif (isStr(args[i])) name = args[i++]\n\t\tif (isArray(args[i]) || isFn(args[i])) rules = args[i++]\n\t\tif (isArray(args[i])) repeat = args[i++]\n\t\toptions = parseRuleOptions(args, i)\n\t}\n\tif (!repeat) repeat = defaultRepeat\n\tif (rules) {\n\t\tbuilder = rulesBuilder(rules)\n\t\treturn new Rule(name, repeat, builder, options) as T\n\t}\n}\n\nfunction rulesBuilder(rules: ((rule: Rule) => any[]) | any[]): (rule: Rule) => Rule[] {\n\treturn function(_rule) {\n\t\treturn mapArray(isFn(rules) ? (rules as ((rule: Rule) => any[]))(_rule) : (rules as any[]), (r, i) => {\n\t\t\tif (!r) return SKIP\n\t\t\tlet rule: Rule = r.$rule ? r : mkMatch(isArray(r) ? r : [r], discardMatch)\n\t\t\tassert.is(rule, '{}: Invalid Rule Configuration on index {d}: {j}', _rule, i, r)\n\t\t\treturn rule\n\t\t})\n\t}\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                         tools                                        *\n *                                                                                      */\n//========================================================================================\n\nfunction parseRuleOptions(args: IArguments | any[], i: number) {\n\tconst options: RuleOptions = {}\n\tif (isBool(args[i])) options.capturable = args[i++]\n\toptions.match = args[i++]\n\toptions.err = args[i]\n\treturn options\n}\n","/**\n * utility utilities\n * @module utility\n * @preferred\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Wed Nov 21 2018 10:21:41 GMT+0800 (China Standard Time)\n * @modified Sat Mar 23 2019 18:50:43 GMT+0800 (China Standard Time)\n */\n\nexport { isDefaultKey, addDefaultKey, addDefaultKeys, getDefaultKeys, getDefaultKeyMap } from './dkeys'\nexport * from './fn'\nexport * from './is'\nexport * from './reg'\nexport * from './proto'\nexport * from './defProp'\nexport * from './ownProp'\nexport * from './propPath'\nexport * from './toStr'\nexport * from './string'\nexport * from './format'\nexport * from './create'\nexport * from './assign'\nexport * from './collection'\nexport * from './List'\nexport * from './nextTick'\nexport * from './Source'\nexport * from './AST/api'\nexport * from './assert'\n","import { addDefaultKey } from '../utility'\n\n/**\n * Observer Key\n */\nexport const OBSERVER_KEY = addDefaultKey('__observer__')\n\n/**\n * the property of observe an array change\n */\nexport const ARRAY_CHANGE = '$change'\nexport const ARRAY_LENGTH = 'length'\n\n/**\n * The dirty collector lost the original value\n */\nexport const MISS = {\n\ttoString() {\n\t\treturn 'MISS'\n\t},\n\ttoJSON() {\n\t\treturn 'MISS'\n\t}\n}\n\nexport type ObserverTarget = any[] | {}\n\n/**\n * change callback for observer\n * @param path \t\tthe observe path\n * @param value \tnew value\n * @param original\toriginal value. the original value is {@link MISS} when the dirty collector loses the original value\n */\nexport type ObserverCallback<T extends ObserverTarget> = (\n\tpath: string[],\n\tvalue: any,\n\toriginal: any,\n\tobserver: IObserver<T>\n) => void\n\nexport type IWatcher = {\n\t/**\n\t * notify topics\n\t * @param original the original value\n\t */\n\tnotify(original: any): void\n}\n\nexport interface IObserver<T extends ObserverTarget> {\n\t/**\n\t * target of the observer\n\t */\n\treadonly target: T\n\n\t/**\n\t * observer proxy\n\t */\n\treadonly proxy: T\n\n\t/**\n\t * is array object\n\t */\n\treadonly isArray: boolean\n\n\t/**\n\t * observe changes in the observer's target\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t * @return listen-id\n\t */\n\tobserve(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): string\n\n\t/**\n\t * get listen-id of callback in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t * @return listen-id\n\t */\n\tobserved(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): string\n\n\t/**\n\t * has listen-id in the observer's target\n\t *\n\t * @param propPath \tproperty path for observe, parse string path by {@link parsePath}\n\t * @param id\t\tlisten-id\n\t * @return listen-id\n\t */\n\tobservedId(propPath: string | string[], id: string): boolean\n\n\t/**\n\t * cancel observing the changes in the observer's target\n\t * @param propPath\tproperty path for unobserve, parse string path by {@link parsePath}\n\t * @param cb\t\tcallback\n\t * @param scope\t\tscope of callback\n\t */\n\tunobserve(propPath: string | string[], cb: ObserverCallback<T>, scope?: any): void\n\n\t/**\n\t * cancel observing the changes in the observer's target by listen-id\n\t * @param propPath\tproperty path for unobserve, parse string path by {@link parsePath}\n\t * @param id \t\tlisten-id\n\t */\n\tunobserveId(propPath: string | string[], id: string): void\n\n\t/**\n\t * set value\n\t * @param propPath \tproperty path for set, parse string path by {@link parsePath}\n\t * @param value\t\tthe value\n\t */\n\tset(propPath: string | string[], value: any): void\n\n\t/**\n\t * get value\n\t * @param propPath \tproperty path for get, parse string path by {@link parsePath}\n\t * @return the value\n\t */\n\tget(propPath: string | string[]): any\n\n\t/**\n\t * notify change on the property\n\t * @param prop\t\tthe property\n\t * @param original \tthe original value\n\t */\n\tnotify(prop: string, original: any): void\n\n\t/**\n\t * notify the observer that properties in the target have changed\n\t *\n\t * @param props \t\tnotify properties, notify all watchers when the props is null or undefined\n\t * @param getOriginal\tget the original value\n\t * @param execludes\t\tdo not notify watchers in execludes\n\t */\n\tnotifies(\n\t\tprops: string[],\n\t\tgetOriginal: (prop: string, ob: IObserver<T>) => any,\n\t\texecludes?: { [key: string]: any }\n\t): void\n\n\t/**\n\t * get wather by property\n\t * @param prop the property\n\t */\n\twatcher(prop: string): IWatcher\n\n\t/**\n\t * get or create wather by property\n\t * @param prop the property\n\t */\n\tinitWatcher(prop: string): IWatcher\n}\n","/**\n * Observe implementation on the Proxy of ES6\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Thu Mar 28 2019 15:37:58 GMT+0800 (China Standard Time)\n */\n\nimport { IObserver, ObserverTarget, IWatcher, ARRAY_CHANGE } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport { GLOBAL } from '../utility/consts'\n\n/**\n * @ignore\n */\nexport default function(): ObservePolicy {\n\tif (GLOBAL.Proxy)\n\t\treturn {\n\t\t\t__name: 'Proxy',\n\t\t\t__proxy: 'proxy',\n\t\t\t__createProxy<T extends ObserverTarget>(observer: IObserver<T>, target: T, isArray: boolean): T {\n\t\t\t\tlet setter: (source: ObserverTarget, prop: string, value: any) => boolean\n\t\t\t\tif (isArray) {\n\t\t\t\t\tconst changeWatcher: IWatcher = observer.initWatcher(ARRAY_CHANGE)\n\t\t\t\t\tsetter = (source, prop, value) => {\n\t\t\t\t\t\tconst watcher: IWatcher = observer.watcher(prop)\n\t\t\t\t\t\twatcher && watcher.notify(source[prop])\n\t\t\t\t\t\tsource[prop] = value\n\t\t\t\t\t\tchangeWatcher.notify(observer.proxy)\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetter = (source, prop, value) => {\n\t\t\t\t\t\tconst watcher: IWatcher = observer.watcher(prop)\n\t\t\t\t\t\twatcher && watcher.notify(source[prop])\n\t\t\t\t\t\tsource[prop] = value\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn new Proxy(target, {\n\t\t\t\t\tset: setter\n\t\t\t\t}) as T\n\t\t\t}\n\t\t}\n}\n","/**\n * Observe implementation on the Object.defineProperty of ES5 or `__defineGetter__` and `__defineSetter__`\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Thu Apr 04 2019 18:49:04 GMT+0800 (China Standard Time)\n */\n\nimport { IObserver, IWatcher, ARRAY_CHANGE, ObserverTarget, ARRAY_LENGTH } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport { propAccessor, defProp } from '../utility'\n\n/**\n * @ignore\n */\nexport default function(): ObservePolicy {\n\tif (propAccessor)\n\t\treturn {\n\t\t\t__name: 'Accessor',\n\t\t\t__watch<T extends ObserverTarget>(observer: IObserver<T>, prop: string, watcher: IWatcher): Error {\n\t\t\t\tconst { target } = observer\n\t\t\t\tlet setter: (newValue: any) => void\n\t\t\t\tif (!observer.isArray) {\n\t\t\t\t\tsetter = (newValue: any) => {\n\t\t\t\t\t\twatcher.notify(value)\n\t\t\t\t\t\tvalue = newValue\n\t\t\t\t\t}\n\t\t\t\t} else if (prop !== ARRAY_CHANGE && prop !== ARRAY_LENGTH) {\n\t\t\t\t\tconst changeWatcher: IWatcher = observer.initWatcher(ARRAY_CHANGE)\n\t\t\t\t\tsetter = (newValue: any) => {\n\t\t\t\t\t\twatcher.notify(value)\n\t\t\t\t\t\tvalue = newValue\n\t\t\t\t\t\tchangeWatcher.notify(target)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tvar value: any = target[prop]\n\t\t\t\ttry {\n\t\t\t\t\tdefProp(target, prop, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset: setter\n\t\t\t\t\t})\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn e\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\n","/**\n * Observe implementation on the VBScript of MSIE\n * @module observer\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @created Tue Mar 19 2019 14:12:23 GMT+0800 (China Standard Time)\n * @modified Thu Mar 28 2019 15:38:05 GMT+0800 (China Standard Time)\n */\nimport { ObserverTarget, IWatcher, IObserver } from './IObserver'\nimport { ObservePolicy } from './ObservePolicy'\nimport { GLOBAL, CONSTRUCTOR, HAS_OWN_PROP } from '../utility/consts'\nimport { create, isFn, getDefaultKeys, addDefaultKeys } from '../utility'\n\ndeclare function execScript(code: string, type: string): void\ndeclare function parseVB(code: string): void\n\nexport default function(): ObservePolicy {\n\tif (GLOBAL.VBArray) {\n\t\ttry {\n\t\t\texecScript(['Function parseVB(code)', '\\tExecuteGlobal(code)', 'End Function'].join('\\n'), 'VBScript')\n\n\t\t\taddDefaultKeys(VBPROXY_KEY, VBPROXY_CTOR_KEY)\n\n\t\t\treturn {\n\t\t\t\t__name: 'VBProxy',\n\t\t\t\t__proxy: 'vb',\n\t\t\t\t__createProxy<T extends ObserverTarget>(observer: IObserver<T>, target: T, isArray: boolean): T {\n\t\t\t\t\treturn isArray ? target : new VBProxy(target, observer).__proxy\n\t\t\t\t},\n\t\t\t\t__watch<T extends ObserverTarget>(observer: IObserver<T>, prop: string, watcher: IWatcher): Error {\n\t\t\t\t\tif (!observer.isArray && !observer.target[VBPROXY_KEY].__props[prop]) {\n\t\t\t\t\t\treturn new Error(`property[${prop}] is not defined`)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e.message, e)\n\t\t}\n\t}\n}\n\nexport class VBProxy<T extends {}> {\n\tprivate readonly __source: T\n\t/**\n\t * function property map\n\t * \t- key: property name\n\t * \t- value: [scoped function, original function]\n\t */\n\tprivate readonly __fns: { [name: string]: [Function, Function] }\n\treadonly __props: { [prop: string]: boolean }\n\tprivate readonly __observer: IObserver<T>\n\treadonly __proxy: T\n\n\tconstructor(source: T, observer: IObserver<T>) {\n\t\tconst props = [],\n\t\t\tpropMap: { [prop: string]: boolean } = create(null),\n\t\t\t__fns: string[] = [],\n\t\t\tfns: { [prop: string]: [Function, Function] } = create(null)\n\t\tlet prop: string,\n\t\t\ti = 0,\n\t\t\tj = 0\n\n\t\tfor (prop in source) {\n\t\t\tpropMap[prop] = true\n\t\t\tprops[i++] = prop\n\t\t\tif (isFn(source[prop])) __fns[j++] = prop\n\t\t}\n\t\tapplyProps(props, propMap, OBJECT_DEFAULT_PROPS)\n\t\tapplyProps(props, propMap, getDefaultKeys())\n\t\tconst proxy = loadClassFactory(props)(this)\n\n\t\twhile (j--) {\n\t\t\tprop = __fns[j]\n\t\t\tfns[prop] = [, source[prop]]\n\t\t}\n\n\t\tthis.__source = source\n\t\tthis.__observer = observer\n\t\tthis.__proxy = proxy\n\t\tthis.__fns = fns\n\t\tthis.__props = propMap\n\t\tsource[VBPROXY_KEY] = this\n\t}\n\n\tprivate set(prop: string, value: any) {\n\t\tconst { __source: source, __fns: fns } = this\n\t\tif (isFn(value)) {\n\t\t\tfns[prop] = [, value]\n\t\t} else if (fns[prop]) {\n\t\t\tfns[prop] = null\n\t\t}\n\t\tconst watcher = this.__observer.watcher(prop)\n\t\twatcher && watcher.notify(source[prop])\n\t\tsource[prop] = value\n\t}\n\n\tprivate get(prop: string) {\n\t\tconst fn = this.__fns[prop]\n\t\treturn fn ? fn[0] || (fn[0] = fn[1].bind(this.__proxy)) : this.__source[prop]\n\t}\n}\n\nfunction applyProps(props: string[], propMap: { [key: string]: boolean }, applyProps: string[]) {\n\tlet i = applyProps.length,\n\t\tj = props.length,\n\t\tprop: string\n\twhile (i--) {\n\t\tprop = applyProps[i]\n\t\tif (!propMap[prop]) {\n\t\t\tpropMap[prop] = true\n\t\t\tprops[j++] = prop\n\t\t}\n\t}\n}\n\nexport const VBPROXY_KEY = '__vbclass_binding__',\n\tVBPROXY_CTOR_KEY = '__vbclass_constructor__',\n\tOBJECT_DEFAULT_PROPS = [\n\t\tVBPROXY_KEY,\n\t\tCONSTRUCTOR,\n\t\tHAS_OWN_PROP,\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'toLocaleString',\n\t\t'toString',\n\t\t'valueOf'\n\t]\n\nconst CONSTRUCTOR_SCRIPT = `\n\tPublic [${VBPROXY_KEY}]\n\tPublic Default Function [${VBPROXY_CTOR_KEY}](source)\n\t\tSet [${VBPROXY_KEY}] = source\n\t\tSet [${VBPROXY_CTOR_KEY}] = Me\n\tEnd Function\n\t`,\n\tclassPool = create(null)\n\nfunction genAccessorScript(prop: string): string {\n\treturn `\n\tPublic Property Let [${prop}](value)\n\t\tCall [${VBPROXY_KEY}].set(\"${prop}\", val)\n\tEnd Property\n\tPublic Property Set [${prop}](value)\n\t\tCall [${VBPROXY_KEY}].set(\"${prop}\", val)\n\tEnd Property\n\n\tPublic Property Get [${prop}]\n\tOn Error Resume Next\n\t\tSet [${prop}] = [${VBPROXY_KEY}].get(\"${prop}\")\n\tIf Err.Number <> 0 Then\n\t\t[${prop}] = [${VBPROXY_KEY}].get(\"${prop}\")\n\tEnd If\n\tOn Error Goto 0\n\tEnd Property\n\n`\n}\n\nfunction genClassScript(className: string, props: string[]): string {\n\tconst buffer = ['Class ', className, CONSTRUCTOR_SCRIPT],\n\t\tl = props.length\n\tlet i = 0\n\tfor (; i < l; i++) buffer[i + 3] = genAccessorScript(props[i])\n\tbuffer[i + 3] = 'End Class'\n\treturn buffer.join('\\n')\n}\n\nlet classNameGenerator = 1\nfunction loadClassFactory(props: string[]): <T extends {}>(source: VBProxy<T>) => T {\n\tconst classKey = props.sort().join('|')\n\tlet factoryName = classPool[classKey]\n\tif (!factoryName) {\n\t\tconst className = `VBClass${classNameGenerator++}`\n\t\tfactoryName = `${className}Factory`\n\n\t\t// build VB Class\n\t\tparseVB(genClassScript(className, props))\n\n\t\tparseVB(`\nFunction ${factoryName}(desc)\n\tDim o\n\tSet o=(New ${className})(desc)\n\tSet ${factoryName} = o\nEnd Function`)\n\n\t\tclassPool[classKey] = factoryName\n\t}\n\treturn GLOBAL[factoryName]\n}\n",null,null,"/**\n *\n * @author Tao Zeng <tao.zeng.zt@qq.com>\n * @module main\n * @preferred\n * @created Wed Nov 21 2018 10:21:20 GMT+0800 (China Standard Time)\n * @modified Fri Mar 08 2019 15:35:52 GMT+0800 (China Standard Time)\n */\nexport * from './utility'\nexport * from './observer'\n"],"names":["CONSTRUCTOR","PROTOTYPE","PROTO","HAS_OWN_PROP","TYPE_BOOL","TYPE_FN","TYPE_NUM","TYPE_STRING","TYPE_UNDEF","GLOBAL","window","global","self","EMPTY_FN","NULL_CONSTRUCTOR","defaultKeyMap","defaultKeys","isDefaultKey","key","addDefaultKey","push","addDefaultKeys","args","arguments","l","length","i","getDefaultKeys","getDefaultKeyMap","getConstructor","o","C","Object","toString","prototype","toStr","obj","call","toStrType","match","eq","o1","o2","isNull","isUndef","undefined","isNil","isBool","mkIsPrimitive","isNum","isStr","isFn","isInt","isPrimitive","type","is","instOf","Cls","Type","Array","isBoolean","mkIs","Boolean","isNumber","Number","isString","String","isDate","Date","isReg","RegExp","isArray","isTypedArray","ArrayBuffer","isView","isArrayLike","NodeList","HTMLCollection","Int8Array","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","len","isObj","isObject","blankStrReg","isBlank","test","createFn","body","name","Function","join","applyScope","concat","applyBuilder","maxArgs","scope","offset","cases","slice","applyNoScope","applyScopeN","applyNoScopeN","apply","fn","applyN","varGenReg","fnName","replace","_bind","funcProto","bind","argLen","bindPolyfill","bindArgs","argOffset","bindProxy","params","stickyReg","sticky","unicodeReg","unicode","REG_ESCAPE","reEscape","str","PROTO_PROP","__getProto","getPrototypeOf","____setProto","setPrototypeOf","prototypeOf","protoProp","protoOf","__setProto","proto","setProto","p","__defProp","defineProperty","__defineGetter__","__defineSetter__","propDescriptor","val","get","set","value","s","e","propAccessor","prop","desc","TypeError","defProp","defPropValue","configurable","writable","enumerable","__hasOwn","hasOwnProp","getOwnProp","defaultVal","__","doCreate","props","k","create","Control","__desc","STOP","eachProps","callback","own","eachObj","eachArray","array","doEach","_eachArray","_eachObj","each","SKIP","doMapObj","copy","v","mapObj","doMapArray","j","data","index","mapArray","doMap","eacharray","eachobj","map","parseCallback","defaultHandler","idx","doIdxOfObj","r","idxOfObj","doIdxOfArray","idxOfArray","doIdxOf","idxOf","doReduceObj","accumulator","rs","reduceObj","doReduceArray","reduceArray","doReduce","reduce","defaultObjKeyHandler","doObjKeys","handler","keys","defaultObjValueHandler","doObjValues","values","doArr2Obj","arr2obj","makeMap","split","makeArray","pathCache","pathReg","parsePath","propPath","cacheable","path","cidx","exec","lastIndex","SyntaxError","charAt","Error","formatPath","formatPathHandler","charCode","charCodeAt","char","code","fromCharCode","cutStr","start","end","substring","cutLStr","substr","TRIM_REG","trim","FIRST_LOWER_LETTER_REG","FIRST_UPPER_LETTER_REG","upper","toUpperCase","lower","toLowerCase","upperFirst","lowerFirst","STR_ESCAPE_MAP","STR_ESCAPE","escapeStr","pad","chr","leftAlign","__pad","shorten","suffix","thousandSeparate","mkSeparator","binarySeparate","octalSeparate","hexSeparate","group","valReg","reg","numStr","separatorHandler","m","d","PLURAL_REG","plural","pluralHandler","ies","es","ys","SINGULAR_REG","singular","singularHandler","FORMAT_XPREFIX","FORMAT_PLUS","FORMAT_ZERO","FORMAT_SPACE","FORMAT_SEPARATOR","FORMAT_LEFT","FLAG_MAPPING","parseFlags","f","flags","paramIdxR","paramPropR","widthR","fillR","shortenSuffixR","formatReg","formatters","extendFormatter","fmt","getFormatter","vformat","getParam","defaultGetParam","param","paramProp","width","widx","wprop","fill","precision","pidx","pprop","shortenSuffix","parseParam","parseWidth","w","isFinite","paramIdx","format","getFormatParam","GET_PARAM_VAR","GET_PROP_VAR","STATE_VAR","createFormatter","getParamCode","getWidthCode","def","strs","formatter","lastIdx","mStart","mEnd","arr","codes","pushStr","append","strFormatter","numFormatter","parseNum","getPrefix","separator","num","prefix","plen","decimalPrefix","BASE_RADIXS","b","u","x","BASE_PREFIXS","baseFormatter","base","n","__toStr","xprefix","floatFormatter","____toStr","toExponential","toFixed","toPrecision","parseFloat","toJSON","JSON","stringify","c","E","g","G","B","O","X","doAssign","target","overrides","filter","startOffset","endOffset","override","assign","defaultAssignFilter","assignIf","assignIfFilter","REG_PROPS","deepEq","actual","expected","doDeepEq","doDeepEqObj","eqObj","getTime","eqProps","eqArray","eqTypeArray","cache","notEqObjKey","mkError","Err","msg","msgIdx","fmtter","popErrStack","err","stack","assert","ERROR","mkThrowAssertor","th","dmsg","throwErr","expect","message","notThrow","mkAssertor","condition","paramStr","cond","expr","mkAssertors","apis","UNDEFINED","BOOLEAN","NUMBER","STRING","FUNCTION","NULL","INTEGER","ARRAY","TYPED_ARRAY","expectMsg","mkMsg","objFormatter","eql","nul","nil","typeExpect","undef","bool","int","primitive","boolean","packTypeExpect","number","string","date","typedArray","arrayLike","nan","isNaN","finite","blank","less","greater","range","to","not","all","DEFAULT_BINDING","List","binding","__length","__scaning","__ver","size","has","node","add","__insert","__tail","addFirst","insertAfter","__getNode","insertBefore","addAll","objs","__insertAll","addFirstAll","insertAfterAll","insertBeforeAll","prev","__siblingObj","next","first","__head","last","cb","__doLazyRemove","eachUnsafe","toArray","remove","__remove","clean","__lazyRemove","__clean","__initNode","siblingIdx","sibling","__doInsert","nodeHead","nodeTail","head","__prev","tail","__doRemove","lazyRemoves","__lazyRemoves","DEFAULT_FN_BINDING","DEFAULT_SCOPE_BINDING","FnList","fnBinding","scopeBinding","__nodeMap","__list","parseScope","list","nodeMap","id","removeId","hasId","fnId","scopeId","DEFAULT_SCOPE_ID","fnIdGenerator","scopeIdGenerator","MutationObserver","textNode","document","createTextNode","flush","observe","characterData","setTimeout","ticks","pending","executeTick","t","nextTick","clearTick","clearTickId","LINE_REG","Source","buff","__lines","__linePos","position","lines","linePos","source","escape","line","toSourceStr","escapeSourceStr","sourceStr","eachCharCodes","ignoreCase","eachCharCode","getAnotherCode","mixin","behaviour","Class","MatchError","$ruleErr","capturable","context","rule","pos","startPos","defaultErr","defaultMatch","idGen","Rule","$rule","options","onMatch","onErr","mkErr","error","src","userErr","matched","enter","getStart","startCodes","startCodeTest","startCodeIdx","nextCode","setStartCodes","setCodeIdx","mkExpr","setExpr","EXPECT","getExpr","MatchRule","comsume","advance","CharMatchRule","allows","chars","nextChar","RegMatchRule","regexp","pick","pattern","multiline","stickyMatch","execMatch","spicker","pickNone","pickTestStr","picker","mkPicker","pickAll","StringMatchRule","MatchContext","orgOffset","parent","result","__buff","__offset","__orgOffset","__advanced","__code","__flushCode","__setAdvanced","advanced","notLess","commit","margeState","rollback","checkpoint","resultLen","reset","orgBuff","currPos","resultSize","MAX","ComplexRule","repeat","builder","rMin","rMax","notGreater","rmatch","parse","ctx","unshift","init","rules","names","rnames","EXPECTS","__init","getRules","consume","AndRule","testRule","cp","out","OrRule","starts","rStarts","upErr","discardMatch","appendMatch","attachMatch","mkMatch","and","mkComplexRule","any","many","option","or","anyOne","manyOne","optionOne","defaultMatchCallback","isStrOrCodes","isMatchPattern","parseRuleOptions","strMatch","defaultRepeat","rulesBuilder","_rule","OBSERVER_KEY","ARRAY_CHANGE","ARRAY_LENGTH","MISS","Proxy","__name","__proxy","__createProxy","observer","setter","changeWatcher","initWatcher","watcher","notify","proxy","__watch","newValue","VBArray","execScript","VBPROXY_KEY","VBPROXY_CTOR_KEY","VBProxy","__props","console","propMap","__fns","fns","applyProps","OBJECT_DEFAULT_PROPS","loadClassFactory","__source","__observer","CONSTRUCTOR_SCRIPT","classPool","genAccessorScript","genClassScript","className","buffer","classNameGenerator","classKey","sort","factoryName","parseVB","V","isObserverTarget","isArrayChangeProp","getValue","getOriginalValue","original","topicIdGen","collectQueue","dirtyQueue","TOPIC_ENABLED_FLAG","TOPIC_LISTEN_FLAG","TOPIC_SUB_FLAG","Topic","owner","__state","__original","__owner","__prop","__parent","__id","__listen","listeners","__listeners","__path","__unlisten","____unlisten","__unlistenId","topic","__bind","__removeSub","org","__unwatchTopic","__watchTopic","__getPath","__getSub","subCache","__subCache","__addSub","subProp","__subs","sub","subs","subObserver","subTarget","__loadSubObserver","splice","__update","collect","__collect","____collect","force","dirty","__dirty","orgSubObserver","subOriginal","proxyEnable","compareTopic","topic1","topic2","__original__","__updateTopicCB","Watcher","Observer","arrayTarget","applyArrayHooks","watchers","__watchers","__watcherProps","policy","topics","__topics","prop0","__flags","observed","__getTopic","observedId","unobserve","unobserveId","notifies","getOriginal","execludes","origin","$get","$set","arrayHooks","ARRAY_LEN_CHANGE","arrayHookCfg","pop","ob","shift","hooker","methods","method","hook","getArrayOriginValue","proxyPolicy","accessorPolicy","vbPolicy","__getObserver","$eq","oserver","listenId","getObserver"],"mappings":"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"}