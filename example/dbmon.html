<!DOCTYPE html>
<html>

<head>
    <meta name="description" content="dbmon argilo" />
    <link href="./lib/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <title>Argilo â€¢ dbmon </title>
    <style>
    .Query {
        position: relative;
    }

    .Query:hover .popover {
        left: -100%;
        width: 100%;
        display: block;
    }
    </style>
</head>

<body>
    <div id="app"></div>
</body>
<script src="../dist/argilo.js"></script>
<script src="ENV.js"></script>
<script src="monitor.js"></script>
<script>
var app = {
    databases: []
}
argilo.proxy.on(app, function(obj, proxy) {
    app = proxy || obj;
})
argilo.ready(function() {
    argilo(argilo.html(document.getElementById('tpl/tpl.html')))
        .complie(app).appendTo('#app');

    function loadSamples() {
        app.databases = ENV.generate(true);
        Monitor.ping();
        setTimeout(loadSamples, 0);
    }
    loadSamples()
})
</script>
<script id="tpl/tpl.html" type="text/template">
    <a href="../index.html">Back</a>
    <table class="table table-striped lastest-data">
        <tbody>
            <tr ag-each="db in databases">
                <td class="dbname">${db.dbname}</td>
                <td class="query-count">
                    <span ag-class="db.lastSample.countClassName">${db.lastSample.nbQueries}</span>
                </td>
                <td ag-each="q,idx in db.lastSample.topFiveQueries " class="Query" ag-class="q.elapsedClassName">
                    ${q.formatElapsed}
                    <div class="popover left">
                        <div class="popover-content">${q.query}</div>
                        <div class="arrow"></div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</script>

</html>
